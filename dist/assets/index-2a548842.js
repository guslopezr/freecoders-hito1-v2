var nF=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Mpe=nF((ts,is)=>{function sF(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in e)){const s=Object.getOwnPropertyDescriptor(r,n);s&&Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rp={},oF={get exports(){return Rp},set exports(e){Rp=e}},qy={},te={},aF={get exports(){return te},set exports(e){te=e}},ri={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm=Symbol.for("react.element"),lF=Symbol.for("react.portal"),cF=Symbol.for("react.fragment"),uF=Symbol.for("react.strict_mode"),dF=Symbol.for("react.profiler"),hF=Symbol.for("react.provider"),fF=Symbol.for("react.context"),pF=Symbol.for("react.forward_ref"),mF=Symbol.for("react.suspense"),gF=Symbol.for("react.memo"),vF=Symbol.for("react.lazy"),pC=Symbol.iterator;function yF(e){return e===null||typeof e!="object"?null:(e=pC&&e[pC]||e["@@iterator"],typeof e=="function"?e:null)}var lL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cL=Object.assign,uL={};function Oh(e,t,i){this.props=e,this.context=t,this.refs=uL,this.updater=i||lL}Oh.prototype.isReactComponent={};Oh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Oh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dL(){}dL.prototype=Oh.prototype;function SE(e,t,i){this.props=e,this.context=t,this.refs=uL,this.updater=i||lL}var _E=SE.prototype=new dL;_E.constructor=SE;cL(_E,Oh.prototype);_E.isPureReactComponent=!0;var mC=Array.isArray,hL=Object.prototype.hasOwnProperty,EE={current:null},fL={key:!0,ref:!0,__self:!0,__source:!0};function pL(e,t,i){var r,n={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)hL.call(t,r)&&!fL.hasOwnProperty(r)&&(n[r]=t[r]);var a=arguments.length-2;if(a===1)n.children=i;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)n[r]===void 0&&(n[r]=a[r]);return{$$typeof:wm,type:e,key:s,ref:o,props:n,_owner:EE.current}}function xF(e,t){return{$$typeof:wm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function AE(e){return typeof e=="object"&&e!==null&&e.$$typeof===wm}function wF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var gC=/\/+/g;function vx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wF(""+e.key):t.toString(36)}function Hv(e,t,i,r,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case wm:case lF:o=!0}}if(o)return o=e,n=n(o),e=r===""?"."+vx(o,0):r,mC(n)?(i="",e!=null&&(i=e.replace(gC,"$&/")+"/"),Hv(n,t,i,"",function(c){return c})):n!=null&&(AE(n)&&(n=xF(n,i+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(gC,"$&/")+"/")+e)),t.push(n)),1;if(o=0,r=r===""?".":r+":",mC(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+vx(s,a);o+=Hv(s,t,i,l,n)}else if(l=yF(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+vx(s,a++),o+=Hv(s,t,i,l,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function dg(e,t,i){if(e==null)return e;var r=[],n=0;return Hv(e,r,"","",function(s){return t.call(i,s,n++)}),r}function bF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xn={current:null},Gv={transition:null},SF={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:Gv,ReactCurrentOwner:EE};ri.Children={map:dg,forEach:function(e,t,i){dg(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return dg(e,function(){t++}),t},toArray:function(e){return dg(e,function(t){return t})||[]},only:function(e){if(!AE(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ri.Component=Oh;ri.Fragment=cF;ri.Profiler=dF;ri.PureComponent=SE;ri.StrictMode=uF;ri.Suspense=mF;ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SF;ri.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=cL({},e.props),n=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=EE.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)hL.call(t,l)&&!fL.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=i;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:wm,type:e.type,key:n,ref:s,props:r,_owner:o}};ri.createContext=function(e){return e={$$typeof:fF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hF,_context:e},e.Consumer=e};ri.createElement=pL;ri.createFactory=function(e){var t=pL.bind(null,e);return t.type=e,t};ri.createRef=function(){return{current:null}};ri.forwardRef=function(e){return{$$typeof:pF,render:e}};ri.isValidElement=AE;ri.lazy=function(e){return{$$typeof:vF,_payload:{_status:-1,_result:e},_init:bF}};ri.memo=function(e,t){return{$$typeof:gF,type:e,compare:t===void 0?null:t}};ri.startTransition=function(e){var t=Gv.transition;Gv.transition={};try{e()}finally{Gv.transition=t}};ri.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ri.useCallback=function(e,t){return xn.current.useCallback(e,t)};ri.useContext=function(e){return xn.current.useContext(e)};ri.useDebugValue=function(){};ri.useDeferredValue=function(e){return xn.current.useDeferredValue(e)};ri.useEffect=function(e,t){return xn.current.useEffect(e,t)};ri.useId=function(){return xn.current.useId()};ri.useImperativeHandle=function(e,t,i){return xn.current.useImperativeHandle(e,t,i)};ri.useInsertionEffect=function(e,t){return xn.current.useInsertionEffect(e,t)};ri.useLayoutEffect=function(e,t){return xn.current.useLayoutEffect(e,t)};ri.useMemo=function(e,t){return xn.current.useMemo(e,t)};ri.useReducer=function(e,t,i){return xn.current.useReducer(e,t,i)};ri.useRef=function(e){return xn.current.useRef(e)};ri.useState=function(e){return xn.current.useState(e)};ri.useSyncExternalStore=function(e,t,i){return xn.current.useSyncExternalStore(e,t,i)};ri.useTransition=function(){return xn.current.useTransition()};ri.version="18.2.0";(function(e){e.exports=ri})(aF);const ii=Wy(te),Fb=sF({__proto__:null,default:ii},[te]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _F=te,EF=Symbol.for("react.element"),AF=Symbol.for("react.fragment"),CF=Object.prototype.hasOwnProperty,TF=_F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MF={key:!0,ref:!0,__self:!0,__source:!0};function mL(e,t,i){var r,n={},s=null,o=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)CF.call(t,r)&&!MF.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:EF,type:e,key:s,ref:o,props:n,_owner:TF.current}}qy.Fragment=AF;qy.jsx=mL;qy.jsxs=mL;(function(e){e.exports=qy})(oF);const $a=Rp.Fragment,L=Rp.jsx,pe=Rp.jsxs;var Ub={},y0={},PF={get exports(){return y0},set exports(e){y0=e}},ls={},jb={},DF={get exports(){return jb},set exports(e){jb=e}},gL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,X){var Y=z.length;z.push(X);e:for(;0<Y;){var K=Y-1>>>1,Z=z[K];if(0<n(Z,X))z[K]=X,z[Y]=Z,Y=K;else break e}}function i(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var X=z[0],Y=z.pop();if(Y!==X){z[0]=Y;e:for(var K=0,Z=z.length,V=Z>>>1;K<V;){var fe=2*(K+1)-1,ae=z[fe],ne=fe+1,we=z[ne];if(0>n(ae,Y))ne<Z&&0>n(we,ae)?(z[K]=we,z[ne]=Y,K=ne):(z[K]=ae,z[fe]=Y,K=fe);else if(ne<Z&&0>n(we,Y))z[K]=we,z[ne]=Y,K=ne;else break e}}return X}function n(z,X){var Y=z.sortIndex-X.sortIndex;return Y!==0?Y:z.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,h=3,f=!1,m=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var X=i(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=z)r(c),X.sortIndex=X.expirationTime,t(l,X);else break;X=i(c)}}function S(z){if(v=!1,b(z),!m)if(i(l)!==null)m=!0,Q(E);else{var X=i(c);X!==null&&re(S,X.startTime-z)}}function E(z,X){m=!1,v&&(v=!1,p(A),A=-1),f=!0;var Y=h;try{for(b(X),u=i(l);u!==null&&(!(u.expirationTime>X)||z&&!R());){var K=u.callback;if(typeof K=="function"){u.callback=null,h=u.priorityLevel;var Z=K(u.expirationTime<=X);X=e.unstable_now(),typeof Z=="function"?u.callback=Z:u===i(l)&&r(l),b(X)}else r(l);u=i(l)}if(u!==null)var V=!0;else{var fe=i(c);fe!==null&&re(S,fe.startTime-X),V=!1}return V}finally{u=null,h=Y,f=!1}}var y=!1,C=null,A=-1,D=5,I=-1;function R(){return!(e.unstable_now()-I<D)}function B(){if(C!==null){var z=e.unstable_now();I=z;var X=!0;try{X=C(!0,z)}finally{X?G():(y=!1,C=null)}}else y=!1}var G;if(typeof x=="function")G=function(){x(B)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,ee=j.port2;j.port1.onmessage=B,G=function(){ee.postMessage(null)}}else G=function(){g(B,0)};function Q(z){C=z,y||(y=!0,G())}function re(z,X){A=g(function(){z(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,Q(E))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return i(l)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var Y=h;h=X;try{return z()}finally{h=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=h;h=z;try{return X()}finally{h=Y}},e.unstable_scheduleCallback=function(z,X,Y){var K=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?K+Y:K):Y=K,z){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=Y+Z,z={id:d++,callback:X,priorityLevel:z,startTime:Y,expirationTime:Z,sortIndex:-1},Y>K?(z.sortIndex=Y,t(c,z),i(l)===null&&z===i(c)&&(v?(p(A),A=-1):v=!0,re(S,Y-K))):(z.sortIndex=Z,t(l,z),m||f||(m=!0,Q(E))),z},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(z){var X=h;return function(){var Y=h;h=X;try{return z.apply(this,arguments)}finally{h=Y}}}})(gL);(function(e){e.exports=gL})(DF);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vL=te,os=jb;function Xe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yL=new Set,Np={};function Du(e,t){ph(e,t),ph(e+"Capture",t)}function ph(e,t){for(Np[e]=t,e=0;e<t.length;e++)yL.add(t[e])}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hb=Object.prototype.hasOwnProperty,OF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vC={},yC={};function LF(e){return Hb.call(yC,e)?!0:Hb.call(vC,e)?!1:OF.test(e)?yC[e]=!0:(vC[e]=!0,!1)}function IF(e,t,i,r){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function RF(e,t,i,r){if(t===null||typeof t>"u"||IF(e,t,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wn(e,t,i,r,n,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var zr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zr[e]=new wn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zr[t]=new wn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zr[e]=new wn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zr[e]=new wn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zr[e]=new wn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zr[e]=new wn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zr[e]=new wn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zr[e]=new wn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zr[e]=new wn(e,5,!1,e.toLowerCase(),null,!1,!1)});var CE=/[\-:]([a-z])/g;function TE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(CE,TE);zr[t]=new wn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(CE,TE);zr[t]=new wn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(CE,TE);zr[t]=new wn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zr[e]=new wn(e,1,!1,e.toLowerCase(),null,!1,!1)});zr.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zr[e]=new wn(e,1,!1,e.toLowerCase(),null,!0,!0)});function ME(e,t,i,r){var n=zr.hasOwnProperty(t)?zr[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(RF(t,i,n,r)&&(i=null),r||n===null?LF(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=i===null?n.type===3?!1:"":i:(t=n.attributeName,r=n.attributeNamespace,i===null?e.removeAttribute(t):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?e.setAttributeNS(r,t,i):e.setAttribute(t,i))))}var Ja=vL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hg=Symbol.for("react.element"),Td=Symbol.for("react.portal"),Md=Symbol.for("react.fragment"),PE=Symbol.for("react.strict_mode"),Gb=Symbol.for("react.profiler"),xL=Symbol.for("react.provider"),wL=Symbol.for("react.context"),DE=Symbol.for("react.forward_ref"),Vb=Symbol.for("react.suspense"),Wb=Symbol.for("react.suspense_list"),OE=Symbol.for("react.memo"),Ml=Symbol.for("react.lazy"),bL=Symbol.for("react.offscreen"),xC=Symbol.iterator;function pf(e){return e===null||typeof e!="object"?null:(e=xC&&e[xC]||e["@@iterator"],typeof e=="function"?e:null)}var Gi=Object.assign,yx;function Zf(e){if(yx===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);yx=t&&t[1]||""}return`
`+yx+e}var xx=!1;function wx(e,t){if(!e||xx)return"";xx=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),s=r.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var l=`
`+n[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{xx=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Zf(e):""}function NF(e){switch(e.tag){case 5:return Zf(e.type);case 16:return Zf("Lazy");case 13:return Zf("Suspense");case 19:return Zf("SuspenseList");case 0:case 2:case 15:return e=wx(e.type,!1),e;case 11:return e=wx(e.type.render,!1),e;case 1:return e=wx(e.type,!0),e;default:return""}}function qb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Md:return"Fragment";case Td:return"Portal";case Gb:return"Profiler";case PE:return"StrictMode";case Vb:return"Suspense";case Wb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wL:return(e.displayName||"Context")+".Consumer";case xL:return(e._context.displayName||"Context")+".Provider";case DE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case OE:return t=e.displayName||null,t!==null?t:qb(e.type)||"Memo";case Ml:t=e._payload,e=e._init;try{return qb(e(t))}catch{}}return null}function BF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qb(t);case 8:return t===PE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function SL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kF(e){var t=SL(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fg(e){e._valueTracker||(e._valueTracker=kF(e))}function _L(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=SL(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function x0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xb(e,t){var i=t.checked;return Gi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function wC(e,t){var i=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;i=cc(t.value!=null?t.value:i),e._wrapperState={initialChecked:r,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function EL(e,t){t=t.checked,t!=null&&ME(e,"checked",t,!1)}function Yb(e,t){EL(e,t);var i=cc(t.value),r=t.type;if(i!=null)r==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Qb(e,t.type,i):t.hasOwnProperty("defaultValue")&&Qb(e,t.type,cc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bC(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Qb(e,t,i){(t!=="number"||x0(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var $f=Array.isArray;function Kd(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+cc(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Kb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return Gi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function SC(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Xe(92));if($f(i)){if(1<i.length)throw Error(Xe(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:cc(i)}}function AL(e,t){var i=cc(t.value),r=cc(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),r!=null&&(e.defaultValue=""+r)}function _C(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function CL(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?CL(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pg,TL=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,i,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pg=pg||document.createElement("div"),pg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bp(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var hp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zF=["Webkit","ms","Moz","O"];Object.keys(hp).forEach(function(e){zF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),hp[t]=hp[e]})});function ML(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||hp.hasOwnProperty(e)&&hp[e]?(""+t).trim():t+"px"}function PL(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=ML(i,t[i],r);i==="float"&&(i="cssFloat"),r?e.setProperty(i,n):e[i]=n}}var FF=Gi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $b(e,t){if(t){if(FF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Xe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Xe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Xe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Xe(62))}}function Jb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eS=null;function LE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tS=null,Zd=null,$d=null;function EC(e){if(e=_m(e)){if(typeof tS!="function")throw Error(Xe(280));var t=e.stateNode;t&&(t=Zy(t),tS(e.stateNode,e.type,t))}}function DL(e){Zd?$d?$d.push(e):$d=[e]:Zd=e}function OL(){if(Zd){var e=Zd,t=$d;if($d=Zd=null,EC(e),t)for(e=0;e<t.length;e++)EC(t[e])}}function LL(e,t){return e(t)}function IL(){}var bx=!1;function RL(e,t,i){if(bx)return e(t,i);bx=!0;try{return LL(e,t,i)}finally{bx=!1,(Zd!==null||$d!==null)&&(IL(),OL())}}function kp(e,t){var i=e.stateNode;if(i===null)return null;var r=Zy(i);if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Xe(231,t,typeof i));return i}var iS=!1;if(Ga)try{var mf={};Object.defineProperty(mf,"passive",{get:function(){iS=!0}}),window.addEventListener("test",mf,mf),window.removeEventListener("test",mf,mf)}catch{iS=!1}function UF(e,t,i,r,n,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(d){this.onError(d)}}var fp=!1,w0=null,b0=!1,rS=null,jF={onError:function(e){fp=!0,w0=e}};function HF(e,t,i,r,n,s,o,a,l){fp=!1,w0=null,UF.apply(jF,arguments)}function GF(e,t,i,r,n,s,o,a,l){if(HF.apply(this,arguments),fp){if(fp){var c=w0;fp=!1,w0=null}else throw Error(Xe(198));b0||(b0=!0,rS=c)}}function Ou(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function NL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function AC(e){if(Ou(e)!==e)throw Error(Xe(188))}function VF(e){var t=e.alternate;if(!t){if(t=Ou(e),t===null)throw Error(Xe(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===i)return AC(n),e;if(s===r)return AC(n),t;s=s.sibling}throw Error(Xe(188))}if(i.return!==r.return)i=n,r=s;else{for(var o=!1,a=n.child;a;){if(a===i){o=!0,i=n,r=s;break}if(a===r){o=!0,r=n,i=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===i){o=!0,i=s,r=n;break}if(a===r){o=!0,r=s,i=n;break}a=a.sibling}if(!o)throw Error(Xe(189))}}if(i.alternate!==r)throw Error(Xe(190))}if(i.tag!==3)throw Error(Xe(188));return i.stateNode.current===i?e:t}function BL(e){return e=VF(e),e!==null?kL(e):null}function kL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kL(e);if(t!==null)return t;e=e.sibling}return null}var zL=os.unstable_scheduleCallback,CC=os.unstable_cancelCallback,WF=os.unstable_shouldYield,qF=os.unstable_requestPaint,or=os.unstable_now,XF=os.unstable_getCurrentPriorityLevel,IE=os.unstable_ImmediatePriority,FL=os.unstable_UserBlockingPriority,S0=os.unstable_NormalPriority,YF=os.unstable_LowPriority,UL=os.unstable_IdlePriority,Xy=null,Qo=null;function QF(e){if(Qo&&typeof Qo.onCommitFiberRoot=="function")try{Qo.onCommitFiberRoot(Xy,e,void 0,(e.current.flags&128)===128)}catch{}}var fo=Math.clz32?Math.clz32:$F,KF=Math.log,ZF=Math.LN2;function $F(e){return e>>>=0,e===0?32:31-(KF(e)/ZF|0)|0}var mg=64,gg=4194304;function Jf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _0(e,t){var i=e.pendingLanes;if(i===0)return 0;var r=0,n=e.suspendedLanes,s=e.pingedLanes,o=i&268435455;if(o!==0){var a=o&~n;a!==0?r=Jf(a):(s&=o,s!==0&&(r=Jf(s)))}else o=i&~n,o!==0?r=Jf(o):s!==0&&(r=Jf(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&n)&&(n=r&-r,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(r&4&&(r|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)i=31-fo(t),n=1<<i,r|=e[i],t&=~n;return r}function JF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function e5(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-fo(s),a=1<<o,l=n[o];l===-1?(!(a&i)||a&r)&&(n[o]=JF(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function nS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jL(){var e=mg;return mg<<=1,!(mg&4194240)&&(mg=64),e}function Sx(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function bm(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-fo(t),e[t]=i}function t5(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-fo(i),s=1<<n;t[n]=0,r[n]=-1,e[n]=-1,i&=~s}}function RE(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-fo(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}var Si=0;function HL(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var GL,NE,VL,WL,qL,sS=!1,vg=[],Kl=null,Zl=null,$l=null,zp=new Map,Fp=new Map,Il=[],i5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TC(e,t){switch(e){case"focusin":case"focusout":Kl=null;break;case"dragenter":case"dragleave":Zl=null;break;case"mouseover":case"mouseout":$l=null;break;case"pointerover":case"pointerout":zp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fp.delete(t.pointerId)}}function gf(e,t,i,r,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},t!==null&&(t=_m(t),t!==null&&NE(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function r5(e,t,i,r,n){switch(t){case"focusin":return Kl=gf(Kl,e,t,i,r,n),!0;case"dragenter":return Zl=gf(Zl,e,t,i,r,n),!0;case"mouseover":return $l=gf($l,e,t,i,r,n),!0;case"pointerover":var s=n.pointerId;return zp.set(s,gf(zp.get(s)||null,e,t,i,r,n)),!0;case"gotpointercapture":return s=n.pointerId,Fp.set(s,gf(Fp.get(s)||null,e,t,i,r,n)),!0}return!1}function XL(e){var t=eu(e.target);if(t!==null){var i=Ou(t);if(i!==null){if(t=i.tag,t===13){if(t=NL(i),t!==null){e.blockedOn=t,qL(e.priority,function(){VL(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=oS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);eS=r,i.target.dispatchEvent(r),eS=null}else return t=_m(i),t!==null&&NE(t),e.blockedOn=i,!1;t.shift()}return!0}function MC(e,t,i){Vv(e)&&i.delete(t)}function n5(){sS=!1,Kl!==null&&Vv(Kl)&&(Kl=null),Zl!==null&&Vv(Zl)&&(Zl=null),$l!==null&&Vv($l)&&($l=null),zp.forEach(MC),Fp.forEach(MC)}function vf(e,t){e.blockedOn===t&&(e.blockedOn=null,sS||(sS=!0,os.unstable_scheduleCallback(os.unstable_NormalPriority,n5)))}function Up(e){function t(n){return vf(n,e)}if(0<vg.length){vf(vg[0],e);for(var i=1;i<vg.length;i++){var r=vg[i];r.blockedOn===e&&(r.blockedOn=null)}}for(Kl!==null&&vf(Kl,e),Zl!==null&&vf(Zl,e),$l!==null&&vf($l,e),zp.forEach(t),Fp.forEach(t),i=0;i<Il.length;i++)r=Il[i],r.blockedOn===e&&(r.blockedOn=null);for(;0<Il.length&&(i=Il[0],i.blockedOn===null);)XL(i),i.blockedOn===null&&Il.shift()}var Jd=Ja.ReactCurrentBatchConfig,E0=!0;function s5(e,t,i,r){var n=Si,s=Jd.transition;Jd.transition=null;try{Si=1,BE(e,t,i,r)}finally{Si=n,Jd.transition=s}}function o5(e,t,i,r){var n=Si,s=Jd.transition;Jd.transition=null;try{Si=4,BE(e,t,i,r)}finally{Si=n,Jd.transition=s}}function BE(e,t,i,r){if(E0){var n=oS(e,t,i,r);if(n===null)Lx(e,t,r,A0,i),TC(e,r);else if(r5(n,e,t,i,r))r.stopPropagation();else if(TC(e,r),t&4&&-1<i5.indexOf(e)){for(;n!==null;){var s=_m(n);if(s!==null&&GL(s),s=oS(e,t,i,r),s===null&&Lx(e,t,r,A0,i),s===n)break;n=s}n!==null&&r.stopPropagation()}else Lx(e,t,r,null,i)}}var A0=null;function oS(e,t,i,r){if(A0=null,e=LE(r),e=eu(e),e!==null)if(t=Ou(e),t===null)e=null;else if(i=t.tag,i===13){if(e=NL(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return A0=e,null}function YL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XF()){case IE:return 1;case FL:return 4;case S0:case YF:return 16;case UL:return 536870912;default:return 16}default:return 16}}var Bl=null,kE=null,Wv=null;function QL(){if(Wv)return Wv;var e,t=kE,i=t.length,r,n="value"in Bl?Bl.value:Bl.textContent,s=n.length;for(e=0;e<i&&t[e]===n[e];e++);var o=i-e;for(r=1;r<=o&&t[i-r]===n[s-r];r++);return Wv=n.slice(e,1<r?1-r:void 0)}function qv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yg(){return!0}function PC(){return!1}function cs(e){function t(i,r,n,s,o){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(i=e[a],this[a]=i?i(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yg:PC,this.isPropagationStopped=PC,this}return Gi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=yg)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=yg)},persist:function(){},isPersistent:yg}),t}var Lh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zE=cs(Lh),Sm=Gi({},Lh,{view:0,detail:0}),a5=cs(Sm),_x,Ex,yf,Yy=Gi({},Sm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yf&&(yf&&e.type==="mousemove"?(_x=e.screenX-yf.screenX,Ex=e.screenY-yf.screenY):Ex=_x=0,yf=e),_x)},movementY:function(e){return"movementY"in e?e.movementY:Ex}}),DC=cs(Yy),l5=Gi({},Yy,{dataTransfer:0}),c5=cs(l5),u5=Gi({},Sm,{relatedTarget:0}),Ax=cs(u5),d5=Gi({},Lh,{animationName:0,elapsedTime:0,pseudoElement:0}),h5=cs(d5),f5=Gi({},Lh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),p5=cs(f5),m5=Gi({},Lh,{data:0}),OC=cs(m5),g5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=y5[e])?!!t[e]:!1}function FE(){return x5}var w5=Gi({},Sm,{key:function(e){if(e.key){var t=g5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?v5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FE,charCode:function(e){return e.type==="keypress"?qv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),b5=cs(w5),S5=Gi({},Yy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LC=cs(S5),_5=Gi({},Sm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FE}),E5=cs(_5),A5=Gi({},Lh,{propertyName:0,elapsedTime:0,pseudoElement:0}),C5=cs(A5),T5=Gi({},Yy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),M5=cs(T5),P5=[9,13,27,32],UE=Ga&&"CompositionEvent"in window,pp=null;Ga&&"documentMode"in document&&(pp=document.documentMode);var D5=Ga&&"TextEvent"in window&&!pp,KL=Ga&&(!UE||pp&&8<pp&&11>=pp),IC=String.fromCharCode(32),RC=!1;function ZL(e,t){switch(e){case"keyup":return P5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $L(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pd=!1;function O5(e,t){switch(e){case"compositionend":return $L(t);case"keypress":return t.which!==32?null:(RC=!0,IC);case"textInput":return e=t.data,e===IC&&RC?null:e;default:return null}}function L5(e,t){if(Pd)return e==="compositionend"||!UE&&ZL(e,t)?(e=QL(),Wv=kE=Bl=null,Pd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return KL&&t.locale!=="ko"?null:t.data;default:return null}}var I5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!I5[e.type]:t==="textarea"}function JL(e,t,i,r){DL(r),t=C0(t,"onChange"),0<t.length&&(i=new zE("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var mp=null,jp=null;function R5(e){uI(e,0)}function Qy(e){var t=Ld(e);if(_L(t))return e}function N5(e,t){if(e==="change")return t}var eI=!1;if(Ga){var Cx;if(Ga){var Tx="oninput"in document;if(!Tx){var BC=document.createElement("div");BC.setAttribute("oninput","return;"),Tx=typeof BC.oninput=="function"}Cx=Tx}else Cx=!1;eI=Cx&&(!document.documentMode||9<document.documentMode)}function kC(){mp&&(mp.detachEvent("onpropertychange",tI),jp=mp=null)}function tI(e){if(e.propertyName==="value"&&Qy(jp)){var t=[];JL(t,jp,e,LE(e)),RL(R5,t)}}function B5(e,t,i){e==="focusin"?(kC(),mp=t,jp=i,mp.attachEvent("onpropertychange",tI)):e==="focusout"&&kC()}function k5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qy(jp)}function z5(e,t){if(e==="click")return Qy(t)}function F5(e,t){if(e==="input"||e==="change")return Qy(t)}function U5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var go=typeof Object.is=="function"?Object.is:U5;function Hp(e,t){if(go(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!Hb.call(t,n)||!go(e[n],t[n]))return!1}return!0}function zC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function FC(e,t){var i=zC(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=zC(i)}}function iI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?iI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rI(){for(var e=window,t=x0();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=x0(e.document)}return t}function jE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function j5(e){var t=rI(),i=e.focusedElem,r=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&iI(i.ownerDocument.documentElement,i)){if(r!==null&&jE(i)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=i.textContent.length,s=Math.min(r.start,n);r=r.end===void 0?s:Math.min(r.end,n),!e.extend&&s>r&&(n=r,r=s,s=n),n=FC(i,s);var o=FC(i,r);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var H5=Ga&&"documentMode"in document&&11>=document.documentMode,Dd=null,aS=null,gp=null,lS=!1;function UC(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;lS||Dd==null||Dd!==x0(r)||(r=Dd,"selectionStart"in r&&jE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gp&&Hp(gp,r)||(gp=r,r=C0(aS,"onSelect"),0<r.length&&(t=new zE("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=Dd)))}function xg(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Od={animationend:xg("Animation","AnimationEnd"),animationiteration:xg("Animation","AnimationIteration"),animationstart:xg("Animation","AnimationStart"),transitionend:xg("Transition","TransitionEnd")},Mx={},nI={};Ga&&(nI=document.createElement("div").style,"AnimationEvent"in window||(delete Od.animationend.animation,delete Od.animationiteration.animation,delete Od.animationstart.animation),"TransitionEvent"in window||delete Od.transitionend.transition);function Ky(e){if(Mx[e])return Mx[e];if(!Od[e])return e;var t=Od[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in nI)return Mx[e]=t[i];return e}var sI=Ky("animationend"),oI=Ky("animationiteration"),aI=Ky("animationstart"),lI=Ky("transitionend"),cI=new Map,jC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yc(e,t){cI.set(e,t),Du(t,[e])}for(var Px=0;Px<jC.length;Px++){var Dx=jC[Px],G5=Dx.toLowerCase(),V5=Dx[0].toUpperCase()+Dx.slice(1);yc(G5,"on"+V5)}yc(sI,"onAnimationEnd");yc(oI,"onAnimationIteration");yc(aI,"onAnimationStart");yc("dblclick","onDoubleClick");yc("focusin","onFocus");yc("focusout","onBlur");yc(lI,"onTransitionEnd");ph("onMouseEnter",["mouseout","mouseover"]);ph("onMouseLeave",["mouseout","mouseover"]);ph("onPointerEnter",["pointerout","pointerover"]);ph("onPointerLeave",["pointerout","pointerover"]);Du("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Du("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Du("onBeforeInput",["compositionend","keypress","textInput","paste"]);Du("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Du("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Du("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ep="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W5=new Set("cancel close invalid load scroll toggle".split(" ").concat(ep));function HC(e,t,i){var r=e.type||"unknown-event";e.currentTarget=i,GF(r,t,void 0,e),e.currentTarget=null}function uI(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;HC(n,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;HC(n,a,c),s=l}}}if(b0)throw e=rS,b0=!1,rS=null,e}function Ii(e,t){var i=t[fS];i===void 0&&(i=t[fS]=new Set);var r=e+"__bubble";i.has(r)||(dI(t,e,2,!1),i.add(r))}function Ox(e,t,i){var r=0;t&&(r|=4),dI(i,e,r,t)}var wg="_reactListening"+Math.random().toString(36).slice(2);function Gp(e){if(!e[wg]){e[wg]=!0,yL.forEach(function(i){i!=="selectionchange"&&(W5.has(i)||Ox(i,!1,e),Ox(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wg]||(t[wg]=!0,Ox("selectionchange",!1,t))}}function dI(e,t,i,r){switch(YL(t)){case 1:var n=s5;break;case 4:n=o5;break;default:n=BE}i=n.bind(null,t,i,e),n=void 0,!iS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function Lx(e,t,i,r,n){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=eu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}RL(function(){var c=s,d=LE(i),u=[];e:{var h=cI.get(e);if(h!==void 0){var f=zE,m=e;switch(e){case"keypress":if(qv(i)===0)break e;case"keydown":case"keyup":f=b5;break;case"focusin":m="focus",f=Ax;break;case"focusout":m="blur",f=Ax;break;case"beforeblur":case"afterblur":f=Ax;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=DC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=c5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=E5;break;case sI:case oI:case aI:f=h5;break;case lI:f=C5;break;case"scroll":f=a5;break;case"wheel":f=M5;break;case"copy":case"cut":case"paste":f=p5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=LC}var v=(t&4)!==0,g=!v&&e==="scroll",p=v?h!==null?h+"Capture":null:h;v=[];for(var x=c,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,p!==null&&(S=kp(x,p),S!=null&&v.push(Vp(x,S,b)))),g)break;x=x.return}0<v.length&&(h=new f(h,m,null,i,d),u.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&i!==eS&&(m=i.relatedTarget||i.fromElement)&&(eu(m)||m[Va]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=i.relatedTarget||i.toElement,f=c,m=m?eu(m):null,m!==null&&(g=Ou(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(v=DC,S="onMouseLeave",p="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=LC,S="onPointerLeave",p="onPointerEnter",x="pointer"),g=f==null?h:Ld(f),b=m==null?h:Ld(m),h=new v(S,x+"leave",f,i,d),h.target=g,h.relatedTarget=b,S=null,eu(d)===c&&(v=new v(p,x+"enter",m,i,d),v.target=b,v.relatedTarget=g,S=v),g=S,f&&m)t:{for(v=f,p=m,x=0,b=v;b;b=Ku(b))x++;for(b=0,S=p;S;S=Ku(S))b++;for(;0<x-b;)v=Ku(v),x--;for(;0<b-x;)p=Ku(p),b--;for(;x--;){if(v===p||p!==null&&v===p.alternate)break t;v=Ku(v),p=Ku(p)}v=null}else v=null;f!==null&&GC(u,h,f,v,!1),m!==null&&g!==null&&GC(u,g,m,v,!0)}}e:{if(h=c?Ld(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var E=N5;else if(NC(h))if(eI)E=F5;else{E=k5;var y=B5}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=z5);if(E&&(E=E(e,c))){JL(u,E,i,d);break e}y&&y(e,h,c),e==="focusout"&&(y=h._wrapperState)&&y.controlled&&h.type==="number"&&Qb(h,"number",h.value)}switch(y=c?Ld(c):window,e){case"focusin":(NC(y)||y.contentEditable==="true")&&(Dd=y,aS=c,gp=null);break;case"focusout":gp=aS=Dd=null;break;case"mousedown":lS=!0;break;case"contextmenu":case"mouseup":case"dragend":lS=!1,UC(u,i,d);break;case"selectionchange":if(H5)break;case"keydown":case"keyup":UC(u,i,d)}var C;if(UE)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Pd?ZL(e,i)&&(A="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(A="onCompositionStart");A&&(KL&&i.locale!=="ko"&&(Pd||A!=="onCompositionStart"?A==="onCompositionEnd"&&Pd&&(C=QL()):(Bl=d,kE="value"in Bl?Bl.value:Bl.textContent,Pd=!0)),y=C0(c,A),0<y.length&&(A=new OC(A,e,null,i,d),u.push({event:A,listeners:y}),C?A.data=C:(C=$L(i),C!==null&&(A.data=C)))),(C=D5?O5(e,i):L5(e,i))&&(c=C0(c,"onBeforeInput"),0<c.length&&(d=new OC("onBeforeInput","beforeinput",null,i,d),u.push({event:d,listeners:c}),d.data=C))}uI(u,t)})}function Vp(e,t,i){return{instance:e,listener:t,currentTarget:i}}function C0(e,t){for(var i=t+"Capture",r=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=kp(e,i),s!=null&&r.unshift(Vp(e,s,n)),s=kp(e,t),s!=null&&r.push(Vp(e,s,n))),e=e.return}return r}function Ku(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function GC(e,t,i,r,n){for(var s=t._reactName,o=[];i!==null&&i!==r;){var a=i,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,n?(l=kp(i,s),l!=null&&o.unshift(Vp(i,l,a))):n||(l=kp(i,s),l!=null&&o.push(Vp(i,l,a)))),i=i.return}o.length!==0&&e.push({event:t,listeners:o})}var q5=/\r\n?/g,X5=/\u0000|\uFFFD/g;function VC(e){return(typeof e=="string"?e:""+e).replace(q5,`
`).replace(X5,"")}function bg(e,t,i){if(t=VC(t),VC(e)!==t&&i)throw Error(Xe(425))}function T0(){}var cS=null,uS=null;function dS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hS=typeof setTimeout=="function"?setTimeout:void 0,Y5=typeof clearTimeout=="function"?clearTimeout:void 0,WC=typeof Promise=="function"?Promise:void 0,Q5=typeof queueMicrotask=="function"?queueMicrotask:typeof WC<"u"?function(e){return WC.resolve(null).then(e).catch(K5)}:hS;function K5(e){setTimeout(function(){throw e})}function Ix(e,t){var i=t,r=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){e.removeChild(n),Up(t);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=n}while(i);Up(t)}function Jl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Ih=Math.random().toString(36).slice(2),Fo="__reactFiber$"+Ih,Wp="__reactProps$"+Ih,Va="__reactContainer$"+Ih,fS="__reactEvents$"+Ih,Z5="__reactListeners$"+Ih,$5="__reactHandles$"+Ih;function eu(e){var t=e[Fo];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Va]||i[Fo]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=qC(e);e!==null;){if(i=e[Fo])return i;e=qC(e)}return t}e=i,i=e.parentNode}return null}function _m(e){return e=e[Fo]||e[Va],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ld(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Xe(33))}function Zy(e){return e[Wp]||null}var pS=[],Id=-1;function xc(e){return{current:e}}function ki(e){0>Id||(e.current=pS[Id],pS[Id]=null,Id--)}function Pi(e,t){Id++,pS[Id]=e.current,e.current=t}var uc={},Jr=xc(uc),In=xc(!1),yu=uc;function mh(e,t){var i=e.type.contextTypes;if(!i)return uc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in i)n[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Rn(e){return e=e.childContextTypes,e!=null}function M0(){ki(In),ki(Jr)}function XC(e,t,i){if(Jr.current!==uc)throw Error(Xe(168));Pi(Jr,t),Pi(In,i)}function hI(e,t,i){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(Xe(108,BF(e)||"Unknown",n));return Gi({},i,r)}function P0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||uc,yu=Jr.current,Pi(Jr,e),Pi(In,In.current),!0}function YC(e,t,i){var r=e.stateNode;if(!r)throw Error(Xe(169));i?(e=hI(e,t,yu),r.__reactInternalMemoizedMergedChildContext=e,ki(In),ki(Jr),Pi(Jr,e)):ki(In),Pi(In,i)}var Ia=null,$y=!1,Rx=!1;function fI(e){Ia===null?Ia=[e]:Ia.push(e)}function J5(e){$y=!0,fI(e)}function wc(){if(!Rx&&Ia!==null){Rx=!0;var e=0,t=Si;try{var i=Ia;for(Si=1;e<i.length;e++){var r=i[e];do r=r(!0);while(r!==null)}Ia=null,$y=!1}catch(n){throw Ia!==null&&(Ia=Ia.slice(e+1)),zL(IE,wc),n}finally{Si=t,Rx=!1}}return null}var Rd=[],Nd=0,D0=null,O0=0,_s=[],Es=0,xu=null,Ra=1,Na="";function jc(e,t){Rd[Nd++]=O0,Rd[Nd++]=D0,D0=e,O0=t}function pI(e,t,i){_s[Es++]=Ra,_s[Es++]=Na,_s[Es++]=xu,xu=e;var r=Ra;e=Na;var n=32-fo(r)-1;r&=~(1<<n),i+=1;var s=32-fo(t)+n;if(30<s){var o=n-n%5;s=(r&(1<<o)-1).toString(32),r>>=o,n-=o,Ra=1<<32-fo(t)+n|i<<n|r,Na=s+e}else Ra=1<<s|i<<n|r,Na=e}function HE(e){e.return!==null&&(jc(e,1),pI(e,1,0))}function GE(e){for(;e===D0;)D0=Rd[--Nd],Rd[Nd]=null,O0=Rd[--Nd],Rd[Nd]=null;for(;e===xu;)xu=_s[--Es],_s[Es]=null,Na=_s[--Es],_s[Es]=null,Ra=_s[--Es],_s[Es]=null}var rs=null,Zn=null,Fi=!1,ao=null;function mI(e,t){var i=Ps(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function QC(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rs=e,Zn=Jl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rs=e,Zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=xu!==null?{id:Ra,overflow:Na}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Ps(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,rs=e,Zn=null,!0):!1;default:return!1}}function mS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gS(e){if(Fi){var t=Zn;if(t){var i=t;if(!QC(e,t)){if(mS(e))throw Error(Xe(418));t=Jl(i.nextSibling);var r=rs;t&&QC(e,t)?mI(r,i):(e.flags=e.flags&-4097|2,Fi=!1,rs=e)}}else{if(mS(e))throw Error(Xe(418));e.flags=e.flags&-4097|2,Fi=!1,rs=e}}}function KC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rs=e}function Sg(e){if(e!==rs)return!1;if(!Fi)return KC(e),Fi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dS(e.type,e.memoizedProps)),t&&(t=Zn)){if(mS(e))throw gI(),Error(Xe(418));for(;t;)mI(e,t),t=Jl(t.nextSibling)}if(KC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Xe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Zn=Jl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Zn=null}}else Zn=rs?Jl(e.stateNode.nextSibling):null;return!0}function gI(){for(var e=Zn;e;)e=Jl(e.nextSibling)}function gh(){Zn=rs=null,Fi=!1}function VE(e){ao===null?ao=[e]:ao.push(e)}var eU=Ja.ReactCurrentBatchConfig;function so(e,t){if(e&&e.defaultProps){t=Gi({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var L0=xc(null),I0=null,Bd=null,WE=null;function qE(){WE=Bd=I0=null}function XE(e){var t=L0.current;ki(L0),e._currentValue=t}function vS(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function eh(e,t){I0=e,WE=Bd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Dn=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(WE!==e)if(e={context:e,memoizedValue:t,next:null},Bd===null){if(I0===null)throw Error(Xe(308));Bd=e,I0.dependencies={lanes:0,firstContext:e}}else Bd=Bd.next=e;return t}var tu=null;function YE(e){tu===null?tu=[e]:tu.push(e)}function vI(e,t,i,r){var n=t.interleaved;return n===null?(i.next=i,YE(t)):(i.next=n.next,n.next=i),t.interleaved=i,Wa(e,r)}function Wa(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Pl=!1;function QE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ka(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ec(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ci&2){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,Wa(e,i)}return n=r.interleaved,n===null?(t.next=t,YE(r)):(t.next=n.next,n.next=t),r.interleaved=t,Wa(e,i)}function Xv(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,RE(e,i)}}function ZC(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?n=s=o:s=s.next=o,i=i.next}while(i!==null);s===null?n=s=t:s=s.next=t}else n=s=t;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function R0(e,t,i,r){var n=e.updateQueue;Pl=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var u=n.baseState;o=0,d=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,v=a;switch(h=t,f=i,v.tag){case 1:if(m=v.payload,typeof m=="function"){u=m.call(f,u,h);break e}u=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,h=typeof m=="function"?m.call(f,u,h):m,h==null)break e;u=Gi({},u,h);break e;case 2:Pl=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=n.effects,h===null?n.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=f,l=u):d=d.next=f,o|=h;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;h=a,a=h.next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}while(1);if(d===null&&(l=u),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=d,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);bu|=o,e.lanes=o,e.memoizedState=u}}function $C(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error(Xe(191,n));n.call(r)}}}var xI=new vL.Component().refs;function yS(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:Gi({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Jy={isMounted:function(e){return(e=e._reactInternals)?Ou(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var r=mn(),n=ic(e),s=ka(r,n);s.payload=t,i!=null&&(s.callback=i),t=ec(e,s,n),t!==null&&(po(t,e,n,r),Xv(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=mn(),n=ic(e),s=ka(r,n);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=ec(e,s,n),t!==null&&(po(t,e,n,r),Xv(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=mn(),r=ic(e),n=ka(i,r);n.tag=2,t!=null&&(n.callback=t),t=ec(e,n,r),t!==null&&(po(t,e,r,i),Xv(t,e,r))}};function JC(e,t,i,r,n,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Hp(i,r)||!Hp(n,s):!0}function wI(e,t,i){var r=!1,n=uc,s=t.contextType;return typeof s=="object"&&s!==null?s=Ns(s):(n=Rn(t)?yu:Jr.current,r=t.contextTypes,s=(r=r!=null)?mh(e,n):uc),t=new t(i,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jy,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function eT(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&Jy.enqueueReplaceState(t,t.state,null)}function xS(e,t,i,r){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs=xI,QE(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=Ns(s):(s=Rn(t)?yu:Jr.current,n.context=mh(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(yS(e,t,s,i),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Jy.enqueueReplaceState(n,n.state,null),R0(e,i,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function xf(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Xe(309));var r=i.stateNode}if(!r)throw Error(Xe(147,e));var n=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=n.refs;a===xI&&(a=n.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Xe(284));if(!i._owner)throw Error(Xe(290,e))}return e}function _g(e,t){throw e=Object.prototype.toString.call(t),Error(Xe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tT(e){var t=e._init;return t(e._payload)}function bI(e){function t(p,x){if(e){var b=p.deletions;b===null?(p.deletions=[x],p.flags|=16):b.push(x)}}function i(p,x){if(!e)return null;for(;x!==null;)t(p,x),x=x.sibling;return null}function r(p,x){for(p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function n(p,x){return p=rc(p,x),p.index=0,p.sibling=null,p}function s(p,x,b){return p.index=b,e?(b=p.alternate,b!==null?(b=b.index,b<x?(p.flags|=2,x):b):(p.flags|=2,x)):(p.flags|=1048576,x)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,x,b,S){return x===null||x.tag!==6?(x=jx(b,p.mode,S),x.return=p,x):(x=n(x,b),x.return=p,x)}function l(p,x,b,S){var E=b.type;return E===Md?d(p,x,b.props.children,S,b.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ml&&tT(E)===x.type)?(S=n(x,b.props),S.ref=xf(p,x,b),S.return=p,S):(S=Jv(b.type,b.key,b.props,null,p.mode,S),S.ref=xf(p,x,b),S.return=p,S)}function c(p,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Hx(b,p.mode,S),x.return=p,x):(x=n(x,b.children||[]),x.return=p,x)}function d(p,x,b,S,E){return x===null||x.tag!==7?(x=cu(b,p.mode,S,E),x.return=p,x):(x=n(x,b),x.return=p,x)}function u(p,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=jx(""+x,p.mode,b),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case hg:return b=Jv(x.type,x.key,x.props,null,p.mode,b),b.ref=xf(p,null,x),b.return=p,b;case Td:return x=Hx(x,p.mode,b),x.return=p,x;case Ml:var S=x._init;return u(p,S(x._payload),b)}if($f(x)||pf(x))return x=cu(x,p.mode,b,null),x.return=p,x;_g(p,x)}return null}function h(p,x,b,S){var E=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(p,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case hg:return b.key===E?l(p,x,b,S):null;case Td:return b.key===E?c(p,x,b,S):null;case Ml:return E=b._init,h(p,x,E(b._payload),S)}if($f(b)||pf(b))return E!==null?null:d(p,x,b,S,null);_g(p,b)}return null}function f(p,x,b,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(b)||null,a(x,p,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hg:return p=p.get(S.key===null?b:S.key)||null,l(x,p,S,E);case Td:return p=p.get(S.key===null?b:S.key)||null,c(x,p,S,E);case Ml:var y=S._init;return f(p,x,b,y(S._payload),E)}if($f(S)||pf(S))return p=p.get(b)||null,d(x,p,S,E,null);_g(x,S)}return null}function m(p,x,b,S){for(var E=null,y=null,C=x,A=x=0,D=null;C!==null&&A<b.length;A++){C.index>A?(D=C,C=null):D=C.sibling;var I=h(p,C,b[A],S);if(I===null){C===null&&(C=D);break}e&&C&&I.alternate===null&&t(p,C),x=s(I,x,A),y===null?E=I:y.sibling=I,y=I,C=D}if(A===b.length)return i(p,C),Fi&&jc(p,A),E;if(C===null){for(;A<b.length;A++)C=u(p,b[A],S),C!==null&&(x=s(C,x,A),y===null?E=C:y.sibling=C,y=C);return Fi&&jc(p,A),E}for(C=r(p,C);A<b.length;A++)D=f(C,p,A,b[A],S),D!==null&&(e&&D.alternate!==null&&C.delete(D.key===null?A:D.key),x=s(D,x,A),y===null?E=D:y.sibling=D,y=D);return e&&C.forEach(function(R){return t(p,R)}),Fi&&jc(p,A),E}function v(p,x,b,S){var E=pf(b);if(typeof E!="function")throw Error(Xe(150));if(b=E.call(b),b==null)throw Error(Xe(151));for(var y=E=null,C=x,A=x=0,D=null,I=b.next();C!==null&&!I.done;A++,I=b.next()){C.index>A?(D=C,C=null):D=C.sibling;var R=h(p,C,I.value,S);if(R===null){C===null&&(C=D);break}e&&C&&R.alternate===null&&t(p,C),x=s(R,x,A),y===null?E=R:y.sibling=R,y=R,C=D}if(I.done)return i(p,C),Fi&&jc(p,A),E;if(C===null){for(;!I.done;A++,I=b.next())I=u(p,I.value,S),I!==null&&(x=s(I,x,A),y===null?E=I:y.sibling=I,y=I);return Fi&&jc(p,A),E}for(C=r(p,C);!I.done;A++,I=b.next())I=f(C,p,A,I.value,S),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?A:I.key),x=s(I,x,A),y===null?E=I:y.sibling=I,y=I);return e&&C.forEach(function(B){return t(p,B)}),Fi&&jc(p,A),E}function g(p,x,b,S){if(typeof b=="object"&&b!==null&&b.type===Md&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case hg:e:{for(var E=b.key,y=x;y!==null;){if(y.key===E){if(E=b.type,E===Md){if(y.tag===7){i(p,y.sibling),x=n(y,b.props.children),x.return=p,p=x;break e}}else if(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ml&&tT(E)===y.type){i(p,y.sibling),x=n(y,b.props),x.ref=xf(p,y,b),x.return=p,p=x;break e}i(p,y);break}else t(p,y);y=y.sibling}b.type===Md?(x=cu(b.props.children,p.mode,S,b.key),x.return=p,p=x):(S=Jv(b.type,b.key,b.props,null,p.mode,S),S.ref=xf(p,x,b),S.return=p,p=S)}return o(p);case Td:e:{for(y=b.key;x!==null;){if(x.key===y)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){i(p,x.sibling),x=n(x,b.children||[]),x.return=p,p=x;break e}else{i(p,x);break}else t(p,x);x=x.sibling}x=Hx(b,p.mode,S),x.return=p,p=x}return o(p);case Ml:return y=b._init,g(p,x,y(b._payload),S)}if($f(b))return m(p,x,b,S);if(pf(b))return v(p,x,b,S);_g(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(i(p,x.sibling),x=n(x,b),x.return=p,p=x):(i(p,x),x=jx(b,p.mode,S),x.return=p,p=x),o(p)):i(p,x)}return g}var vh=bI(!0),SI=bI(!1),Em={},Ko=xc(Em),qp=xc(Em),Xp=xc(Em);function iu(e){if(e===Em)throw Error(Xe(174));return e}function KE(e,t){switch(Pi(Xp,t),Pi(qp,e),Pi(Ko,Em),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zb(t,e)}ki(Ko),Pi(Ko,t)}function yh(){ki(Ko),ki(qp),ki(Xp)}function _I(e){iu(Xp.current);var t=iu(Ko.current),i=Zb(t,e.type);t!==i&&(Pi(qp,e),Pi(Ko,i))}function ZE(e){qp.current===e&&(ki(Ko),ki(qp))}var Ui=xc(0);function N0(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nx=[];function $E(){for(var e=0;e<Nx.length;e++)Nx[e]._workInProgressVersionPrimary=null;Nx.length=0}var Yv=Ja.ReactCurrentDispatcher,Bx=Ja.ReactCurrentBatchConfig,wu=0,Hi=null,vr=null,Tr=null,B0=!1,vp=!1,Yp=0,tU=0;function Gr(){throw Error(Xe(321))}function JE(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!go(e[i],t[i]))return!1;return!0}function e2(e,t,i,r,n,s){if(wu=s,Hi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yv.current=e===null||e.memoizedState===null?sU:oU,e=i(r,n),vp){s=0;do{if(vp=!1,Yp=0,25<=s)throw Error(Xe(301));s+=1,Tr=vr=null,t.updateQueue=null,Yv.current=aU,e=i(r,n)}while(vp)}if(Yv.current=k0,t=vr!==null&&vr.next!==null,wu=0,Tr=vr=Hi=null,B0=!1,t)throw Error(Xe(300));return e}function t2(){var e=Yp!==0;return Yp=0,e}function Ro(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tr===null?Hi.memoizedState=Tr=e:Tr=Tr.next=e,Tr}function Bs(){if(vr===null){var e=Hi.alternate;e=e!==null?e.memoizedState:null}else e=vr.next;var t=Tr===null?Hi.memoizedState:Tr.next;if(t!==null)Tr=t,vr=e;else{if(e===null)throw Error(Xe(310));vr=e,e={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},Tr===null?Hi.memoizedState=Tr=e:Tr=Tr.next=e}return Tr}function Qp(e,t){return typeof t=="function"?t(e):t}function kx(e){var t=Bs(),i=t.queue;if(i===null)throw Error(Xe(311));i.lastRenderedReducer=e;var r=vr,n=r.baseQueue,s=i.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}r.baseQueue=n=s,i.pending=null}if(n!==null){s=n.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((wu&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=r):l=l.next=u,Hi.lanes|=d,bu|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,go(r,t.memoizedState)||(Dn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,i.lastRenderedState=r}if(e=i.interleaved,e!==null){n=e;do s=n.lane,Hi.lanes|=s,bu|=s,n=n.next;while(n!==e)}else n===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function zx(e){var t=Bs(),i=t.queue;if(i===null)throw Error(Xe(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,s=t.memoizedState;if(n!==null){i.pending=null;var o=n=n.next;do s=e(s,o.action),o=o.next;while(o!==n);go(s,t.memoizedState)||(Dn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,r]}function EI(){}function AI(e,t){var i=Hi,r=Bs(),n=t(),s=!go(r.memoizedState,n);if(s&&(r.memoizedState=n,Dn=!0),r=r.queue,i2(MI.bind(null,i,r,e),[e]),r.getSnapshot!==t||s||Tr!==null&&Tr.memoizedState.tag&1){if(i.flags|=2048,Kp(9,TI.bind(null,i,r,n,t),void 0,null),Mr===null)throw Error(Xe(349));wu&30||CI(i,t,n)}return n}function CI(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Hi.updateQueue,t===null?(t={lastEffect:null,stores:null},Hi.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function TI(e,t,i,r){t.value=i,t.getSnapshot=r,PI(t)&&DI(e)}function MI(e,t,i){return i(function(){PI(t)&&DI(e)})}function PI(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!go(e,i)}catch{return!0}}function DI(e){var t=Wa(e,1);t!==null&&po(t,e,1,-1)}function iT(e){var t=Ro();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qp,lastRenderedState:e},t.queue=e,e=e.dispatch=nU.bind(null,Hi,e),[t.memoizedState,e]}function Kp(e,t,i,r){return e={tag:e,create:t,destroy:i,deps:r,next:null},t=Hi.updateQueue,t===null?(t={lastEffect:null,stores:null},Hi.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e)),e}function OI(){return Bs().memoizedState}function Qv(e,t,i,r){var n=Ro();Hi.flags|=e,n.memoizedState=Kp(1|t,i,void 0,r===void 0?null:r)}function e1(e,t,i,r){var n=Bs();r=r===void 0?null:r;var s=void 0;if(vr!==null){var o=vr.memoizedState;if(s=o.destroy,r!==null&&JE(r,o.deps)){n.memoizedState=Kp(t,i,s,r);return}}Hi.flags|=e,n.memoizedState=Kp(1|t,i,s,r)}function rT(e,t){return Qv(8390656,8,e,t)}function i2(e,t){return e1(2048,8,e,t)}function LI(e,t){return e1(4,2,e,t)}function II(e,t){return e1(4,4,e,t)}function RI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function NI(e,t,i){return i=i!=null?i.concat([e]):null,e1(4,4,RI.bind(null,t,e),i)}function r2(){}function BI(e,t){var i=Bs();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&JE(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function kI(e,t){var i=Bs();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&JE(t,r[1])?r[0]:(e=e(),i.memoizedState=[e,t],e)}function zI(e,t,i){return wu&21?(go(i,t)||(i=jL(),Hi.lanes|=i,bu|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Dn=!0),e.memoizedState=i)}function iU(e,t){var i=Si;Si=i!==0&&4>i?i:4,e(!0);var r=Bx.transition;Bx.transition={};try{e(!1),t()}finally{Si=i,Bx.transition=r}}function FI(){return Bs().memoizedState}function rU(e,t,i){var r=ic(e);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},UI(e))jI(t,i);else if(i=vI(e,t,i,r),i!==null){var n=mn();po(i,e,r,n),HI(i,t,r)}}function nU(e,t,i){var r=ic(e),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(UI(e))jI(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,i);if(n.hasEagerState=!0,n.eagerState=a,go(a,o)){var l=t.interleaved;l===null?(n.next=n,YE(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}i=vI(e,t,n,r),i!==null&&(n=mn(),po(i,e,r,n),HI(i,t,r))}}function UI(e){var t=e.alternate;return e===Hi||t!==null&&t===Hi}function jI(e,t){vp=B0=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function HI(e,t,i){if(i&4194240){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,RE(e,i)}}var k0={readContext:Ns,useCallback:Gr,useContext:Gr,useEffect:Gr,useImperativeHandle:Gr,useInsertionEffect:Gr,useLayoutEffect:Gr,useMemo:Gr,useReducer:Gr,useRef:Gr,useState:Gr,useDebugValue:Gr,useDeferredValue:Gr,useTransition:Gr,useMutableSource:Gr,useSyncExternalStore:Gr,useId:Gr,unstable_isNewReconciler:!1},sU={readContext:Ns,useCallback:function(e,t){return Ro().memoizedState=[e,t===void 0?null:t],e},useContext:Ns,useEffect:rT,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Qv(4194308,4,RI.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Qv(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qv(4,2,e,t)},useMemo:function(e,t){var i=Ro();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var r=Ro();return t=i!==void 0?i(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=rU.bind(null,Hi,e),[r.memoizedState,e]},useRef:function(e){var t=Ro();return e={current:e},t.memoizedState=e},useState:iT,useDebugValue:r2,useDeferredValue:function(e){return Ro().memoizedState=e},useTransition:function(){var e=iT(!1),t=e[0];return e=iU.bind(null,e[1]),Ro().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var r=Hi,n=Ro();if(Fi){if(i===void 0)throw Error(Xe(407));i=i()}else{if(i=t(),Mr===null)throw Error(Xe(349));wu&30||CI(r,t,i)}n.memoizedState=i;var s={value:i,getSnapshot:t};return n.queue=s,rT(MI.bind(null,r,s,e),[e]),r.flags|=2048,Kp(9,TI.bind(null,r,s,i,t),void 0,null),i},useId:function(){var e=Ro(),t=Mr.identifierPrefix;if(Fi){var i=Na,r=Ra;i=(r&~(1<<32-fo(r)-1)).toString(32)+i,t=":"+t+"R"+i,i=Yp++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=tU++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oU={readContext:Ns,useCallback:BI,useContext:Ns,useEffect:i2,useImperativeHandle:NI,useInsertionEffect:LI,useLayoutEffect:II,useMemo:kI,useReducer:kx,useRef:OI,useState:function(){return kx(Qp)},useDebugValue:r2,useDeferredValue:function(e){var t=Bs();return zI(t,vr.memoizedState,e)},useTransition:function(){var e=kx(Qp)[0],t=Bs().memoizedState;return[e,t]},useMutableSource:EI,useSyncExternalStore:AI,useId:FI,unstable_isNewReconciler:!1},aU={readContext:Ns,useCallback:BI,useContext:Ns,useEffect:i2,useImperativeHandle:NI,useInsertionEffect:LI,useLayoutEffect:II,useMemo:kI,useReducer:zx,useRef:OI,useState:function(){return zx(Qp)},useDebugValue:r2,useDeferredValue:function(e){var t=Bs();return vr===null?t.memoizedState=e:zI(t,vr.memoizedState,e)},useTransition:function(){var e=zx(Qp)[0],t=Bs().memoizedState;return[e,t]},useMutableSource:EI,useSyncExternalStore:AI,useId:FI,unstable_isNewReconciler:!1};function xh(e,t){try{var i="",r=t;do i+=NF(r),r=r.return;while(r);var n=i}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function Fx(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function wS(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var lU=typeof WeakMap=="function"?WeakMap:Map;function GI(e,t,i){i=ka(-1,i),i.tag=3,i.payload={element:null};var r=t.value;return i.callback=function(){F0||(F0=!0,DS=r),wS(e,t)},i}function VI(e,t,i){i=ka(-1,i),i.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;i.payload=function(){return r(n)},i.callback=function(){wS(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){wS(e,t),typeof r!="function"&&(tc===null?tc=new Set([this]):tc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),i}function nT(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new lU;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(i)||(n.add(i),e=SU.bind(null,e,t,i),t.then(e,e))}function sT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function oT(e,t,i,r,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=ka(-1,1),t.tag=2,ec(i,t,1))),i.lanes|=1),e)}var cU=Ja.ReactCurrentOwner,Dn=!1;function dn(e,t,i,r){t.child=e===null?SI(t,null,i,r):vh(t,e.child,i,r)}function aT(e,t,i,r,n){i=i.render;var s=t.ref;return eh(t,n),r=e2(e,t,i,r,s,n),i=t2(),e!==null&&!Dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,qa(e,t,n)):(Fi&&i&&HE(t),t.flags|=1,dn(e,t,r,n),t.child)}function lT(e,t,i,r,n){if(e===null){var s=i.type;return typeof s=="function"&&!d2(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=s,WI(e,t,s,r,n)):(e=Jv(i.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&n)){var o=s.memoizedProps;if(i=i.compare,i=i!==null?i:Hp,i(o,r)&&e.ref===t.ref)return qa(e,t,n)}return t.flags|=1,e=rc(s,r),e.ref=t.ref,e.return=t,t.child=e}function WI(e,t,i,r,n){if(e!==null){var s=e.memoizedProps;if(Hp(s,r)&&e.ref===t.ref)if(Dn=!1,t.pendingProps=r=s,(e.lanes&n)!==0)e.flags&131072&&(Dn=!0);else return t.lanes=e.lanes,qa(e,t,n)}return bS(e,t,i,r,n)}function qI(e,t,i){var r=t.pendingProps,n=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pi(zd,Vn),Vn|=i;else{if(!(i&1073741824))return e=s!==null?s.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pi(zd,Vn),Vn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:i,Pi(zd,Vn),Vn|=r}else s!==null?(r=s.baseLanes|i,t.memoizedState=null):r=i,Pi(zd,Vn),Vn|=r;return dn(e,t,n,i),t.child}function XI(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function bS(e,t,i,r,n){var s=Rn(i)?yu:Jr.current;return s=mh(t,s),eh(t,n),i=e2(e,t,i,r,s,n),r=t2(),e!==null&&!Dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,qa(e,t,n)):(Fi&&r&&HE(t),t.flags|=1,dn(e,t,i,n),t.child)}function cT(e,t,i,r,n){if(Rn(i)){var s=!0;P0(t)}else s=!1;if(eh(t,n),t.stateNode===null)Kv(e,t),wI(t,i,r),xS(t,i,r,n),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=i.contextType;typeof c=="object"&&c!==null?c=Ns(c):(c=Rn(i)?yu:Jr.current,c=mh(t,c));var d=i.getDerivedStateFromProps,u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&eT(t,o,r,c),Pl=!1;var h=t.memoizedState;o.state=h,R0(t,r,o,n),l=t.memoizedState,a!==r||h!==l||In.current||Pl?(typeof d=="function"&&(yS(t,i,d,r),l=t.memoizedState),(a=Pl||JC(t,i,a,r,h,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,yI(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:so(t.type,a),o.props=c,u=t.pendingProps,h=o.context,l=i.contextType,typeof l=="object"&&l!==null?l=Ns(l):(l=Rn(i)?yu:Jr.current,l=mh(t,l));var f=i.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||h!==l)&&eT(t,o,r,l),Pl=!1,h=t.memoizedState,o.state=h,R0(t,r,o,n);var m=t.memoizedState;a!==u||h!==m||In.current||Pl?(typeof f=="function"&&(yS(t,i,f,r),m=t.memoizedState),(c=Pl||JC(t,i,c,r,h,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return SS(e,t,i,r,s,n)}function SS(e,t,i,r,n,s){XI(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return n&&YC(t,i,!1),qa(e,t,s);r=t.stateNode,cU.current=t;var a=o&&typeof i.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=vh(t,e.child,null,s),t.child=vh(t,null,a,s)):dn(e,t,a,s),t.memoizedState=r.state,n&&YC(t,i,!0),t.child}function YI(e){var t=e.stateNode;t.pendingContext?XC(e,t.pendingContext,t.pendingContext!==t.context):t.context&&XC(e,t.context,!1),KE(e,t.containerInfo)}function uT(e,t,i,r,n){return gh(),VE(n),t.flags|=256,dn(e,t,i,r),t.child}var _S={dehydrated:null,treeContext:null,retryLane:0};function ES(e){return{baseLanes:e,cachePool:null,transitions:null}}function QI(e,t,i){var r=t.pendingProps,n=Ui.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Pi(Ui,n&1),e===null)return gS(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=r1(o,r,0,null),e=cu(e,r,i,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=ES(i),t.memoizedState=_S,e):n2(t,o));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return uU(e,t,o,r,a,n,i);if(s){s=r.fallback,o=t.mode,n=e.child,a=n.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=rc(n,l),r.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=rc(a,s):(s=cu(s,o,i,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?ES(i):{baseLanes:o.baseLanes|i,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~i,t.memoizedState=_S,r}return s=e.child,e=s.sibling,r=rc(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function n2(e,t){return t=r1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Eg(e,t,i,r){return r!==null&&VE(r),vh(t,e.child,null,i),e=n2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uU(e,t,i,r,n,s,o){if(i)return t.flags&256?(t.flags&=-257,r=Fx(Error(Xe(422))),Eg(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,n=t.mode,r=r1({mode:"visible",children:r.children},n,0,null),s=cu(s,n,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&vh(t,e.child,null,o),t.child.memoizedState=ES(o),t.memoizedState=_S,s);if(!(t.mode&1))return Eg(e,t,o,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Xe(419)),r=Fx(s,r,void 0),Eg(e,t,o,r)}if(a=(o&e.childLanes)!==0,Dn||a){if(r=Mr,r!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Wa(e,n),po(r,e,n,-1))}return u2(),r=Fx(Error(Xe(421))),Eg(e,t,o,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=_U.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,Zn=Jl(n.nextSibling),rs=t,Fi=!0,ao=null,e!==null&&(_s[Es++]=Ra,_s[Es++]=Na,_s[Es++]=xu,Ra=e.id,Na=e.overflow,xu=t),t=n2(t,r.children),t.flags|=4096,t)}function dT(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),vS(e.return,t,i)}function Ux(e,t,i,r,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=i,s.tailMode=n)}function KI(e,t,i){var r=t.pendingProps,n=r.revealOrder,s=r.tail;if(dn(e,t,r.children,i),r=Ui.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dT(e,i,t);else if(e.tag===19)dT(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pi(Ui,r),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&N0(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),Ux(t,!1,n,i,s);break;case"backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&N0(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}Ux(t,!0,i,null,s);break;case"together":Ux(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),bu|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Xe(153));if(t.child!==null){for(e=t.child,i=rc(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=rc(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function dU(e,t,i){switch(t.tag){case 3:YI(t),gh();break;case 5:_I(t);break;case 1:Rn(t.type)&&P0(t);break;case 4:KE(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;Pi(L0,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Pi(Ui,Ui.current&1),t.flags|=128,null):i&t.child.childLanes?QI(e,t,i):(Pi(Ui,Ui.current&1),e=qa(e,t,i),e!==null?e.sibling:null);Pi(Ui,Ui.current&1);break;case 19:if(r=(i&t.childLanes)!==0,e.flags&128){if(r)return KI(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Pi(Ui,Ui.current),r)break;return null;case 22:case 23:return t.lanes=0,qI(e,t,i)}return qa(e,t,i)}var ZI,AS,$I,JI;ZI=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};AS=function(){};$I=function(e,t,i,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,iu(Ko.current);var s=null;switch(i){case"input":n=Xb(e,n),r=Xb(e,r),s=[];break;case"select":n=Gi({},n,{value:void 0}),r=Gi({},r,{value:void 0}),s=[];break;case"textarea":n=Kb(e,n),r=Kb(e,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=T0)}$b(i,r);var o;i=null;for(c in n)if(!r.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var a=n[c];for(o in a)a.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Np.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=n!=null?n[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(i||(i={}),i[o]=l[o])}else i||(s||(s=[]),s.push(c,i)),i=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Np.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ii("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}i&&(s=s||[]).push("style",i);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};JI=function(e,t,i,r){i!==r&&(t.flags|=4)};function wf(e,t){if(!Fi)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vr(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function hU(e,t,i){var r=t.pendingProps;switch(GE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(t),null;case 1:return Rn(t.type)&&M0(),Vr(t),null;case 3:return r=t.stateNode,yh(),ki(In),ki(Jr),$E(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Sg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ao!==null&&(IS(ao),ao=null))),AS(e,t),Vr(t),null;case 5:ZE(t);var n=iu(Xp.current);if(i=t.type,e!==null&&t.stateNode!=null)$I(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Xe(166));return Vr(t),null}if(e=iu(Ko.current),Sg(t)){r=t.stateNode,i=t.type;var s=t.memoizedProps;switch(r[Fo]=t,r[Wp]=s,e=(t.mode&1)!==0,i){case"dialog":Ii("cancel",r),Ii("close",r);break;case"iframe":case"object":case"embed":Ii("load",r);break;case"video":case"audio":for(n=0;n<ep.length;n++)Ii(ep[n],r);break;case"source":Ii("error",r);break;case"img":case"image":case"link":Ii("error",r),Ii("load",r);break;case"details":Ii("toggle",r);break;case"input":wC(r,s),Ii("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ii("invalid",r);break;case"textarea":SC(r,s),Ii("invalid",r)}$b(i,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&bg(r.textContent,a,e),n=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bg(r.textContent,a,e),n=["children",""+a]):Np.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ii("scroll",r)}switch(i){case"input":fg(r),bC(r,s,!0);break;case"textarea":fg(r),_C(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=T0)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=CL(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(i,{is:r.is}):(e=o.createElement(i),i==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,i),e[Fo]=t,e[Wp]=r,ZI(e,t,!1,!1),t.stateNode=e;e:{switch(o=Jb(i,r),i){case"dialog":Ii("cancel",e),Ii("close",e),n=r;break;case"iframe":case"object":case"embed":Ii("load",e),n=r;break;case"video":case"audio":for(n=0;n<ep.length;n++)Ii(ep[n],e);n=r;break;case"source":Ii("error",e),n=r;break;case"img":case"image":case"link":Ii("error",e),Ii("load",e),n=r;break;case"details":Ii("toggle",e),n=r;break;case"input":wC(e,r),n=Xb(e,r),Ii("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=Gi({},r,{value:void 0}),Ii("invalid",e);break;case"textarea":SC(e,r),n=Kb(e,r),Ii("invalid",e);break;default:n=r}$b(i,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?PL(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&TL(e,l)):s==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&Bp(e,l):typeof l=="number"&&Bp(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Np.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ii("scroll",e):l!=null&&ME(e,s,l,o))}switch(i){case"input":fg(e),bC(e,r,!1);break;case"textarea":fg(e),_C(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cc(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Kd(e,!!r.multiple,s,!1):r.defaultValue!=null&&Kd(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=T0)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vr(t),null;case 6:if(e&&t.stateNode!=null)JI(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Xe(166));if(i=iu(Xp.current),iu(Ko.current),Sg(t)){if(r=t.stateNode,i=t.memoizedProps,r[Fo]=t,(s=r.nodeValue!==i)&&(e=rs,e!==null))switch(e.tag){case 3:bg(r.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bg(r.nodeValue,i,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[Fo]=t,t.stateNode=r}return Vr(t),null;case 13:if(ki(Ui),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fi&&Zn!==null&&t.mode&1&&!(t.flags&128))gI(),gh(),t.flags|=98560,s=!1;else if(s=Sg(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Xe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Xe(317));s[Fo]=t}else gh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vr(t),s=!1}else ao!==null&&(IS(ao),ao=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ui.current&1?wr===0&&(wr=3):u2())),t.updateQueue!==null&&(t.flags|=4),Vr(t),null);case 4:return yh(),AS(e,t),e===null&&Gp(t.stateNode.containerInfo),Vr(t),null;case 10:return XE(t.type._context),Vr(t),null;case 17:return Rn(t.type)&&M0(),Vr(t),null;case 19:if(ki(Ui),s=t.memoizedState,s===null)return Vr(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)wf(s,!1);else{if(wr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=N0(e),o!==null){for(t.flags|=128,wf(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=i,i=t.child;i!==null;)s=i,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Pi(Ui,Ui.current&1|2),t.child}e=e.sibling}s.tail!==null&&or()>wh&&(t.flags|=128,r=!0,wf(s,!1),t.lanes=4194304)}else{if(!r)if(e=N0(o),e!==null){if(t.flags|=128,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),wf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Fi)return Vr(t),null}else 2*or()-s.renderingStartTime>wh&&i!==1073741824&&(t.flags|=128,r=!0,wf(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(i=s.last,i!==null?i.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=or(),t.sibling=null,i=Ui.current,Pi(Ui,r?i&1|2:i&1),t):(Vr(t),null);case 22:case 23:return c2(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Vn&1073741824&&(Vr(t),t.subtreeFlags&6&&(t.flags|=8192)):Vr(t),null;case 24:return null;case 25:return null}throw Error(Xe(156,t.tag))}function fU(e,t){switch(GE(t),t.tag){case 1:return Rn(t.type)&&M0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yh(),ki(In),ki(Jr),$E(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ZE(t),null;case 13:if(ki(Ui),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Xe(340));gh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ki(Ui),null;case 4:return yh(),null;case 10:return XE(t.type._context),null;case 22:case 23:return c2(),null;case 24:return null;default:return null}}var Ag=!1,Yr=!1,pU=typeof WeakSet=="function"?WeakSet:Set,dt=null;function kd(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){Yi(e,t,r)}else i.current=null}function CS(e,t,i){try{i()}catch(r){Yi(e,t,r)}}var hT=!1;function mU(e,t){if(cS=E0,e=rI(),jE(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var n=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var o=0,a=-1,l=-1,c=0,d=0,u=e,h=null;t:for(;;){for(var f;u!==i||n!==0&&u.nodeType!==3||(a=o+n),u!==s||r!==0&&u.nodeType!==3||(l=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(f=u.firstChild)!==null;)h=u,u=f;for(;;){if(u===e)break t;if(h===i&&++c===n&&(a=o),h===s&&++d===r&&(l=o),(f=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=f}i=a===-1||l===-1?null:{start:a,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(uS={focusedElem:e,selectionRange:i},E0=!1,dt=t;dt!==null;)if(t=dt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,dt=e;else for(;dt!==null;){t=dt;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,g=m.memoizedState,p=t.stateNode,x=p.getSnapshotBeforeUpdate(t.elementType===t.type?v:so(t.type,v),g);p.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(S){Yi(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,dt=e;break}dt=t.return}return m=hT,hT=!1,m}function yp(e,t,i){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&CS(t,i,s)}n=n.next}while(n!==r)}}function t1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var r=i.create;i.destroy=r()}i=i.next}while(i!==t)}}function TS(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function eR(e){var t=e.alternate;t!==null&&(e.alternate=null,eR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fo],delete t[Wp],delete t[fS],delete t[Z5],delete t[$5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tR(e){return e.tag===5||e.tag===3||e.tag===4}function fT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function MS(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=T0));else if(r!==4&&(e=e.child,e!==null))for(MS(e,t,i),e=e.sibling;e!==null;)MS(e,t,i),e=e.sibling}function PS(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(PS(e,t,i),e=e.sibling;e!==null;)PS(e,t,i),e=e.sibling}var Dr=null,oo=!1;function dl(e,t,i){for(i=i.child;i!==null;)iR(e,t,i),i=i.sibling}function iR(e,t,i){if(Qo&&typeof Qo.onCommitFiberUnmount=="function")try{Qo.onCommitFiberUnmount(Xy,i)}catch{}switch(i.tag){case 5:Yr||kd(i,t);case 6:var r=Dr,n=oo;Dr=null,dl(e,t,i),Dr=r,oo=n,Dr!==null&&(oo?(e=Dr,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Dr.removeChild(i.stateNode));break;case 18:Dr!==null&&(oo?(e=Dr,i=i.stateNode,e.nodeType===8?Ix(e.parentNode,i):e.nodeType===1&&Ix(e,i),Up(e)):Ix(Dr,i.stateNode));break;case 4:r=Dr,n=oo,Dr=i.stateNode.containerInfo,oo=!0,dl(e,t,i),Dr=r,oo=n;break;case 0:case 11:case 14:case 15:if(!Yr&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&CS(i,t,o),n=n.next}while(n!==r)}dl(e,t,i);break;case 1:if(!Yr&&(kd(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(a){Yi(i,t,a)}dl(e,t,i);break;case 21:dl(e,t,i);break;case 22:i.mode&1?(Yr=(r=Yr)||i.memoizedState!==null,dl(e,t,i),Yr=r):dl(e,t,i);break;default:dl(e,t,i)}}function pT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new pU),t.forEach(function(r){var n=EU.bind(null,e,r);i.has(r)||(i.add(r),r.then(n,n))})}}function Ys(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var n=i[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Dr=a.stateNode,oo=!1;break e;case 3:Dr=a.stateNode.containerInfo,oo=!0;break e;case 4:Dr=a.stateNode.containerInfo,oo=!0;break e}a=a.return}if(Dr===null)throw Error(Xe(160));iR(s,o,n),Dr=null,oo=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(c){Yi(n,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rR(t,e),t=t.sibling}function rR(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ys(t,e),_o(e),r&4){try{yp(3,e,e.return),t1(3,e)}catch(v){Yi(e,e.return,v)}try{yp(5,e,e.return)}catch(v){Yi(e,e.return,v)}}break;case 1:Ys(t,e),_o(e),r&512&&i!==null&&kd(i,i.return);break;case 5:if(Ys(t,e),_o(e),r&512&&i!==null&&kd(i,i.return),e.flags&32){var n=e.stateNode;try{Bp(n,"")}catch(v){Yi(e,e.return,v)}}if(r&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,o=i!==null?i.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&EL(n,s),Jb(a,o);var c=Jb(a,s);for(o=0;o<l.length;o+=2){var d=l[o],u=l[o+1];d==="style"?PL(n,u):d==="dangerouslySetInnerHTML"?TL(n,u):d==="children"?Bp(n,u):ME(n,d,u,c)}switch(a){case"input":Yb(n,s);break;case"textarea":AL(n,s);break;case"select":var h=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Kd(n,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Kd(n,!!s.multiple,s.defaultValue,!0):Kd(n,!!s.multiple,s.multiple?[]:"",!1))}n[Wp]=s}catch(v){Yi(e,e.return,v)}}break;case 6:if(Ys(t,e),_o(e),r&4){if(e.stateNode===null)throw Error(Xe(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(v){Yi(e,e.return,v)}}break;case 3:if(Ys(t,e),_o(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Up(t.containerInfo)}catch(v){Yi(e,e.return,v)}break;case 4:Ys(t,e),_o(e);break;case 13:Ys(t,e),_o(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(a2=or())),r&4&&pT(e);break;case 22:if(d=i!==null&&i.memoizedState!==null,e.mode&1?(Yr=(c=Yr)||d,Ys(t,e),Yr=c):Ys(t,e),_o(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(dt=e,d=e.child;d!==null;){for(u=dt=d;dt!==null;){switch(h=dt,f=h.child,h.tag){case 0:case 11:case 14:case 15:yp(4,h,h.return);break;case 1:kd(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,i=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Yi(r,i,v)}}break;case 5:kd(h,h.return);break;case 22:if(h.memoizedState!==null){gT(u);continue}}f!==null?(f.return=h,dt=f):gT(u)}d=d.sibling}e:for(d=null,u=e;;){if(u.tag===5){if(d===null){d=u;try{n=u.stateNode,c?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ML("display",o))}catch(v){Yi(e,e.return,v)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(v){Yi(e,e.return,v)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Ys(t,e),_o(e),r&4&&pT(e);break;case 21:break;default:Ys(t,e),_o(e)}}function _o(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(tR(i)){var r=i;break e}i=i.return}throw Error(Xe(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Bp(n,""),r.flags&=-33);var s=fT(e);PS(e,s,n);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fT(e);MS(e,a,o);break;default:throw Error(Xe(161))}}catch(l){Yi(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gU(e,t,i){dt=e,nR(e)}function nR(e,t,i){for(var r=(e.mode&1)!==0;dt!==null;){var n=dt,s=n.child;if(n.tag===22&&r){var o=n.memoizedState!==null||Ag;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||Yr;a=Ag;var c=Yr;if(Ag=o,(Yr=l)&&!c)for(dt=n;dt!==null;)o=dt,l=o.child,o.tag===22&&o.memoizedState!==null?vT(n):l!==null?(l.return=o,dt=l):vT(n);for(;s!==null;)dt=s,nR(s),s=s.sibling;dt=n,Ag=a,Yr=c}mT(e)}else n.subtreeFlags&8772&&s!==null?(s.return=n,dt=s):mT(e)}}function mT(e){for(;dt!==null;){var t=dt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Yr||t1(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Yr)if(i===null)r.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:so(t.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&$C(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}$C(t,o,i)}break;case 5:var a=t.stateNode;if(i===null&&t.flags&4){i=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&Up(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}Yr||t.flags&512&&TS(t)}catch(h){Yi(t,t.return,h)}}if(t===e){dt=null;break}if(i=t.sibling,i!==null){i.return=t.return,dt=i;break}dt=t.return}}function gT(e){for(;dt!==null;){var t=dt;if(t===e){dt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,dt=i;break}dt=t.return}}function vT(e){for(;dt!==null;){var t=dt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{t1(4,t)}catch(l){Yi(t,i,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(l){Yi(t,n,l)}}var s=t.return;try{TS(t)}catch(l){Yi(t,s,l)}break;case 5:var o=t.return;try{TS(t)}catch(l){Yi(t,o,l)}}}catch(l){Yi(t,t.return,l)}if(t===e){dt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,dt=a;break}dt=t.return}}var vU=Math.ceil,z0=Ja.ReactCurrentDispatcher,s2=Ja.ReactCurrentOwner,Ds=Ja.ReactCurrentBatchConfig,ci=0,Mr=null,hr=null,Rr=0,Vn=0,zd=xc(0),wr=0,Zp=null,bu=0,i1=0,o2=0,xp=null,Cn=null,a2=0,wh=1/0,Oa=null,F0=!1,DS=null,tc=null,Cg=!1,kl=null,U0=0,wp=0,OS=null,Zv=-1,$v=0;function mn(){return ci&6?or():Zv!==-1?Zv:Zv=or()}function ic(e){return e.mode&1?ci&2&&Rr!==0?Rr&-Rr:eU.transition!==null?($v===0&&($v=jL()),$v):(e=Si,e!==0||(e=window.event,e=e===void 0?16:YL(e.type)),e):1}function po(e,t,i,r){if(50<wp)throw wp=0,OS=null,Error(Xe(185));bm(e,i,r),(!(ci&2)||e!==Mr)&&(e===Mr&&(!(ci&2)&&(i1|=i),wr===4&&Rl(e,Rr)),Nn(e,r),i===1&&ci===0&&!(t.mode&1)&&(wh=or()+500,$y&&wc()))}function Nn(e,t){var i=e.callbackNode;e5(e,t);var r=_0(e,e===Mr?Rr:0);if(r===0)i!==null&&CC(i),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(i!=null&&CC(i),t===1)e.tag===0?J5(yT.bind(null,e)):fI(yT.bind(null,e)),Q5(function(){!(ci&6)&&wc()}),i=null;else{switch(HL(r)){case 1:i=IE;break;case 4:i=FL;break;case 16:i=S0;break;case 536870912:i=UL;break;default:i=S0}i=hR(i,sR.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function sR(e,t){if(Zv=-1,$v=0,ci&6)throw Error(Xe(327));var i=e.callbackNode;if(th()&&e.callbackNode!==i)return null;var r=_0(e,e===Mr?Rr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=j0(e,r);else{t=r;var n=ci;ci|=2;var s=aR();(Mr!==e||Rr!==t)&&(Oa=null,wh=or()+500,lu(e,t));do try{wU();break}catch(a){oR(e,a)}while(1);qE(),z0.current=s,ci=n,hr!==null?t=0:(Mr=null,Rr=0,t=wr)}if(t!==0){if(t===2&&(n=nS(e),n!==0&&(r=n,t=LS(e,n))),t===1)throw i=Zp,lu(e,0),Rl(e,r),Nn(e,or()),i;if(t===6)Rl(e,r);else{if(n=e.current.alternate,!(r&30)&&!yU(n)&&(t=j0(e,r),t===2&&(s=nS(e),s!==0&&(r=s,t=LS(e,s))),t===1))throw i=Zp,lu(e,0),Rl(e,r),Nn(e,or()),i;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(Xe(345));case 2:Hc(e,Cn,Oa);break;case 3:if(Rl(e,r),(r&130023424)===r&&(t=a2+500-or(),10<t)){if(_0(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){mn(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=hS(Hc.bind(null,e,Cn,Oa),t);break}Hc(e,Cn,Oa);break;case 4:if(Rl(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var o=31-fo(r);s=1<<o,o=t[o],o>n&&(n=o),r&=~s}if(r=n,r=or()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vU(r/1960))-r,10<r){e.timeoutHandle=hS(Hc.bind(null,e,Cn,Oa),r);break}Hc(e,Cn,Oa);break;case 5:Hc(e,Cn,Oa);break;default:throw Error(Xe(329))}}}return Nn(e,or()),e.callbackNode===i?sR.bind(null,e):null}function LS(e,t){var i=xp;return e.current.memoizedState.isDehydrated&&(lu(e,t).flags|=256),e=j0(e,t),e!==2&&(t=Cn,Cn=i,t!==null&&IS(t)),e}function IS(e){Cn===null?Cn=e:Cn.push.apply(Cn,e)}function yU(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var n=i[r],s=n.getSnapshot;n=n.value;try{if(!go(s(),n))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rl(e,t){for(t&=~o2,t&=~i1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-fo(t),r=1<<i;e[i]=-1,t&=~r}}function yT(e){if(ci&6)throw Error(Xe(327));th();var t=_0(e,0);if(!(t&1))return Nn(e,or()),null;var i=j0(e,t);if(e.tag!==0&&i===2){var r=nS(e);r!==0&&(t=r,i=LS(e,r))}if(i===1)throw i=Zp,lu(e,0),Rl(e,t),Nn(e,or()),i;if(i===6)throw Error(Xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hc(e,Cn,Oa),Nn(e,or()),null}function l2(e,t){var i=ci;ci|=1;try{return e(t)}finally{ci=i,ci===0&&(wh=or()+500,$y&&wc())}}function Su(e){kl!==null&&kl.tag===0&&!(ci&6)&&th();var t=ci;ci|=1;var i=Ds.transition,r=Si;try{if(Ds.transition=null,Si=1,e)return e()}finally{Si=r,Ds.transition=i,ci=t,!(ci&6)&&wc()}}function c2(){Vn=zd.current,ki(zd)}function lu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Y5(i)),hr!==null)for(i=hr.return;i!==null;){var r=i;switch(GE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&M0();break;case 3:yh(),ki(In),ki(Jr),$E();break;case 5:ZE(r);break;case 4:yh();break;case 13:ki(Ui);break;case 19:ki(Ui);break;case 10:XE(r.type._context);break;case 22:case 23:c2()}i=i.return}if(Mr=e,hr=e=rc(e.current,null),Rr=Vn=t,wr=0,Zp=null,o2=i1=bu=0,Cn=xp=null,tu!==null){for(t=0;t<tu.length;t++)if(i=tu[t],r=i.interleaved,r!==null){i.interleaved=null;var n=r.next,s=i.pending;if(s!==null){var o=s.next;s.next=n,r.next=o}i.pending=r}tu=null}return e}function oR(e,t){do{var i=hr;try{if(qE(),Yv.current=k0,B0){for(var r=Hi.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}B0=!1}if(wu=0,Tr=vr=Hi=null,vp=!1,Yp=0,s2.current=null,i===null||i.return===null){wr=1,Zp=t,hr=null;break}e:{var s=e,o=i.return,a=i,l=t;if(t=Rr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=sT(o);if(f!==null){f.flags&=-257,oT(f,o,a,s,t),f.mode&1&&nT(s,c,t),t=f,l=c;var m=t.updateQueue;if(m===null){var v=new Set;v.add(l),t.updateQueue=v}else m.add(l);break e}else{if(!(t&1)){nT(s,c,t),u2();break e}l=Error(Xe(426))}}else if(Fi&&a.mode&1){var g=sT(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),oT(g,o,a,s,t),VE(xh(l,a));break e}}s=l=xh(l,a),wr!==4&&(wr=2),xp===null?xp=[s]:xp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var p=GI(s,l,t);ZC(s,p);break e;case 1:a=l;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(tc===null||!tc.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=VI(s,a,t);ZC(s,S);break e}}s=s.return}while(s!==null)}cR(i)}catch(E){t=E,hr===i&&i!==null&&(hr=i=i.return);continue}break}while(1)}function aR(){var e=z0.current;return z0.current=k0,e===null?k0:e}function u2(){(wr===0||wr===3||wr===2)&&(wr=4),Mr===null||!(bu&268435455)&&!(i1&268435455)||Rl(Mr,Rr)}function j0(e,t){var i=ci;ci|=2;var r=aR();(Mr!==e||Rr!==t)&&(Oa=null,lu(e,t));do try{xU();break}catch(n){oR(e,n)}while(1);if(qE(),ci=i,z0.current=r,hr!==null)throw Error(Xe(261));return Mr=null,Rr=0,wr}function xU(){for(;hr!==null;)lR(hr)}function wU(){for(;hr!==null&&!WF();)lR(hr)}function lR(e){var t=dR(e.alternate,e,Vn);e.memoizedProps=e.pendingProps,t===null?cR(e):hr=t,s2.current=null}function cR(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=fU(i,t),i!==null){i.flags&=32767,hr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wr=6,hr=null;return}}else if(i=hU(i,t,Vn),i!==null){hr=i;return}if(t=t.sibling,t!==null){hr=t;return}hr=t=e}while(t!==null);wr===0&&(wr=5)}function Hc(e,t,i){var r=Si,n=Ds.transition;try{Ds.transition=null,Si=1,bU(e,t,i,r)}finally{Ds.transition=n,Si=r}return null}function bU(e,t,i,r){do th();while(kl!==null);if(ci&6)throw Error(Xe(327));i=e.finishedWork;var n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Xe(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(t5(e,s),e===Mr&&(hr=Mr=null,Rr=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Cg||(Cg=!0,hR(S0,function(){return th(),null})),s=(i.flags&15990)!==0,i.subtreeFlags&15990||s){s=Ds.transition,Ds.transition=null;var o=Si;Si=1;var a=ci;ci|=4,s2.current=null,mU(e,i),rR(i,e),j5(uS),E0=!!cS,uS=cS=null,e.current=i,gU(i),qF(),ci=a,Si=o,Ds.transition=s}else e.current=i;if(Cg&&(Cg=!1,kl=e,U0=n),s=e.pendingLanes,s===0&&(tc=null),QF(i.stateNode),Nn(e,or()),t!==null)for(r=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(F0)throw F0=!1,e=DS,DS=null,e;return U0&1&&e.tag!==0&&th(),s=e.pendingLanes,s&1?e===OS?wp++:(wp=0,OS=e):wp=0,wc(),null}function th(){if(kl!==null){var e=HL(U0),t=Ds.transition,i=Si;try{if(Ds.transition=null,Si=16>e?16:e,kl===null)var r=!1;else{if(e=kl,kl=null,U0=0,ci&6)throw Error(Xe(331));var n=ci;for(ci|=4,dt=e.current;dt!==null;){var s=dt,o=s.child;if(dt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(dt=c;dt!==null;){var d=dt;switch(d.tag){case 0:case 11:case 15:yp(8,d,s)}var u=d.child;if(u!==null)u.return=d,dt=u;else for(;dt!==null;){d=dt;var h=d.sibling,f=d.return;if(eR(d),d===c){dt=null;break}if(h!==null){h.return=f,dt=h;break}dt=f}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(v!==null)}}dt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,dt=o;else e:for(;dt!==null;){if(s=dt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:yp(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,dt=p;break e}dt=s.return}}var x=e.current;for(dt=x;dt!==null;){o=dt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,dt=b;else e:for(o=x;dt!==null;){if(a=dt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:t1(9,a)}}catch(E){Yi(a,a.return,E)}if(a===o){dt=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,dt=S;break e}dt=a.return}}if(ci=n,wc(),Qo&&typeof Qo.onPostCommitFiberRoot=="function")try{Qo.onPostCommitFiberRoot(Xy,e)}catch{}r=!0}return r}finally{Si=i,Ds.transition=t}}return!1}function xT(e,t,i){t=xh(i,t),t=GI(e,t,1),e=ec(e,t,1),t=mn(),e!==null&&(bm(e,1,t),Nn(e,t))}function Yi(e,t,i){if(e.tag===3)xT(e,e,i);else for(;t!==null;){if(t.tag===3){xT(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tc===null||!tc.has(r))){e=xh(i,e),e=VI(t,e,1),t=ec(t,e,1),e=mn(),t!==null&&(bm(t,1,e),Nn(t,e));break}}t=t.return}}function SU(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),t=mn(),e.pingedLanes|=e.suspendedLanes&i,Mr===e&&(Rr&i)===i&&(wr===4||wr===3&&(Rr&130023424)===Rr&&500>or()-a2?lu(e,0):o2|=i),Nn(e,t)}function uR(e,t){t===0&&(e.mode&1?(t=gg,gg<<=1,!(gg&130023424)&&(gg=4194304)):t=1);var i=mn();e=Wa(e,t),e!==null&&(bm(e,t,i),Nn(e,i))}function _U(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),uR(e,i)}function EU(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Xe(314))}r!==null&&r.delete(t),uR(e,i)}var dR;dR=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||In.current)Dn=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Dn=!1,dU(e,t,i);Dn=!!(e.flags&131072)}else Dn=!1,Fi&&t.flags&1048576&&pI(t,O0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Kv(e,t),e=t.pendingProps;var n=mh(t,Jr.current);eh(t,i),n=e2(null,t,r,e,n,i);var s=t2();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rn(r)?(s=!0,P0(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,QE(t),n.updater=Jy,t.stateNode=n,n._reactInternals=t,xS(t,r,e,i),t=SS(null,t,r,!0,s,i)):(t.tag=0,Fi&&s&&HE(t),dn(null,t,n,i),t=t.child),t;case 16:r=t.elementType;e:{switch(Kv(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=CU(r),e=so(r,e),n){case 0:t=bS(null,t,r,e,i);break e;case 1:t=cT(null,t,r,e,i);break e;case 11:t=aT(null,t,r,e,i);break e;case 14:t=lT(null,t,r,so(r.type,e),i);break e}throw Error(Xe(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:so(r,n),bS(e,t,r,n,i);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:so(r,n),cT(e,t,r,n,i);case 3:e:{if(YI(t),e===null)throw Error(Xe(387));r=t.pendingProps,s=t.memoizedState,n=s.element,yI(e,t),R0(t,r,null,i);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=xh(Error(Xe(423)),t),t=uT(e,t,r,i,n);break e}else if(r!==n){n=xh(Error(Xe(424)),t),t=uT(e,t,r,i,n);break e}else for(Zn=Jl(t.stateNode.containerInfo.firstChild),rs=t,Fi=!0,ao=null,i=SI(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(gh(),r===n){t=qa(e,t,i);break e}dn(e,t,r,i)}t=t.child}return t;case 5:return _I(t),e===null&&gS(t),r=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,o=n.children,dS(r,n)?o=null:s!==null&&dS(r,s)&&(t.flags|=32),XI(e,t),dn(e,t,o,i),t.child;case 6:return e===null&&gS(t),null;case 13:return QI(e,t,i);case 4:return KE(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=vh(t,null,r,i):dn(e,t,r,i),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:so(r,n),aT(e,t,r,n,i);case 7:return dn(e,t,t.pendingProps,i),t.child;case 8:return dn(e,t,t.pendingProps.children,i),t.child;case 12:return dn(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,s=t.memoizedProps,o=n.value,Pi(L0,r._currentValue),r._currentValue=o,s!==null)if(go(s.value,o)){if(s.children===n.children&&!In.current){t=qa(e,t,i);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ka(-1,i&-i),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=i,l=s.alternate,l!==null&&(l.lanes|=i),vS(s.return,i,t),a.lanes|=i;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Xe(341));o.lanes|=i,a=o.alternate,a!==null&&(a.lanes|=i),vS(o,i,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}dn(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,eh(t,i),n=Ns(n),r=r(n),t.flags|=1,dn(e,t,r,i),t.child;case 14:return r=t.type,n=so(r,t.pendingProps),n=so(r.type,n),lT(e,t,r,n,i);case 15:return WI(e,t,t.type,t.pendingProps,i);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:so(r,n),Kv(e,t),t.tag=1,Rn(r)?(e=!0,P0(t)):e=!1,eh(t,i),wI(t,r,n),xS(t,r,n,i),SS(null,t,r,!0,e,i);case 19:return KI(e,t,i);case 22:return qI(e,t,i)}throw Error(Xe(156,t.tag))};function hR(e,t){return zL(e,t)}function AU(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(e,t,i,r){return new AU(e,t,i,r)}function d2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function CU(e){if(typeof e=="function")return d2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===DE)return 11;if(e===OE)return 14}return 2}function rc(e,t){var i=e.alternate;return i===null?(i=Ps(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Jv(e,t,i,r,n,s){var o=2;if(r=e,typeof e=="function")d2(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Md:return cu(i.children,n,s,t);case PE:o=8,n|=8;break;case Gb:return e=Ps(12,i,t,n|2),e.elementType=Gb,e.lanes=s,e;case Vb:return e=Ps(13,i,t,n),e.elementType=Vb,e.lanes=s,e;case Wb:return e=Ps(19,i,t,n),e.elementType=Wb,e.lanes=s,e;case bL:return r1(i,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xL:o=10;break e;case wL:o=9;break e;case DE:o=11;break e;case OE:o=14;break e;case Ml:o=16,r=null;break e}throw Error(Xe(130,e==null?e:typeof e,""))}return t=Ps(o,i,t,n),t.elementType=e,t.type=r,t.lanes=s,t}function cu(e,t,i,r){return e=Ps(7,e,r,t),e.lanes=i,e}function r1(e,t,i,r){return e=Ps(22,e,r,t),e.elementType=bL,e.lanes=i,e.stateNode={isHidden:!1},e}function jx(e,t,i){return e=Ps(6,e,null,t),e.lanes=i,e}function Hx(e,t,i){return t=Ps(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function TU(e,t,i,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sx(0),this.expirationTimes=Sx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sx(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function h2(e,t,i,r,n,s,o,a,l){return e=new TU(e,t,i,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ps(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},QE(s),e}function MU(e,t,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Td,key:r==null?null:""+r,children:e,containerInfo:t,implementation:i}}function fR(e){if(!e)return uc;e=e._reactInternals;e:{if(Ou(e)!==e||e.tag!==1)throw Error(Xe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Xe(171))}if(e.tag===1){var i=e.type;if(Rn(i))return hI(e,i,t)}return t}function pR(e,t,i,r,n,s,o,a,l){return e=h2(i,r,!0,e,n,s,o,a,l),e.context=fR(null),i=e.current,r=mn(),n=ic(i),s=ka(r,n),s.callback=t??null,ec(i,s,n),e.current.lanes=n,bm(e,n,r),Nn(e,r),e}function n1(e,t,i,r){var n=t.current,s=mn(),o=ic(n);return i=fR(i),t.context===null?t.context=i:t.pendingContext=i,t=ka(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ec(n,t,o),e!==null&&(po(e,n,o,s),Xv(e,n,o)),o}function H0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function f2(e,t){wT(e,t),(e=e.alternate)&&wT(e,t)}function PU(){return null}var mR=typeof reportError=="function"?reportError:function(e){console.error(e)};function p2(e){this._internalRoot=e}s1.prototype.render=p2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Xe(409));n1(e,t,null,null)};s1.prototype.unmount=p2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Su(function(){n1(null,e,null,null)}),t[Va]=null}};function s1(e){this._internalRoot=e}s1.prototype.unstable_scheduleHydration=function(e){if(e){var t=WL();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Il.length&&t!==0&&t<Il[i].priority;i++);Il.splice(i,0,e),i===0&&XL(e)}};function m2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bT(){}function DU(e,t,i,r,n){if(n){if(typeof r=="function"){var s=r;r=function(){var c=H0(o);s.call(c)}}var o=pR(t,r,e,0,null,!1,!1,"",bT);return e._reactRootContainer=o,e[Va]=o.current,Gp(e.nodeType===8?e.parentNode:e),Su(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var a=r;r=function(){var c=H0(l);a.call(c)}}var l=h2(e,0,!1,null,null,!1,!1,"",bT);return e._reactRootContainer=l,e[Va]=l.current,Gp(e.nodeType===8?e.parentNode:e),Su(function(){n1(t,l,i,r)}),l}function a1(e,t,i,r,n){var s=i._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var l=H0(o);a.call(l)}}n1(t,o,e,n)}else o=DU(i,t,e,n,r);return H0(o)}GL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Jf(t.pendingLanes);i!==0&&(RE(t,i|1),Nn(t,or()),!(ci&6)&&(wh=or()+500,wc()))}break;case 13:Su(function(){var r=Wa(e,1);if(r!==null){var n=mn();po(r,e,1,n)}}),f2(e,1)}};NE=function(e){if(e.tag===13){var t=Wa(e,134217728);if(t!==null){var i=mn();po(t,e,134217728,i)}f2(e,134217728)}};VL=function(e){if(e.tag===13){var t=ic(e),i=Wa(e,t);if(i!==null){var r=mn();po(i,e,t,r)}f2(e,t)}};WL=function(){return Si};qL=function(e,t){var i=Si;try{return Si=e,t()}finally{Si=i}};tS=function(e,t,i){switch(t){case"input":if(Yb(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=Zy(r);if(!n)throw Error(Xe(90));_L(r),Yb(r,n)}}}break;case"textarea":AL(e,i);break;case"select":t=i.value,t!=null&&Kd(e,!!i.multiple,t,!1)}};LL=l2;IL=Su;var OU={usingClientEntryPoint:!1,Events:[_m,Ld,Zy,DL,OL,l2]},bf={findFiberByHostInstance:eu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},LU={bundleType:bf.bundleType,version:bf.version,rendererPackageName:bf.rendererPackageName,rendererConfig:bf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=BL(e),e===null?null:e.stateNode},findFiberByHostInstance:bf.findFiberByHostInstance||PU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tg.isDisabled&&Tg.supportsFiber)try{Xy=Tg.inject(LU),Qo=Tg}catch{}}ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OU;ls.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m2(t))throw Error(Xe(200));return MU(e,t,null,i)};ls.createRoot=function(e,t){if(!m2(e))throw Error(Xe(299));var i=!1,r="",n=mR;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=h2(e,1,!1,null,null,i,!1,r,n),e[Va]=t.current,Gp(e.nodeType===8?e.parentNode:e),new p2(t)};ls.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Xe(188)):(e=Object.keys(e).join(","),Error(Xe(268,e)));return e=BL(t),e=e===null?null:e.stateNode,e};ls.flushSync=function(e){return Su(e)};ls.hydrate=function(e,t,i){if(!o1(t))throw Error(Xe(200));return a1(null,e,t,!0,i)};ls.hydrateRoot=function(e,t,i){if(!m2(e))throw Error(Xe(405));var r=i!=null&&i.hydratedSources||null,n=!1,s="",o=mR;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),t=pR(t,null,e,1,i??null,n,!1,s,o),e[Va]=t.current,Gp(e),r)for(e=0;e<r.length;e++)i=r[e],n=i._getVersion,n=n(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new s1(t)};ls.render=function(e,t,i){if(!o1(t))throw Error(Xe(200));return a1(null,e,t,!1,i)};ls.unmountComponentAtNode=function(e){if(!o1(e))throw Error(Xe(40));return e._reactRootContainer?(Su(function(){a1(null,null,e,!1,function(){e._reactRootContainer=null,e[Va]=null})}),!0):!1};ls.unstable_batchedUpdates=l2;ls.unstable_renderSubtreeIntoContainer=function(e,t,i,r){if(!o1(i))throw Error(Xe(200));if(e==null||e._reactInternals===void 0)throw Error(Xe(38));return a1(e,t,i,!1,r)};ls.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}t(),e.exports=ls})(PF);const tp=Wy(y0);var ST=y0;Ub.createRoot=ST.createRoot,Ub.hydrateRoot=ST.hydrateRoot;/**
 * @remix-run/router v1.3.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $p(){return $p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},$p.apply(this,arguments)}var zl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zl||(zl={}));const _T="popstate";function IU(e){e===void 0&&(e={});function t(r,n){let{pathname:s,search:o,hash:a}=r.location;return RS("",{pathname:s,search:o,hash:a},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function i(r,n){return typeof n=="string"?n:G0(n)}return NU(t,i,null,e)}function br(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function RU(){return Math.random().toString(36).substr(2,8)}function ET(e,t){return{usr:e.state,key:e.key,idx:t}}function RS(e,t,i,r){return i===void 0&&(i=null),$p({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Rh(t):t,{state:i,key:t&&t.key||r||RU()})}function G0(e){let{pathname:t="/",search:i="",hash:r=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Rh(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function NU(e,t,i,r){r===void 0&&(r={});let{window:n=document.defaultView,v5Compat:s=!1}=r,o=n.history,a=zl.Pop,l=null,c=d();c==null&&(c=0,o.replaceState($p({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function u(){a=zl.Pop;let g=d(),p=g==null?null:g-c;c=g,l&&l({action:a,location:v.location,delta:p})}function h(g,p){a=zl.Push;let x=RS(v.location,g,p);i&&i(x,g),c=d()+1;let b=ET(x,c),S=v.createHref(x);try{o.pushState(b,"",S)}catch{n.location.assign(S)}s&&l&&l({action:a,location:v.location,delta:1})}function f(g,p){a=zl.Replace;let x=RS(v.location,g,p);i&&i(x,g),c=d();let b=ET(x,c),S=v.createHref(x);o.replaceState(b,"",S),s&&l&&l({action:a,location:v.location,delta:0})}function m(g){let p=n.location.origin!=="null"?n.location.origin:n.location.href,x=typeof g=="string"?g:G0(g);return br(p,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,p)}let v={get action(){return a},get location(){return e(n,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(_T,u),l=g,()=>{n.removeEventListener(_T,u),l=null}},createHref(g){return t(n,g)},createURL:m,encodeLocation(g){let p=m(g);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:f,go(g){return o.go(g)}};return v}var AT;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(AT||(AT={}));function BU(e,t,i){i===void 0&&(i="/");let r=typeof t=="string"?Rh(t):t,n=yR(r.pathname||"/",i);if(n==null)return null;let s=gR(e);kU(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=qU(s[a],QU(n));return o}function gR(e,t,i,r){t===void 0&&(t=[]),i===void 0&&(i=[]),r===void 0&&(r="");let n=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(br(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=nc([r,l.relativePath]),d=i.concat(l);s.children&&s.children.length>0&&(br(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),gR(s.children,t,d,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:VU(c,s.index),routesMeta:d})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))n(s,o);else for(let l of vR(s.path))n(s,o,l)}),t}function vR(e){let t=e.split("/");if(t.length===0)return[];let[i,...r]=t,n=i.endsWith("?"),s=i.replace(/\?$/,"");if(r.length===0)return n?[s,""]:[s];let o=vR(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),n&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function kU(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:WU(t.routesMeta.map(r=>r.childrenIndex),i.routesMeta.map(r=>r.childrenIndex)))}const zU=/^:\w+$/,FU=3,UU=2,jU=1,HU=10,GU=-2,CT=e=>e==="*";function VU(e,t){let i=e.split("/"),r=i.length;return i.some(CT)&&(r+=GU),t&&(r+=UU),i.filter(n=>!CT(n)).reduce((n,s)=>n+(zU.test(s)?FU:s===""?jU:HU),r)}function WU(e,t){return e.length===t.length&&e.slice(0,-1).every((r,n)=>r===t[n])?e[e.length-1]-t[t.length-1]:0}function qU(e,t){let{routesMeta:i}=e,r={},n="/",s=[];for(let o=0;o<i.length;++o){let a=i[o],l=o===i.length-1,c=n==="/"?t:t.slice(n.length)||"/",d=XU({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let u=a.route;s.push({params:r,pathname:nc([n,d.pathname]),pathnameBase:JU(nc([n,d.pathnameBase])),route:u}),d.pathnameBase!=="/"&&(n=nc([n,d.pathnameBase]))}return s}function XU(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,r]=YU(e.path,e.caseSensitive,e.end),n=t.match(i);if(!n)return null;let s=n[0],o=s.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:r.reduce((c,d,u)=>{if(d==="*"){let h=a[u]||"";o=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return c[d]=KU(a[u]||"",d),c},{}),pathname:s,pathnameBase:o,pattern:e}}function YU(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),g2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),r]}function QU(e){try{return decodeURI(e)}catch(t){return g2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function KU(e,t){try{return decodeURIComponent(e)}catch(i){return g2(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+i+").")),e}}function yR(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,r=e.charAt(i);return r&&r!=="/"?null:e.slice(i)||"/"}function g2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ZU(e,t){t===void 0&&(t="/");let{pathname:i,search:r="",hash:n=""}=typeof e=="string"?Rh(e):e;return{pathname:i?i.startsWith("/")?i:$U(i,t):t,search:ej(r),hash:tj(n)}}function $U(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?i.length>1&&i.pop():n!=="."&&i.push(n)}),i.length>1?i.join("/"):"/"}function Gx(e,t,i,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xR(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function wR(e,t,i,r){r===void 0&&(r=!1);let n;typeof e=="string"?n=Rh(e):(n=$p({},e),br(!n.pathname||!n.pathname.includes("?"),Gx("?","pathname","search",n)),br(!n.pathname||!n.pathname.includes("#"),Gx("#","pathname","hash",n)),br(!n.search||!n.search.includes("#"),Gx("#","search","hash",n)));let s=e===""||n.pathname==="",o=s?"/":n.pathname,a;if(r||o==null)a=i;else{let u=t.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),u-=1;n.pathname=h.join("/")}a=u>=0?t[u]:"/"}let l=ZU(n,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&i.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const nc=e=>e.join("/").replace(/\/\/+/g,"/"),JU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ej=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,tj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ij(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const rj=["post","put","patch","delete"];[...rj];/**
 * React Router v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},NS.apply(this,arguments)}function nj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const sj=typeof Object.is=="function"?Object.is:nj,{useState:oj,useEffect:aj,useLayoutEffect:lj,useDebugValue:cj}=Fb;function uj(e,t,i){const r=t(),[{inst:n},s]=oj({inst:{value:r,getSnapshot:t}});return lj(()=>{n.value=r,n.getSnapshot=t,Vx(n)&&s({inst:n})},[e,r,t]),aj(()=>(Vx(n)&&s({inst:n}),e(()=>{Vx(n)&&s({inst:n})})),[e]),cj(r),r}function Vx(e){const t=e.getSnapshot,i=e.value;try{const r=t();return!sj(i,r)}catch{return!0}}function dj(e,t,i){return t()}const hj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fj=!hj,pj=fj?dj:uj;"useSyncExternalStore"in Fb&&(e=>e.useSyncExternalStore)(Fb);const bR=te.createContext(null),v2=te.createContext(null),Am=te.createContext(null),l1=te.createContext(null),Lu=te.createContext({outlet:null,matches:[]}),SR=te.createContext(null);function mj(e,t){let{relative:i}=t===void 0?{}:t;Cm()||br(!1);let{basename:r,navigator:n}=te.useContext(Am),{hash:s,pathname:o,search:a}=x2(e,{relative:i}),l=o;return r!=="/"&&(l=o==="/"?r:nc([r,o])),n.createHref({pathname:l,search:a,hash:s})}function Cm(){return te.useContext(l1)!=null}function Tm(){return Cm()||br(!1),te.useContext(l1).location}function y2(){Cm()||br(!1);let{basename:e,navigator:t}=te.useContext(Am),{matches:i}=te.useContext(Lu),{pathname:r}=Tm(),n=JSON.stringify(xR(i).map(a=>a.pathnameBase)),s=te.useRef(!1);return te.useEffect(()=>{s.current=!0}),te.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){t.go(a);return}let c=wR(a,JSON.parse(n),r,l.relative==="path");e!=="/"&&(c.pathname=c.pathname==="/"?e:nc([e,c.pathname])),(l.replace?t.replace:t.push)(c,l.state,l)},[e,t,n,r])}function _R(){let{matches:e}=te.useContext(Lu),t=e[e.length-1];return t?t.params:{}}function x2(e,t){let{relative:i}=t===void 0?{}:t,{matches:r}=te.useContext(Lu),{pathname:n}=Tm(),s=JSON.stringify(xR(r).map(o=>o.pathnameBase));return te.useMemo(()=>wR(e,JSON.parse(s),n,i==="path"),[e,s,n,i])}function gj(e,t){Cm()||br(!1);let{navigator:i}=te.useContext(Am),r=te.useContext(v2),{matches:n}=te.useContext(Lu),s=n[n.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=Tm(),c;if(t){var d;let v=typeof t=="string"?Rh(t):t;a==="/"||(d=v.pathname)!=null&&d.startsWith(a)||br(!1),c=v}else c=l;let u=c.pathname||"/",h=a==="/"?u:u.slice(a.length)||"/",f=BU(e,{pathname:h}),m=wj(f&&f.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:nc([a,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:nc([a,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),n,r||void 0);return t&&m?te.createElement(l1.Provider,{value:{location:NS({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:zl.Pop}},m):m}function vj(){let e=Ej(),t=ij(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return te.createElement(te.Fragment,null,te.createElement("h2",null,"Unexpected Application Error!"),te.createElement("h3",{style:{fontStyle:"italic"}},t),i?te.createElement("pre",{style:n},i):null,s)}class yj extends te.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location?{error:t.error,location:t.location}:{error:t.error||i.error,location:i.location}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error?te.createElement(Lu.Provider,{value:this.props.routeContext},te.createElement(SR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xj(e){let{routeContext:t,match:i,children:r}=e,n=te.useContext(bR);return n&&n.static&&n.staticContext&&i.route.errorElement&&(n.staticContext._deepestRenderedBoundaryId=i.route.id),te.createElement(Lu.Provider,{value:t},r)}function wj(e,t,i){if(t===void 0&&(t=[]),e==null)if(i!=null&&i.errors)e=i.matches;else return null;let r=e,n=i==null?void 0:i.errors;if(n!=null){let s=r.findIndex(o=>o.route.id&&(n==null?void 0:n[o.route.id]));s>=0||br(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let l=o.route.id?n==null?void 0:n[o.route.id]:null,c=i?o.route.errorElement||te.createElement(vj,null):null,d=t.concat(r.slice(0,a+1)),u=()=>te.createElement(xj,{match:o,routeContext:{outlet:s,matches:d}},l?c:o.route.element!==void 0?o.route.element:s);return i&&(o.route.errorElement||a===0)?te.createElement(yj,{location:i.location,component:c,error:l,children:u(),routeContext:{outlet:null,matches:d}}):u()},null)}var TT;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(TT||(TT={}));var V0;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(V0||(V0={}));function bj(e){let t=te.useContext(v2);return t||br(!1),t}function Sj(e){let t=te.useContext(Lu);return t||br(!1),t}function _j(e){let t=Sj(),i=t.matches[t.matches.length-1];return i.route.id||br(!1),i.route.id}function Ej(){var e;let t=te.useContext(SR),i=bj(V0.UseRouteError),r=_j(V0.UseRouteError);return t||((e=i.errors)==null?void 0:e[r])}function un(e){br(!1)}function Aj(e){let{basename:t="/",children:i=null,location:r,navigationType:n=zl.Pop,navigator:s,static:o=!1}=e;Cm()&&br(!1);let a=t.replace(/^\/*/,"/"),l=te.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Rh(r));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:f="default"}=r,m=te.useMemo(()=>{let v=yR(c,a);return v==null?null:{pathname:v,search:d,hash:u,state:h,key:f}},[a,c,d,u,h,f]);return m==null?null:te.createElement(Am.Provider,{value:l},te.createElement(l1.Provider,{children:i,value:{location:m,navigationType:n}}))}function Cj(e){let{children:t,location:i}=e,r=te.useContext(bR),n=r&&!t?r.router.routes:BS(t);return gj(n,i)}var MT;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(MT||(MT={}));new Promise(()=>{});function BS(e,t){t===void 0&&(t=[]);let i=[];return te.Children.forEach(e,(r,n)=>{if(!te.isValidElement(r))return;if(r.type===te.Fragment){i.push.apply(i,BS(r.props.children,t));return}r.type!==un&&br(!1),!r.props.index||!r.props.children||br(!1);let s=[...t,n],o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(o.children=BS(r.props.children,s)),i.push(o)}),i}/**
 * React Router DOM v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},W0.apply(this,arguments)}function ER(e,t){if(e==null)return{};var i={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function Tj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Mj(e,t){return e.button===0&&(!t||t==="_self")&&!Tj(e)}const Pj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Dj=["aria-current","caseSensitive","className","end","style","to","children"];function Oj(e){let{basename:t,children:i,window:r}=e,n=te.useRef();n.current==null&&(n.current=IU({window:r,v5Compat:!0}));let s=n.current,[o,a]=te.useState({action:s.action,location:s.location});return te.useLayoutEffect(()=>s.listen(a),[s]),te.createElement(Aj,{basename:t,children:i,location:o.location,navigationType:o.action,navigator:s})}const Lj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AR=te.forwardRef(function(t,i){let{onClick:r,relative:n,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d}=t,u=ER(t,Pj),h,f=!1;if(Lj&&typeof c=="string"&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(c)){h=c;let p=new URL(window.location.href),x=c.startsWith("//")?new URL(p.protocol+c):new URL(c);x.origin===p.origin?c=x.pathname+x.search+x.hash:f=!0}let m=mj(c,{relative:n}),v=Ij(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:n});function g(p){r&&r(p),p.defaultPrevented||v(p)}return te.createElement("a",W0({},u,{href:h||m,onClick:f||s?r:g,ref:i,target:l}))}),Or=te.forwardRef(function(t,i){let{"aria-current":r="page",caseSensitive:n=!1,className:s="",end:o=!1,style:a,to:l,children:c}=t,d=ER(t,Dj),u=x2(l,{relative:d.relative}),h=Tm(),f=te.useContext(v2),{navigator:m}=te.useContext(Am),v=m.encodeLocation?m.encodeLocation(u).pathname:u.pathname,g=h.pathname,p=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(g=g.toLowerCase(),p=p?p.toLowerCase():null,v=v.toLowerCase());let x=g===v||!o&&g.startsWith(v)&&g.charAt(v.length)==="/",b=p!=null&&(p===v||!o&&p.startsWith(v)&&p.charAt(v.length)==="/"),S=x?r:void 0,E;typeof s=="function"?E=s({isActive:x,isPending:b}):E=[s,x?"active":null,b?"pending":null].filter(Boolean).join(" ");let y=typeof a=="function"?a({isActive:x,isPending:b}):a;return te.createElement(AR,W0({},d,{"aria-current":S,className:E,ref:i,style:y,to:l}),typeof c=="function"?c({isActive:x,isPending:b}):c)});var PT;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(PT||(PT={}));var DT;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DT||(DT={}));function Ij(e,t){let{target:i,replace:r,state:n,preventScrollReset:s,relative:o}=t===void 0?{}:t,a=y2(),l=Tm(),c=x2(e,{relative:o});return te.useCallback(d=>{if(Mj(d,i)){d.preventDefault();let u=r!==void 0?r:G0(l)===G0(c);a(e,{replace:u,state:n,preventScrollReset:s,relative:o})}},[l,a,c,r,n,i,e,s,o])}function CR(e,t){return function(){return e.apply(t,arguments)}}const{toString:TR}=Object.prototype,{getPrototypeOf:w2}=Object,b2=(e=>t=>{const i=TR.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),el=e=>(e=e.toLowerCase(),t=>b2(t)===e),c1=e=>t=>typeof t===e,{isArray:Nh}=Array,Jp=c1("undefined");function Rj(e){return e!==null&&!Jp(e)&&e.constructor!==null&&!Jp(e.constructor)&&dc(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const MR=el("ArrayBuffer");function Nj(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&MR(e.buffer),t}const Bj=c1("string"),dc=c1("function"),PR=c1("number"),S2=e=>e!==null&&typeof e=="object",kj=e=>e===!0||e===!1,e0=e=>{if(b2(e)!=="object")return!1;const t=w2(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},zj=el("Date"),Fj=el("File"),Uj=el("Blob"),jj=el("FileList"),Hj=e=>S2(e)&&dc(e.pipe),Gj=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||TR.call(e)===t||dc(e.toString)&&e.toString()===t)},Vj=el("URLSearchParams"),Wj=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Mm(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let r,n;if(typeof e!="object"&&(e=[e]),Nh(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const s=i?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(r=0;r<o;r++)a=s[r],t.call(null,e[a],a,e)}}function DR(e,t){t=t.toLowerCase();const i=Object.keys(e);let r=i.length,n;for(;r-- >0;)if(n=i[r],t===n.toLowerCase())return n;return null}const OR=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),LR=e=>!Jp(e)&&e!==OR;function kS(){const{caseless:e}=LR(this)&&this||{},t={},i=(r,n)=>{const s=e&&DR(t,n)||n;e0(t[s])&&e0(r)?t[s]=kS(t[s],r):e0(r)?t[s]=kS({},r):Nh(r)?t[s]=r.slice():t[s]=r};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&Mm(arguments[r],i);return t}const qj=(e,t,i,{allOwnKeys:r}={})=>(Mm(t,(n,s)=>{i&&dc(n)?e[s]=CR(n,i):e[s]=n},{allOwnKeys:r}),e),Xj=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Yj=(e,t,i,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},Qj=(e,t,i,r)=>{let n,s,o;const a={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),s=n.length;s-- >0;)o=n[s],(!r||r(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=i!==!1&&w2(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},Kj=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const r=e.indexOf(t,i);return r!==-1&&r===i},Zj=e=>{if(!e)return null;if(Nh(e))return e;let t=e.length;if(!PR(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},$j=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&w2(Uint8Array)),Jj=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const s=n.value;t.call(e,s[0],s[1])}},e6=(e,t)=>{let i;const r=[];for(;(i=e.exec(t))!==null;)r.push(i);return r},t6=el("HTMLFormElement"),i6=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,n){return r.toUpperCase()+n}),OT=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),r6=el("RegExp"),IR=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),r={};Mm(i,(n,s)=>{t(n,s,e)!==!1&&(r[s]=n)}),Object.defineProperties(e,r)},n6=e=>{IR(e,(t,i)=>{if(dc(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=e[i];if(dc(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},s6=(e,t)=>{const i={},r=n=>{n.forEach(s=>{i[s]=!0})};return Nh(e)?r(e):r(String(e).split(t)),i},o6=()=>{},a6=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Wx="abcdefghijklmnopqrstuvwxyz",LT="0123456789",RR={DIGIT:LT,ALPHA:Wx,ALPHA_DIGIT:Wx+Wx.toUpperCase()+LT},l6=(e=16,t=RR.ALPHA_DIGIT)=>{let i="";const{length:r}=t;for(;e--;)i+=t[Math.random()*r|0];return i};function c6(e){return!!(e&&dc(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const u6=e=>{const t=new Array(10),i=(r,n)=>{if(S2(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[n]=r;const s=Nh(r)?[]:{};return Mm(r,(o,a)=>{const l=i(o,n+1);!Jp(l)&&(s[a]=l)}),t[n]=void 0,s}}return r};return i(e,0)},Ue={isArray:Nh,isArrayBuffer:MR,isBuffer:Rj,isFormData:Gj,isArrayBufferView:Nj,isString:Bj,isNumber:PR,isBoolean:kj,isObject:S2,isPlainObject:e0,isUndefined:Jp,isDate:zj,isFile:Fj,isBlob:Uj,isRegExp:r6,isFunction:dc,isStream:Hj,isURLSearchParams:Vj,isTypedArray:$j,isFileList:jj,forEach:Mm,merge:kS,extend:qj,trim:Wj,stripBOM:Xj,inherits:Yj,toFlatObject:Qj,kindOf:b2,kindOfTest:el,endsWith:Kj,toArray:Zj,forEachEntry:Jj,matchAll:e6,isHTMLForm:t6,hasOwnProperty:OT,hasOwnProp:OT,reduceDescriptors:IR,freezeMethods:n6,toObjectSet:s6,toCamelCase:i6,noop:o6,toFiniteNumber:a6,findKey:DR,global:OR,isContextDefined:LR,ALPHABET:RR,generateString:l6,isSpecCompliantForm:c6,toJSONObject:u6};function ai(e,t,i,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),r&&(this.request=r),n&&(this.response=n)}Ue.inherits(ai,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ue.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const NR=ai.prototype,BR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{BR[e]={value:e}});Object.defineProperties(ai,BR);Object.defineProperty(NR,"isAxiosError",{value:!0});ai.from=(e,t,i,r,n,s)=>{const o=Object.create(NR);return Ue.toFlatObject(e,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ai.call(o,e.message,t,i,r,n),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const d6=null;function zS(e){return Ue.isPlainObject(e)||Ue.isArray(e)}function kR(e){return Ue.endsWith(e,"[]")?e.slice(0,-2):e}function IT(e,t,i){return e?e.concat(t).map(function(n,s){return n=kR(n),!i&&s?"["+n+"]":n}).join(i?".":""):t}function h6(e){return Ue.isArray(e)&&!e.some(zS)}const f6=Ue.toFlatObject(Ue,{},null,function(t){return/^is[A-Z]/.test(t)});function u1(e,t,i){if(!Ue.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=Ue.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,g){return!Ue.isUndefined(g[v])});const r=i.metaTokens,n=i.visitor||d,s=i.dots,o=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&Ue.isSpecCompliantForm(t);if(!Ue.isFunction(n))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(Ue.isDate(m))return m.toISOString();if(!l&&Ue.isBlob(m))throw new ai("Blob is not supported. Use a Buffer instead.");return Ue.isArrayBuffer(m)||Ue.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,v,g){let p=m;if(m&&!g&&typeof m=="object"){if(Ue.endsWith(v,"{}"))v=r?v:v.slice(0,-2),m=JSON.stringify(m);else if(Ue.isArray(m)&&h6(m)||(Ue.isFileList(m)||Ue.endsWith(v,"[]"))&&(p=Ue.toArray(m)))return v=kR(v),p.forEach(function(b,S){!(Ue.isUndefined(b)||b===null)&&t.append(o===!0?IT([v],S,s):o===null?v:v+"[]",c(b))}),!1}return zS(m)?!0:(t.append(IT(g,v,s),c(m)),!1)}const u=[],h=Object.assign(f6,{defaultVisitor:d,convertValue:c,isVisitable:zS});function f(m,v){if(!Ue.isUndefined(m)){if(u.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));u.push(m),Ue.forEach(m,function(p,x){(!(Ue.isUndefined(p)||p===null)&&n.call(t,p,Ue.isString(x)?x.trim():x,v,h))===!0&&f(p,v?v.concat(x):[x])}),u.pop()}}if(!Ue.isObject(e))throw new TypeError("data must be an object");return f(e),t}function RT(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function _2(e,t){this._pairs=[],e&&u1(e,this,t)}const zR=_2.prototype;zR.append=function(t,i){this._pairs.push([t,i])};zR.toString=function(t){const i=t?function(r){return t.call(this,r,RT)}:RT;return this._pairs.map(function(n){return i(n[0])+"="+i(n[1])},"").join("&")};function p6(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function FR(e,t,i){if(!t)return e;const r=i&&i.encode||p6,n=i&&i.serialize;let s;if(n?s=n(t,i):s=Ue.isURLSearchParams(t)?t.toString():new _2(t,i).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class m6{constructor(){this.handlers=[]}use(t,i,r){return this.handlers.push({fulfilled:t,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ue.forEach(this.handlers,function(r){r!==null&&t(r)})}}const NT=m6,UR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},g6=typeof URLSearchParams<"u"?URLSearchParams:_2,v6=typeof FormData<"u"?FormData:null,y6=typeof Blob<"u"?Blob:null,x6=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),w6=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Go={isBrowser:!0,classes:{URLSearchParams:g6,FormData:v6,Blob:y6},isStandardBrowserEnv:x6,isStandardBrowserWebWorkerEnv:w6,protocols:["http","https","file","blob","url","data"]};function b6(e,t){return u1(e,new Go.classes.URLSearchParams,Object.assign({visitor:function(i,r,n,s){return Go.isNode&&Ue.isBuffer(i)?(this.append(r,i.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function S6(e){return Ue.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function _6(e){const t={},i=Object.keys(e);let r;const n=i.length;let s;for(r=0;r<n;r++)s=i[r],t[s]=e[s];return t}function jR(e){function t(i,r,n,s){let o=i[s++];const a=Number.isFinite(+o),l=s>=i.length;return o=!o&&Ue.isArray(n)?n.length:o,l?(Ue.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!a):((!n[o]||!Ue.isObject(n[o]))&&(n[o]=[]),t(i,r,n[o],s)&&Ue.isArray(n[o])&&(n[o]=_6(n[o])),!a)}if(Ue.isFormData(e)&&Ue.isFunction(e.entries)){const i={};return Ue.forEachEntry(e,(r,n)=>{t(S6(r),n,i,0)}),i}return null}const E6={"Content-Type":void 0};function A6(e,t,i){if(Ue.isString(e))try{return(t||JSON.parse)(e),Ue.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(e)}const d1={transitional:UR,adapter:["xhr","http"],transformRequest:[function(t,i){const r=i.getContentType()||"",n=r.indexOf("application/json")>-1,s=Ue.isObject(t);if(s&&Ue.isHTMLForm(t)&&(t=new FormData(t)),Ue.isFormData(t))return n&&n?JSON.stringify(jR(t)):t;if(Ue.isArrayBuffer(t)||Ue.isBuffer(t)||Ue.isStream(t)||Ue.isFile(t)||Ue.isBlob(t))return t;if(Ue.isArrayBufferView(t))return t.buffer;if(Ue.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return b6(t,this.formSerializer).toString();if((a=Ue.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return u1(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||n?(i.setContentType("application/json",!1),A6(t)):t}],transformResponse:[function(t){const i=this.transitional||d1.transitional,r=i&&i.forcedJSONParsing,n=this.responseType==="json";if(t&&Ue.isString(t)&&(r&&!this.responseType||n)){const o=!(i&&i.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?ai.from(a,ai.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Go.classes.FormData,Blob:Go.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ue.forEach(["delete","get","head"],function(t){d1.headers[t]={}});Ue.forEach(["post","put","patch"],function(t){d1.headers[t]=Ue.merge(E6)});const E2=d1,C6=Ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),T6=e=>{const t={};let i,r,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),i=o.substring(0,n).trim().toLowerCase(),r=o.substring(n+1).trim(),!(!i||t[i]&&C6[i])&&(i==="set-cookie"?t[i]?t[i].push(r):t[i]=[r]:t[i]=t[i]?t[i]+", "+r:r)}),t},BT=Symbol("internals");function Sf(e){return e&&String(e).trim().toLowerCase()}function t0(e){return e===!1||e==null?e:Ue.isArray(e)?e.map(t0):String(e)}function M6(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(e);)t[r[1]]=r[2];return t}function P6(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function qx(e,t,i,r,n){if(Ue.isFunction(r))return r.call(this,t,i);if(n&&(t=i),!!Ue.isString(t)){if(Ue.isString(r))return t.indexOf(r)!==-1;if(Ue.isRegExp(r))return r.test(t)}}function D6(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,r)=>i.toUpperCase()+r)}function O6(e,t){const i=Ue.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+i,{value:function(n,s,o){return this[r].call(this,t,n,s,o)},configurable:!0})})}class h1{constructor(t){t&&this.set(t)}set(t,i,r){const n=this;function s(a,l,c){const d=Sf(l);if(!d)throw new Error("header name must be a non-empty string");const u=Ue.findKey(n,d);(!u||n[u]===void 0||c===!0||c===void 0&&n[u]!==!1)&&(n[u||l]=t0(a))}const o=(a,l)=>Ue.forEach(a,(c,d)=>s(c,d,l));return Ue.isPlainObject(t)||t instanceof this.constructor?o(t,i):Ue.isString(t)&&(t=t.trim())&&!P6(t)?o(T6(t),i):t!=null&&s(i,t,r),this}get(t,i){if(t=Sf(t),t){const r=Ue.findKey(this,t);if(r){const n=this[r];if(!i)return n;if(i===!0)return M6(n);if(Ue.isFunction(i))return i.call(this,n,r);if(Ue.isRegExp(i))return i.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=Sf(t),t){const r=Ue.findKey(this,t);return!!(r&&this[r]!==void 0&&(!i||qx(this,this[r],r,i)))}return!1}delete(t,i){const r=this;let n=!1;function s(o){if(o=Sf(o),o){const a=Ue.findKey(r,o);a&&(!i||qx(r,r[a],a,i))&&(delete r[a],n=!0)}}return Ue.isArray(t)?t.forEach(s):s(t),n}clear(t){const i=Object.keys(this);let r=i.length,n=!1;for(;r--;){const s=i[r];(!t||qx(this,this[s],s,t,!0))&&(delete this[s],n=!0)}return n}normalize(t){const i=this,r={};return Ue.forEach(this,(n,s)=>{const o=Ue.findKey(r,s);if(o){i[o]=t0(n),delete i[s];return}const a=t?D6(s):String(s).trim();a!==s&&delete i[s],i[a]=t0(n),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return Ue.forEach(this,(r,n)=>{r!=null&&r!==!1&&(i[n]=t&&Ue.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const r=new this(t);return i.forEach(n=>r.set(n)),r}static accessor(t){const r=(this[BT]=this[BT]={accessors:{}}).accessors,n=this.prototype;function s(o){const a=Sf(o);r[a]||(O6(n,o),r[a]=!0)}return Ue.isArray(t)?t.forEach(s):s(t),this}}h1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ue.freezeMethods(h1.prototype);Ue.freezeMethods(h1);const za=h1;function Xx(e,t){const i=this||E2,r=t||i,n=za.from(r.headers);let s=r.data;return Ue.forEach(e,function(a){s=a.call(i,s,n.normalize(),t?t.status:void 0)}),n.normalize(),s}function HR(e){return!!(e&&e.__CANCEL__)}function Pm(e,t,i){ai.call(this,e??"canceled",ai.ERR_CANCELED,t,i),this.name="CanceledError"}Ue.inherits(Pm,ai,{__CANCEL__:!0});function L6(e,t,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):t(new ai("Request failed with status code "+i.status,[ai.ERR_BAD_REQUEST,ai.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const I6=Go.isStandardBrowserEnv?function(){return{write:function(i,r,n,s,o,a){const l=[];l.push(i+"="+encodeURIComponent(r)),Ue.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),Ue.isString(s)&&l.push("path="+s),Ue.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(i){const r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function R6(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function N6(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function GR(e,t){return e&&!R6(t)?N6(e,t):t}const B6=Go.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let r;function n(s){let o=s;return t&&(i.setAttribute("href",o),o=i.href),i.setAttribute("href",o),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=n(window.location.href),function(o){const a=Ue.isString(o)?n(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function k6(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function z6(e,t){e=e||10;const i=new Array(e),r=new Array(e);let n=0,s=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),d=r[s];o||(o=c),i[n]=l,r[n]=c;let u=s,h=0;for(;u!==n;)h+=i[u++],u=u%e;if(n=(n+1)%e,n===s&&(s=(s+1)%e),c-o<t)return;const f=d&&c-d;return f?Math.round(h*1e3/f):void 0}}function kT(e,t){let i=0;const r=z6(50,250);return n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-i,l=r(a),c=s<=o;i=s;const d={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:n};d[t?"download":"upload"]=!0,e(d)}}const F6=typeof XMLHttpRequest<"u",U6=F6&&function(e){return new Promise(function(i,r){let n=e.data;const s=za.from(e.headers).normalize(),o=e.responseType;let a;function l(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}Ue.isFormData(n)&&(Go.isStandardBrowserEnv||Go.isStandardBrowserWebWorkerEnv)&&s.setContentType(!1);let c=new XMLHttpRequest;if(e.auth){const f=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(f+":"+m))}const d=GR(e.baseURL,e.url);c.open(e.method.toUpperCase(),FR(d,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function u(){if(!c)return;const f=za.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),v={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:f,config:e,request:c};L6(function(p){i(p),l()},function(p){r(p),l()},v),c=null}if("onloadend"in c?c.onloadend=u:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(u)},c.onabort=function(){c&&(r(new ai("Request aborted",ai.ECONNABORTED,e,c)),c=null)},c.onerror=function(){r(new ai("Network Error",ai.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let m=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const v=e.transitional||UR;e.timeoutErrorMessage&&(m=e.timeoutErrorMessage),r(new ai(m,v.clarifyTimeoutError?ai.ETIMEDOUT:ai.ECONNABORTED,e,c)),c=null},Go.isStandardBrowserEnv){const f=(e.withCredentials||B6(d))&&e.xsrfCookieName&&I6.read(e.xsrfCookieName);f&&s.set(e.xsrfHeaderName,f)}n===void 0&&s.setContentType(null),"setRequestHeader"in c&&Ue.forEach(s.toJSON(),function(m,v){c.setRequestHeader(v,m)}),Ue.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),o&&o!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",kT(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",kT(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=f=>{c&&(r(!f||f.type?new Pm(null,e,c):f),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const h=k6(d);if(h&&Go.protocols.indexOf(h)===-1){r(new ai("Unsupported protocol "+h+":",ai.ERR_BAD_REQUEST,e));return}c.send(n||null)})},i0={http:d6,xhr:U6};Ue.forEach(i0,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const j6={getAdapter:e=>{e=Ue.isArray(e)?e:[e];const{length:t}=e;let i,r;for(let n=0;n<t&&(i=e[n],!(r=Ue.isString(i)?i0[i.toLowerCase()]:i));n++);if(!r)throw r===!1?new ai(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Ue.hasOwnProp(i0,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!Ue.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:i0};function Yx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pm(null,e)}function zT(e){return Yx(e),e.headers=za.from(e.headers),e.data=Xx.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),j6.getAdapter(e.adapter||E2.adapter)(e).then(function(r){return Yx(e),r.data=Xx.call(e,e.transformResponse,r),r.headers=za.from(r.headers),r},function(r){return HR(r)||(Yx(e),r&&r.response&&(r.response.data=Xx.call(e,e.transformResponse,r.response),r.response.headers=za.from(r.response.headers))),Promise.reject(r)})}const FT=e=>e instanceof za?e.toJSON():e;function bh(e,t){t=t||{};const i={};function r(c,d,u){return Ue.isPlainObject(c)&&Ue.isPlainObject(d)?Ue.merge.call({caseless:u},c,d):Ue.isPlainObject(d)?Ue.merge({},d):Ue.isArray(d)?d.slice():d}function n(c,d,u){if(Ue.isUndefined(d)){if(!Ue.isUndefined(c))return r(void 0,c,u)}else return r(c,d,u)}function s(c,d){if(!Ue.isUndefined(d))return r(void 0,d)}function o(c,d){if(Ue.isUndefined(d)){if(!Ue.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,u){if(u in t)return r(c,d);if(u in e)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>n(FT(c),FT(d),!0)};return Ue.forEach(Object.keys(e).concat(Object.keys(t)),function(d){const u=l[d]||n,h=u(e[d],t[d],d);Ue.isUndefined(h)&&u!==a||(i[d]=h)}),i}const VR="1.3.4",A2={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{A2[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const UT={};A2.transitional=function(t,i,r){function n(s,o){return"[Axios v"+VR+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(t===!1)throw new ai(n(o," has been removed"+(i?" in "+i:"")),ai.ERR_DEPRECATED);return i&&!UT[o]&&(UT[o]=!0,console.warn(n(o," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(s,o,a):!0}};function H6(e,t,i){if(typeof e!="object")throw new ai("options must be an object",ai.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const s=r[n],o=t[s];if(o){const a=e[s],l=a===void 0||o(a,s,e);if(l!==!0)throw new ai("option "+s+" must be "+l,ai.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new ai("Unknown option "+s,ai.ERR_BAD_OPTION)}}const FS={assertOptions:H6,validators:A2},hl=FS.validators;class q0{constructor(t){this.defaults=t,this.interceptors={request:new NT,response:new NT}}request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=bh(this.defaults,i);const{transitional:r,paramsSerializer:n,headers:s}=i;r!==void 0&&FS.assertOptions(r,{silentJSONParsing:hl.transitional(hl.boolean),forcedJSONParsing:hl.transitional(hl.boolean),clarifyTimeoutError:hl.transitional(hl.boolean)},!1),n!==void 0&&FS.assertOptions(n,{encode:hl.function,serialize:hl.function},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let o;o=s&&Ue.merge(s.common,s[i.method]),o&&Ue.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),i.headers=za.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(i)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let d,u=0,h;if(!l){const m=[zT.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,c),h=m.length,d=Promise.resolve(i);u<h;)d=d.then(m[u++],m[u++]);return d}h=a.length;let f=i;for(u=0;u<h;){const m=a[u++],v=a[u++];try{f=m(f)}catch(g){v.call(this,g);break}}try{d=zT.call(this,f)}catch(m){return Promise.reject(m)}for(u=0,h=c.length;u<h;)d=d.then(c[u++],c[u++]);return d}getUri(t){t=bh(this.defaults,t);const i=GR(t.baseURL,t.url);return FR(i,t.params,t.paramsSerializer)}}Ue.forEach(["delete","get","head","options"],function(t){q0.prototype[t]=function(i,r){return this.request(bh(r||{},{method:t,url:i,data:(r||{}).data}))}});Ue.forEach(["post","put","patch"],function(t){function i(r){return function(s,o,a){return this.request(bh(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}q0.prototype[t]=i(),q0.prototype[t+"Form"]=i(!0)});const r0=q0;class C2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(s){i=s});const r=this;this.promise.then(n=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](n);r._listeners=null}),this.promise.then=n=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(n);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,a){r.reason||(r.reason=new Pm(s,o,a),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new C2(function(n){t=n}),cancel:t}}}const G6=C2;function V6(e){return function(i){return e.apply(null,i)}}function W6(e){return Ue.isObject(e)&&e.isAxiosError===!0}const US={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(US).forEach(([e,t])=>{US[t]=e});const q6=US;function WR(e){const t=new r0(e),i=CR(r0.prototype.request,t);return Ue.extend(i,r0.prototype,t,{allOwnKeys:!0}),Ue.extend(i,t,null,{allOwnKeys:!0}),i.create=function(n){return WR(bh(e,n))},i}const Sr=WR(E2);Sr.Axios=r0;Sr.CanceledError=Pm;Sr.CancelToken=G6;Sr.isCancel=HR;Sr.VERSION=VR;Sr.toFormData=u1;Sr.AxiosError=ai;Sr.Cancel=Sr.CanceledError;Sr.all=function(t){return Promise.all(t)};Sr.spread=V6;Sr.isAxiosError=W6;Sr.mergeConfig=bh;Sr.AxiosHeaders=za;Sr.formToJSON=e=>jR(Ue.isHTMLForm(e)?new FormData(e):e);Sr.HttpStatusCode=q6;Sr.default=Sr;const X6=Sr,jT=[{id:"1",url:"https://pbs.twimg.com/profile_images/1595880603173650432/8h-HC-NW_400x400.jpg",nombre:"Nicolás Schurmann",lenguajes:["java","javascript","python"],area:["front","back","full"],descripcion:"Lorem, ipsum dolor sit amet consectetur adipisicing elit Mollitia nam illo praesentium aliquid molestias dolorum cum consequatur assumenda ratione perspiciatis. Officia repudiandae explicabo placeat vitae! Eos placeat optio dolorem perspiciatis?"},{id:"2",url:"https://pbs.twimg.com/profile_images/1607853006300610561/7OOGNBhV_400x400.jpg",nombre:"Estefanía Cassingena",lenguajes:["javascript","python"],area:["front"],descripcion:"Lorem, ipsum dolor sit amet consectetur adipisicing elit Mollitia nam illo praesentium aliquid molestias dolorum cum consequatur assumenda ratione perspiciatis. Officia repudiandae explicabo placeat vitae! Eos placeat optio dolorem perspiciatis?"},{id:"3",url:"https://avatars.githubusercontent.com/u/1561955?v=4",nombre:"Miguel Durán",lenguajes:["javascript"],area:["back"],descripcion:"Lorem, ipsum dolor sit amet consectetur adipisicing elit Mollitia nam illo praesentium aliquid molestias dolorum cum consequatur assumenda ratione perspiciatis. Officia repudiandae explicabo placeat vitae! Eos placeat optio dolorem perspiciatis?"},{id:"4",url:"https://images-eu.ssl-images-amazon.com/images/S/influencer-profile-image-prod/logo/kikopalomares_1572422749034_original._CR0,0,3697,3697_._FMjpg_.jpeg",nombre:"Kiko Palomares",lenguajes:["java"],area:["back"],descripcion:"Lorem, ipsum dolor sit amet consectetur adipisicing elit Mollitia nam illo praesentium aliquid molestias dolorum cum consequatur assumenda ratione perspiciatis. Officia repudiandae explicabo placeat vitae! Eos placeat optio dolorem perspiciatis?"},{id:"5",url:"https://pbs.twimg.com/media/EsQPBzHW4AIuT_o.jpg",nombre:"Ania Kubow",lenguajes:["java","javascript"],area:["back"],descripcion:"Lorem, ipsum dolor sit amet consectetur adipisicing elit Mollitia nam illo praesentium aliquid molestias dolorum cum consequatur assumenda ratione perspiciatis. Officia repudiandae explicabo placeat vitae! Eos placeat optio dolorem perspiciatis?"},{id:"6",url:"https://www.clarin.com/img/2021/12/03/L-DV5IzJN_2000x1500__1.jpg",nombre:"Hernán Panessi",lenguajes:["python"],area:["back"],descripcion:"Lorem, ipsum dolor sit amet consectetur adipisicing elit Mollitia nam illo praesentium aliquid molestias dolorum cum consequatur assumenda ratione perspiciatis. Officia repudiandae explicabo placeat vitae! Eos placeat optio dolorem perspiciatis?"},{id:"7",url:"https://avatars.githubusercontent.com/u/82165284?v=4",nombre:"Gustavo Lopez",lenguajes:["javascript"],area:["front","back","full"],descripcion:"Lorem, ipsum dolor sit amet consectetur adipisicing elit Mollitia nam illo praesentium aliquid molestias dolorum cum consequatur assumenda ratione perspiciatis. Officia repudiandae explicabo placeat vitae! Eos placeat optio dolorem perspiciatis?"},{id:"8",url:"https://avatars.githubusercontent.com/u/94326934?v=4",nombre:"Sergio Mirando",lenguajes:["java","javascript","python"],area:["front","back","full"],descripcion:"Lorem, ipsum dolor sit amet consectetur adipisicing elit Mollitia nam illo praesentium aliquid molestias dolorum cum consequatur assumenda ratione perspiciatis. Officia repudiandae explicabo placeat vitae! Eos placeat optio dolorem perspiciatis?"},{id:"9",url:"https://avatars.githubusercontent.com/u/103466022?v=4",nombre:"Andrea Paez",lenguajes:["javascript"],area:["front"],descripcion:"Lorem, ipsum dolor sit amet consectetur adipisicing elit Mollitia nam illo praesentium aliquid molestias dolorum cum consequatur assumenda ratione perspiciatis. Officia repudiandae explicabo placeat vitae! Eos placeat optio dolorem perspiciatis?"}],oa=te.createContext(),Y6=({children:e})=>{const[t,i]=te.useState(""),[r,n]=te.useState(null),[s,o]=te.useState(!1),[a,l]=te.useState(!1),[c,d]=te.useState(jT),[u,h]=te.useState(jT),[f,m]=te.useState(!1),[v,g]=te.useState(""),[p,x]=te.useState(""),[b,S]=te.useState(""),[E,y]=te.useState("");te.useEffect(()=>{X6.get("http://localhost:3600").then(A=>{g(A.data.programadores),x(A.data.frameworks),S(A.data.basedatos),y(A.data.lenguajes)}).catch(A=>console.log(A.message))},[]);const C={correo:t,setCorreo:i,clave:r,setClave:n,hamburgerDisplay:s,setHamburgerDisplay:o,filtradorDisplay:a,setFiltradorDisplay:l,coders:c,setCoders:d,freeCoders:u,setFreeCoders:h,isSaving:f,setIsSaving:m,programadores:v,frameworks:p,basedatos:b,lenguajes:E};return L(oa.Provider,{value:C,children:e})};var jS={},Q6={get exports(){return jS},set exports(e){jS=e}};/*!
* sweetalert2 v11.7.2
* Released under the MIT License.
*/(function(e,t){(function(i,r){e.exports=r()})(no,function(){var i={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const r="swal2-",n=T=>{const P={};for(const F in T)P[T[F]]=r+T[F];return P},s=n(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),o=n(["success","warning","info","question","error"]),a="SweetAlert2:",l=T=>{const P=[];for(let F=0;F<T.length;F++)P.indexOf(T[F])===-1&&P.push(T[F]);return P},c=T=>T.charAt(0).toUpperCase()+T.slice(1),d=T=>{console.warn(`${a} ${typeof T=="object"?T.join(" "):T}`)},u=T=>{console.error(`${a} ${T}`)},h=[],f=T=>{h.includes(T)||(h.push(T),d(T))},m=(T,P)=>{f(`"${T}" is deprecated and will be removed in the next major release. Please use "${P}" instead.`)},v=T=>typeof T=="function"?T():T,g=T=>T&&typeof T.toPromise=="function",p=T=>g(T)?T.toPromise():Promise.resolve(T),x=T=>T&&Promise.resolve(T)===T,b=()=>document.body.querySelector(`.${s.container}`),S=T=>{const P=b();return P?P.querySelector(T):null},E=T=>S(`.${T}`),y=()=>E(s.popup),C=()=>E(s.icon),A=()=>E(s["icon-content"]),D=()=>E(s.title),I=()=>E(s["html-container"]),R=()=>E(s.image),B=()=>E(s["progress-steps"]),G=()=>E(s["validation-message"]),j=()=>S(`.${s.actions} .${s.confirm}`),ee=()=>S(`.${s.actions} .${s.cancel}`),Q=()=>S(`.${s.actions} .${s.deny}`),re=()=>E(s["input-label"]),z=()=>S(`.${s.loader}`),X=()=>E(s.actions),Y=()=>E(s.footer),K=()=>E(s["timer-progress-bar"]),Z=()=>E(s.close),V=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,fe=()=>{const T=Array.from(y().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((F,ie)=>{const Me=parseInt(F.getAttribute("tabindex")),Et=parseInt(ie.getAttribute("tabindex"));return Me>Et?1:Me<Et?-1:0}),P=Array.from(y().querySelectorAll(V)).filter(F=>F.getAttribute("tabindex")!=="-1");return l(T.concat(P)).filter(F=>Se(F))},ae=()=>xe(document.body,s.shown)&&!xe(document.body,s["toast-shown"])&&!xe(document.body,s["no-backdrop"]),ne=()=>y()&&xe(y(),s.toast),we=()=>y().hasAttribute("data-loading"),me={previousBodyPadding:null},ue=(T,P)=>{if(T.textContent="",P){const ie=new DOMParser().parseFromString(P,"text/html");Array.from(ie.querySelector("head").childNodes).forEach(Me=>{T.appendChild(Me)}),Array.from(ie.querySelector("body").childNodes).forEach(Me=>{Me instanceof HTMLVideoElement||Me instanceof HTMLAudioElement?T.appendChild(Me.cloneNode(!0)):T.appendChild(Me)})}},xe=(T,P)=>{if(!P)return!1;const F=P.split(/\s+/);for(let ie=0;ie<F.length;ie++)if(!T.classList.contains(F[ie]))return!1;return!0},Le=(T,P)=>{Array.from(T.classList).forEach(F=>{!Object.values(s).includes(F)&&!Object.values(o).includes(F)&&!Object.values(P.showClass).includes(F)&&T.classList.remove(F)})},Re=(T,P,F)=>{if(Le(T,P),P.customClass&&P.customClass[F]){if(typeof P.customClass[F]!="string"&&!P.customClass[F].forEach){d(`Invalid type of customClass.${F}! Expected string or iterable object, got "${typeof P.customClass[F]}"`);return}ye(T,P.customClass[F])}},Oe=(T,P)=>{if(!P)return null;switch(P){case"select":case"textarea":case"file":return T.querySelector(`.${s.popup} > .${s[P]}`);case"checkbox":return T.querySelector(`.${s.popup} > .${s.checkbox} input`);case"radio":return T.querySelector(`.${s.popup} > .${s.radio} input:checked`)||T.querySelector(`.${s.popup} > .${s.radio} input:first-child`);case"range":return T.querySelector(`.${s.popup} > .${s.range} input`);default:return T.querySelector(`.${s.popup} > .${s.input}`)}},We=T=>{if(T.focus(),T.type!=="file"){const P=T.value;T.value="",T.value=P}},He=(T,P,F)=>{!T||!P||(typeof P=="string"&&(P=P.split(/\s+/).filter(Boolean)),P.forEach(ie=>{Array.isArray(T)?T.forEach(Me=>{F?Me.classList.add(ie):Me.classList.remove(ie)}):F?T.classList.add(ie):T.classList.remove(ie)}))},ye=(T,P)=>{He(T,P,!0)},Qe=(T,P)=>{He(T,P,!1)},rt=(T,P)=>{const F=Array.from(T.children);for(let ie=0;ie<F.length;ie++){const Me=F[ie];if(Me instanceof HTMLElement&&xe(Me,P))return Me}},Je=(T,P,F)=>{F===`${parseInt(F)}`&&(F=parseInt(F)),F||parseInt(F)===0?T.style[P]=typeof F=="number"?`${F}px`:F:T.style.removeProperty(P)},Bt=function(T){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";T.style.display=P},lt=T=>{T.style.display="none"},J=(T,P,F,ie)=>{const Me=T.querySelector(P);Me&&(Me.style[F]=ie)},q=function(T,P){let F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";P?Bt(T,F):lt(T)},Se=T=>!!(T&&(T.offsetWidth||T.offsetHeight||T.getClientRects().length)),je=()=>!Se(j())&&!Se(Q())&&!Se(ee()),qe=T=>T.scrollHeight>T.clientHeight,ot=T=>{const P=window.getComputedStyle(T),F=parseFloat(P.getPropertyValue("animation-duration")||"0"),ie=parseFloat(P.getPropertyValue("transition-duration")||"0");return F>0||ie>0},wt=function(T){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const F=K();Se(F)&&(P&&(F.style.transition="none",F.style.width="100%"),setTimeout(()=>{F.style.transition=`width ${T/1e3}s linear`,F.style.width="0%"},10))},Pe=()=>{const T=K(),P=parseInt(window.getComputedStyle(T).width);T.style.removeProperty("transition"),T.style.width="100%";const F=parseInt(window.getComputedStyle(T).width),ie=P/F*100;T.style.width=`${ie}%`},pt=100,Be={},Ke=()=>{Be.previousActiveElement instanceof HTMLElement?(Be.previousActiveElement.focus(),Be.previousActiveElement=null):document.body&&document.body.focus()},ce=T=>new Promise(P=>{if(!T)return P();const F=window.scrollX,ie=window.scrollY;Be.restoreFocusTimeout=setTimeout(()=>{Ke(),P()},pt),window.scrollTo(F,ie)}),tt=()=>typeof window>"u"||typeof document>"u",et=`
 <div aria-labelledby="${s.title}" aria-describedby="${s["html-container"]}" class="${s.popup}" tabindex="-1">
   <button type="button" class="${s.close}"></button>
   <ul class="${s["progress-steps"]}"></ul>
   <div class="${s.icon}"></div>
   <img class="${s.image}" />
   <h2 class="${s.title}" id="${s.title}"></h2>
   <div class="${s["html-container"]}" id="${s["html-container"]}"></div>
   <input class="${s.input}" />
   <input type="file" class="${s.file}" />
   <div class="${s.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${s.select}"></select>
   <div class="${s.radio}"></div>
   <label for="${s.checkbox}" class="${s.checkbox}">
     <input type="checkbox" />
     <span class="${s.label}"></span>
   </label>
   <textarea class="${s.textarea}"></textarea>
   <div class="${s["validation-message"]}" id="${s["validation-message"]}"></div>
   <div class="${s.actions}">
     <div class="${s.loader}"></div>
     <button type="button" class="${s.confirm}"></button>
     <button type="button" class="${s.deny}"></button>
     <button type="button" class="${s.cancel}"></button>
   </div>
   <div class="${s.footer}"></div>
   <div class="${s["timer-progress-bar-container"]}">
     <div class="${s["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),ft=()=>{const T=b();return T?(T.remove(),Qe([document.documentElement,document.body],[s["no-backdrop"],s["toast-shown"],s["has-column"]]),!0):!1},$e=()=>{Be.currentInstance.resetValidationMessage()},Mt=()=>{const T=y(),P=rt(T,s.input),F=rt(T,s.file),ie=T.querySelector(`.${s.range} input`),Me=T.querySelector(`.${s.range} output`),Et=rt(T,s.select),Ti=T.querySelector(`.${s.checkbox} input`),Un=rt(T,s.textarea);P.oninput=$e,F.onchange=$e,Et.onchange=$e,Ti.onchange=$e,Un.oninput=$e,ie.oninput=()=>{$e(),Me.value=ie.value},ie.onchange=()=>{$e(),Me.value=ie.value}},Ze=T=>typeof T=="string"?document.querySelector(T):T,vt=T=>{const P=y();P.setAttribute("role",T.toast?"alert":"dialog"),P.setAttribute("aria-live",T.toast?"polite":"assertive"),T.toast||P.setAttribute("aria-modal","true")},Vt=T=>{window.getComputedStyle(T).direction==="rtl"&&ye(b(),s.rtl)},kt=T=>{const P=ft();if(tt()){u("SweetAlert2 requires document to initialize");return}const F=document.createElement("div");F.className=s.container,P&&ye(F,s["no-transition"]),ue(F,et);const ie=Ze(T.target);ie.appendChild(F),vt(T),Vt(ie),Mt()},pi=(T,P)=>{T instanceof HTMLElement?P.appendChild(T):typeof T=="object"?Fr(T,P):T&&ue(P,T)},Fr=(T,P)=>{T.jquery?Us(P,T):ue(P,T.toString())},Us=(T,P)=>{if(T.textContent="",0 in P)for(let F=0;F in P;F++)T.appendChild(P[F].cloneNode(!0));else T.appendChild(P.cloneNode(!0))},js=(()=>{if(tt())return!1;const T=document.createElement("div"),P={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const F in P)if(Object.prototype.hasOwnProperty.call(P,F)&&typeof T.style[F]<"u")return P[F];return!1})(),Hs=()=>{const T=document.createElement("div");T.className=s["scrollbar-measure"],document.body.appendChild(T);const P=T.getBoundingClientRect().width-T.clientWidth;return document.body.removeChild(T),P},Kh=(T,P)=>{const F=X(),ie=z();!P.showConfirmButton&&!P.showDenyButton&&!P.showCancelButton?lt(F):Bt(F),Re(F,P,"actions"),Ec(F,ie,P),ue(ie,P.loaderHtml),Re(ie,P,"loader")};function Ec(T,P,F){const ie=j(),Me=Q(),Et=ee();sl(ie,"confirm",F),sl(Me,"deny",F),sl(Et,"cancel",F),zu(ie,Me,Et,F),F.reverseButtons&&(F.toast?(T.insertBefore(Et,ie),T.insertBefore(Me,ie)):(T.insertBefore(Et,P),T.insertBefore(Me,P),T.insertBefore(ie,P)))}function zu(T,P,F,ie){if(!ie.buttonsStyling){Qe([T,P,F],s.styled);return}ye([T,P,F],s.styled),ie.confirmButtonColor&&(T.style.backgroundColor=ie.confirmButtonColor,ye(T,s["default-outline"])),ie.denyButtonColor&&(P.style.backgroundColor=ie.denyButtonColor,ye(P,s["default-outline"])),ie.cancelButtonColor&&(F.style.backgroundColor=ie.cancelButtonColor,ye(F,s["default-outline"]))}function sl(T,P,F){q(T,F[`show${c(P)}Button`],"inline-block"),ue(T,F[`${P}ButtonText`]),T.setAttribute("aria-label",F[`${P}ButtonAriaLabel`]),T.className=s[P],Re(T,F,`${P}Button`),ye(T,F[`${P}ButtonClass`])}const Zh=(T,P)=>{const F=Z();ue(F,P.closeButtonHtml),Re(F,P,"closeButton"),q(F,P.showCloseButton),F.setAttribute("aria-label",P.closeButtonAriaLabel)},$h=(T,P)=>{const F=b();F&&($(F,P.backdrop),Ee(F,P.position),De(F,P.grow),Re(F,P,"container"))};function $(T,P){typeof P=="string"?T.style.background=P:P||ye([document.documentElement,document.body],s["no-backdrop"])}function Ee(T,P){P in s?ye(T,s[P]):(d('The "position" parameter is not valid, defaulting to "center"'),ye(T,s.center))}function De(T,P){if(P&&typeof P=="string"){const F=`grow-${P}`;F in s&&ye(T,s[F])}}const Te=["input","file","range","select","radio","checkbox","textarea"],Fe=(T,P)=>{const F=y(),ie=i.innerParams.get(T),Me=!ie||P.input!==ie.input;Te.forEach(Et=>{const Ti=rt(F,s[Et]);zt(Et,P.inputAttributes),Ti.className=s[Et],Me&&lt(Ti)}),P.input&&(Me&&bt(P),Zt(P))},bt=T=>{if(!Oi[T.input]){u(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${T.input}"`);return}const P=qt(T.input),F=Oi[T.input](P,T);Bt(P),T.inputAutoFocus&&setTimeout(()=>{We(F)})},Rt=T=>{for(let P=0;P<T.attributes.length;P++){const F=T.attributes[P].name;["type","value","style"].includes(F)||T.removeAttribute(F)}},zt=(T,P)=>{const F=Oe(y(),T);if(F){Rt(F);for(const ie in P)F.setAttribute(ie,P[ie])}},Zt=T=>{const P=qt(T.input);typeof T.customClass=="object"&&ye(P,T.customClass.input)},yi=(T,P)=>{(!T.placeholder||P.inputPlaceholder)&&(T.placeholder=P.inputPlaceholder)},Wt=(T,P,F)=>{if(F.inputLabel){T.id=s.input;const ie=document.createElement("label"),Me=s["input-label"];ie.setAttribute("for",T.id),ie.className=Me,typeof F.customClass=="object"&&ye(ie,F.customClass.inputLabel),ie.innerText=F.inputLabel,P.insertAdjacentElement("beforebegin",ie)}},qt=T=>rt(y(),s[T]||s.input),Ci=(T,P)=>{["string","number"].includes(typeof P)?T.value=`${P}`:x(P)||d(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof P}"`)},Oi={};Oi.text=Oi.email=Oi.password=Oi.number=Oi.tel=Oi.url=(T,P)=>(Ci(T,P.inputValue),Wt(T,T,P),yi(T,P),T.type=P.input,T),Oi.file=(T,P)=>(Wt(T,T,P),yi(T,P),T),Oi.range=(T,P)=>{const F=T.querySelector("input"),ie=T.querySelector("output");return Ci(F,P.inputValue),F.type=P.input,Ci(ie,P.inputValue),Wt(F,T,P),T},Oi.select=(T,P)=>{if(T.textContent="",P.inputPlaceholder){const F=document.createElement("option");ue(F,P.inputPlaceholder),F.value="",F.disabled=!0,F.selected=!0,T.appendChild(F)}return Wt(T,T,P),T},Oi.radio=T=>(T.textContent="",T),Oi.checkbox=(T,P)=>{const F=Oe(y(),"checkbox");F.value="1",F.id=s.checkbox,F.checked=Boolean(P.inputValue);const ie=T.querySelector("span");return ue(ie,P.inputPlaceholder),F},Oi.textarea=(T,P)=>{Ci(T,P.inputValue),yi(T,P),Wt(T,T,P);const F=ie=>parseInt(window.getComputedStyle(ie).marginLeft)+parseInt(window.getComputedStyle(ie).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const ie=parseInt(window.getComputedStyle(y()).width),Me=()=>{const Et=T.offsetWidth+F(T);Et>ie?y().style.width=`${Et}px`:y().style.width=null};new MutationObserver(Me).observe(T,{attributes:!0,attributeFilter:["style"]})}}),T};const Gs=(T,P)=>{const F=I();Re(F,P,"htmlContainer"),P.html?(pi(P.html,F),Bt(F,"block")):P.text?(F.textContent=P.text,Bt(F,"block")):lt(F),Fe(T,P)},Vs=(T,P)=>{const F=Y();q(F,P.footer),P.footer&&pi(P.footer,F),Re(F,P,"footer")},bn=(T,P)=>{const F=i.innerParams.get(T),ie=C();if(F&&P.icon===F.icon){Sn(ie,P),ei(ie,P);return}if(!P.icon&&!P.iconHtml){lt(ie);return}if(P.icon&&Object.keys(o).indexOf(P.icon)===-1){u(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${P.icon}"`),lt(ie);return}Bt(ie),Sn(ie,P),ei(ie,P),ye(ie,P.showClass.icon)},ei=(T,P)=>{for(const F in o)P.icon!==F&&Qe(T,o[F]);ye(T,o[P.icon]),Ws(T,P),xo(),Re(T,P,"icon")},xo=()=>{const T=y(),P=window.getComputedStyle(T).getPropertyValue("background-color"),F=T.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let ie=0;ie<F.length;ie++)F[ie].style.backgroundColor=P},ha=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,rn=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Sn=(T,P)=>{let F=T.innerHTML,ie;P.iconHtml?ie=fa(P.iconHtml):P.icon==="success"?(ie=ha,F=F.replace(/ style=".*?"/g,"")):P.icon==="error"?ie=rn:ie=fa({question:"?",warning:"!",info:"i"}[P.icon]),F.trim()!==ie.trim()&&ue(T,ie)},Ws=(T,P)=>{if(P.iconColor){T.style.color=P.iconColor,T.style.borderColor=P.iconColor;for(const F of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])J(T,F,"backgroundColor",P.iconColor);J(T,".swal2-success-ring","borderColor",P.iconColor)}},fa=T=>`<div class="${s["icon-content"]}">${T}</div>`,ui=(T,P)=>{const F=R();if(!P.imageUrl){lt(F);return}Bt(F,""),F.setAttribute("src",P.imageUrl),F.setAttribute("alt",P.imageAlt),Je(F,"width",P.imageWidth),Je(F,"height",P.imageHeight),F.className=s.image,Re(F,P,"image")},_n=(T,P)=>{const F=b(),ie=y();P.toast?(Je(F,"width",P.width),ie.style.width="100%",ie.insertBefore(z(),C())):Je(ie,"width",P.width),Je(ie,"padding",P.padding),P.color&&(ie.style.color=P.color),P.background&&(ie.style.background=P.background),lt(G()),wo(ie,P)},wo=(T,P)=>{T.className=`${s.popup} ${Se(T)?P.showClass.popup:""}`,P.toast?(ye([document.documentElement,document.body],s["toast-shown"]),ye(T,s.toast)):ye(T,s.modal),Re(T,P,"popup"),typeof P.customClass=="string"&&ye(T,P.customClass),P.icon&&ye(T,s[`icon-${P.icon}`])},En=(T,P)=>{const F=B();if(!P.progressSteps||P.progressSteps.length===0){lt(F);return}Bt(F),F.textContent="",P.currentProgressStep>=P.progressSteps.length&&d("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),P.progressSteps.forEach((ie,Me)=>{const Et=V1(ie);if(F.appendChild(Et),Me===P.currentProgressStep&&ye(Et,s["active-progress-step"]),Me!==P.progressSteps.length-1){const Ti=Jh(P);F.appendChild(Ti)}})},V1=T=>{const P=document.createElement("li");return ye(P,s["progress-step"]),ue(P,T),P},Jh=T=>{const P=document.createElement("li");return ye(P,s["progress-step-line"]),T.progressStepsDistance&&Je(P,"width",T.progressStepsDistance),P},Gm=(T,P)=>{const F=D();q(F,P.title||P.titleText,"block"),P.title&&pi(P.title,F),P.titleText&&(F.innerText=P.titleText),Re(F,P,"title")},Ac=(T,P)=>{_n(T,P),$h(T,P),En(T,P),bn(T,P),ui(T,P),Gm(T,P),Zh(T,P),Gs(T,P),Kh(T,P),Vs(T,P),typeof P.didRender=="function"&&P.didRender(y())};function ef(){const T=i.innerParams.get(this);if(!T)return;const P=i.domCache.get(this);lt(P.loader),ne()?T.icon&&Bt(C()):W1(P),Qe([P.popup,P.actions],s.loading),P.popup.removeAttribute("aria-busy"),P.popup.removeAttribute("data-loading"),P.confirmButton.disabled=!1,P.denyButton.disabled=!1,P.cancelButton.disabled=!1}const W1=T=>{const P=T.popup.getElementsByClassName(T.loader.getAttribute("data-button-to-replace"));P.length?Bt(P[0],"inline-block"):je()&&lt(T.actions)};function q1(T){const P=i.innerParams.get(T||this),F=i.domCache.get(T||this);return F?Oe(F.popup,P.input):null}const zn=()=>Se(y()),tf=()=>j()&&j().click(),Cc=()=>Q()&&Q().click(),X1=()=>ee()&&ee().click(),ol=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),bo=T=>{T.keydownTarget&&T.keydownHandlerAdded&&(T.keydownTarget.removeEventListener("keydown",T.keydownHandler,{capture:T.keydownListenerCapture}),T.keydownHandlerAdded=!1)},pa=(T,P,F,ie)=>{bo(P),F.toast||(P.keydownHandler=Me=>qm(T,Me,ie),P.keydownTarget=F.keydownListenerCapture?window:y(),P.keydownListenerCapture=F.keydownListenerCapture,P.keydownTarget.addEventListener("keydown",P.keydownHandler,{capture:P.keydownListenerCapture}),P.keydownHandlerAdded=!0)},Tc=(T,P)=>{const F=fe();if(F.length){T=T+P,T===F.length?T=0:T===-1&&(T=F.length-1),F[T].focus();return}y().focus()},Vm=["ArrowRight","ArrowDown"],Wm=["ArrowLeft","ArrowUp"],qm=(T,P,F)=>{const ie=i.innerParams.get(T);ie&&(P.isComposing||P.keyCode===229||(ie.stopKeydownPropagation&&P.stopPropagation(),P.key==="Enter"?Mc(T,P,ie):P.key==="Tab"?Xm(P):[...Vm,...Wm].includes(P.key)?rf(P.key):P.key==="Escape"&&Y1(P,ie,F)))},Mc=(T,P,F)=>{if(v(F.allowEnterKey)&&P.target&&T.getInput()&&P.target instanceof HTMLElement&&P.target.outerHTML===T.getInput().outerHTML){if(["textarea","file"].includes(F.input))return;tf(),P.preventDefault()}},Xm=T=>{const P=T.target,F=fe();let ie=-1;for(let Me=0;Me<F.length;Me++)if(P===F[Me]){ie=Me;break}T.shiftKey?Tc(ie,-1):Tc(ie,1),T.stopPropagation(),T.preventDefault()},rf=T=>{const P=j(),F=Q(),ie=ee(),Me=[P,F,ie];if(document.activeElement instanceof HTMLElement&&!Me.includes(document.activeElement))return;const Et=Vm.includes(T)?"nextElementSibling":"previousElementSibling";let Ti=document.activeElement;for(let Un=0;Un<X().children.length;Un++){if(Ti=Ti[Et],!Ti)return;if(Ti instanceof HTMLButtonElement&&Se(Ti))break}Ti instanceof HTMLButtonElement&&Ti.focus()},Y1=(T,P,F)=>{v(P.allowEscapeKey)&&(T.preventDefault(),F(ol.esc))};var al={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Q1=()=>{Array.from(document.body.children).forEach(P=>{P===b()||P.contains(b())||(P.hasAttribute("aria-hidden")&&P.setAttribute("data-previous-aria-hidden",P.getAttribute("aria-hidden")),P.setAttribute("aria-hidden","true"))})},Ym=()=>{Array.from(document.body.children).forEach(P=>{P.hasAttribute("data-previous-aria-hidden")?(P.setAttribute("aria-hidden",P.getAttribute("data-previous-aria-hidden")),P.removeAttribute("data-previous-aria-hidden")):P.removeAttribute("aria-hidden")})},nf=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!xe(document.body,s.iosfix)){const P=document.body.scrollTop;document.body.style.top=`${P*-1}px`,ye(document.body,s.iosfix),Z1(),K1()}},K1=()=>{const T=navigator.userAgent,P=!!T.match(/iPad/i)||!!T.match(/iPhone/i),F=!!T.match(/WebKit/i);P&&F&&!T.match(/CriOS/i)&&y().scrollHeight>window.innerHeight-44&&(b().style.paddingBottom=`${44}px`)},Z1=()=>{const T=b();let P;T.ontouchstart=F=>{P=$1(F)},T.ontouchmove=F=>{P&&(F.preventDefault(),F.stopPropagation())}},$1=T=>{const P=T.target,F=b();return J1(T)||ex(T)?!1:P===F||!qe(F)&&P instanceof HTMLElement&&P.tagName!=="INPUT"&&P.tagName!=="TEXTAREA"&&!(qe(I())&&I().contains(P))},J1=T=>T.touches&&T.touches.length&&T.touches[0].touchType==="stylus",ex=T=>T.touches&&T.touches.length>1,tx=()=>{if(xe(document.body,s.iosfix)){const T=parseInt(document.body.style.top,10);Qe(document.body,s.iosfix),document.body.style.top="",document.body.scrollTop=T*-1}},ix=()=>{me.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(me.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${me.previousBodyPadding+Hs()}px`)},Qm=()=>{me.previousBodyPadding!==null&&(document.body.style.paddingRight=`${me.previousBodyPadding}px`,me.previousBodyPadding=null)};function Fu(T,P,F,ie){ne()?of(T,ie):(ce(F).then(()=>of(T,ie)),bo(Be)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(P.setAttribute("style","display:none !important"),P.removeAttribute("class"),P.innerHTML=""):P.remove(),ae()&&(Qm(),tx(),Ym()),Km()}function Km(){Qe([document.documentElement,document.body],[s.shown,s["height-auto"],s["no-backdrop"],s["toast-shown"]])}function ll(T){T=rx(T);const P=al.swalPromiseResolve.get(this),F=$m(this);this.isAwaitingPromise()?T.isDismissed||(Pc(this),P(T)):F&&P(T)}function Zm(){return!!i.awaitingPromise.get(this)}const $m=T=>{const P=y();if(!P)return!1;const F=i.innerParams.get(T);if(!F||xe(P,F.hideClass.popup))return!1;Qe(P,F.showClass.popup),ye(P,F.hideClass.popup);const ie=b();return Qe(ie,F.showClass.backdrop),ye(ie,F.hideClass.backdrop),nx(T,P,F),!0};function sf(T){const P=al.swalPromiseReject.get(this);Pc(this),P&&P(T)}const Pc=T=>{T.isAwaitingPromise()&&(i.awaitingPromise.delete(T),i.innerParams.get(T)||T._destroy())},rx=T=>typeof T>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},T),nx=(T,P,F)=>{const ie=b(),Me=js&&ot(P);typeof F.willClose=="function"&&F.willClose(P),Me?Dc(T,P,ie,F.returnFocus,F.didClose):Fu(T,ie,F.returnFocus,F.didClose)},Dc=(T,P,F,ie,Me)=>{Be.swalCloseEventFinishedCallback=Fu.bind(null,T,F,ie,Me),P.addEventListener(js,function(Et){Et.target===P&&(Be.swalCloseEventFinishedCallback(),delete Be.swalCloseEventFinishedCallback)})},of=(T,P)=>{setTimeout(()=>{typeof P=="function"&&P.bind(T.params)(),T._destroy()})};function Uu(T,P,F){const ie=i.domCache.get(T);P.forEach(Me=>{ie[Me].disabled=F})}function Jm(T,P){if(T)if(T.type==="radio"){const ie=T.parentNode.parentNode.querySelectorAll("input");for(let Me=0;Me<ie.length;Me++)ie[Me].disabled=P}else T.disabled=P}function sx(){Uu(this,["confirmButton","denyButton","cancelButton"],!1)}function ox(){Uu(this,["confirmButton","denyButton","cancelButton"],!0)}function w(){Jm(this.getInput(),!1)}function _(){Jm(this.getInput(),!0)}function M(T){const P=i.domCache.get(this),F=i.innerParams.get(this);ue(P.validationMessage,T),P.validationMessage.className=s["validation-message"],F.customClass&&F.customClass.validationMessage&&ye(P.validationMessage,F.customClass.validationMessage),Bt(P.validationMessage);const ie=this.getInput();ie&&(ie.setAttribute("aria-invalid",!0),ie.setAttribute("aria-describedby",s["validation-message"]),We(ie),ye(ie,s.inputerror))}function O(){const T=i.domCache.get(this);T.validationMessage&&lt(T.validationMessage);const P=this.getInput();P&&(P.removeAttribute("aria-invalid"),P.removeAttribute("aria-describedby"),Qe(P,s.inputerror))}const k={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},U=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],H={},le=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],se=T=>Object.prototype.hasOwnProperty.call(k,T),ve=T=>U.indexOf(T)!==-1,Ce=T=>H[T],Ge=T=>{se(T)||d(`Unknown parameter "${T}"`)},_e=T=>{le.includes(T)&&d(`The parameter "${T}" is incompatible with toasts`)},Ie=T=>{Ce(T)&&m(T,Ce(T))},yt=T=>{T.backdrop===!1&&T.allowOutsideClick&&d('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const P in T)Ge(P),T.toast&&_e(P),Ie(P)};function Ft(T){const P=y(),F=i.innerParams.get(this);if(!P||xe(P,F.hideClass.popup)){d("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const ie=mt(T),Me=Object.assign({},F,ie);Ac(this,Me),i.innerParams.set(this,Me),Object.defineProperties(this,{params:{value:Object.assign({},this.params,T),writable:!1,enumerable:!0}})}const mt=T=>{const P={};return Object.keys(T).forEach(F=>{ve(F)?P[F]=T[F]:d(`Invalid parameter to update: ${F}`)}),P};function Ji(){const T=i.domCache.get(this),P=i.innerParams.get(this);if(!P){Ur(this);return}T.popup&&Be.swalCloseEventFinishedCallback&&(Be.swalCloseEventFinishedCallback(),delete Be.swalCloseEventFinishedCallback),typeof P.didDestroy=="function"&&P.didDestroy(),Wi(this)}const Wi=T=>{Ur(T),delete T.params,delete Be.keydownHandler,delete Be.keydownTarget,delete Be.currentInstance},Ur=T=>{T.isAwaitingPromise()?(di(i,T),i.awaitingPromise.set(T,!0)):(di(al,T),di(i,T))},di=(T,P)=>{for(const F in T)T[F].delete(P)};var Nt=Object.freeze({__proto__:null,_destroy:Ji,close:ll,closeModal:ll,closePopup:ll,closeToast:ll,disableButtons:ox,disableInput:_,disableLoading:ef,enableButtons:sx,enableInput:w,getInput:q1,handleAwaitingPromise:Pc,hideLoading:ef,isAwaitingPromise:Zm,rejectPromise:sf,resetValidationMessage:O,showValidationMessage:M,update:Ft});const er=T=>{let P=y();P||new ir,P=y();const F=z();ne()?lt(C()):ni(P,T),Bt(F),P.setAttribute("data-loading","true"),P.setAttribute("aria-busy","true"),P.focus()},ni=(T,P)=>{const F=X(),ie=z();!P&&Se(j())&&(P=j()),Bt(F),P&&(lt(P),ie.setAttribute("data-button-to-replace",P.className)),ie.parentNode.insertBefore(ie,P),ye([T,F],s.loading)},Li=(T,P)=>{P.input==="select"||P.input==="radio"?ga(T,P):["text","email","number","tel","textarea"].includes(P.input)&&(g(P.inputValue)||x(P.inputValue))&&(er(j()),jr(T,P))},Oc=(T,P)=>{const F=T.getInput();if(!F)return null;switch(P.input){case"checkbox":return ju(F);case"radio":return nn(F);case"file":return ma(F);default:return P.inputAutoTrim?F.value.trim():F.value}},ju=T=>T.checked?1:0,nn=T=>T.checked?T.value:null,ma=T=>T.files.length?T.getAttribute("multiple")!==null?T.files:T.files[0]:null,ga=(T,P)=>{const F=y(),ie=Me=>{So[P.input](F,Hr(Me),P)};g(P.inputOptions)||x(P.inputOptions)?(er(j()),p(P.inputOptions).then(Me=>{T.hideLoading(),ie(Me)})):typeof P.inputOptions=="object"?ie(P.inputOptions):u(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof P.inputOptions}`)},jr=(T,P)=>{const F=T.getInput();lt(F),p(P.inputValue).then(ie=>{F.value=P.input==="number"?`${parseFloat(ie)||0}`:`${ie}`,Bt(F),F.focus(),T.hideLoading()}).catch(ie=>{u(`Error in inputValue promise: ${ie}`),F.value="",Bt(F),F.focus(),T.hideLoading()})},So={select:(T,P,F)=>{const ie=rt(T,s.select),Me=(Et,Ti,Un)=>{const sn=document.createElement("option");sn.value=Un,ue(sn,Ti),sn.selected=qs(Un,F.inputValue),Et.appendChild(sn)};P.forEach(Et=>{const Ti=Et[0],Un=Et[1];if(Array.isArray(Un)){const sn=document.createElement("optgroup");sn.label=Ti,sn.disabled=!1,ie.appendChild(sn),Un.forEach(Qu=>Me(sn,Qu[1],Qu[0]))}else Me(ie,Un,Ti)}),ie.focus()},radio:(T,P,F)=>{const ie=rt(T,s.radio);P.forEach(Et=>{const Ti=Et[0],Un=Et[1],sn=document.createElement("input"),Qu=document.createElement("label");sn.type="radio",sn.name=s.radio,sn.value=Ti,qs(Ti,F.inputValue)&&(sn.checked=!0);const gx=document.createElement("span");ue(gx,Un),gx.className=s.label,Qu.appendChild(sn),Qu.appendChild(gx),ie.appendChild(Qu)});const Me=ie.querySelectorAll("input");Me.length&&Me[0].focus()}},Hr=T=>{const P=[];return typeof Map<"u"&&T instanceof Map?T.forEach((F,ie)=>{let Me=F;typeof Me=="object"&&(Me=Hr(Me)),P.push([ie,Me])}):Object.keys(T).forEach(F=>{let ie=T[F];typeof ie=="object"&&(ie=Hr(ie)),P.push([F,ie])}),P},qs=(T,P)=>P&&P.toString()===T.toString(),eg=T=>{const P=i.innerParams.get(T);T.disableButtons(),P.input?si(T,"confirm"):cl(T,!0)},va=T=>{const P=i.innerParams.get(T);T.disableButtons(),P.returnInputValueOnDeny?si(T,"deny"):Hu(T,!1)},af=(T,P)=>{T.disableButtons(),P(ol.cancel)},si=(T,P)=>{const F=i.innerParams.get(T);if(!F.input){u(`The "input" parameter is needed to be set when using returnInputValueOn${c(P)}`);return}const ie=Oc(T,F);F.inputValidator?ya(T,ie,P):T.getInput().checkValidity()?P==="deny"?Hu(T,ie):cl(T,ie):(T.enableButtons(),T.showValidationMessage(F.validationMessage))},ya=(T,P,F)=>{const ie=i.innerParams.get(T);T.disableInput(),Promise.resolve().then(()=>p(ie.inputValidator(P,ie.validationMessage))).then(Et=>{T.enableButtons(),T.enableInput(),Et?T.showValidationMessage(Et):F==="deny"?Hu(T,P):cl(T,P)})},Hu=(T,P)=>{const F=i.innerParams.get(T||void 0);F.showLoaderOnDeny&&er(Q()),F.preDeny?(i.awaitingPromise.set(T||void 0,!0),Promise.resolve().then(()=>p(F.preDeny(P,F.validationMessage))).then(Me=>{Me===!1?(T.hideLoading(),Pc(T)):T.close({isDenied:!0,value:typeof Me>"u"?P:Me})}).catch(Me=>tg(T||void 0,Me))):T.close({isDenied:!0,value:P})},Gu=(T,P)=>{T.close({isConfirmed:!0,value:P})},tg=(T,P)=>{T.rejectPromise(P)},cl=(T,P)=>{const F=i.innerParams.get(T||void 0);F.showLoaderOnConfirm&&er(),F.preConfirm?(T.resetValidationMessage(),i.awaitingPromise.set(T||void 0,!0),Promise.resolve().then(()=>p(F.preConfirm(P,F.validationMessage))).then(Me=>{Se(G())||Me===!1?(T.hideLoading(),Pc(T)):Gu(T,typeof Me>"u"?P:Me)}).catch(Me=>tg(T||void 0,Me))):Gu(T,P)},ax=(T,P,F)=>{i.innerParams.get(T).toast?ig(T,P,F):(cx(P),Wu(P),ux(T,P,F))},ig=(T,P,F)=>{P.popup.onclick=()=>{const ie=i.innerParams.get(T);ie&&(lx(ie)||ie.timer||ie.input)||F(ol.close)}},lx=T=>T.showConfirmButton||T.showDenyButton||T.showCancelButton||T.showCloseButton;let Vu=!1;const cx=T=>{T.popup.onmousedown=()=>{T.container.onmouseup=function(P){T.container.onmouseup=void 0,P.target===T.container&&(Vu=!0)}}},Wu=T=>{T.container.onmousedown=()=>{T.popup.onmouseup=function(P){T.popup.onmouseup=void 0,(P.target===T.popup||T.popup.contains(P.target))&&(Vu=!0)}}},ux=(T,P,F)=>{P.container.onclick=ie=>{const Me=i.innerParams.get(T);if(Vu){Vu=!1;return}ie.target===P.container&&v(Me.allowOutsideClick)&&F(ol.backdrop)}},dx=T=>typeof T=="object"&&T.jquery,rg=T=>T instanceof Element||dx(T),Lc=T=>{const P={};return typeof T[0]=="object"&&!rg(T[0])?Object.assign(P,T[0]):["title","html","icon"].forEach((F,ie)=>{const Me=T[ie];typeof Me=="string"||rg(Me)?P[F]=Me:Me!==void 0&&u(`Unexpected type of ${F}! Expected "string" or "Element", got ${typeof Me}`)}),P};function hx(){const T=this;for(var P=arguments.length,F=new Array(P),ie=0;ie<P;ie++)F[ie]=arguments[ie];return new T(...F)}function lf(T){class P extends this{_main(ie,Me){return super._main(ie,Object.assign({},T,Me))}}return P}const Xs=()=>Be.timeout&&Be.timeout.getTimerLeft(),hs=()=>{if(Be.timeout)return Pe(),Be.timeout.stop()},cf=()=>{if(Be.timeout){const T=Be.timeout.start();return wt(T),T}},ng=()=>{const T=Be.timeout;return T&&(T.running?hs():cf())},sg=T=>{if(Be.timeout){const P=Be.timeout.increase(T);return wt(P,!0),P}},fx=()=>Be.timeout&&Be.timeout.isRunning();let mi=!1;const ul={};function Fn(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";ul[T]=this,mi||(document.body.addEventListener("click",An),mi=!0)}const An=T=>{for(let P=T.target;P&&P!==document;P=P.parentNode)for(const F in ul){const ie=P.getAttribute(F);if(ie){ul[F].fire({template:ie});return}}};var uf=Object.freeze({__proto__:null,argsToParams:Lc,bindClickHandler:Fn,clickCancel:X1,clickConfirm:tf,clickDeny:Cc,enableLoading:er,fire:hx,getActions:X,getCancelButton:ee,getCloseButton:Z,getConfirmButton:j,getContainer:b,getDenyButton:Q,getFocusableElements:fe,getFooter:Y,getHtmlContainer:I,getIcon:C,getIconContent:A,getImage:R,getInputLabel:re,getLoader:z,getPopup:y,getProgressSteps:B,getTimerLeft:Xs,getTimerProgressBar:K,getTitle:D,getValidationMessage:G,increaseTimer:sg,isDeprecatedParameter:Ce,isLoading:we,isTimerRunning:fx,isUpdatableParameter:ve,isValidParameter:se,isVisible:zn,mixin:lf,resumeTimer:cf,showLoading:er,stopTimer:hs,toggleTimer:ng});class og{constructor(P,F){this.callback=P,this.remaining=F,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(P){const F=this.running;return F&&this.stop(),this.remaining+=P,F&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const ag=["swal-title","swal-html","swal-footer"],px=T=>{const P=typeof T.template=="string"?document.querySelector(T.template):T.template;if(!P)return{};const F=P.content;return mx(F),Object.assign(lg(F),xa(F),df(F),cg(F),qu(F),Xu(F),hf(F,ag))},lg=T=>{const P={};return Array.from(T.querySelectorAll("swal-param")).forEach(ie=>{fs(ie,["name","value"]);const Me=ie.getAttribute("name"),Et=ie.getAttribute("value");typeof k[Me]=="boolean"?P[Me]=Et!=="false":typeof k[Me]=="object"?P[Me]=JSON.parse(Et):P[Me]=Et}),P},xa=T=>{const P={};return Array.from(T.querySelectorAll("swal-function-param")).forEach(ie=>{const Me=ie.getAttribute("name"),Et=ie.getAttribute("value");P[Me]=new Function(`return ${Et}`)()}),P},df=T=>{const P={};return Array.from(T.querySelectorAll("swal-button")).forEach(ie=>{fs(ie,["type","color","aria-label"]);const Me=ie.getAttribute("type");P[`${Me}ButtonText`]=ie.innerHTML,P[`show${c(Me)}Button`]=!0,ie.hasAttribute("color")&&(P[`${Me}ButtonColor`]=ie.getAttribute("color")),ie.hasAttribute("aria-label")&&(P[`${Me}ButtonAriaLabel`]=ie.getAttribute("aria-label"))}),P},cg=T=>{const P={},F=T.querySelector("swal-image");return F&&(fs(F,["src","width","height","alt"]),F.hasAttribute("src")&&(P.imageUrl=F.getAttribute("src")),F.hasAttribute("width")&&(P.imageWidth=F.getAttribute("width")),F.hasAttribute("height")&&(P.imageHeight=F.getAttribute("height")),F.hasAttribute("alt")&&(P.imageAlt=F.getAttribute("alt"))),P},qu=T=>{const P={},F=T.querySelector("swal-icon");return F&&(fs(F,["type","color"]),F.hasAttribute("type")&&(P.icon=F.getAttribute("type")),F.hasAttribute("color")&&(P.iconColor=F.getAttribute("color")),P.iconHtml=F.innerHTML),P},Xu=T=>{const P={},F=T.querySelector("swal-input");F&&(fs(F,["type","label","placeholder","value"]),P.input=F.getAttribute("type")||"text",F.hasAttribute("label")&&(P.inputLabel=F.getAttribute("label")),F.hasAttribute("placeholder")&&(P.inputPlaceholder=F.getAttribute("placeholder")),F.hasAttribute("value")&&(P.inputValue=F.getAttribute("value")));const ie=Array.from(T.querySelectorAll("swal-input-option"));return ie.length&&(P.inputOptions={},ie.forEach(Me=>{fs(Me,["value"]);const Et=Me.getAttribute("value"),Ti=Me.innerHTML;P.inputOptions[Et]=Ti})),P},hf=(T,P)=>{const F={};for(const ie in P){const Me=P[ie],Et=T.querySelector(Me);Et&&(fs(Et,[]),F[Me.replace(/^swal-/,"")]=Et.innerHTML.trim())}return F},mx=T=>{const P=ag.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(T.children).forEach(F=>{const ie=F.tagName.toLowerCase();P.includes(ie)||d(`Unrecognized element <${ie}>`)})},fs=(T,P)=>{Array.from(T.attributes).forEach(F=>{P.indexOf(F.name)===-1&&d([`Unrecognized attribute "${F.name}" on <${T.tagName.toLowerCase()}>.`,`${P.length?`Allowed attributes are: ${P.join(", ")}`:"To set the value, use HTML within the element."}`])})},Yu=10,ff=T=>{const P=b(),F=y();typeof T.willOpen=="function"&&T.willOpen(F);const Me=window.getComputedStyle(document.body).overflowY;he(P,F,T),setTimeout(()=>{W(P,F)},Yu),ae()&&(oe(P,T.scrollbarPadding,Me),Q1()),!ne()&&!Be.previousActiveElement&&(Be.previousActiveElement=document.activeElement),typeof T.didOpen=="function"&&setTimeout(()=>T.didOpen(F)),Qe(P,s["no-transition"])},ug=T=>{const P=y();if(T.target!==P)return;const F=b();P.removeEventListener(js,ug),F.style.overflowY="auto"},W=(T,P)=>{js&&ot(P)?(T.style.overflowY="hidden",P.addEventListener(js,ug)):T.style.overflowY="auto"},oe=(T,P,F)=>{nf(),P&&F!=="hidden"&&ix(),setTimeout(()=>{T.scrollTop=0})},he=(T,P,F)=>{ye(T,F.showClass.backdrop),P.style.setProperty("opacity","0","important"),Bt(P,"grid"),setTimeout(()=>{ye(P,F.showClass.popup),P.style.removeProperty("opacity")},Yu),ye([document.documentElement,document.body],s.shown),F.heightAuto&&F.backdrop&&!F.toast&&ye([document.documentElement,document.body],s["height-auto"])};var Ne={email:(T,P)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(T)?Promise.resolve():Promise.resolve(P||"Invalid email address"),url:(T,P)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(T)?Promise.resolve():Promise.resolve(P||"Invalid URL")};function ge(T){T.inputValidator||Object.keys(Ne).forEach(P=>{T.input===P&&(T.inputValidator=Ne[P])})}function ze(T){(!T.target||typeof T.target=="string"&&!document.querySelector(T.target)||typeof T.target!="string"&&!T.target.appendChild)&&(d('Target parameter is not valid, defaulting to "body"'),T.target="body")}function Ve(T){ge(T),T.showLoaderOnConfirm&&!T.preConfirm&&d(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),ze(T),typeof T.title=="string"&&(T.title=T.title.split(`
`).join("<br />")),kt(T)}let Ye;class nt{constructor(){if(typeof window>"u")return;Ye=this;for(var P=arguments.length,F=new Array(P),ie=0;ie<P;ie++)F[ie]=arguments[ie];const Me=Object.freeze(this.constructor.argsToParams(F));Object.defineProperties(this,{params:{value:Me,writable:!1,enumerable:!0,configurable:!0}});const Et=Ye._main(Ye.params);i.promise.set(this,Et)}_main(P){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};yt(Object.assign({},F,P)),Be.currentInstance&&(Be.currentInstance._destroy(),ae()&&Ym()),Be.currentInstance=Ye;const ie=St(P,F);Ve(ie),Object.freeze(ie),Be.timeout&&(Be.timeout.stop(),delete Be.timeout),clearTimeout(Be.restoreFocusTimeout);const Me=Pt(Ye);return Ac(Ye,ie),i.innerParams.set(Ye,ie),Ct(Ye,Me,ie)}then(P){return i.promise.get(this).then(P)}finally(P){return i.promise.get(this).finally(P)}}const Ct=(T,P,F)=>new Promise((ie,Me)=>{const Et=Ti=>{T.close({isDismissed:!0,dismiss:Ti})};al.swalPromiseResolve.set(T,ie),al.swalPromiseReject.set(T,Me),P.confirmButton.onclick=()=>{eg(T)},P.denyButton.onclick=()=>{va(T)},P.cancelButton.onclick=()=>{af(T,Et)},P.closeButton.onclick=()=>{Et(ol.close)},ax(T,P,Et),pa(T,Be,F,Et),Li(T,F),ff(F),Kt(Be,F,Et),xi(P,F),setTimeout(()=>{P.container.scrollTop=0})}),St=(T,P)=>{const F=px(T),ie=Object.assign({},k,P,F,T);return ie.showClass=Object.assign({},k.showClass,ie.showClass),ie.hideClass=Object.assign({},k.hideClass,ie.hideClass),ie},Pt=T=>{const P={popup:y(),container:b(),actions:X(),confirmButton:j(),denyButton:Q(),cancelButton:ee(),loader:z(),closeButton:Z(),validationMessage:G(),progressSteps:B()};return i.domCache.set(T,P),P},Kt=(T,P,F)=>{const ie=K();lt(ie),P.timer&&(T.timeout=new og(()=>{F("timer"),delete T.timeout},P.timer),P.timerProgressBar&&(Bt(ie),Re(ie,P,"timerProgressBar"),setTimeout(()=>{T.timeout&&T.timeout.running&&wt(P.timer)})))},xi=(T,P)=>{if(!P.toast){if(!v(P.allowEnterKey)){tr();return}Tt(T,P)||Tc(-1,1)}},Tt=(T,P)=>P.focusDeny&&Se(T.denyButton)?(T.denyButton.focus(),!0):P.focusCancel&&Se(T.cancelButton)?(T.cancelButton.focus(),!0):P.focusConfirm&&Se(T.confirmButton)?(T.confirmButton.focus(),!0):!1,tr=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const T=new Date,P=localStorage.getItem("swal-initiation");P?(T.getTime()-Date.parse(P))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const F=document.createElement("audio");F.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",F.loop=!0,document.body.appendChild(F),setTimeout(()=>{F.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${T}`)}Object.assign(nt.prototype,Nt),Object.assign(nt,uf),Object.keys(Nt).forEach(T=>{nt[T]=function(){if(Ye)return Ye[T](...arguments)}}),nt.DismissReason=ol,nt.version="11.7.2";const ir=nt;return ir.default=ir,ir}),typeof no<"u"&&no.Sweetalert2&&(no.swal=no.sweetAlert=no.Swal=no.SweetAlert=no.Sweetalert2),typeof document<"u"&&function(i,r){var n=i.createElement("style");if(i.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=r);else try{n.innerHTML=r}catch{n.innerText=r}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')})(Q6);const Mg=jS,K6="modulepreload",Z6=function(e){return"/"+e},HT={},f1=function(t,i,r){if(!i||i.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=Z6(s),s in HT)return;HT[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=n.length-1;d>=0;d--){const u=n[d];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":K6,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((d,u)=>{c.addEventListener("load",d),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};var $6=Object.create,T2=Object.defineProperty,J6=Object.getOwnPropertyDescriptor,eH=Object.getOwnPropertyNames,tH=Object.getPrototypeOf,iH=Object.prototype.hasOwnProperty,M2=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),rH=(e,t)=>{for(var i in t)T2(e,i,{get:t[i],enumerable:!0})},nH=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of eH(t))!iH.call(e,n)&&n!==i&&T2(e,n,{get:()=>t[n],enumerable:!(r=J6(t,n))||r.enumerable});return e},p1=(e,t,i)=>(i=e!=null?$6(tH(e)):{},nH(t||!e||!e.__esModule?T2(i,"default",{value:e,enumerable:!0}):i,e)),sH=M2((e,t)=>{(function(i,r){typeof e=="object"?t.exports=r():typeof define=="function"&&define.amd?define(r):i.Alea=r()})(e,function(){return i.importState=function(n){var s=new i;return s.importState(n),s},i;function i(){return function(n){var s=0,o=0,a=0,l=1;n.length==0&&(n=[+new Date]);var c=r();s=c(" "),o=c(" "),a=c(" ");for(var d=0;d<n.length;d++)s-=c(n[d]),s<0&&(s+=1),o-=c(n[d]),o<0&&(o+=1),a-=c(n[d]),a<0&&(a+=1);c=null;var u=function(){var h=2091639*s+l*23283064365386963e-26;return s=o,o=a,a=h-(l=h|0)};return u.next=u,u.uint32=function(){return u()*4294967296},u.fract53=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.version="Alea 0.9",u.args=n,u.exportState=function(){return[s,o,a,l]},u.importState=function(h){s=+h[0]||0,o=+h[1]||0,a=+h[2]||0,l=+h[3]||0},u}(Array.prototype.slice.call(arguments))}function r(){var n=4022871197,s=function(o){o=o.toString();for(var a=0;a<o.length;a++){n+=o.charCodeAt(a);var l=.02519603282416938*n;n=l>>>0,l-=n,l*=n,n=l>>>0,l-=n,n+=l*4294967296}return(n>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})}),qR=M2((e,t)=>{(function(i,r){typeof e=="object"&&typeof t<"u"?r(e):typeof define=="function"&&define.amd?define(["exports"],r):r((i=typeof globalThis<"u"?globalThis:i||self).SVDJS={})})(e,function(i){i.SVD=function(r,n,s,o,a){if(n=n===void 0||n,s=s===void 0||s,a=1e-64/(o=o||Math.pow(2,-52)),!r)throw new TypeError("Matrix a is not defined");var l,c,d,u,h,f,m,v,g,p,x,b,S=r[0].length,E=r.length;if(E<S)throw new TypeError("Invalid matrix: m < n");for(var y=[],C=[],A=[],D=n==="f"?E:S,I=p=m=0;I<E;I++)C[I]=new Array(D).fill(0);for(I=0;I<S;I++)A[I]=new Array(S).fill(0);var R,B=new Array(S).fill(0);for(I=0;I<E;I++)for(l=0;l<S;l++)C[I][l]=r[I][l];for(I=0;I<S;I++){for(y[I]=m,g=0,d=I+1,l=I;l<E;l++)g+=Math.pow(C[l][I],2);if(g<a)m=0;else for(v=(f=C[I][I])*(m=f<0?Math.sqrt(g):-Math.sqrt(g))-g,C[I][I]=f-m,l=d;l<S;l++){for(g=0,c=I;c<E;c++)g+=C[c][I]*C[c][l];for(f=g/v,c=I;c<E;c++)C[c][l]=C[c][l]+f*C[c][I]}for(B[I]=m,g=0,l=d;l<S;l++)g+=Math.pow(C[I][l],2);if(g<a)m=0;else{for(v=(f=C[I][I+1])*(m=f<0?Math.sqrt(g):-Math.sqrt(g))-g,C[I][I+1]=f-m,l=d;l<S;l++)y[l]=C[I][l]/v;for(l=d;l<E;l++){for(g=0,c=d;c<S;c++)g+=C[l][c]*C[I][c];for(c=d;c<S;c++)C[l][c]=C[l][c]+g*y[c]}}p<(x=Math.abs(B[I])+Math.abs(y[I]))&&(p=x)}if(s)for(I=S-1;0<=I;I--){if(m!==0){for(v=C[I][I+1]*m,l=d;l<S;l++)A[l][I]=C[I][l]/v;for(l=d;l<S;l++){for(g=0,c=d;c<S;c++)g+=C[I][c]*A[c][l];for(c=d;c<S;c++)A[c][l]=A[c][l]+g*A[c][I]}}for(l=d;l<S;l++)A[I][l]=0,A[l][I]=0;A[I][I]=1,m=y[I],d=I}if(n){if(n==="f")for(I=S;I<E;I++){for(l=S;l<E;l++)C[I][l]=0;C[I][I]=1}for(I=S-1;0<=I;I--){for(d=I+1,m=B[I],l=d;l<D;l++)C[I][l]=0;if(m!==0){for(v=C[I][I]*m,l=d;l<D;l++){for(g=0,c=d;c<E;c++)g+=C[c][I]*C[c][l];for(f=g/v,c=I;c<E;c++)C[c][l]=C[c][l]+f*C[c][I]}for(l=I;l<E;l++)C[l][I]=C[l][I]/m}else for(l=I;l<E;l++)C[l][I]=0;C[I][I]=C[I][I]+1}}for(o*=p,c=S-1;0<=c;c--)for(var G=0;G<50;G++){for(R=!1,d=c;0<=d;d--){if(Math.abs(y[d])<=o){R=!0;break}if(Math.abs(B[d-1])<=o)break}if(!R){for(h=0,u=d-(g=1),I=d;I<c+1&&(f=g*y[I],y[I]=h*y[I],!(Math.abs(f)<=o));I++)if(m=B[I],B[I]=Math.sqrt(f*f+m*m),h=m/(v=B[I]),g=-f/v,n)for(l=0;l<E;l++)x=C[l][u],b=C[l][I],C[l][u]=x*h+b*g,C[l][I]=-x*g+b*h}if(b=B[c],d===c){if(b<0&&(B[c]=-b,s))for(l=0;l<S;l++)A[l][c]=-A[l][c];break}for(p=B[d],f=(((x=B[c-1])-b)*(x+b)+((m=y[c-1])-(v=y[c]))*(m+v))/(2*v*x),m=Math.sqrt(f*f+1),f=((p-b)*(p+b)+v*(x/(f<0?f-m:f+m)-v))/p,I=d+(g=h=1);I<c+1;I++){if(m=y[I],x=B[I],v=g*m,m*=h,b=Math.sqrt(f*f+v*v),f=p*(h=f/(y[I-1]=b))+m*(g=v/b),m=-p*g+m*h,v=x*g,x*=h,s)for(l=0;l<S;l++)p=A[l][I-1],b=A[l][I],A[l][I-1]=p*h+b*g,A[l][I]=-p*g+b*h;if(b=Math.sqrt(f*f+v*v),f=(h=f/(B[I-1]=b))*m+(g=v/b)*x,p=-g*m+h*x,n)for(l=0;l<E;l++)x=C[l][I-1],b=C[l][I],C[l][I-1]=x*h+b*g,C[l][I]=-x*g+b*h}y[d]=0,y[c]=f,B[c]=p}for(I=0;I<S;I++)B[I]<o&&(B[I]=0);return{u:C,q:B,v:A}},i.VERSION="1.1.1",Object.defineProperty(i,"__esModule",{value:!0})})}),oH=M2(e=>{(function(){var t=function(){this.init()};t.prototype={init:function(){var u=this||i;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var h=this||i;if(u=parseFloat(u),h.ctx||d(),typeof u<"u"&&u>=0&&u<=1){if(h._volume=u,h._muted)return h;h.usingWebAudio&&h.masterGain.gain.setValueAtTime(u,i.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var m=h._howls[f]._getSoundIds(),v=0;v<m.length;v++){var g=h._howls[f]._soundById(m[v]);g&&g._node&&(g._node.volume=g._volume*u)}return h}return h._volume},mute:function(u){var h=this||i;h.ctx||d(),h._muted=u,h.usingWebAudio&&h.masterGain.gain.setValueAtTime(u?0:h._volume,i.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var m=h._howls[f]._getSoundIds(),v=0;v<m.length;v++){var g=h._howls[f]._soundById(m[v]);g&&g._node&&(g._node.muted=u?!0:g._muted)}return h},stop:function(){for(var u=this||i,h=0;h<u._howls.length;h++)u._howls[h].stop();return u},unload:function(){for(var u=this||i,h=u._howls.length-1;h>=0;h--)u._howls[h].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,d()),u},codecs:function(u){return(this||i)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||i;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var h=new Audio;typeof h.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var h=new Audio;h.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||i,h=null;try{h=typeof Audio<"u"?new Audio:null}catch{return u}if(!h||typeof h.canPlayType!="function")return u;var f=h.canPlayType("audio/mpeg;").replace(/^no$/,""),m=u._navigator?u._navigator.userAgent:"",v=m.match(/OPR\/([0-6].)/g),g=v&&parseInt(v[0].split("/")[1],10)<33,p=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,x=m.match(/Version\/(.*?) /),b=p&&x&&parseInt(x[1],10)<15;return u._codecs={mp3:!!(!g&&(f||h.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(h.canPlayType('audio/wav; codecs="1"')||h.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!h.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(h.canPlayType("audio/x-m4b;")||h.canPlayType("audio/m4b;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!h.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(h.canPlayType("audio/x-flac;")||h.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||i;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var h=function(f){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,u._releaseHtml5Audio(m)}catch{u.noAudio=!0;break}for(var v=0;v<u._howls.length;v++)if(!u._howls[v]._webAudio)for(var g=u._howls[v]._getSoundIds(),p=0;p<g.length;p++){var x=u._howls[v]._soundById(g[p]);x&&x._node&&!x._node._unlocked&&(x._node._unlocked=!0,x._node.load())}u._autoResume();var b=u.ctx.createBufferSource();b.buffer=u._scratchBuffer,b.connect(u.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),b.onended=function(){b.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0),document.removeEventListener("keydown",h,!0);for(var S=0;S<u._howls.length;S++)u._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),document.addEventListener("keydown",h,!0),u}},_obtainHtml5Audio:function(){var u=this||i;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var h=new Audio().play();return h&&typeof Promise<"u"&&(h instanceof Promise||typeof h.then=="function")&&h.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var h=this||i;return u._unlocked&&h._html5AudioPool.push(u),h},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!i.usingWebAudio)){for(var h=0;h<u._howls.length;h++)if(u._howls[h]._webAudio){for(var f=0;f<u._howls[h]._sounds.length;f++)if(!u._howls[h]._sounds[f]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var m=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(m,m)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!i.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var h=0;h<u._howls.length;h++)u._howls[h]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var i=new t,r=function(u){var h=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}h.init(u)};r.prototype={init:function(u){var h=this;return i.ctx||d(),h._autoplay=u.autoplay||!1,h._format=typeof u.format!="string"?u.format:[u.format],h._html5=u.html5||!1,h._muted=u.mute||!1,h._loop=u.loop||!1,h._pool=u.pool||5,h._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,h._rate=u.rate||1,h._sprite=u.sprite||{},h._src=typeof u.src!="string"?u.src:[u.src],h._volume=u.volume!==void 0?u.volume:1,h._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},h._duration=0,h._state="unloaded",h._sounds=[],h._endTimers={},h._queue=[],h._playLock=!1,h._onend=u.onend?[{fn:u.onend}]:[],h._onfade=u.onfade?[{fn:u.onfade}]:[],h._onload=u.onload?[{fn:u.onload}]:[],h._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],h._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],h._onpause=u.onpause?[{fn:u.onpause}]:[],h._onplay=u.onplay?[{fn:u.onplay}]:[],h._onstop=u.onstop?[{fn:u.onstop}]:[],h._onmute=u.onmute?[{fn:u.onmute}]:[],h._onvolume=u.onvolume?[{fn:u.onvolume}]:[],h._onrate=u.onrate?[{fn:u.onrate}]:[],h._onseek=u.onseek?[{fn:u.onseek}]:[],h._onunlock=u.onunlock?[{fn:u.onunlock}]:[],h._onresume=[],h._webAudio=i.usingWebAudio&&!h._html5,typeof i.ctx<"u"&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(h),h._autoplay&&h._queue.push({event:"play",action:function(){h.play()}}),h._preload&&h._preload!=="none"&&h.load(),h},load:function(){var u=this,h=null;if(i.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var f=0;f<u._src.length;f++){var m,v;if(u._format&&u._format[f])m=u._format[f];else{if(v=u._src[f],typeof v!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(v),m||(m=/\.([^.]+)$/.exec(v.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&i.codecs(m)){h=u._src[f];break}}if(!h){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=h,u._state="loading",window.location.protocol==="https:"&&h.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new n(u),u._webAudio&&o(u),u},play:function(u,h){var f=this,m=null;if(typeof u=="number")m=u,u=null;else{if(typeof u=="string"&&f._state==="loaded"&&!f._sprite[u])return null;if(typeof u>"u"&&(u="__default",!f._playLock)){for(var v=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(v++,m=f._sounds[g]._id);v===1?u=null:m=null}}var p=m?f._soundById(m):f._inactiveSound();if(!p)return null;if(m&&!u&&(u=p._sprite||"__default"),f._state!=="loaded"){p._sprite=u,p._ended=!1;var x=p._id;return f._queue.push({event:"play",action:function(){f.play(x)}}),x}if(m&&!p._paused)return h||f._loadQueue("play"),p._id;f._webAudio&&i._autoResume();var b=Math.max(0,p._seek>0?p._seek:f._sprite[u][0]/1e3),S=Math.max(0,(f._sprite[u][0]+f._sprite[u][1])/1e3-b),E=S*1e3/Math.abs(p._rate),y=f._sprite[u][0]/1e3,C=(f._sprite[u][0]+f._sprite[u][1])/1e3;p._sprite=u,p._ended=!1;var A=function(){p._paused=!1,p._seek=b,p._start=y,p._stop=C,p._loop=!!(p._loop||f._sprite[u][2])};if(b>=C){f._ended(p);return}var D=p._node;if(f._webAudio){var I=function(){f._playLock=!1,A(),f._refreshBuffer(p);var j=p._muted||f._muted?0:p._volume;D.gain.setValueAtTime(j,i.ctx.currentTime),p._playStart=i.ctx.currentTime,typeof D.bufferSource.start>"u"?p._loop?D.bufferSource.noteGrainOn(0,b,86400):D.bufferSource.noteGrainOn(0,b,S):p._loop?D.bufferSource.start(0,b,86400):D.bufferSource.start(0,b,S),E!==1/0&&(f._endTimers[p._id]=setTimeout(f._ended.bind(f,p),E)),h||setTimeout(function(){f._emit("play",p._id),f._loadQueue()},0)};i.state==="running"&&i.ctx.state!=="interrupted"?I():(f._playLock=!0,f.once("resume",I),f._clearTimer(p._id))}else{var R=function(){D.currentTime=b,D.muted=p._muted||f._muted||i._muted||D.muted,D.volume=p._volume*i.volume(),D.playbackRate=p._rate;try{var j=D.play();if(j&&typeof Promise<"u"&&(j instanceof Promise||typeof j.then=="function")?(f._playLock=!0,A(),j.then(function(){f._playLock=!1,D._unlocked=!0,h?f._loadQueue():f._emit("play",p._id)}).catch(function(){f._playLock=!1,f._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):h||(f._playLock=!1,A(),f._emit("play",p._id)),D.playbackRate=p._rate,D.paused){f._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||p._loop?f._endTimers[p._id]=setTimeout(f._ended.bind(f,p),E):(f._endTimers[p._id]=function(){f._ended(p),D.removeEventListener("ended",f._endTimers[p._id],!1)},D.addEventListener("ended",f._endTimers[p._id],!1))}catch(ee){f._emit("playerror",p._id,ee)}};D.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(D.src=f._src,D.load());var B=window&&window.ejecta||!D.readyState&&i._navigator.isCocoonJS;if(D.readyState>=3||B)R();else{f._playLock=!0,f._state="loading";var G=function(){f._state="loaded",R(),D.removeEventListener(i._canPlayEvent,G,!1)};D.addEventListener(i._canPlayEvent,G,!1),f._clearTimer(p._id)}}return p._id},pause:function(u){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(u)}}),h;for(var f=h._getSoundIds(u),m=0;m<f.length;m++){h._clearTimer(f[m]);var v=h._soundById(f[m]);if(v&&!v._paused&&(v._seek=h.seek(f[m]),v._rateSeek=0,v._paused=!0,h._stopFade(f[m]),v._node))if(h._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),h._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||h._emit("pause",v?v._id:null)}return h},stop:function(u,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(u)}}),f;for(var m=f._getSoundIds(u),v=0;v<m.length;v++){f._clearTimer(m[v]);var g=f._soundById(m[v]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(m[v]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),h||f._emit("stop",g._id))}return f},mute:function(u,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(u,h)}}),f;if(typeof h>"u")if(typeof u=="boolean")f._muted=u;else return f._muted;for(var m=f._getSoundIds(h),v=0;v<m.length;v++){var g=f._soundById(m[v]);g&&(g._muted=u,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(u?0:g._volume,i.ctx.currentTime):g._node&&(g._node.muted=i._muted?!0:u),f._emit("mute",g._id))}return f},volume:function(){var u=this,h=arguments,f,m;if(h.length===0)return u._volume;if(h.length===1||h.length===2&&typeof h[1]>"u"){var v=u._getSoundIds(),g=v.indexOf(h[0]);g>=0?m=parseInt(h[0],10):f=parseFloat(h[0])}else h.length>=2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));var p;if(typeof f<"u"&&f>=0&&f<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,h)}}),u;typeof m>"u"&&(u._volume=f),m=u._getSoundIds(m);for(var x=0;x<m.length;x++)p=u._soundById(m[x]),p&&(p._volume=f,h[2]||u._stopFade(m[x]),u._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(f,i.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=f*i.volume()),u._emit("volume",p._id))}else return p=m?u._soundById(m):u._sounds[0],p?p._volume:0;return u},fade:function(u,h,f,m){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(u,h,f,m)}}),v;u=Math.min(Math.max(0,parseFloat(u)),1),h=Math.min(Math.max(0,parseFloat(h)),1),f=parseFloat(f),v.volume(u,m);for(var g=v._getSoundIds(m),p=0;p<g.length;p++){var x=v._soundById(g[p]);if(x){if(m||v._stopFade(g[p]),v._webAudio&&!x._muted){var b=i.ctx.currentTime,S=b+f/1e3;x._volume=u,x._node.gain.setValueAtTime(u,b),x._node.gain.linearRampToValueAtTime(h,S)}v._startFadeInterval(x,u,h,f,g[p],typeof m>"u")}}return v},_startFadeInterval:function(u,h,f,m,v,g){var p=this,x=h,b=f-h,S=Math.abs(b/.01),E=Math.max(4,S>0?m/S:m),y=Date.now();u._fadeTo=f,u._interval=setInterval(function(){var C=(Date.now()-y)/m;y=Date.now(),x+=b*C,x=Math.round(x*100)/100,b<0?x=Math.max(f,x):x=Math.min(f,x),p._webAudio?u._volume=x:p.volume(x,u._id,!0),g&&(p._volume=x),(f<h&&x<=f||f>h&&x>=f)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,p.volume(f,u._id),p._emit("fade",u._id))},E)},_stopFade:function(u){var h=this,f=h._soundById(u);return f&&f._interval&&(h._webAudio&&f._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(f._interval),f._interval=null,h.volume(f._fadeTo,u),f._fadeTo=null,h._emit("fade",u)),h},loop:function(){var u=this,h=arguments,f,m,v;if(h.length===0)return u._loop;if(h.length===1)if(typeof h[0]=="boolean")f=h[0],u._loop=f;else return v=u._soundById(parseInt(h[0],10)),v?v._loop:!1;else h.length===2&&(f=h[0],m=parseInt(h[1],10));for(var g=u._getSoundIds(m),p=0;p<g.length;p++)v=u._soundById(g[p]),v&&(v._loop=f,u._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=f,f&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,u.playing(g[p])&&(u.pause(g[p],!0),u.play(g[p],!0)))));return u},rate:function(){var u=this,h=arguments,f,m;if(h.length===0)m=u._sounds[0]._id;else if(h.length===1){var v=u._getSoundIds(),g=v.indexOf(h[0]);g>=0?m=parseInt(h[0],10):f=parseFloat(h[0])}else h.length===2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));var p;if(typeof f=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,h)}}),u;typeof m>"u"&&(u._rate=f),m=u._getSoundIds(m);for(var x=0;x<m.length;x++)if(p=u._soundById(m[x]),p){u.playing(m[x])&&(p._rateSeek=u.seek(m[x]),p._playStart=u._webAudio?i.ctx.currentTime:p._playStart),p._rate=f,u._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(f,i.ctx.currentTime):p._node&&(p._node.playbackRate=f);var b=u.seek(m[x]),S=(u._sprite[p._sprite][0]+u._sprite[p._sprite][1])/1e3-b,E=S*1e3/Math.abs(p._rate);(u._endTimers[m[x]]||!p._paused)&&(u._clearTimer(m[x]),u._endTimers[m[x]]=setTimeout(u._ended.bind(u,p),E)),u._emit("rate",p._id)}}else return p=u._soundById(m),p?p._rate:u._rate;return u},seek:function(){var u=this,h=arguments,f,m;if(h.length===0)u._sounds.length&&(m=u._sounds[0]._id);else if(h.length===1){var v=u._getSoundIds(),g=v.indexOf(h[0]);g>=0?m=parseInt(h[0],10):u._sounds.length&&(m=u._sounds[0]._id,f=parseFloat(h[0]))}else h.length===2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));if(typeof m>"u")return 0;if(typeof f=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,h)}}),u;var p=u._soundById(m);if(p)if(typeof f=="number"&&f>=0){var x=u.playing(m);x&&u.pause(m,!0),p._seek=f,p._ended=!1,u._clearTimer(m),!u._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=f);var b=function(){x&&u.play(m,!0),u._emit("seek",m)};if(x&&!u._webAudio){var S=function(){u._playLock?setTimeout(S,0):b()};setTimeout(S,0)}else b()}else if(u._webAudio){var E=u.playing(m)?i.ctx.currentTime-p._playStart:0,y=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(y+E*Math.abs(p._rate))}else return p._node.currentTime;return u},playing:function(u){var h=this;if(typeof u=="number"){var f=h._soundById(u);return f?!f._paused:!1}for(var m=0;m<h._sounds.length;m++)if(!h._sounds[m]._paused)return!0;return!1},duration:function(u){var h=this,f=h._duration,m=h._soundById(u);return m&&(f=h._sprite[m._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var u=this,h=u._sounds,f=0;f<h.length;f++)h[f]._paused||u.stop(h[f]._id),u._webAudio||(u._clearSound(h[f]._node),h[f]._node.removeEventListener("error",h[f]._errorFn,!1),h[f]._node.removeEventListener(i._canPlayEvent,h[f]._loadFn,!1),h[f]._node.removeEventListener("ended",h[f]._endFn,!1),i._releaseHtml5Audio(h[f]._node)),delete h[f]._node,u._clearTimer(h[f]._id);var m=i._howls.indexOf(u);m>=0&&i._howls.splice(m,1);var v=!0;for(f=0;f<i._howls.length;f++)if(i._howls[f]._src===u._src||u._src.indexOf(i._howls[f]._src)>=0){v=!1;break}return s&&v&&delete s[u._src],i.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,h,f,m){var v=this,g=v["_on"+u];return typeof h=="function"&&g.push(m?{id:f,fn:h,once:m}:{id:f,fn:h}),v},off:function(u,h,f){var m=this,v=m["_on"+u],g=0;if(typeof h=="number"&&(f=h,h=null),h||f)for(g=0;g<v.length;g++){var p=f===v[g].id;if(h===v[g].fn&&p||!h&&p){v.splice(g,1);break}}else if(u)m["_on"+u]=[];else{var x=Object.keys(m);for(g=0;g<x.length;g++)x[g].indexOf("_on")===0&&Array.isArray(m[x[g]])&&(m[x[g]]=[])}return m},once:function(u,h,f){var m=this;return m.on(u,h,f,1),m},_emit:function(u,h,f){for(var m=this,v=m["_on"+u],g=v.length-1;g>=0;g--)(!v[g].id||v[g].id===h||u==="load")&&(setTimeout(function(p){p.call(this,h,f)}.bind(m,v[g].fn),0),v[g].once&&m.off(u,v[g].fn,v[g].id));return m._loadQueue(u),m},_loadQueue:function(u){var h=this;if(h._queue.length>0){var f=h._queue[0];f.event===u&&(h._queue.shift(),h._loadQueue()),u||f.action()}return h},_ended:function(u){var h=this,f=u._sprite;if(!h._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(h._ended.bind(h,u),100),h;var m=!!(u._loop||h._sprite[f][2]);if(h._emit("end",u._id),!h._webAudio&&m&&h.stop(u._id,!0).play(u._id),h._webAudio&&m){h._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=i.ctx.currentTime;var v=(u._stop-u._start)*1e3/Math.abs(u._rate);h._endTimers[u._id]=setTimeout(h._ended.bind(h,u),v)}return h._webAudio&&!m&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,h._clearTimer(u._id),h._cleanBuffer(u._node),i._autoSuspend()),!h._webAudio&&!m&&h.stop(u._id,!0),h},_clearTimer:function(u){var h=this;if(h._endTimers[u]){if(typeof h._endTimers[u]!="function")clearTimeout(h._endTimers[u]);else{var f=h._soundById(u);f&&f._node&&f._node.removeEventListener("ended",h._endTimers[u],!1)}delete h._endTimers[u]}return h},_soundById:function(u){for(var h=this,f=0;f<h._sounds.length;f++)if(u===h._sounds[f]._id)return h._sounds[f];return null},_inactiveSound:function(){var u=this;u._drain();for(var h=0;h<u._sounds.length;h++)if(u._sounds[h]._ended)return u._sounds[h].reset();return new n(u)},_drain:function(){var u=this,h=u._pool,f=0,m=0;if(!(u._sounds.length<h)){for(m=0;m<u._sounds.length;m++)u._sounds[m]._ended&&f++;for(m=u._sounds.length-1;m>=0;m--){if(f<=h)return;u._sounds[m]._ended&&(u._webAudio&&u._sounds[m]._node&&u._sounds[m]._node.disconnect(0),u._sounds.splice(m,1),f--)}}},_getSoundIds:function(u){var h=this;if(typeof u>"u"){for(var f=[],m=0;m<h._sounds.length;m++)f.push(h._sounds[m]._id);return f}else return[u]},_refreshBuffer:function(u){var h=this;return u._node.bufferSource=i.ctx.createBufferSource(),u._node.bufferSource.buffer=s[h._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,i.ctx.currentTime),h},_cleanBuffer:function(u){var h=this,f=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),f))try{u.bufferSource.buffer=i._scratchBuffer}catch{}return u.bufferSource=null,h},_clearSound:function(u){var h=/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent);h||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(u){this._parent=u,this.init()};n.prototype={init:function(){var u=this,h=u._parent;return u._muted=h._muted,u._loop=h._loop,u._volume=h._volume,u._rate=h._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++i._counter,h._sounds.push(u),u.create(),u},create:function(){var u=this,h=u._parent,f=i._muted||u._muted||u._parent._muted?0:u._volume;return h._webAudio?(u._node=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),u._node.gain.setValueAtTime(f,i.ctx.currentTime),u._node.paused=!0,u._node.connect(i.masterGain)):i.noAudio||(u._node=i._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(i._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=h._src,u._node.preload=h._preload===!0?"auto":h._preload,u._node.volume=f*i.volume(),u._node.load()),u},reset:function(){var u=this,h=u._parent;return u._muted=h._muted,u._loop=h._loop,u._volume=h._volume,u._rate=h._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++i._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,h=u._parent;h._duration=Math.ceil(u._node.duration*10)/10,Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue()),u._node.removeEventListener(i._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,h=u._parent;h._duration===1/0&&(h._duration=Math.ceil(u._node.duration*10)/10,h._sprite.__default[1]===1/0&&(h._sprite.__default[1]=h._duration*1e3),h._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var h=u._src;if(s[h]){u._duration=s[h].duration,c(u);return}if(/^data:[^;]+;base64,/.test(h)){for(var f=atob(h.split(",")[1]),m=new Uint8Array(f.length),v=0;v<f.length;++v)m[v]=f.charCodeAt(v);l(m.buffer,u)}else{var g=new XMLHttpRequest;g.open(u._xhr.method,h,!0),g.withCredentials=u._xhr.withCredentials,g.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(p){g.setRequestHeader(p,u._xhr.headers[p])}),g.onload=function(){var p=(g.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,u)},g.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[h],u.load())},a(g)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,h){var f=function(){h._emit("loaderror",null,"Decoding audio data failed.")},m=function(v){v&&h._sounds.length>0?(s[h._src]=v,c(h,v)):f()};typeof Promise<"u"&&i.ctx.decodeAudioData.length===1?i.ctx.decodeAudioData(u).then(m).catch(f):i.ctx.decodeAudioData(u,m,f)},c=function(u,h){h&&!u._duration&&(u._duration=h.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},d=function(){if(i.usingWebAudio){try{typeof AudioContext<"u"?i.ctx=new AudioContext:typeof webkitAudioContext<"u"?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch{i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),h=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=h?parseInt(h[1],10):null;if(u&&f&&f<9){var m=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!m&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:i,Howl:r}}),typeof e<"u"&&(e.Howler=i,e.Howl=r),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=i,global.Howl=r,global.Sound=n):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=i,window.Howl=r,window.Sound=n)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(i){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var n=r._howls.length-1;n>=0;n--)r._howls[n].stereo(i);return r},HowlerGlobal.prototype.pos=function(i,r,n){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(r=typeof r!="number"?s._pos[1]:r,n=typeof n!="number"?s._pos[2]:n,typeof i=="number")s._pos=[i,r,n],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(i,r,n,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(r=typeof r!="number"?c[1]:r,n=typeof n!="number"?c[2]:n,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof i=="number")l._orientation=[i,r,n,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(i,r,n,s,o,a);else return c;return l},Howl.prototype.init=function(i){return function(r){var n=this;return n._orientation=r.orientation||[1,0,0],n._stereo=r.stereo||null,n._pos=r.pos||null,n._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},n._onstereo=r.onstereo?[{fn:r.onstereo}]:[],n._onpos=r.onpos?[{fn:r.onpos}]:[],n._onorientation=r.onorientation?[{fn:r.onorientation}]:[],i.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(i,r){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(i,r)}}),n;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof i=="number")n._stereo=i,n._pos=[i,0,0];else return n._stereo;for(var o=n._getSoundIds(r),a=0;a<o.length;a++){var l=n._soundById(o[a]);if(l)if(typeof i=="number")l._stereo=i,l._pos=[i,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&t(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(i,0,0):l._panner.pan.setValueAtTime(i,Howler.ctx.currentTime)),n._emit("stereo",l._id);else return l._stereo}return n},Howl.prototype.pos=function(i,r,n,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(i,r,n,s)}}),o;if(r=typeof r!="number"?0:r,n=typeof n!="number"?-.5:n,typeof s>"u")if(typeof i=="number")o._pos=[i,r,n];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof i=="number")c._pos=[i,r,n],c._node&&((!c._panner||c._panner.pan)&&t(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):c._panner.setPosition(i,r,n)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(i,r,n,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(i,r,n,s)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,n=typeof n!="number"?o._orientation[2]:n,typeof s>"u")if(typeof i=="number")o._orientation=[i,r,n];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof i=="number")c._orientation=[i,r,n],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),t(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(i,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):c._panner.setOrientation(i,r,n)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var i=this,r=arguments,n,s,o;if(!i._webAudio)return i;if(r.length===0)return i._pannerAttr;if(r.length===1)if(typeof r[0]=="object")n=r[0],typeof s>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),i._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:i._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:i._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:i._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:i._panningModel});else return o=i._soundById(parseInt(r[0],10)),o?o._pannerAttr:i._pannerAttr;else r.length===2&&(n=r[0],s=parseInt(r[1],10));for(var a=i._getSoundIds(s),l=0;l<a.length;l++)if(o=i._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:c.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:c.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:c.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:c.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:c.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:c.panningModel};var d=o._panner;d?(d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor,d.panningModel=c.panningModel):(o._pos||(o._pos=i._pos||[0,0,-.5]),t(o,"spatial"))}return i},Sound.prototype.init=function(i){return function(){var r=this,n=r._parent;r._orientation=n._orientation,r._stereo=n._stereo,r._pos=n._pos,r._pannerAttr=n._pannerAttr,i.call(this),r._stereo?n.stereo(r._stereo):r._pos&&n.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(i){return function(){var r=this,n=r._parent;return r._orientation=n._orientation,r._stereo=n._stereo,r._pos=n._pos,r._pannerAttr=n._pannerAttr,r._stereo?n.stereo(r._stereo):r._pos?n.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,n._refreshBuffer(r)),i.call(this)}}(Sound.prototype.reset);var t=function(i,r){r=r||"spatial",r==="spatial"?(i._panner=Howler.ctx.createPanner(),i._panner.coneInnerAngle=i._pannerAttr.coneInnerAngle,i._panner.coneOuterAngle=i._pannerAttr.coneOuterAngle,i._panner.coneOuterGain=i._pannerAttr.coneOuterGain,i._panner.distanceModel=i._pannerAttr.distanceModel,i._panner.maxDistance=i._pannerAttr.maxDistance,i._panner.refDistance=i._pannerAttr.refDistance,i._panner.rolloffFactor=i._pannerAttr.rolloffFactor,i._panner.panningModel=i._pannerAttr.panningModel,typeof i._panner.positionX<"u"?(i._panner.positionX.setValueAtTime(i._pos[0],Howler.ctx.currentTime),i._panner.positionY.setValueAtTime(i._pos[1],Howler.ctx.currentTime),i._panner.positionZ.setValueAtTime(i._pos[2],Howler.ctx.currentTime)):i._panner.setPosition(i._pos[0],i._pos[1],i._pos[2]),typeof i._panner.orientationX<"u"?(i._panner.orientationX.setValueAtTime(i._orientation[0],Howler.ctx.currentTime),i._panner.orientationY.setValueAtTime(i._orientation[1],Howler.ctx.currentTime),i._panner.orientationZ.setValueAtTime(i._orientation[2],Howler.ctx.currentTime)):i._panner.setOrientation(i._orientation[0],i._orientation[1],i._orientation[2])):(i._panner=Howler.ctx.createStereoPanner(),i._panner.pan.setValueAtTime(i._stereo,Howler.ctx.currentTime)),i._panner.connect(i._node),i._paused||i._parent.pause(i._id,!0).play(i._id,!0)}}()}),Dm="142",ps={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},aH=0,GT=1,lH=2,P2=1,XR=2,ip=3,hc=0,Zr=1,lo=2,cH=1,Nr=0,ih=1,VT=2,WT=3,qT=4,uH=5,bd=100,dH=101,hH=102,XT=103,YT=104,fH=200,pH=201,mH=202,gH=203,YR=204,QR=205,vH=206,yH=207,xH=208,wH=209,bH=210,SH=0,_H=1,EH=2,HS=3,AH=4,CH=5,TH=6,MH=7,KR=0,PH=1,DH=2,Fa=0,OH=1,LH=2,IH=3,RH=4,NH=5,ZR=300,_u=301,Eu=302,GS=303,VS=304,Om=306,em=1e3,Yn=1001,WS=1002,Qi=1003,QT=1004,KT=1005,vi=1006,BH=1007,Lm=1008,en=1009,kH=1010,zH=1011,$R=1012,FH=1013,Fl=1014,Ul=1015,tm=1016,UH=1017,jH=1018,uu=1020,HH=1021,GH=1022,Vo=1023,VH=1024,WH=1025,du=1026,Au=1027,qH=1028,XH=1029,YH=1030,QH=1031,KH=1033,Qx=33776,Kx=33777,Zx=33778,$x=33779,ZT=35840,$T=35841,JT=35842,eM=35843,ZH=36196,tM=37492,iM=37496,rM=37808,nM=37809,sM=37810,oM=37811,aM=37812,lM=37813,cM=37814,uM=37815,dM=37816,hM=37817,fM=37818,pM=37819,mM=37820,gM=37821,vM=36492,ta=3e3,Yt=3001,tl=3200,JR=3201,$H=0,JH=1,La="srgb",ru="srgb-linear",Jx=7680,eG=519,qS=35044,yM="300 es",XS=1035,kn=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let i=this._listeners[e];if(i!==void 0){let r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let i=t.slice(0);for(let r=0,n=i.length;r<n;r++)i[r].call(this,e);e.target=null}}},Wr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],xM=1234567,bp=Math.PI/180,im=180/Math.PI;function Zo(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Wr[e&255]+Wr[e>>8&255]+Wr[e>>16&255]+Wr[e>>24&255]+"-"+Wr[t&255]+Wr[t>>8&255]+"-"+Wr[t>>16&15|64]+Wr[t>>24&255]+"-"+Wr[i&63|128]+Wr[i>>8&255]+"-"+Wr[i>>16&255]+Wr[i>>24&255]+Wr[r&255]+Wr[r>>8&255]+Wr[r>>16&255]+Wr[r>>24&255]).toLowerCase()}function xr(e,t,i){return Math.max(t,Math.min(i,e))}function D2(e,t){return(e%t+t)%t}function tG(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)}function iG(e,t,i){return e!==t?(i-e)/(t-e):0}function Sp(e,t,i){return(1-i)*e+i*t}function rG(e,t,i,r){return Sp(e,t,1-Math.exp(-i*r))}function nG(e,t=1){return t-Math.abs(D2(e,t*2)-t)}function sG(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))}function oG(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(e*6-15)+10))}function aG(e,t){return e+Math.floor(Math.random()*(t-e+1))}function lG(e,t){return e+Math.random()*(t-e)}function cG(e){return e*(.5-Math.random())}function uG(e){e!==void 0&&(xM=e);let t=xM+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function dG(e){return e*bp}function hG(e){return e*im}function YS(e){return(e&e-1)===0&&e!==0}function fG(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function X0(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function pG(e,t,i,r,n){let s=Math.cos,o=Math.sin,a=s(i/2),l=o(i/2),c=s((t+r)/2),d=o((t+r)/2),u=s((t-r)/2),h=o((t-r)/2),f=s((r-t)/2),m=o((r-t)/2);switch(n){case"XYX":e.set(a*d,l*u,l*h,a*c);break;case"YZY":e.set(l*h,a*d,l*u,a*c);break;case"ZXZ":e.set(l*u,l*h,a*d,a*c);break;case"XZX":e.set(a*d,l*m,l*f,a*c);break;case"YXY":e.set(l*f,a*d,l*m,a*c);break;case"ZYZ":e.set(l*m,l*f,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function mG(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function gG(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var Jt=Object.freeze({__proto__:null,DEG2RAD:bp,RAD2DEG:im,generateUUID:Zo,clamp:xr,euclideanModulo:D2,mapLinear:tG,inverseLerp:iG,lerp:Sp,damp:rG,pingpong:nG,smoothstep:sG,smootherstep:oG,randInt:aG,randFloat:lG,randFloatSpread:cG,seededRandom:uG,degToRad:dG,radToDeg:hG,isPowerOfTwo:YS,ceilPowerOfTwo:fG,floorPowerOfTwo:X0,setQuaternionFromProperEuler:pG,normalize:gG,denormalize:mG}),de=class{constructor(e=0,t=0){de.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),n=this.x-e.x,s=this.y-e.y;return this.x=n*i-s*r+e.x,this.y=n*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},pn=class{constructor(){pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,n,s,o,a,l){let c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=n,c[5]=a,c[6]=i,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,n=this.elements,s=i[0],o=i[3],a=i[6],l=i[1],c=i[4],d=i[7],u=i[2],h=i[5],f=i[8],m=r[0],v=r[3],g=r[6],p=r[1],x=r[4],b=r[7],S=r[2],E=r[5],y=r[8];return n[0]=s*m+o*p+a*S,n[3]=s*v+o*x+a*E,n[6]=s*g+o*b+a*y,n[1]=l*m+c*p+d*S,n[4]=l*v+c*x+d*E,n[7]=l*g+c*b+d*y,n[2]=u*m+h*p+f*S,n[5]=u*v+h*x+f*E,n[8]=u*g+h*b+f*y,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*s*c-t*o*l-i*n*c+i*o*a+r*n*l-r*s*a}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],d=c*s-o*l,u=o*a-c*n,h=l*n-s*a,f=t*d+i*u+r*h;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let m=1/f;return e[0]=d*m,e[1]=(r*l-c*i)*m,e[2]=(o*i-r*s)*m,e[3]=u*m,e[4]=(c*t-r*a)*m,e[5]=(r*n-o*t)*m,e[6]=h*m,e[7]=(i*a-l*t)*m,e[8]=(s*t-i*n)*m,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,n,s,o){let a=Math.cos(n),l=Math.sin(n);return this.set(i*a,i*l,-i*(a*s+l*o)+s+e,-r*l,r*a,-r*(-l*s+a*o)+o+t,0,0,1),this}scale(e,t){let i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){let t=Math.cos(e),i=Math.sin(e),r=this.elements,n=r[0],s=r[3],o=r[6],a=r[1],l=r[4],c=r[7];return r[0]=t*n+i*a,r[3]=t*s+i*l,r[6]=t*o+i*c,r[1]=-i*n+t*a,r[4]=-i*s+t*l,r[7]=-i*o+t*c,this}translate(e,t){let i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}};function eN(e){for(let t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}var vG={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Pg(e,t){return new vG[e](t)}function Y0(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function hu(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function n0(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var ew={[La]:{[ru]:hu},[ru]:{[La]:n0}},Qs={legacyMode:!0,get workingColorSpace(){return ru},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,i){if(this.legacyMode||t===i||!t||!i)return e;if(ew[t]&&ew[t][i]!==void 0){let r=ew[t][i];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},tN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pr={r:0,g:0,b:0},Ks={h:0,s:0,l:0},Dg={h:0,s:0,l:0};function tw(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*6*(2/3-i):e}function Og(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var Lt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=La){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Qs.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=ru){return this.r=e,this.g=t,this.b=i,Qs.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=ru){if(e=D2(e,1),t=xr(t,0,1),i=xr(i,0,1),t===0)this.r=this.g=this.b=i;else{let n=i<=.5?i*(1+t):i+t-i*t,s=2*i-n;this.r=tw(s,n,e+1/3),this.g=tw(s,n,e),this.b=tw(s,n,e-1/3)}return Qs.toWorkingColorSpace(this,r),this}setStyle(e,t=La){function i(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let n,s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,Qs.toWorkingColorSpace(this,t),i(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,Qs.toWorkingColorSpace(this,t),i(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let a=parseFloat(n[1])/360,l=parseInt(n[2],10)/100,c=parseInt(n[3],10)/100;return i(n[4]),this.setHSL(a,l,c,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let n=r[1],s=n.length;if(s===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,Qs.toWorkingColorSpace(this,t),this;if(s===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,Qs.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=La){let i=tN[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=hu(e.r),this.g=hu(e.g),this.b=hu(e.b),this}copyLinearToSRGB(e){return this.r=n0(e.r),this.g=n0(e.g),this.b=n0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=La){return Qs.fromWorkingColorSpace(Og(this,pr),e),xr(pr.r*255,0,255)<<16^xr(pr.g*255,0,255)<<8^xr(pr.b*255,0,255)<<0}getHexString(e=La){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ru){Qs.fromWorkingColorSpace(Og(this,pr),t);let i=pr.r,r=pr.g,n=pr.b,s=Math.max(i,r,n),o=Math.min(i,r,n),a,l,c=(o+s)/2;if(o===s)a=0,l=0;else{let d=s-o;switch(l=c<=.5?d/(s+o):d/(2-s-o),s){case i:a=(r-n)/d+(r<n?6:0);break;case r:a=(n-i)/d+2;break;case n:a=(i-r)/d+4;break}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e,t=ru){return Qs.fromWorkingColorSpace(Og(this,pr),t),e.r=pr.r,e.g=pr.g,e.b=pr.b,e}getStyle(e=La){return Qs.fromWorkingColorSpace(Og(this,pr),e),e!==La?`color(${e} ${pr.r} ${pr.g} ${pr.b})`:`rgb(${pr.r*255|0},${pr.g*255|0},${pr.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(Ks),Ks.h+=e,Ks.s+=t,Ks.l+=i,this.setHSL(Ks.h,Ks.s,Ks.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ks),e.getHSL(Dg);let i=Sp(Ks.h,Dg.h,t),r=Sp(Ks.s,Dg.s,t),n=Sp(Ks.l,Dg.l,t);return this.setHSL(i,r,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Lt.NAMES=tN;var Zu,iN=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Zu===void 0&&(Zu=Y0("canvas")),Zu.width=e.width,Zu.height=e.height;let i=Zu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Zu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Y0("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),n=r.data;for(let s=0;s<n.length;s++)n[s]=hu(n[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(hu(t[i]/255)*255):t[i]=hu(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},rN=class{constructor(e=null){this.isSource=!0,this.uuid=Zo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let n;if(Array.isArray(r)){n=[];for(let s=0,o=r.length;s<o;s++)r[s].isDataTexture?n.push(iw(r[s].image)):n.push(iw(r[s]))}else n=iw(r);i.url=n}return t||(e.images[this.uuid]=i),i}};function iw(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?iN.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var yG=0,tn=class extends kn{constructor(e=tn.DEFAULT_IMAGE,t=tn.DEFAULT_MAPPING,i=Yn,r=Yn,n=vi,s=Lm,o=Vo,a=en,l=1,c=ta){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:yG++}),this.uuid=Zo(),this.name="",this.source=new rN(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=n,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new de(0,0),this.repeat=new de(1,1),this.center=new de(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ZR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case em:e.x=e.x-Math.floor(e.x);break;case Yn:e.x=e.x<0?0:1;break;case WS:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case em:e.y=e.y-Math.floor(e.y);break;case Yn:e.y=e.y<0?0:1;break;case WS:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};tn.DEFAULT_IMAGE=null;tn.DEFAULT_MAPPING=ZR;var Qt=class{constructor(e=0,t=0,i=0,r=1){Qt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,n=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,n,s=e.elements,o=s[0],a=s[4],l=s[8],c=s[1],d=s[5],u=s[9],h=s[2],f=s[6],m=s[10];if(Math.abs(a-c)<.01&&Math.abs(l-h)<.01&&Math.abs(u-f)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+h)<.1&&Math.abs(u+f)<.1&&Math.abs(o+d+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let g=(o+1)/2,p=(d+1)/2,x=(m+1)/2,b=(a+c)/4,S=(l+h)/4,E=(u+f)/4;return g>p&&g>x?g<.01?(i=0,r=.707106781,n=.707106781):(i=Math.sqrt(g),r=b/i,n=S/i):p>x?p<.01?(i=.707106781,r=0,n=.707106781):(r=Math.sqrt(p),i=b/r,n=E/r):x<.01?(i=.707106781,r=.707106781,n=0):(n=Math.sqrt(x),i=S/n,r=E/n),this.set(i,r,n,t),this}let v=Math.sqrt((f-u)*(f-u)+(l-h)*(l-h)+(c-a)*(c-a));return Math.abs(v)<.001&&(v=1),this.x=(f-u)/v,this.y=(l-h)/v,this.z=(c-a)/v,this.w=Math.acos((o+d+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},lr=class extends kn{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Qt(0,0,e,t),this.scissorTest=!1,this.viewport=new Qt(0,0,e,t);let r={width:e,height:t,depth:1};this.texture=new tn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:vi,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new rN(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},nN=class extends tn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Qi,this.minFilter=Qi,this.wrapR=Yn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},xG=class extends tn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Qi,this.minFilter=Qi,this.wrapR=Yn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},hi=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,n,s,o){let a=i[r+0],l=i[r+1],c=i[r+2],d=i[r+3],u=n[s+0],h=n[s+1],f=n[s+2],m=n[s+3];if(o===0){e[t+0]=a,e[t+1]=l,e[t+2]=c,e[t+3]=d;return}if(o===1){e[t+0]=u,e[t+1]=h,e[t+2]=f,e[t+3]=m;return}if(d!==m||a!==u||l!==h||c!==f){let v=1-o,g=a*u+l*h+c*f+d*m,p=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){let S=Math.sqrt(x),E=Math.atan2(S,g*p);v=Math.sin(v*E)/S,o=Math.sin(o*E)/S}let b=o*p;if(a=a*v+u*b,l=l*v+h*b,c=c*v+f*b,d=d*v+m*b,v===1-o){let S=1/Math.sqrt(a*a+l*l+c*c+d*d);a*=S,l*=S,c*=S,d*=S}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,n,s){let o=i[r],a=i[r+1],l=i[r+2],c=i[r+3],d=n[s],u=n[s+1],h=n[s+2],f=n[s+3];return e[t]=o*f+c*d+a*h-l*u,e[t+1]=a*f+c*u+l*d-o*h,e[t+2]=l*f+c*h+o*u-a*d,e[t+3]=c*f-o*d-a*u-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");let i=e._x,r=e._y,n=e._z,s=e._order,o=Math.cos,a=Math.sin,l=o(i/2),c=o(r/2),d=o(n/2),u=a(i/2),h=a(r/2),f=a(n/2);switch(s){case"XYZ":this._x=u*c*d+l*h*f,this._y=l*h*d-u*c*f,this._z=l*c*f+u*h*d,this._w=l*c*d-u*h*f;break;case"YXZ":this._x=u*c*d+l*h*f,this._y=l*h*d-u*c*f,this._z=l*c*f-u*h*d,this._w=l*c*d+u*h*f;break;case"ZXY":this._x=u*c*d-l*h*f,this._y=l*h*d+u*c*f,this._z=l*c*f+u*h*d,this._w=l*c*d-u*h*f;break;case"ZYX":this._x=u*c*d-l*h*f,this._y=l*h*d+u*c*f,this._z=l*c*f-u*h*d,this._w=l*c*d+u*h*f;break;case"YZX":this._x=u*c*d+l*h*f,this._y=l*h*d+u*c*f,this._z=l*c*f-u*h*d,this._w=l*c*d-u*h*f;break;case"XZY":this._x=u*c*d-l*h*f,this._y=l*h*d-u*c*f,this._z=l*c*f+u*h*d,this._w=l*c*d+u*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],n=t[8],s=t[1],o=t[5],a=t[9],l=t[2],c=t[6],d=t[10],u=i+o+d;if(u>0){let h=.5/Math.sqrt(u+1);this._w=.25/h,this._x=(c-a)*h,this._y=(n-l)*h,this._z=(s-r)*h}else if(i>o&&i>d){let h=2*Math.sqrt(1+i-o-d);this._w=(c-a)/h,this._x=.25*h,this._y=(r+s)/h,this._z=(n+l)/h}else if(o>d){let h=2*Math.sqrt(1+o-i-d);this._w=(n-l)/h,this._x=(r+s)/h,this._y=.25*h,this._z=(a+c)/h}else{let h=2*Math.sqrt(1+d-i-o);this._w=(s-r)/h,this._x=(n+l)/h,this._y=(a+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(xr(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,n=e._z,s=e._w,o=t._x,a=t._y,l=t._z,c=t._w;return this._x=i*c+s*o+r*l-n*a,this._y=r*c+s*a+n*o-i*l,this._z=n*c+s*l+i*a-r*o,this._w=s*c-i*o-r*a-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,n=this._z,s=this._w,o=s*e._w+i*e._x+r*e._y+n*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=i,this._y=r,this._z=n,this;let a=1-o*o;if(a<=Number.EPSILON){let h=1-t;return this._w=h*s+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(a),c=Math.atan2(l,o),d=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=s*d+this._w*u,this._x=i*d+this._x*u,this._y=r*d+this._y*u,this._z=n*d+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(n),i*Math.cos(n),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},N=class{constructor(e=0,t=0,i=0){N.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(wM.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(wM.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6]*r,this.y=n[1]*t+n[4]*i+n[7]*r,this.z=n[2]*t+n[5]*i+n[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,n=e.elements,s=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,n=e.x,s=e.y,o=e.z,a=e.w,l=a*t+s*r-o*i,c=a*i+o*t-n*r,d=a*r+n*i-s*t,u=-n*t-s*i-o*r;return this.x=l*a+u*-n+c*-o-d*-s,this.y=c*a+u*-s+d*-n-l*-o,this.z=d*a+u*-o+l*-s-c*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r,this.y=n[1]*t+n[5]*i+n[9]*r,this.z=n[2]*t+n[6]*i+n[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,n=e.z,s=t.x,o=t.y,a=t.z;return this.x=r*a-n*o,this.y=n*s-i*a,this.z=i*o-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return rw.copy(this).projectOnVector(e),this.sub(rw)}reflect(e){return this.sub(rw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(xr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},rw=new N,wM=new hi,fr=class{constructor(e=new N(1/0,1/0,1/0),t=new N(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,o=-1/0;for(let a=0,l=e.length;a<l;a+=3){let c=e[a],d=e[a+1],u=e[a+2];c<t&&(t=c),d<i&&(i=d),u<r&&(r=u),c>n&&(n=c),d>s&&(s=d),u>o&&(o=u)}return this.min.set(t,i,r),this.max.set(n,s,o),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,o=-1/0;for(let a=0,l=e.count;a<l;a++){let c=e.getX(a),d=e.getY(a),u=e.getZ(a);c<t&&(t=c),d<i&&(i=d),u<r&&(r=u),c>n&&(n=c),d>s&&(s=d),u>o&&(o=u)}return this.min.set(t,i,r),this.max.set(n,s,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Ic.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){let n=i.attributes.position;for(let s=0,o=n.count;s<o;s++)Ic.fromBufferAttribute(n,s).applyMatrix4(e.matrixWorld),this.expandByPoint(Ic)}else i.boundingBox===null&&i.computeBoundingBox(),nw.copy(i.boundingBox),nw.applyMatrix4(e.matrixWorld),this.union(nw);let r=e.children;for(let n=0,s=r.length;n<s;n++)this.expandByObject(r[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ic),Ic.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_f),Lg.subVectors(this.max,_f),$u.subVectors(e.a,_f),Ju.subVectors(e.b,_f),ed.subVectors(e.c,_f),fl.subVectors(Ju,$u),pl.subVectors(ed,Ju),Rc.subVectors($u,ed);let t=[0,-fl.z,fl.y,0,-pl.z,pl.y,0,-Rc.z,Rc.y,fl.z,0,-fl.x,pl.z,0,-pl.x,Rc.z,0,-Rc.x,-fl.y,fl.x,0,-pl.y,pl.x,0,-Rc.y,Rc.x,0];return!sw(t,$u,Ju,ed,Lg)||(t=[1,0,0,0,1,0,0,0,1],!sw(t,$u,Ju,ed,Lg))?!1:(Ig.crossVectors(fl,pl),t=[Ig.x,Ig.y,Ig.z],sw(t,$u,Ju,ed,Lg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ic.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Ic).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(wa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),wa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),wa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),wa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),wa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),wa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),wa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),wa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(wa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},wa=[new N,new N,new N,new N,new N,new N,new N,new N],Ic=new N,nw=new fr,$u=new N,Ju=new N,ed=new N,fl=new N,pl=new N,Rc=new N,_f=new N,Lg=new N,Ig=new N,Nc=new N;function sw(e,t,i,r,n){for(let s=0,o=e.length-3;s<=o;s+=3){Nc.fromArray(e,s);let a=n.x*Math.abs(Nc.x)+n.y*Math.abs(Nc.y)+n.z*Math.abs(Nc.z),l=t.dot(Nc),c=i.dot(Nc),d=r.dot(Nc);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}var wG=new fr,bM=new N,Rg=new N,ow=new N,ks=class{constructor(e=new N,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):wG.setFromPoints(e).getCenter(i);let r=0;for(let n=0,s=e.length;n<s;n++)r=Math.max(r,i.distanceToSquared(e[n]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){ow.subVectors(e,this.center);let t=ow.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(ow.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return this.center.equals(e.center)===!0?Rg.set(0,0,1).multiplyScalar(e.radius):Rg.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(bM.copy(e.center).add(Rg)),this.expandByPoint(bM.copy(e.center).sub(Rg)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},ba=new N,aw=new N,Ng=new N,ml=new N,lw=new N,Bg=new N,cw=new N,Bh=class{constructor(e=new N,t=new N(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ba)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=ba.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ba.copy(this.direction).multiplyScalar(t).add(this.origin),ba.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){aw.copy(e).add(t).multiplyScalar(.5),Ng.copy(t).sub(e).normalize(),ml.copy(this.origin).sub(aw);let n=e.distanceTo(t)*.5,s=-this.direction.dot(Ng),o=ml.dot(this.direction),a=-ml.dot(Ng),l=ml.lengthSq(),c=Math.abs(1-s*s),d,u,h,f;if(c>0)if(d=s*a-o,u=s*o-a,f=n*c,d>=0)if(u>=-f)if(u<=f){let m=1/c;d*=m,u*=m,h=d*(d+s*u+2*o)+u*(s*d+u+2*a)+l}else u=n,d=Math.max(0,-(s*u+o)),h=-d*d+u*(u+2*a)+l;else u=-n,d=Math.max(0,-(s*u+o)),h=-d*d+u*(u+2*a)+l;else u<=-f?(d=Math.max(0,-(-s*n+o)),u=d>0?-n:Math.min(Math.max(-n,-a),n),h=-d*d+u*(u+2*a)+l):u<=f?(d=0,u=Math.min(Math.max(-n,-a),n),h=u*(u+2*a)+l):(d=Math.max(0,-(s*n+o)),u=d>0?n:Math.min(Math.max(-n,-a),n),h=-d*d+u*(u+2*a)+l);else u=s>0?-n:n,d=Math.max(0,-(s*u+o)),h=-d*d+u*(u+2*a)+l;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(Ng).multiplyScalar(u).add(aw),h}intersectSphere(e,t){ba.subVectors(e.center,this.origin);let i=ba.dot(this.direction),r=ba.dot(ba)-i*i,n=e.radius*e.radius;if(r>n)return null;let s=Math.sqrt(n-r),o=i-s,a=i+s;return o<0&&a<0?null:o<0?this.at(a,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,n,s,o,a,l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,u=this.origin;return l>=0?(i=(e.min.x-u.x)*l,r=(e.max.x-u.x)*l):(i=(e.max.x-u.x)*l,r=(e.min.x-u.x)*l),c>=0?(n=(e.min.y-u.y)*c,s=(e.max.y-u.y)*c):(n=(e.max.y-u.y)*c,s=(e.min.y-u.y)*c),i>s||n>r||((n>i||i!==i)&&(i=n),(s<r||r!==r)&&(r=s),d>=0?(o=(e.min.z-u.z)*d,a=(e.max.z-u.z)*d):(o=(e.max.z-u.z)*d,a=(e.min.z-u.z)*d),i>a||o>r)||((o>i||i!==i)&&(i=o),(a<r||r!==r)&&(r=a),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ba)!==null}intersectTriangle(e,t,i,r,n){lw.subVectors(t,e),Bg.subVectors(i,e),cw.crossVectors(lw,Bg);let s=this.direction.dot(cw),o;if(s>0){if(r)return null;o=1}else if(s<0)o=-1,s=-s;else return null;ml.subVectors(this.origin,e);let a=o*this.direction.dot(Bg.crossVectors(ml,Bg));if(a<0)return null;let l=o*this.direction.dot(lw.cross(ml));if(l<0||a+l>s)return null;let c=-o*ml.dot(cw);return c<0?null:this.at(c/s,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},at=class{constructor(){at.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,n,s,o,a,l,c,d,u,h,f,m,v){let g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=n,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=d,g[14]=u,g[3]=h,g[7]=f,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new at().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/td.setFromMatrixColumn(e,0).length(),n=1/td.setFromMatrixColumn(e,1).length(),s=1/td.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*n,t[5]=i[5]*n,t[6]=i[6]*n,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");let t=this.elements,i=e.x,r=e.y,n=e.z,s=Math.cos(i),o=Math.sin(i),a=Math.cos(r),l=Math.sin(r),c=Math.cos(n),d=Math.sin(n);if(e.order==="XYZ"){let u=s*c,h=s*d,f=o*c,m=o*d;t[0]=a*c,t[4]=-a*d,t[8]=l,t[1]=h+f*l,t[5]=u-m*l,t[9]=-o*a,t[2]=m-u*l,t[6]=f+h*l,t[10]=s*a}else if(e.order==="YXZ"){let u=a*c,h=a*d,f=l*c,m=l*d;t[0]=u+m*o,t[4]=f*o-h,t[8]=s*l,t[1]=s*d,t[5]=s*c,t[9]=-o,t[2]=h*o-f,t[6]=m+u*o,t[10]=s*a}else if(e.order==="ZXY"){let u=a*c,h=a*d,f=l*c,m=l*d;t[0]=u-m*o,t[4]=-s*d,t[8]=f+h*o,t[1]=h+f*o,t[5]=s*c,t[9]=m-u*o,t[2]=-s*l,t[6]=o,t[10]=s*a}else if(e.order==="ZYX"){let u=s*c,h=s*d,f=o*c,m=o*d;t[0]=a*c,t[4]=f*l-h,t[8]=u*l+m,t[1]=a*d,t[5]=m*l+u,t[9]=h*l-f,t[2]=-l,t[6]=o*a,t[10]=s*a}else if(e.order==="YZX"){let u=s*a,h=s*l,f=o*a,m=o*l;t[0]=a*c,t[4]=m-u*d,t[8]=f*d+h,t[1]=d,t[5]=s*c,t[9]=-o*c,t[2]=-l*c,t[6]=h*d+f,t[10]=u-m*d}else if(e.order==="XZY"){let u=s*a,h=s*l,f=o*a,m=o*l;t[0]=a*c,t[4]=-d,t[8]=l*c,t[1]=u*d+m,t[5]=s*c,t[9]=h*d-f,t[2]=f*d-h,t[6]=o*c,t[10]=m*d+u}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(bG,e,SG)}lookAt(e,t,i){let r=this.elements;return jn.subVectors(e,t),jn.lengthSq()===0&&(jn.z=1),jn.normalize(),gl.crossVectors(i,jn),gl.lengthSq()===0&&(Math.abs(i.z)===1?jn.x+=1e-4:jn.z+=1e-4,jn.normalize(),gl.crossVectors(i,jn)),gl.normalize(),kg.crossVectors(jn,gl),r[0]=gl.x,r[4]=kg.x,r[8]=jn.x,r[1]=gl.y,r[5]=kg.y,r[9]=jn.y,r[2]=gl.z,r[6]=kg.z,r[10]=jn.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,n=this.elements,s=i[0],o=i[4],a=i[8],l=i[12],c=i[1],d=i[5],u=i[9],h=i[13],f=i[2],m=i[6],v=i[10],g=i[14],p=i[3],x=i[7],b=i[11],S=i[15],E=r[0],y=r[4],C=r[8],A=r[12],D=r[1],I=r[5],R=r[9],B=r[13],G=r[2],j=r[6],ee=r[10],Q=r[14],re=r[3],z=r[7],X=r[11],Y=r[15];return n[0]=s*E+o*D+a*G+l*re,n[4]=s*y+o*I+a*j+l*z,n[8]=s*C+o*R+a*ee+l*X,n[12]=s*A+o*B+a*Q+l*Y,n[1]=c*E+d*D+u*G+h*re,n[5]=c*y+d*I+u*j+h*z,n[9]=c*C+d*R+u*ee+h*X,n[13]=c*A+d*B+u*Q+h*Y,n[2]=f*E+m*D+v*G+g*re,n[6]=f*y+m*I+v*j+g*z,n[10]=f*C+m*R+v*ee+g*X,n[14]=f*A+m*B+v*Q+g*Y,n[3]=p*E+x*D+b*G+S*re,n[7]=p*y+x*I+b*j+S*z,n[11]=p*C+x*R+b*ee+S*X,n[15]=p*A+x*B+b*Q+S*Y,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],s=e[1],o=e[5],a=e[9],l=e[13],c=e[2],d=e[6],u=e[10],h=e[14],f=e[3],m=e[7],v=e[11],g=e[15];return f*(+n*a*d-r*l*d-n*o*u+i*l*u+r*o*h-i*a*h)+m*(+t*a*h-t*l*u+n*s*u-r*s*h+r*l*c-n*a*c)+v*(+t*l*d-t*o*h-n*s*d+i*s*h+n*o*c-i*l*c)+g*(-r*o*c-t*a*d+t*o*u+r*s*d-i*s*u+i*a*c)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],d=e[9],u=e[10],h=e[11],f=e[12],m=e[13],v=e[14],g=e[15],p=d*v*l-m*u*l+m*a*h-o*v*h-d*a*g+o*u*g,x=f*u*l-c*v*l-f*a*h+s*v*h+c*a*g-s*u*g,b=c*m*l-f*d*l+f*o*h-s*m*h-c*o*g+s*d*g,S=f*d*a-c*m*a-f*o*u+s*m*u+c*o*v-s*d*v,E=t*p+i*x+r*b+n*S;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let y=1/E;return e[0]=p*y,e[1]=(m*u*n-d*v*n-m*r*h+i*v*h+d*r*g-i*u*g)*y,e[2]=(o*v*n-m*a*n+m*r*l-i*v*l-o*r*g+i*a*g)*y,e[3]=(d*a*n-o*u*n-d*r*l+i*u*l+o*r*h-i*a*h)*y,e[4]=x*y,e[5]=(c*v*n-f*u*n+f*r*h-t*v*h-c*r*g+t*u*g)*y,e[6]=(f*a*n-s*v*n-f*r*l+t*v*l+s*r*g-t*a*g)*y,e[7]=(s*u*n-c*a*n+c*r*l-t*u*l-s*r*h+t*a*h)*y,e[8]=b*y,e[9]=(f*d*n-c*m*n-f*i*h+t*m*h+c*i*g-t*d*g)*y,e[10]=(s*m*n-f*o*n+f*i*l-t*m*l-s*i*g+t*o*g)*y,e[11]=(c*o*n-s*d*n-c*i*l+t*d*l+s*i*h-t*o*h)*y,e[12]=S*y,e[13]=(c*m*r-f*d*r+f*i*u-t*m*u-c*i*v+t*d*v)*y,e[14]=(f*o*r-s*m*r-f*i*a+t*m*a+s*i*v-t*o*v)*y,e[15]=(s*d*r-c*o*r+c*i*a-t*d*a-s*i*u+t*o*u)*y,this}scale(e){let t=this.elements,i=e.x,r=e.y,n=e.z;return t[0]*=i,t[4]*=r,t[8]*=n,t[1]*=i,t[5]*=r,t[9]*=n,t[2]*=i,t[6]*=r,t[10]*=n,t[3]*=i,t[7]*=r,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),n=1-i,s=e.x,o=e.y,a=e.z,l=n*s,c=n*o;return this.set(l*s+i,l*o-r*a,l*a+r*o,0,l*o+r*a,c*o+i,c*a-r*s,0,l*a-r*o,c*a+r*s,n*a*a+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,n,s){return this.set(1,i,n,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,n=t._x,s=t._y,o=t._z,a=t._w,l=n+n,c=s+s,d=o+o,u=n*l,h=n*c,f=n*d,m=s*c,v=s*d,g=o*d,p=a*l,x=a*c,b=a*d,S=i.x,E=i.y,y=i.z;return r[0]=(1-(m+g))*S,r[1]=(h+b)*S,r[2]=(f-x)*S,r[3]=0,r[4]=(h-b)*E,r[5]=(1-(u+g))*E,r[6]=(v+p)*E,r[7]=0,r[8]=(f+x)*y,r[9]=(v-p)*y,r[10]=(1-(u+m))*y,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,n=td.set(r[0],r[1],r[2]).length(),s=td.set(r[4],r[5],r[6]).length(),o=td.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),e.x=r[12],e.y=r[13],e.z=r[14],Zs.copy(this);let a=1/n,l=1/s,c=1/o;return Zs.elements[0]*=a,Zs.elements[1]*=a,Zs.elements[2]*=a,Zs.elements[4]*=l,Zs.elements[5]*=l,Zs.elements[6]*=l,Zs.elements[8]*=c,Zs.elements[9]*=c,Zs.elements[10]*=c,t.setFromRotationMatrix(Zs),i.x=n,i.y=s,i.z=o,this}makePerspective(e,t,i,r,n,s){s===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");let o=this.elements,a=2*n/(t-e),l=2*n/(i-r),c=(t+e)/(t-e),d=(i+r)/(i-r),u=-(s+n)/(s-n),h=-2*s*n/(s-n);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,i,r,n,s){let o=this.elements,a=1/(t-e),l=1/(i-r),c=1/(s-n),d=(t+e)*a,u=(i+r)*l,h=(s+n)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},td=new N,Zs=new at,bG=new N(0,0,0),SG=new N(1,1,1),gl=new N,kg=new N,jn=new N,SM=new at,_M=new hi,Kr=class{constructor(e=0,t=0,i=0,r=Kr.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){let r=e.elements,n=r[0],s=r[4],o=r[8],a=r[1],l=r[5],c=r[9],d=r[2],u=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(xr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-xr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-d,n),this._z=0);break;case"ZXY":this._x=Math.asin(xr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,n));break;case"ZYX":this._y=Math.asin(-xr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(u,h),this._z=Math.atan2(a,n)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(xr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,n)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-xr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,n)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return SM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(SM,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return _M.setFromEuler(this),this.setFromQuaternion(_M,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}};Kr.DefaultOrder="XYZ";Kr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var O2=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},_G=0,EM=new N,id=new hi,Sa=new at,zg=new N,Ef=new N,EG=new N,AG=new hi,AM=new N(1,0,0),CM=new N(0,1,0),TM=new N(0,0,1),CG={type:"added"},MM={type:"removed"},Di=class extends kn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_G++}),this.uuid=Zo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Di.DefaultUp.clone();let e=new N,t=new Kr,i=new hi,r=new N(1,1,1);function n(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(n),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new at},normalMatrix:{value:new pn}}),this.matrix=new at,this.matrixWorld=new at,this.matrixAutoUpdate=Di.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new O2,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return id.setFromAxisAngle(e,t),this.quaternion.multiply(id),this}rotateOnWorldAxis(e,t){return id.setFromAxisAngle(e,t),this.quaternion.premultiply(id),this}rotateX(e){return this.rotateOnAxis(AM,e)}rotateY(e){return this.rotateOnAxis(CM,e)}rotateZ(e){return this.rotateOnAxis(TM,e)}translateOnAxis(e,t){return EM.copy(e).applyQuaternion(this.quaternion),this.position.add(EM.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(AM,e)}translateY(e){return this.translateOnAxis(CM,e)}translateZ(e){return this.translateOnAxis(TM,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Sa.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?zg.copy(e):zg.set(e,t,i);let r=this.parent;this.updateWorldMatrix(!0,!1),Ef.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sa.lookAt(Ef,zg,this.up):Sa.lookAt(zg,Ef,this.up),this.quaternion.setFromRotationMatrix(Sa),r&&(Sa.extractRotation(r.matrixWorld),id.setFromRotationMatrix(Sa),this.quaternion.premultiply(id.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(CG)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(MM)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(MM)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Sa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Sa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Sa),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){let n=this.children[i].getObjectByProperty(e,t);if(n!==void 0)return n}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ef,e,EG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ef,AG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){let i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let r=this.children;for(let n=0,s=r.length;n<s;n++)r[n].updateWorldMatrix(!1,!0)}}toJSON(e){let t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function n(o,a){return o[a.uuid]===void 0&&(o[a.uuid]=a.toJSON(e)),a.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=n(e.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let a=o.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++){let d=a[l];n(e.shapes,d)}else n(e.shapes,a)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let a=0,l=this.material.length;a<l;a++)o.push(n(e.materials,this.material[a]));r.material=o}else r.material=n(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){let a=this.animations[o];r.animations.push(n(e.animations,a))}}if(t){let o=s(e.geometries),a=s(e.materials),l=s(e.textures),c=s(e.images),d=s(e.shapes),u=s(e.skeletons),h=s(e.animations),f=s(e.nodes);o.length>0&&(i.geometries=o),a.length>0&&(i.materials=a),l.length>0&&(i.textures=l),c.length>0&&(i.images=c),d.length>0&&(i.shapes=d),u.length>0&&(i.skeletons=u),h.length>0&&(i.animations=h),f.length>0&&(i.nodes=f)}return i.object=r,i;function s(o){let a=[];for(let l in o){let c=o[l];delete c.metadata,a.push(c)}return a}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){let r=e.children[i];this.add(r.clone())}return this}};Di.DefaultUp=new N(0,1,0);Di.DefaultMatrixAutoUpdate=!0;var $s=new N,_a=new N,uw=new N,Ea=new N,rd=new N,nd=new N,PM=new N,dw=new N,hw=new N,fw=new N,Tn=class{constructor(e=new N,t=new N,i=new N){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),$s.subVectors(e,t),r.cross($s);let n=r.lengthSq();return n>0?r.multiplyScalar(1/Math.sqrt(n)):r.set(0,0,0)}static getBarycoord(e,t,i,r,n){$s.subVectors(r,t),_a.subVectors(i,t),uw.subVectors(e,t);let s=$s.dot($s),o=$s.dot(_a),a=$s.dot(uw),l=_a.dot(_a),c=_a.dot(uw),d=s*l-o*o;if(d===0)return n.set(-2,-1,-1);let u=1/d,h=(l*a-o*c)*u,f=(s*c-o*a)*u;return n.set(1-h-f,f,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ea),Ea.x>=0&&Ea.y>=0&&Ea.x+Ea.y<=1}static getUV(e,t,i,r,n,s,o,a){return this.getBarycoord(e,t,i,r,Ea),a.set(0,0),a.addScaledVector(n,Ea.x),a.addScaledVector(s,Ea.y),a.addScaledVector(o,Ea.z),a}static isFrontFacing(e,t,i,r){return $s.subVectors(i,t),_a.subVectors(e,t),$s.cross(_a).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return $s.subVectors(this.c,this.b),_a.subVectors(this.a,this.b),$s.cross(_a).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Tn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Tn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,n){return Tn.getUV(e,this.a,this.b,this.c,t,i,r,n)}containsPoint(e){return Tn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Tn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,n=this.c,s,o;rd.subVectors(r,i),nd.subVectors(n,i),dw.subVectors(e,i);let a=rd.dot(dw),l=nd.dot(dw);if(a<=0&&l<=0)return t.copy(i);hw.subVectors(e,r);let c=rd.dot(hw),d=nd.dot(hw);if(c>=0&&d<=c)return t.copy(r);let u=a*d-c*l;if(u<=0&&a>=0&&c<=0)return s=a/(a-c),t.copy(i).addScaledVector(rd,s);fw.subVectors(e,n);let h=rd.dot(fw),f=nd.dot(fw);if(f>=0&&h<=f)return t.copy(n);let m=h*l-a*f;if(m<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(i).addScaledVector(nd,o);let v=c*f-h*d;if(v<=0&&d-c>=0&&h-f>=0)return PM.subVectors(n,r),o=(d-c)/(d-c+(h-f)),t.copy(r).addScaledVector(PM,o);let g=1/(v+m+u);return s=m*g,o=u*g,t.copy(i).addScaledVector(rd,s).addScaledVector(nd,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},TG=0,Im=class extends kn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:TG++}),this.uuid=Zo(),this.name="",this.type="Material",this.blending=ih,this.side=hc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=YR,this.blendDst=QR,this.blendEquation=bd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=HS,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=eG,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Jx,this.stencilZFail=Jx,this.stencilZPass=Jx,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===cH;continue}let r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ih&&(i.blending=this.blending),this.side!==hc&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(n){let s=[];for(let o in n){let a=n[o];delete a.metadata,s.push(a)}return s}if(t){let n=r(e.textures),s=r(e.images);n.length>0&&(i.textures=n),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let n=0;n!==r;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Rm=class extends Im{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=KR,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},dr=new N,Fg=new de,Gt=class{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=qS,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,n=this.itemSize;r<n;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),s=new Lt),t[i++]=s.r,t[i++]=s.g,t[i++]=s.b}return this}copyVector2sArray(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new de),t[i++]=s.x,t[i++]=s.y}return this}copyVector3sArray(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),s=new N),t[i++]=s.x,t[i++]=s.y,t[i++]=s.z}return this}copyVector4sArray(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),s=new Qt),t[i++]=s.x,t[i++]=s.y,t[i++]=s.z,t[i++]=s.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Fg.fromBufferAttribute(this,t),Fg.applyMatrix3(e),this.setXY(t,Fg.x,Fg.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)dr.fromBufferAttribute(this,t),dr.applyMatrix3(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)dr.fromBufferAttribute(this,t),dr.applyMatrix4(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)dr.fromBufferAttribute(this,t),dr.applyNormalMatrix(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)dr.fromBufferAttribute(this,t),dr.transformDirection(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==qS&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}},sN=class extends Gt{constructor(e,t,i){super(new Uint16Array(e),t,i)}},_p=class extends Gt{constructor(e,t,i){super(new Uint32Array(e),t,i)}},MG=class extends Gt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}},ut=class extends Gt{constructor(e,t,i){super(new Float32Array(e),t,i)}},PG=0,ms=new at,pw=new Di,sd=new N,Hn=new fr,Af=new fr,Ar=new N,It=class extends kn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:PG++}),this.uuid=Zo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(eN(e)?_p:sN)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let n=new pn().getNormalMatrix(e);i.applyNormalMatrix(n),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ms.makeRotationFromQuaternion(e),this.applyMatrix4(ms),this}rotateX(e){return ms.makeRotationX(e),this.applyMatrix4(ms),this}rotateY(e){return ms.makeRotationY(e),this.applyMatrix4(ms),this}rotateZ(e){return ms.makeRotationZ(e),this.applyMatrix4(ms),this}translate(e,t,i){return ms.makeTranslation(e,t,i),this.applyMatrix4(ms),this}scale(e,t,i){return ms.makeScale(e,t,i),this.applyMatrix4(ms),this}lookAt(e){return pw.lookAt(e),pw.updateMatrix(),this.applyMatrix4(pw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(sd).negate(),this.translate(sd.x,sd.y,sd.z),this}setFromPoints(e){let t=[];for(let i=0,r=e.length;i<r;i++){let n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new ut(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new N(-1/0,-1/0,-1/0),new N(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let n=t[i];Hn.setFromBufferAttribute(n),this.morphTargetsRelative?(Ar.addVectors(this.boundingBox.min,Hn.min),this.boundingBox.expandByPoint(Ar),Ar.addVectors(this.boundingBox.max,Hn.max),this.boundingBox.expandByPoint(Ar)):(this.boundingBox.expandByPoint(Hn.min),this.boundingBox.expandByPoint(Hn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ks);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new N,1/0);return}if(e){let i=this.boundingSphere.center;if(Hn.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){let o=t[n];Af.setFromBufferAttribute(o),this.morphTargetsRelative?(Ar.addVectors(Hn.min,Af.min),Hn.expandByPoint(Ar),Ar.addVectors(Hn.max,Af.max),Hn.expandByPoint(Ar)):(Hn.expandByPoint(Af.min),Hn.expandByPoint(Af.max))}Hn.getCenter(i);let r=0;for(let n=0,s=e.count;n<s;n++)Ar.fromBufferAttribute(e,n),r=Math.max(r,i.distanceToSquared(Ar));if(t)for(let n=0,s=t.length;n<s;n++){let o=t[n],a=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)Ar.fromBufferAttribute(o,l),a&&(sd.fromBufferAttribute(e,l),Ar.add(sd)),r=Math.max(r,i.distanceToSquared(Ar))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.array,r=t.position.array,n=t.normal.array,s=t.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Gt(new Float32Array(4*o),4));let a=this.getAttribute("tangent").array,l=[],c=[];for(let D=0;D<o;D++)l[D]=new N,c[D]=new N;let d=new N,u=new N,h=new N,f=new de,m=new de,v=new de,g=new N,p=new N;function x(D,I,R){d.fromArray(r,D*3),u.fromArray(r,I*3),h.fromArray(r,R*3),f.fromArray(s,D*2),m.fromArray(s,I*2),v.fromArray(s,R*2),u.sub(d),h.sub(d),m.sub(f),v.sub(f);let B=1/(m.x*v.y-v.x*m.y);!isFinite(B)||(g.copy(u).multiplyScalar(v.y).addScaledVector(h,-m.y).multiplyScalar(B),p.copy(h).multiplyScalar(m.x).addScaledVector(u,-v.x).multiplyScalar(B),l[D].add(g),l[I].add(g),l[R].add(g),c[D].add(p),c[I].add(p),c[R].add(p))}let b=this.groups;b.length===0&&(b=[{start:0,count:i.length}]);for(let D=0,I=b.length;D<I;++D){let R=b[D],B=R.start,G=R.count;for(let j=B,ee=B+G;j<ee;j+=3)x(i[j+0],i[j+1],i[j+2])}let S=new N,E=new N,y=new N,C=new N;function A(D){y.fromArray(n,D*3),C.copy(y);let I=l[D];S.copy(I),S.sub(y.multiplyScalar(y.dot(I))).normalize(),E.crossVectors(C,I);let R=E.dot(c[D])<0?-1:1;a[D*4]=S.x,a[D*4+1]=S.y,a[D*4+2]=S.z,a[D*4+3]=R}for(let D=0,I=b.length;D<I;++D){let R=b[D],B=R.start,G=R.count;for(let j=B,ee=B+G;j<ee;j+=3)A(i[j+0]),A(i[j+1]),A(i[j+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Gt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let u=0,h=i.count;u<h;u++)i.setXYZ(u,0,0,0);let r=new N,n=new N,s=new N,o=new N,a=new N,l=new N,c=new N,d=new N;if(e)for(let u=0,h=e.count;u<h;u+=3){let f=e.getX(u+0),m=e.getX(u+1),v=e.getX(u+2);r.fromBufferAttribute(t,f),n.fromBufferAttribute(t,m),s.fromBufferAttribute(t,v),c.subVectors(s,n),d.subVectors(r,n),c.cross(d),o.fromBufferAttribute(i,f),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,v),o.add(c),a.add(c),l.add(c),i.setXYZ(f,o.x,o.y,o.z),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(v,l.x,l.y,l.z)}else for(let u=0,h=t.count;u<h;u+=3)r.fromBufferAttribute(t,u+0),n.fromBufferAttribute(t,u+1),s.fromBufferAttribute(t,u+2),c.subVectors(s,n),d.subVectors(r,n),c.cross(d),i.setXYZ(u+0,c.x,c.y,c.z),i.setXYZ(u+1,c.x,c.y,c.z),i.setXYZ(u+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));let i=this.attributes;for(let r in i){if(e.attributes[r]===void 0)continue;let n=i[r].array,s=e.attributes[r],o=s.array,a=s.itemSize*t,l=Math.min(o.length,n.length-a);for(let c=0,d=a;c<l;c++,d++)n[d]=o[c]}return this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ar.fromBufferAttribute(e,t),Ar.normalize(),e.setXYZ(t,Ar.x,Ar.y,Ar.z)}toNonIndexed(){function e(o,a){let l=o.array,c=o.itemSize,d=o.normalized,u=new l.constructor(a.length*c),h=0,f=0;for(let m=0,v=a.length;m<v;m++){o.isInterleavedBufferAttribute?h=a[m]*o.data.stride+o.offset:h=a[m]*c;for(let g=0;g<c;g++)u[f++]=l[h++]}return new Gt(u,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new It,i=this.index.array,r=this.attributes;for(let o in r){let a=r[o],l=e(a,i);t.setAttribute(o,l)}let n=this.morphAttributes;for(let o in n){let a=[],l=n[o];for(let c=0,d=l.length;c<d;c++){let u=l[c],h=e(u,i);a.push(h)}t.morphAttributes[o]=a}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let o=0,a=s.length;o<a;o++){let l=s[o];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let a=this.parameters;for(let l in a)a[l]!==void 0&&(e[l]=a[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let a in i){let l=i[a];e.data.attributes[a]=l.toJSON(e.data)}let r={},n=!1;for(let a in this.morphAttributes){let l=this.morphAttributes[a],c=[];for(let d=0,u=l.length;d<u;d++){let h=l[d];c.push(h.toJSON(e.data))}c.length>0&&(r[a]=c,n=!0)}n&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(t));let r=e.attributes;for(let l in r){let c=r[l];this.setAttribute(l,c.clone(t))}let n=e.morphAttributes;for(let l in n){let c=[],d=n[l];for(let u=0,h=d.length;u<h;u++)c.push(d[u].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,c=s.length;l<c;l++){let d=s[l];this.addGroup(d.start,d.count,d.materialIndex)}let o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());let a=e.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},DM=new at,od=new Bh,mw=new ks,vl=new N,yl=new N,xl=new N,gw=new N,vw=new N,yw=new N,Ug=new N,jg=new N,Hg=new N,Gg=new de,Vg=new de,Wg=new de,xw=new N,qg=new N,$n=class extends Di{constructor(e=new It,t=new Rm){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=i.length;r<n;r++){let s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}raycast(e,t){let i=this.geometry,r=this.material,n=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),mw.copy(i.boundingSphere),mw.applyMatrix4(n),e.ray.intersectsSphere(mw)===!1)||(DM.copy(n).invert(),od.copy(e.ray).applyMatrix4(DM),i.boundingBox!==null&&od.intersectsBox(i.boundingBox)===!1))return;let s,o=i.index,a=i.attributes.position,l=i.morphAttributes.position,c=i.morphTargetsRelative,d=i.attributes.uv,u=i.attributes.uv2,h=i.groups,f=i.drawRange;if(o!==null)if(Array.isArray(r))for(let m=0,v=h.length;m<v;m++){let g=h[m],p=r[g.materialIndex],x=Math.max(g.start,f.start),b=Math.min(o.count,Math.min(g.start+g.count,f.start+f.count));for(let S=x,E=b;S<E;S+=3){let y=o.getX(S),C=o.getX(S+1),A=o.getX(S+2);s=Xg(this,p,e,od,a,l,c,d,u,y,C,A),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{let m=Math.max(0,f.start),v=Math.min(o.count,f.start+f.count);for(let g=m,p=v;g<p;g+=3){let x=o.getX(g),b=o.getX(g+1),S=o.getX(g+2);s=Xg(this,r,e,od,a,l,c,d,u,x,b,S),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}else if(a!==void 0)if(Array.isArray(r))for(let m=0,v=h.length;m<v;m++){let g=h[m],p=r[g.materialIndex],x=Math.max(g.start,f.start),b=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let S=x,E=b;S<E;S+=3){let y=S,C=S+1,A=S+2;s=Xg(this,p,e,od,a,l,c,d,u,y,C,A),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{let m=Math.max(0,f.start),v=Math.min(a.count,f.start+f.count);for(let g=m,p=v;g<p;g+=3){let x=g,b=g+1,S=g+2;s=Xg(this,r,e,od,a,l,c,d,u,x,b,S),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}}};function DG(e,t,i,r,n,s,o,a){let l;if(t.side===Zr?l=r.intersectTriangle(o,s,n,!0,a):l=r.intersectTriangle(n,s,o,t.side!==lo,a),l===null)return null;qg.copy(a),qg.applyMatrix4(e.matrixWorld);let c=i.ray.origin.distanceTo(qg);return c<i.near||c>i.far?null:{distance:c,point:qg.clone(),object:e}}function Xg(e,t,i,r,n,s,o,a,l,c,d,u){vl.fromBufferAttribute(n,c),yl.fromBufferAttribute(n,d),xl.fromBufferAttribute(n,u);let h=e.morphTargetInfluences;if(s&&h){Ug.set(0,0,0),jg.set(0,0,0),Hg.set(0,0,0);for(let m=0,v=s.length;m<v;m++){let g=h[m],p=s[m];g!==0&&(gw.fromBufferAttribute(p,c),vw.fromBufferAttribute(p,d),yw.fromBufferAttribute(p,u),o?(Ug.addScaledVector(gw,g),jg.addScaledVector(vw,g),Hg.addScaledVector(yw,g)):(Ug.addScaledVector(gw.sub(vl),g),jg.addScaledVector(vw.sub(yl),g),Hg.addScaledVector(yw.sub(xl),g)))}vl.add(Ug),yl.add(jg),xl.add(Hg)}e.isSkinnedMesh&&(e.boneTransform(c,vl),e.boneTransform(d,yl),e.boneTransform(u,xl));let f=DG(e,t,i,r,vl,yl,xl,xw);if(f){a&&(Gg.fromBufferAttribute(a,c),Vg.fromBufferAttribute(a,d),Wg.fromBufferAttribute(a,u),f.uv=Tn.getUV(xw,vl,yl,xl,Gg,Vg,Wg,new de)),l&&(Gg.fromBufferAttribute(l,c),Vg.fromBufferAttribute(l,d),Wg.fromBufferAttribute(l,u),f.uv2=Tn.getUV(xw,vl,yl,xl,Gg,Vg,Wg,new de));let m={a:c,b:d,c:u,normal:new N,materialIndex:0};Tn.getNormal(vl,yl,xl,m.normal),f.face=m}return f}var ia=class extends It{constructor(e=1,t=1,i=1,r=1,n=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:s};let o=this;r=Math.floor(r),n=Math.floor(n),s=Math.floor(s);let a=[],l=[],c=[],d=[],u=0,h=0;f("z","y","x",-1,-1,i,t,e,s,n,0),f("z","y","x",1,-1,i,t,-e,s,n,1),f("x","z","y",1,1,e,i,t,r,s,2),f("x","z","y",1,-1,e,i,-t,r,s,3),f("x","y","z",1,-1,e,t,i,r,n,4),f("x","y","z",-1,-1,e,t,-i,r,n,5),this.setIndex(a),this.setAttribute("position",new ut(l,3)),this.setAttribute("normal",new ut(c,3)),this.setAttribute("uv",new ut(d,2));function f(m,v,g,p,x,b,S,E,y,C,A){let D=b/y,I=S/C,R=b/2,B=S/2,G=E/2,j=y+1,ee=C+1,Q=0,re=0,z=new N;for(let X=0;X<ee;X++){let Y=X*I-B;for(let K=0;K<j;K++){let Z=K*D-R;z[m]=Z*p,z[v]=Y*x,z[g]=G,l.push(z.x,z.y,z.z),z[m]=0,z[v]=0,z[g]=E>0?1:-1,c.push(z.x,z.y,z.z),d.push(K/y),d.push(1-X/C),Q+=1}}for(let X=0;X<C;X++)for(let Y=0;Y<y;Y++){let K=u+Y+j*X,Z=u+Y+j*(X+1),V=u+(Y+1)+j*(X+1),fe=u+(Y+1)+j*X;a.push(K,Z,fe),a.push(Z,V,fe),re+=6}o.addGroup(h,re,A),h+=re,u+=Q}}static fromJSON(e){return new ia(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Sh(e){let t={};for(let i in e){t[i]={};for(let r in e[i]){let n=e[i][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[i][r]=n.clone():Array.isArray(n)?t[i][r]=n.slice():t[i][r]=n}}return t}function Xr(e){let t={};for(let i=0;i<e.length;i++){let r=Sh(e[i]);for(let n in r)t[n]=r[n]}return t}var kh={clone:Sh,merge:Xr},OG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,LG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,_r=class extends Im{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=OG,this.fragmentShader=LG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Sh(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},zh=class extends Di{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new at,this.projectionMatrix=new at,this.projectionMatrixInverse=new at}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Qr=class extends zh{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=im*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(bp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return im*2*Math.atan(Math.tan(bp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,n,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(bp*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,n=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let a=s.fullWidth,l=s.fullHeight;n+=s.offsetX*r/a,t-=s.offsetY*i/l,r*=s.width/a,i*=s.height/l}let o=this.filmOffset;o!==0&&(n+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},ad=90,ld=1,IG=class extends Di{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;let r=new Qr(ad,ld,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new N(1,0,0)),this.add(r);let n=new Qr(ad,ld,e,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new N(-1,0,0)),this.add(n);let s=new Qr(ad,ld,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new N(0,1,0)),this.add(s);let o=new Qr(ad,ld,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new N(0,-1,0)),this.add(o);let a=new Qr(ad,ld,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new N(0,0,1)),this.add(a);let l=new Qr(ad,ld,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new N(0,0,-1)),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let i=this.renderTarget,[r,n,s,o,a,l]=this.children,c=e.getRenderTarget(),d=e.toneMapping,u=e.xr.enabled;e.toneMapping=Fa,e.xr.enabled=!1;let h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,n),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,o),e.setRenderTarget(i,4),e.render(t,a),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=d,e.xr.enabled=u,i.texture.needsPMREMUpdate=!0}},L2=class extends tn{constructor(e,t,i,r,n,s,o,a,l,c){e=e!==void 0?e:[],t=t!==void 0?t:_u,super(e,t,i,r,n,s,o,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},RG=class extends lr{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new L2(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:vi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ia(5,5,5),n=new _r({name:"CubemapFromEquirect",uniforms:Sh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Zr,blending:Nr});n.uniforms.tEquirect.value=t;let s=new $n(r,n),o=t.minFilter;return t.minFilter===Lm&&(t.minFilter=vi),new IG(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,r){let n=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(n)}},ww=new N,NG=new N,BG=new pn,As=class{constructor(e=new N(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=ww.subVectors(i,t).cross(NG.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let i=e.delta(ww),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/r;return n<0||n>1?null:t.copy(i).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||BG.getNormalMatrix(e),r=this.coplanarPoint(ww).applyMatrix4(e),n=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},cd=new ks,Yg=new N,I2=class{constructor(e=new As,t=new As,i=new As,r=new As,n=new As,s=new As){this.planes=[e,t,i,r,n,s]}set(e,t,i,r,n,s){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(n),o[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let t=this.planes,i=e.elements,r=i[0],n=i[1],s=i[2],o=i[3],a=i[4],l=i[5],c=i[6],d=i[7],u=i[8],h=i[9],f=i[10],m=i[11],v=i[12],g=i[13],p=i[14],x=i[15];return t[0].setComponents(o-r,d-a,m-u,x-v).normalize(),t[1].setComponents(o+r,d+a,m+u,x+v).normalize(),t[2].setComponents(o+n,d+l,m+h,x+g).normalize(),t[3].setComponents(o-n,d-l,m-h,x-g).normalize(),t[4].setComponents(o-s,d-c,m-f,x-p).normalize(),t[5].setComponents(o+s,d+c,m+f,x+p).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),cd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(cd)}intersectsSprite(e){return cd.center.set(0,0,0),cd.radius=.7071067811865476,cd.applyMatrix4(e.matrixWorld),this.intersectsSphere(cd)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(Yg.x=r.normal.x>0?e.max.x:e.min.x,Yg.y=r.normal.y>0?e.max.y:e.min.y,Yg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Yg)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function oN(){let e=null,t=!1,i=null,r=null;function n(s,o){i(s,o),r=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&i!==null&&(r=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(s){i=s},setContext:function(s){e=s}}}function kG(e,t){let i=t.isWebGL2,r=new WeakMap;function n(c,d){let u=c.array,h=c.usage,f=e.createBuffer();e.bindBuffer(d,f),e.bufferData(d,u,h),c.onUploadCallback();let m;if(u instanceof Float32Array)m=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(i)m=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=5123;else if(u instanceof Int16Array)m=5122;else if(u instanceof Uint32Array)m=5125;else if(u instanceof Int32Array)m=5124;else if(u instanceof Int8Array)m=5120;else if(u instanceof Uint8Array)m=5121;else if(u instanceof Uint8ClampedArray)m=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,d,u){let h=d.array,f=d.updateRange;e.bindBuffer(u,c),f.count===-1?e.bufferSubData(u,0,h):(i?e.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):e.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);let d=r.get(c);d&&(e.deleteBuffer(d.buffer),r.delete(c))}function l(c,d){if(c.isGLBufferAttribute){let h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);let u=r.get(c);u===void 0?r.set(c,n(c,d)):u.version<c.version&&(s(u.buffer,c,d),u.version=c.version)}return{get:o,remove:a,update:l}}var m1=class extends It{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let n=e/2,s=t/2,o=Math.floor(i),a=Math.floor(r),l=o+1,c=a+1,d=e/o,u=t/a,h=[],f=[],m=[],v=[];for(let g=0;g<c;g++){let p=g*u-s;for(let x=0;x<l;x++){let b=x*d-n;f.push(b,-p,0),m.push(0,0,1),v.push(x/o),v.push(1-g/a)}}for(let g=0;g<a;g++)for(let p=0;p<o;p++){let x=p+l*g,b=p+l*(g+1),S=p+1+l*(g+1),E=p+1+l*g;h.push(x,b,E),h.push(b,S,E)}this.setIndex(h),this.setAttribute("position",new ut(f,3)),this.setAttribute("normal",new ut(m,3)),this.setAttribute("uv",new ut(v,2))}static fromJSON(e){return new m1(e.width,e.height,e.widthSegments,e.heightSegments)}},zG=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,FG=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,UG=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,jG=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,HG=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,GG=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,VG="vec3 transformed = vec3( position );",WG=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,qG=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,XG=`#ifdef USE_IRIDESCENCE
const mat3 XYZ_TO_REC709 = mat3(
    3.2404542, -0.9692660,  0.0556434,
   -1.5371385,  1.8760108, -0.2040259,
   -0.4985314,  0.0415560,  1.0572252
);
vec3 Fresnel0ToIor( vec3 fresnel0 ) {
   vec3 sqrtF0 = sqrt( fresnel0 );
   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
}
vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
}
float IorToFresnel0( float transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
}
vec3 evalSensitivity( float OPD, vec3 shift ) {
   float phase = 2.0 * PI * OPD * 1.0e-9;
   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );
   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );
   xyz /= 1.0685e-7;
   vec3 srgb = XYZ_TO_REC709 * xyz;
   return srgb;
}
vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
   vec3 I;
   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
   float cosTheta2Sq = 1.0 - sinTheta2Sq;
   if ( cosTheta2Sq < 0.0 ) {
       return vec3( 1.0 );
   }
   float cosTheta2 = sqrt( cosTheta2Sq );
   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
   float R12 = F_Schlick( R0, 1.0, cosTheta1 );
   float R21 = R12;
   float T121 = 1.0 - R12;
   float phi12 = 0.0;
   if ( iridescenceIOR < outsideIOR ) phi12 = PI;
   float phi21 = PI - phi12;
   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
   vec3 phi23 = vec3( 0.0 );
   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;
   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;
   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;
   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
   vec3 phi = vec3( phi21 ) + phi23;
   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
   vec3 r123 = sqrt( R123 );
   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
   vec3 C0 = R12 + Rs;
   I = C0;
   vec3 Cm = Rs - T121;
   for ( int m = 1; m <= 2; ++m ) {
       Cm *= r123;
       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
       I += Cm * Sm;
   }
   return max( I, vec3( 0.0 ) );
}
#endif`,YG=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,QG=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,KG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ZG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,$G=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,JG=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,eV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,tV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,iV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,rV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,nV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,sV=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,oV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,aV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,lV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,cV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,uV="gl_FragColor = linearToOutputTexel( gl_FragColor );",dV=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,hV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,fV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,pV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,mV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,gV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,vV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,yV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,xV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,wV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,bV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,SV=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,_V=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,EV=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,AV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,CV=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,TV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,MV=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,PV=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,DV=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,OV=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,LV=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,IV=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
float dotNVi = saturate( dot( normal, geometry.viewDir ) );
if ( material.iridescenceThickness == 0.0 ) {
	material.iridescence = 0.0;
} else {
	material.iridescence = saturate( material.iridescence );
}
if ( material.iridescence > 0.0 ) {
	material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
	material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,RV=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,NV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,BV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,kV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,zV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,FV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,UV=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,jV=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,HV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,GV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,VV=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,WV=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,qV=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,XV=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,YV=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,QV=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,KV=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,ZV=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$V=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,JV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,e8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,t8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,i8=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,r8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,n8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,s8=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,o8=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,a8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,l8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,c8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,u8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,d8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,h8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,f8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,p8=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,m8=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,g8=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,v8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,y8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,x8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,w8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,b8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,S8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,_8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,E8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,A8=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,C8=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,T8=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,M8=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,P8=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,D8=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,O8=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,L8=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,I8=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,R8=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,N8=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,B8=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,k8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,z8=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,F8=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,U8=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,j8=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,H8=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,G8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,V8=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,W8=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,q8=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,X8=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Y8=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q8=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,K8=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Z8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,J8=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,eW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,tW=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iW=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rW=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,nW=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sW=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oW=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aW=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,lW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cW=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,dW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Xt={alphamap_fragment:zG,alphamap_pars_fragment:FG,alphatest_fragment:UG,alphatest_pars_fragment:jG,aomap_fragment:HG,aomap_pars_fragment:GG,begin_vertex:VG,beginnormal_vertex:WG,bsdfs:qG,iridescence_fragment:XG,bumpmap_pars_fragment:YG,clipping_planes_fragment:QG,clipping_planes_pars_fragment:KG,clipping_planes_pars_vertex:ZG,clipping_planes_vertex:$G,color_fragment:JG,color_pars_fragment:eV,color_pars_vertex:tV,color_vertex:iV,common:rV,cube_uv_reflection_fragment:nV,defaultnormal_vertex:sV,displacementmap_pars_vertex:oV,displacementmap_vertex:aV,emissivemap_fragment:lV,emissivemap_pars_fragment:cV,encodings_fragment:uV,encodings_pars_fragment:dV,envmap_fragment:hV,envmap_common_pars_fragment:fV,envmap_pars_fragment:pV,envmap_pars_vertex:mV,envmap_physical_pars_fragment:CV,envmap_vertex:gV,fog_vertex:vV,fog_pars_vertex:yV,fog_fragment:xV,fog_pars_fragment:wV,gradientmap_pars_fragment:bV,lightmap_fragment:SV,lightmap_pars_fragment:_V,lights_lambert_vertex:EV,lights_pars_begin:AV,lights_toon_fragment:TV,lights_toon_pars_fragment:MV,lights_phong_fragment:PV,lights_phong_pars_fragment:DV,lights_physical_fragment:OV,lights_physical_pars_fragment:LV,lights_fragment_begin:IV,lights_fragment_maps:RV,lights_fragment_end:NV,logdepthbuf_fragment:BV,logdepthbuf_pars_fragment:kV,logdepthbuf_pars_vertex:zV,logdepthbuf_vertex:FV,map_fragment:UV,map_pars_fragment:jV,map_particle_fragment:HV,map_particle_pars_fragment:GV,metalnessmap_fragment:VV,metalnessmap_pars_fragment:WV,morphcolor_vertex:qV,morphnormal_vertex:XV,morphtarget_pars_vertex:YV,morphtarget_vertex:QV,normal_fragment_begin:KV,normal_fragment_maps:ZV,normal_pars_fragment:$V,normal_pars_vertex:JV,normal_vertex:e8,normalmap_pars_fragment:t8,clearcoat_normal_fragment_begin:i8,clearcoat_normal_fragment_maps:r8,clearcoat_pars_fragment:n8,iridescence_pars_fragment:s8,output_fragment:o8,packing:a8,premultiplied_alpha_fragment:l8,project_vertex:c8,dithering_fragment:u8,dithering_pars_fragment:d8,roughnessmap_fragment:h8,roughnessmap_pars_fragment:f8,shadowmap_pars_fragment:p8,shadowmap_pars_vertex:m8,shadowmap_vertex:g8,shadowmask_pars_fragment:v8,skinbase_vertex:y8,skinning_pars_vertex:x8,skinning_vertex:w8,skinnormal_vertex:b8,specularmap_fragment:S8,specularmap_pars_fragment:_8,tonemapping_fragment:E8,tonemapping_pars_fragment:A8,transmission_fragment:C8,transmission_pars_fragment:T8,uv_pars_fragment:M8,uv_pars_vertex:P8,uv_vertex:D8,uv2_pars_fragment:O8,uv2_pars_vertex:L8,uv2_vertex:I8,worldpos_vertex:R8,background_vert:N8,background_frag:B8,cube_vert:k8,cube_frag:z8,depth_vert:F8,depth_frag:U8,distanceRGBA_vert:j8,distanceRGBA_frag:H8,equirect_vert:G8,equirect_frag:V8,linedashed_vert:W8,linedashed_frag:q8,meshbasic_vert:X8,meshbasic_frag:Y8,meshlambert_vert:Q8,meshlambert_frag:K8,meshmatcap_vert:Z8,meshmatcap_frag:$8,meshnormal_vert:J8,meshnormal_frag:eW,meshphong_vert:tW,meshphong_frag:iW,meshphysical_vert:rW,meshphysical_frag:nW,meshtoon_vert:sW,meshtoon_frag:oW,points_vert:aW,points_frag:lW,shadow_vert:cW,shadow_frag:uW,sprite_vert:dW,sprite_frag:hW},it={common:{diffuse:{value:new Lt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new pn},uv2Transform:{value:new pn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new de(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pn}},sprite:{diffuse:{value:new Lt(16777215)},opacity:{value:1},center:{value:new de(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pn}}},Bo={basic:{uniforms:Xr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:Xt.meshbasic_vert,fragmentShader:Xt.meshbasic_frag},lambert:{uniforms:Xr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.fog,it.lights,{emissive:{value:new Lt(0)}}]),vertexShader:Xt.meshlambert_vert,fragmentShader:Xt.meshlambert_frag},phong:{uniforms:Xr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new Lt(0)},specular:{value:new Lt(1118481)},shininess:{value:30}}]),vertexShader:Xt.meshphong_vert,fragmentShader:Xt.meshphong_frag},standard:{uniforms:Xr([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new Lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag},toon:{uniforms:Xr([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new Lt(0)}}]),vertexShader:Xt.meshtoon_vert,fragmentShader:Xt.meshtoon_frag},matcap:{uniforms:Xr([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:Xt.meshmatcap_vert,fragmentShader:Xt.meshmatcap_frag},points:{uniforms:Xr([it.points,it.fog]),vertexShader:Xt.points_vert,fragmentShader:Xt.points_frag},dashed:{uniforms:Xr([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xt.linedashed_vert,fragmentShader:Xt.linedashed_frag},depth:{uniforms:Xr([it.common,it.displacementmap]),vertexShader:Xt.depth_vert,fragmentShader:Xt.depth_frag},normal:{uniforms:Xr([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:Xt.meshnormal_vert,fragmentShader:Xt.meshnormal_frag},sprite:{uniforms:Xr([it.sprite,it.fog]),vertexShader:Xt.sprite_vert,fragmentShader:Xt.sprite_frag},background:{uniforms:{uvTransform:{value:new pn},t2D:{value:null}},vertexShader:Xt.background_vert,fragmentShader:Xt.background_frag},cube:{uniforms:Xr([it.envmap,{opacity:{value:1}}]),vertexShader:Xt.cube_vert,fragmentShader:Xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xt.equirect_vert,fragmentShader:Xt.equirect_frag},distanceRGBA:{uniforms:Xr([it.common,it.displacementmap,{referencePosition:{value:new N},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xt.distanceRGBA_vert,fragmentShader:Xt.distanceRGBA_frag},shadow:{uniforms:Xr([it.lights,it.fog,{color:{value:new Lt(0)},opacity:{value:1}}]),vertexShader:Xt.shadow_vert,fragmentShader:Xt.shadow_frag}};Bo.physical={uniforms:Xr([Bo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new de(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Lt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new de},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Lt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Lt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag};function fW(e,t,i,r,n,s){let o=new Lt(0),a=n===!0?0:1,l,c,d=null,u=0,h=null;function f(v,g){let p=!1,x=g.isScene===!0?g.background:null;x&&x.isTexture&&(x=t.get(x));let b=e.xr,S=b.getSession&&b.getSession();S&&S.environmentBlendMode==="additive"&&(x=null),x===null?m(o,a):x&&x.isColor&&(m(x,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),x&&(x.isCubeTexture||x.mapping===Om)?(c===void 0&&(c=new $n(new ia(1,1,1),new _r({name:"BackgroundCubeMaterial",uniforms:Sh(Bo.cube.uniforms),vertexShader:Bo.cube.vertexShader,fragmentShader:Bo.cube.fragmentShader,side:Zr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(E,y,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=x,c.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,(d!==x||u!==x.version||h!==e.toneMapping)&&(c.material.needsUpdate=!0,d=x,u=x.version,h=e.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null)):x&&x.isTexture&&(l===void 0&&(l=new $n(new m1(2,2),new _r({name:"BackgroundMaterial",uniforms:Sh(Bo.background.uniforms),vertexShader:Bo.background.vertexShader,fragmentShader:Bo.background.fragmentShader,side:hc,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=x,x.matrixAutoUpdate===!0&&x.updateMatrix(),l.material.uniforms.uvTransform.value.copy(x.matrix),(d!==x||u!==x.version||h!==e.toneMapping)&&(l.material.needsUpdate=!0,d=x,u=x.version,h=e.toneMapping),l.layers.enableAll(),v.unshift(l,l.geometry,l.material,0,0,null))}function m(v,g){i.buffers.color.setClear(v.r,v.g,v.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(v,g=1){o.set(v),a=g,m(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(v){a=v,m(o,a)},render:f}}function pW(e,t,i,r){let n=e.getParameter(34921),s=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=g(null),c=l,d=!1;function u(j,ee,Q,re,z){let X=!1;if(o){let Y=v(re,Q,ee);c!==Y&&(c=Y,f(c.object)),X=p(j,re,Q,z),X&&x(j,re,Q,z)}else{let Y=ee.wireframe===!0;(c.geometry!==re.id||c.program!==Q.id||c.wireframe!==Y)&&(c.geometry=re.id,c.program=Q.id,c.wireframe=Y,X=!0)}z!==null&&i.update(z,34963),(X||d)&&(d=!1,A(j,ee,Q,re),z!==null&&e.bindBuffer(34963,i.get(z).buffer))}function h(){return r.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function f(j){return r.isWebGL2?e.bindVertexArray(j):s.bindVertexArrayOES(j)}function m(j){return r.isWebGL2?e.deleteVertexArray(j):s.deleteVertexArrayOES(j)}function v(j,ee,Q){let re=Q.wireframe===!0,z=a[j.id];z===void 0&&(z={},a[j.id]=z);let X=z[ee.id];X===void 0&&(X={},z[ee.id]=X);let Y=X[re];return Y===void 0&&(Y=g(h()),X[re]=Y),Y}function g(j){let ee=[],Q=[],re=[];for(let z=0;z<n;z++)ee[z]=0,Q[z]=0,re[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ee,enabledAttributes:Q,attributeDivisors:re,object:j,attributes:{},index:null}}function p(j,ee,Q,re){let z=c.attributes,X=ee.attributes,Y=0,K=Q.getAttributes();for(let Z in K)if(K[Z].location>=0){let V=z[Z],fe=X[Z];if(fe===void 0&&(Z==="instanceMatrix"&&j.instanceMatrix&&(fe=j.instanceMatrix),Z==="instanceColor"&&j.instanceColor&&(fe=j.instanceColor)),V===void 0||V.attribute!==fe||fe&&V.data!==fe.data)return!0;Y++}return c.attributesNum!==Y||c.index!==re}function x(j,ee,Q,re){let z={},X=ee.attributes,Y=0,K=Q.getAttributes();for(let Z in K)if(K[Z].location>=0){let V=X[Z];V===void 0&&(Z==="instanceMatrix"&&j.instanceMatrix&&(V=j.instanceMatrix),Z==="instanceColor"&&j.instanceColor&&(V=j.instanceColor));let fe={};fe.attribute=V,V&&V.data&&(fe.data=V.data),z[Z]=fe,Y++}c.attributes=z,c.attributesNum=Y,c.index=re}function b(){let j=c.newAttributes;for(let ee=0,Q=j.length;ee<Q;ee++)j[ee]=0}function S(j){E(j,0)}function E(j,ee){let Q=c.newAttributes,re=c.enabledAttributes,z=c.attributeDivisors;Q[j]=1,re[j]===0&&(e.enableVertexAttribArray(j),re[j]=1),z[j]!==ee&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](j,ee),z[j]=ee)}function y(){let j=c.newAttributes,ee=c.enabledAttributes;for(let Q=0,re=ee.length;Q<re;Q++)ee[Q]!==j[Q]&&(e.disableVertexAttribArray(Q),ee[Q]=0)}function C(j,ee,Q,re,z,X){r.isWebGL2===!0&&(Q===5124||Q===5125)?e.vertexAttribIPointer(j,ee,Q,z,X):e.vertexAttribPointer(j,ee,Q,re,z,X)}function A(j,ee,Q,re){if(r.isWebGL2===!1&&(j.isInstancedMesh||re.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;b();let z=re.attributes,X=Q.getAttributes(),Y=ee.defaultAttributeValues;for(let K in X){let Z=X[K];if(Z.location>=0){let V=z[K];if(V===void 0&&(K==="instanceMatrix"&&j.instanceMatrix&&(V=j.instanceMatrix),K==="instanceColor"&&j.instanceColor&&(V=j.instanceColor)),V!==void 0){let fe=V.normalized,ae=V.itemSize,ne=i.get(V);if(ne===void 0)continue;let we=ne.buffer,me=ne.type,ue=ne.bytesPerElement;if(V.isInterleavedBufferAttribute){let xe=V.data,Le=xe.stride,Re=V.offset;if(xe.isInstancedInterleavedBuffer){for(let Oe=0;Oe<Z.locationSize;Oe++)E(Z.location+Oe,xe.meshPerAttribute);j.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let Oe=0;Oe<Z.locationSize;Oe++)S(Z.location+Oe);e.bindBuffer(34962,we);for(let Oe=0;Oe<Z.locationSize;Oe++)C(Z.location+Oe,ae/Z.locationSize,me,fe,Le*ue,(Re+ae/Z.locationSize*Oe)*ue)}else{if(V.isInstancedBufferAttribute){for(let xe=0;xe<Z.locationSize;xe++)E(Z.location+xe,V.meshPerAttribute);j.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let xe=0;xe<Z.locationSize;xe++)S(Z.location+xe);e.bindBuffer(34962,we);for(let xe=0;xe<Z.locationSize;xe++)C(Z.location+xe,ae/Z.locationSize,me,fe,ae*ue,ae/Z.locationSize*xe*ue)}}else if(Y!==void 0){let fe=Y[K];if(fe!==void 0)switch(fe.length){case 2:e.vertexAttrib2fv(Z.location,fe);break;case 3:e.vertexAttrib3fv(Z.location,fe);break;case 4:e.vertexAttrib4fv(Z.location,fe);break;default:e.vertexAttrib1fv(Z.location,fe)}}}}y()}function D(){B();for(let j in a){let ee=a[j];for(let Q in ee){let re=ee[Q];for(let z in re)m(re[z].object),delete re[z];delete ee[Q]}delete a[j]}}function I(j){if(a[j.id]===void 0)return;let ee=a[j.id];for(let Q in ee){let re=ee[Q];for(let z in re)m(re[z].object),delete re[z];delete ee[Q]}delete a[j.id]}function R(j){for(let ee in a){let Q=a[ee];if(Q[j.id]===void 0)continue;let re=Q[j.id];for(let z in re)m(re[z].object),delete re[z];delete Q[j.id]}}function B(){G(),d=!0,c!==l&&(c=l,f(c.object))}function G(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:B,resetDefaultState:G,dispose:D,releaseStatesOfGeometry:I,releaseStatesOfProgram:R,initAttributes:b,enableAttribute:S,disableUnusedAttributes:y}}function mW(e,t,i,r){let n=r.isWebGL2,s;function o(c){s=c}function a(c,d){e.drawArrays(s,c,d),i.update(d,s,1)}function l(c,d,u){if(u===0)return;let h,f;if(n)h=e,f="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](s,c,d,u),i.update(d,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function gW(e,t,i){let r;function n(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let C=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(C){if(C==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";C="mediump"}return C==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let o=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&e instanceof WebGL2ComputeRenderingContext,a=i.precision!==void 0?i.precision:"highp",l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);let c=o||t.has("WEBGL_draw_buffers"),d=i.logarithmicDepthBuffer===!0,u=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),m=e.getParameter(34076),v=e.getParameter(34921),g=e.getParameter(36347),p=e.getParameter(36348),x=e.getParameter(36349),b=h>0,S=o||t.has("OES_texture_float"),E=b&&S,y=o?e.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:n,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:u,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:m,maxAttributes:v,maxVertexUniforms:g,maxVaryings:p,maxFragmentUniforms:x,vertexTextures:b,floatFragmentTextures:S,floatVertexTextures:E,maxSamples:y}}function vW(e){let t=this,i=null,r=0,n=!1,s=!1,o=new As,a=new pn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h,f){let m=u.length!==0||h||r!==0||n;return n=h,i=d(u,f,0),r=u.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,c()},this.setState=function(u,h,f){let m=u.clippingPlanes,v=u.clipIntersection,g=u.clipShadows,p=e.get(u);if(!n||m===null||m.length===0||s&&!g)s?d(null):c();else{let x=s?0:r,b=x*4,S=p.clippingState||null;l.value=S,S=d(m,h,b,f);for(let E=0;E!==b;++E)S[E]=i[E];p.clippingState=S,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==i&&(l.value=i,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function d(u,h,f,m){let v=u!==null?u.length:0,g=null;if(v!==0){if(g=l.value,m!==!0||g===null){let p=f+v*4,x=h.matrixWorldInverse;a.getNormalMatrix(x),(g===null||g.length<p)&&(g=new Float32Array(p));for(let b=0,S=f;b!==v;++b,S+=4)o.copy(u[b]).applyMatrix4(x,a),o.normal.toArray(g,S),g[S+3]=o.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=v,t.numIntersection=0,g}}function yW(e){let t=new WeakMap;function i(o,a){return a===GS?o.mapping=_u:a===VS&&(o.mapping=Eu),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){let a=o.mapping;if(a===GS||a===VS)if(t.has(o)){let l=t.get(o).texture;return i(l,o.mapping)}else{let l=o.image;if(l&&l.height>0){let c=new RG(l.height/2);return c.fromEquirectangularTexture(e,o),t.set(o,c),o.addEventListener("dispose",n),i(c.texture,o.mapping)}else return null}}return o}function n(o){let a=o.target;a.removeEventListener("dispose",n);let l=t.get(a);l!==void 0&&(t.delete(a),l.dispose())}function s(){t=new WeakMap}return{get:r,dispose:s}}var Q0=class extends zh{constructor(e=-1,t=1,i=1,r=-1,n=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=n,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,n,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,n=i-e,s=i+e,o=r+t,a=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,s=n+l*this.view.width,o-=c*this.view.offsetY,a=o-c*this.view.height}this.projectionMatrix.makeOrthographic(n,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Fd=4,OM=[.125,.215,.35,.446,.526,.582],Yc=20,bw=new Q0,LM=new Lt,Sw=null,Gc=(1+Math.sqrt(5))/2,ud=1/Gc,IM=[new N(1,1,1),new N(-1,1,1),new N(1,1,-1),new N(-1,1,-1),new N(0,Gc,ud),new N(0,Gc,-ud),new N(ud,0,Gc),new N(-ud,0,Gc),new N(Gc,ud,0),new N(-Gc,ud,0)],RM=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Sw=this._renderer.getRenderTarget(),this._setSize(256);let n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,i,r,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=kM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=BM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Sw),e.scissorTest=!1,Qg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===_u||e.mapping===Eu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Sw=this._renderer.getRenderTarget();let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:vi,minFilter:vi,generateMipmaps:!1,type:tm,format:Vo,encoding:ta,depthBuffer:!1},r=NM(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=NM(e,t,i);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=xW(n)),this._blurMaterial=wW(n,e,t)}return r}_compileMaterial(e){let t=new $n(this._lodPlanes[0],e);this._renderer.compile(t,bw)}_sceneToCubeUV(e,t,i,r){let n=new Qr(90,1,t,i),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(LM),a.toneMapping=Fa,a.autoClear=!1;let d=new Rm({name:"PMREM.Background",side:Zr,depthWrite:!1,depthTest:!1}),u=new $n(new ia,d),h=!1,f=e.background;f?f.isColor&&(d.color.copy(f),e.background=null,h=!0):(d.color.copy(LM),h=!0);for(let m=0;m<6;m++){let v=m%3;v===0?(n.up.set(0,s[m],0),n.lookAt(o[m],0,0)):v===1?(n.up.set(0,0,s[m]),n.lookAt(0,o[m],0)):(n.up.set(0,s[m],0),n.lookAt(0,0,o[m]));let g=this._cubeSize;Qg(r,v*g,m>2?g:0,g,g),a.setRenderTarget(r),h&&a.render(u,n),a.render(e,n)}u.geometry.dispose(),u.material.dispose(),a.toneMapping=c,a.autoClear=l,e.background=f}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===_u||e.mapping===Eu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=kM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=BM());let n=r?this._cubemapMaterial:this._equirectMaterial,s=new $n(this._lodPlanes[0],n),o=n.uniforms;o.envMap.value=e;let a=this._cubeSize;Qg(t,0,0,3*a,2*a),i.setRenderTarget(t),i.render(s,bw)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){let n=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),s=IM[(r-1)%IM.length];this._blur(e,r-1,r,n,s)}t.autoClear=i}_blur(e,t,i,r,n){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",n),this._halfBlur(s,e,i,i,r,"longitudinal",n)}_halfBlur(e,t,i,r,n,s,o){let a=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let c=3,d=new $n(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[i]-1,f=isFinite(n)?Math.PI/(2*h):2*Math.PI/(2*Yc-1),m=n/f,v=isFinite(n)?1+Math.floor(c*m):Yc;v>Yc&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Yc}`);let g=[],p=0;for(let y=0;y<Yc;++y){let C=y/m,A=Math.exp(-C*C/2);g.push(A),y===0?p+=A:y<v&&(p+=2*A)}for(let y=0;y<g.length;y++)g[y]=g[y]/p;u.envMap.value=e.texture,u.samples.value=v,u.weights.value=g,u.latitudinal.value=s==="latitudinal",o&&(u.poleAxis.value=o);let{_lodMax:x}=this;u.dTheta.value=f,u.mipInt.value=x-i;let b=this._sizeLods[r],S=3*b*(r>x-Fd?r-x+Fd:0),E=4*(this._cubeSize-b);Qg(t,S,E,3*b,2*b),a.setRenderTarget(t),a.render(d,bw)}};function xW(e){let t=[],i=[],r=[],n=e,s=e-Fd+1+OM.length;for(let o=0;o<s;o++){let a=Math.pow(2,n);i.push(a);let l=1/a;o>e-Fd?l=OM[o-e+Fd-1]:o===0&&(l=0),r.push(l);let c=1/(a-2),d=-c,u=1+c,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,m=6,v=3,g=2,p=1,x=new Float32Array(v*m*f),b=new Float32Array(g*m*f),S=new Float32Array(p*m*f);for(let y=0;y<f;y++){let C=y%3*2/3-1,A=y>2?0:-1,D=[C,A,0,C+2/3,A,0,C+2/3,A+1,0,C,A,0,C+2/3,A+1,0,C,A+1,0];x.set(D,v*m*y),b.set(h,g*m*y);let I=[y,y,y,y,y,y];S.set(I,p*m*y)}let E=new It;E.setAttribute("position",new Gt(x,v)),E.setAttribute("uv",new Gt(b,g)),E.setAttribute("faceIndex",new Gt(S,p)),t.push(E),n>Fd&&n--}return{lodPlanes:t,sizeLods:i,sigmas:r}}function NM(e,t,i){let r=new lr(e,t,i);return r.texture.mapping=Om,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Qg(e,t,i,r,n){e.viewport.set(t,i,r,n),e.scissor.set(t,i,r,n)}function wW(e,t,i){let r=new Float32Array(Yc),n=new N(0,1,0);return new _r({name:"SphericalGaussianBlur",defines:{n:Yc,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:R2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Nr,depthTest:!1,depthWrite:!1})}function BM(){return new _r({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:R2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Nr,depthTest:!1,depthWrite:!1})}function kM(){return new _r({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:R2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Nr,depthTest:!1,depthWrite:!1})}function R2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function bW(e){let t=new WeakMap,i=null;function r(a){if(a&&a.isTexture){let l=a.mapping,c=l===GS||l===VS,d=l===_u||l===Eu;if(c||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=t.get(a);return i===null&&(i=new RM(e)),u=c?i.fromEquirectangular(a,u):i.fromCubemap(a,u),t.set(a,u),u.texture}else{if(t.has(a))return t.get(a).texture;{let u=a.image;if(c&&u&&u.height>0||d&&u&&n(u)){i===null&&(i=new RM(e));let h=c?i.fromEquirectangular(a):i.fromCubemap(a);return t.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function n(a){let l=0,c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function s(a){let l=a.target;l.removeEventListener("dispose",s);let c=t.get(l);c!==void 0&&(t.delete(l),c.dispose())}function o(){t=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:r,dispose:o}}function SW(e){let t={};function i(r){if(t[r]!==void 0)return t[r];let n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r)}return t[r]=n,n}return{has:function(r){return i(r)!==null},init:function(r){r.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(r){let n=i(r);return n===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),n}}}function _W(e,t,i,r){let n={},s=new WeakMap;function o(u){let h=u.target;h.index!==null&&t.remove(h.index);for(let m in h.attributes)t.remove(h.attributes[m]);h.removeEventListener("dispose",o),delete n[h.id];let f=s.get(h);f&&(t.remove(f),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,i.memory.geometries--}function a(u,h){return n[h.id]===!0||(h.addEventListener("dispose",o),n[h.id]=!0,i.memory.geometries++),h}function l(u){let h=u.attributes;for(let m in h)t.update(h[m],34962);let f=u.morphAttributes;for(let m in f){let v=f[m];for(let g=0,p=v.length;g<p;g++)t.update(v[g],34962)}}function c(u){let h=[],f=u.index,m=u.attributes.position,v=0;if(f!==null){let x=f.array;v=f.version;for(let b=0,S=x.length;b<S;b+=3){let E=x[b+0],y=x[b+1],C=x[b+2];h.push(E,y,y,C,C,E)}}else{let x=m.array;v=m.version;for(let b=0,S=x.length/3-1;b<S;b+=3){let E=b+0,y=b+1,C=b+2;h.push(E,y,y,C,C,E)}}let g=new(eN(h)?_p:sN)(h,1);g.version=v;let p=s.get(u);p&&t.remove(p),s.set(u,g)}function d(u){let h=s.get(u);if(h){let f=u.index;f!==null&&h.version<f.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:d}}function EW(e,t,i,r){let n=r.isWebGL2,s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function d(h,f){e.drawElements(s,f,a,h*l),i.update(f,s,1)}function u(h,f,m){if(m===0)return;let v,g;if(n)v=e,g="drawElementsInstanced";else if(v=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[g](s,f,a,h*l,m),i.update(f,s,m)}this.setMode=o,this.setIndex=c,this.render=d,this.renderInstances=u}function AW(e){let t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(i.calls++,o){case 4:i.triangles+=a*(s/3);break;case 1:i.lines+=a*(s/2);break;case 3:i.lines+=a*(s-1);break;case 2:i.lines+=a*s;break;case 0:i.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function n(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:n,update:r}}function CW(e,t){return e[0]-t[0]}function TW(e,t){return Math.abs(t[1])-Math.abs(e[1])}function _w(e,t){let i=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?i=127:r instanceof Uint8Array?i=255:r instanceof Uint16Array?i=65535:r instanceof Int16Array?i=32767:r instanceof Int32Array?i=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(i)}function MW(e,t,i){let r={},n=new Float32Array(8),s=new WeakMap,o=new Qt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,d,u,h){let f=c.morphTargetInfluences;if(t.isWebGL2===!0){let m=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,v=m!==void 0?m.length:0,g=s.get(d);if(g===void 0||g.count!==v){let b=function(){j.dispose(),s.delete(d),d.removeEventListener("dispose",b)};g!==void 0&&g.texture.dispose();let S=d.morphAttributes.position!==void 0,E=d.morphAttributes.normal!==void 0,y=d.morphAttributes.color!==void 0,C=d.morphAttributes.position||[],A=d.morphAttributes.normal||[],D=d.morphAttributes.color||[],I=0;S===!0&&(I=1),E===!0&&(I=2),y===!0&&(I=3);let R=d.attributes.position.count*I,B=1;R>t.maxTextureSize&&(B=Math.ceil(R/t.maxTextureSize),R=t.maxTextureSize);let G=new Float32Array(R*B*4*v),j=new nN(G,R,B,v);j.type=Ul,j.needsUpdate=!0;let ee=I*4;for(let Q=0;Q<v;Q++){let re=C[Q],z=A[Q],X=D[Q],Y=R*B*4*Q;for(let K=0;K<re.count;K++){let Z=K*ee;S===!0&&(o.fromBufferAttribute(re,K),re.normalized===!0&&_w(o,re),G[Y+Z+0]=o.x,G[Y+Z+1]=o.y,G[Y+Z+2]=o.z,G[Y+Z+3]=0),E===!0&&(o.fromBufferAttribute(z,K),z.normalized===!0&&_w(o,z),G[Y+Z+4]=o.x,G[Y+Z+5]=o.y,G[Y+Z+6]=o.z,G[Y+Z+7]=0),y===!0&&(o.fromBufferAttribute(X,K),X.normalized===!0&&_w(o,X),G[Y+Z+8]=o.x,G[Y+Z+9]=o.y,G[Y+Z+10]=o.z,G[Y+Z+11]=X.itemSize===4?o.w:1)}}g={count:v,texture:j,size:new de(R,B)},s.set(d,g),d.addEventListener("dispose",b)}let p=0;for(let b=0;b<f.length;b++)p+=f[b];let x=d.morphTargetsRelative?1:1-p;h.getUniforms().setValue(e,"morphTargetBaseInfluence",x),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",g.texture,i),h.getUniforms().setValue(e,"morphTargetsTextureSize",g.size)}else{let m=f===void 0?0:f.length,v=r[d.id];if(v===void 0||v.length!==m){v=[];for(let S=0;S<m;S++)v[S]=[S,0];r[d.id]=v}for(let S=0;S<m;S++){let E=v[S];E[0]=S,E[1]=f[S]}v.sort(TW);for(let S=0;S<8;S++)S<m&&v[S][1]?(a[S][0]=v[S][0],a[S][1]=v[S][1]):(a[S][0]=Number.MAX_SAFE_INTEGER,a[S][1]=0);a.sort(CW);let g=d.morphAttributes.position,p=d.morphAttributes.normal,x=0;for(let S=0;S<8;S++){let E=a[S],y=E[0],C=E[1];y!==Number.MAX_SAFE_INTEGER&&C?(g&&d.getAttribute("morphTarget"+S)!==g[y]&&d.setAttribute("morphTarget"+S,g[y]),p&&d.getAttribute("morphNormal"+S)!==p[y]&&d.setAttribute("morphNormal"+S,p[y]),n[S]=C,x+=C):(g&&d.hasAttribute("morphTarget"+S)===!0&&d.deleteAttribute("morphTarget"+S),p&&d.hasAttribute("morphNormal"+S)===!0&&d.deleteAttribute("morphNormal"+S),n[S]=0)}let b=d.morphTargetsRelative?1:1-x;h.getUniforms().setValue(e,"morphTargetBaseInfluence",b),h.getUniforms().setValue(e,"morphTargetInfluences",n)}}return{update:l}}function PW(e,t,i,r){let n=new WeakMap;function s(l){let c=r.render.frame,d=l.geometry,u=t.get(l,d);return n.get(u)!==c&&(t.update(u),n.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.update(l.instanceMatrix,34962),l.instanceColor!==null&&i.update(l.instanceColor,34962)),u}function o(){n=new WeakMap}function a(l){let c=l.target;c.removeEventListener("dispose",a),i.remove(c.instanceMatrix),c.instanceColor!==null&&i.remove(c.instanceColor)}return{update:s,dispose:o}}var aN=new tn,lN=new nN,cN=new xG,uN=new L2,zM=[],FM=[],UM=new Float32Array(16),jM=new Float32Array(9),HM=new Float32Array(4);function Fh(e,t,i){let r=e[0];if(r<=0||r>0)return e;let n=t*i,s=zM[n];if(s===void 0&&(s=new Float32Array(n),zM[n]=s),t!==0){r.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=i,e[o].toArray(s,a)}return s}function gn(e,t){if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(e[i]!==t[i])return!1;return!0}function vn(e,t){for(let i=0,r=t.length;i<r;i++)e[i]=t[i]}function g1(e,t){let i=FM[t];i===void 0&&(i=new Int32Array(t),FM[t]=i);for(let r=0;r!==t;++r)i[r]=e.allocateTextureUnit();return i}function DW(e,t){let i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function OW(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(gn(i,t))return;e.uniform2fv(this.addr,t),vn(i,t)}}function LW(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(gn(i,t))return;e.uniform3fv(this.addr,t),vn(i,t)}}function IW(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(gn(i,t))return;e.uniform4fv(this.addr,t),vn(i,t)}}function RW(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(gn(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),vn(i,t)}else{if(gn(i,r))return;HM.set(r),e.uniformMatrix2fv(this.addr,!1,HM),vn(i,r)}}function NW(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(gn(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),vn(i,t)}else{if(gn(i,r))return;jM.set(r),e.uniformMatrix3fv(this.addr,!1,jM),vn(i,r)}}function BW(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(gn(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),vn(i,t)}else{if(gn(i,r))return;UM.set(r),e.uniformMatrix4fv(this.addr,!1,UM),vn(i,r)}}function kW(e,t){let i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function zW(e,t){let i=this.cache;gn(i,t)||(e.uniform2iv(this.addr,t),vn(i,t))}function FW(e,t){let i=this.cache;gn(i,t)||(e.uniform3iv(this.addr,t),vn(i,t))}function UW(e,t){let i=this.cache;gn(i,t)||(e.uniform4iv(this.addr,t),vn(i,t))}function jW(e,t){let i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function HW(e,t){let i=this.cache;gn(i,t)||(e.uniform2uiv(this.addr,t),vn(i,t))}function GW(e,t){let i=this.cache;gn(i,t)||(e.uniform3uiv(this.addr,t),vn(i,t))}function VW(e,t){let i=this.cache;gn(i,t)||(e.uniform4uiv(this.addr,t),vn(i,t))}function WW(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2D(t||aN,n)}function qW(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture3D(t||cN,n)}function XW(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTextureCube(t||uN,n)}function YW(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2DArray(t||lN,n)}function QW(e){switch(e){case 5126:return DW;case 35664:return OW;case 35665:return LW;case 35666:return IW;case 35674:return RW;case 35675:return NW;case 35676:return BW;case 5124:case 35670:return kW;case 35667:case 35671:return zW;case 35668:case 35672:return FW;case 35669:case 35673:return UW;case 5125:return jW;case 36294:return HW;case 36295:return GW;case 36296:return VW;case 35678:case 36198:case 36298:case 36306:case 35682:return WW;case 35679:case 36299:case 36307:return qW;case 35680:case 36300:case 36308:case 36293:return XW;case 36289:case 36303:case 36311:case 36292:return YW}}function KW(e,t){e.uniform1fv(this.addr,t)}function ZW(e,t){let i=Fh(t,this.size,2);e.uniform2fv(this.addr,i)}function $W(e,t){let i=Fh(t,this.size,3);e.uniform3fv(this.addr,i)}function JW(e,t){let i=Fh(t,this.size,4);e.uniform4fv(this.addr,i)}function e7(e,t){let i=Fh(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function t7(e,t){let i=Fh(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function i7(e,t){let i=Fh(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function r7(e,t){e.uniform1iv(this.addr,t)}function n7(e,t){e.uniform2iv(this.addr,t)}function s7(e,t){e.uniform3iv(this.addr,t)}function o7(e,t){e.uniform4iv(this.addr,t)}function a7(e,t){e.uniform1uiv(this.addr,t)}function l7(e,t){e.uniform2uiv(this.addr,t)}function c7(e,t){e.uniform3uiv(this.addr,t)}function u7(e,t){e.uniform4uiv(this.addr,t)}function d7(e,t,i){let r=t.length,n=g1(i,r);e.uniform1iv(this.addr,n);for(let s=0;s!==r;++s)i.setTexture2D(t[s]||aN,n[s])}function h7(e,t,i){let r=t.length,n=g1(i,r);e.uniform1iv(this.addr,n);for(let s=0;s!==r;++s)i.setTexture3D(t[s]||cN,n[s])}function f7(e,t,i){let r=t.length,n=g1(i,r);e.uniform1iv(this.addr,n);for(let s=0;s!==r;++s)i.setTextureCube(t[s]||uN,n[s])}function p7(e,t,i){let r=t.length,n=g1(i,r);e.uniform1iv(this.addr,n);for(let s=0;s!==r;++s)i.setTexture2DArray(t[s]||lN,n[s])}function m7(e){switch(e){case 5126:return KW;case 35664:return ZW;case 35665:return $W;case 35666:return JW;case 35674:return e7;case 35675:return t7;case 35676:return i7;case 5124:case 35670:return r7;case 35667:case 35671:return n7;case 35668:case 35672:return s7;case 35669:case 35673:return o7;case 5125:return a7;case 36294:return l7;case 36295:return c7;case 36296:return u7;case 35678:case 36198:case 36298:case 36306:case 35682:return d7;case 35679:case 36299:case 36307:return h7;case 35680:case 36300:case 36308:case 36293:return f7;case 36289:case 36303:case 36311:case 36292:return p7}}var g7=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=QW(t.type)}},v7=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=m7(t.type)}},y7=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let n=0,s=r.length;n!==s;++n){let o=r[n];o.setValue(e,t[o.id],i)}}},Ew=/(\w+)(\])?(\[|\.)?/g;function GM(e,t){e.seq.push(t),e.map[t.id]=t}function x7(e,t,i){let r=e.name,n=r.length;for(Ew.lastIndex=0;;){let s=Ew.exec(r),o=Ew.lastIndex,a=s[1],l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===n){GM(i,c===void 0?new g7(a,e,t):new v7(a,e,t));break}else{let d=i.map[a];d===void 0&&(d=new y7(a),GM(i,d)),i=d}}}var s0=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){let n=e.getActiveUniform(t,r),s=e.getUniformLocation(t,n.name);x7(n,s,this)}}setValue(e,t,i,r){let n=this.map[t];n!==void 0&&n.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let n=0,s=t.length;n!==s;++n){let o=t[n],a=i[o.id];a.needsUpdate!==!1&&o.setValue(e,a.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,n=e.length;r!==n;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function VM(e,t,i){let r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),r}var w7=0;function b7(e,t){let i=e.split(`
`),r=[],n=Math.max(t-6,0),s=Math.min(t+6,i.length);for(let o=n;o<s;o++){let a=o+1;r.push(`${a===t?">":" "} ${a}: ${i[o]}`)}return r.join(`
`)}function S7(e){switch(e){case ta:return["Linear","( value )"];case Yt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function WM(e,t,i){let r=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(r&&n==="")return"";let s=/ERROR: 0:(\d+)/.exec(n);if(s){let o=parseInt(s[1]);return i.toUpperCase()+`

`+n+`

`+b7(e.getShaderSource(t),o)}else return n}function _7(e,t){let i=S7(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function E7(e,t){let i;switch(t){case OH:i="Linear";break;case LH:i="Reinhard";break;case IH:i="OptimizedCineon";break;case RH:i="ACESFilmic";break;case NH:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function A7(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(rp).join(`
`)}function C7(e){let t=[];for(let i in e){let r=e[i];r!==!1&&t.push("#define "+i+" "+r)}return t.join(`
`)}function T7(e,t){let i={},r=e.getProgramParameter(t,35721);for(let n=0;n<r;n++){let s=e.getActiveAttrib(t,n),o=s.name,a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),i[o]={type:s.type,location:e.getAttribLocation(t,o),locationSize:a}}return i}function rp(e){return e!==""}function qM(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function XM(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var M7=/^[ \t]*#include +<([\w\d./]+)>/gm;function QS(e){return e.replace(M7,P7)}function P7(e,t){let i=Xt[t];if(i===void 0)throw new Error("Can not resolve #include <"+t+">");return QS(i)}var D7=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,O7=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function YM(e){return e.replace(O7,dN).replace(D7,L7)}function L7(e,t,i,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),dN(e,t,i,r)}function dN(e,t,i,r){let n="";for(let s=parseInt(t);s<parseInt(i);s++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function QM(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function I7(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===P2?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===XR?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===ip&&(t="SHADOWMAP_TYPE_VSM"),t}function R7(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case _u:case Eu:t="ENVMAP_TYPE_CUBE";break;case Om:t="ENVMAP_TYPE_CUBE_UV";break}return t}function N7(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Eu:t="ENVMAP_MODE_REFRACTION";break}return t}function B7(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case KR:t="ENVMAP_BLENDING_MULTIPLY";break;case PH:t="ENVMAP_BLENDING_MIX";break;case DH:t="ENVMAP_BLENDING_ADD";break}return t}function k7(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let i=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:r,maxMip:i}}function z7(e,t,i,r){let n=e.getContext(),s=i.defines,o=i.vertexShader,a=i.fragmentShader,l=I7(i),c=R7(i),d=N7(i),u=B7(i),h=k7(i),f=i.isWebGL2?"":A7(i),m=C7(s),v=n.createProgram(),g,p,x=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(g=[m].filter(rp).join(`
`),g.length>0&&(g+=`
`),p=[f,m].filter(rp).join(`
`),p.length>0&&(p+=`
`)):(g=[QM(i),"#define SHADER_NAME "+i.shaderName,m,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(rp).join(`
`),p=[f,QM(i),"#define SHADER_NAME "+i.shaderName,m,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+d:"",i.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Fa?"#define TONE_MAPPING":"",i.toneMapping!==Fa?Xt.tonemapping_pars_fragment:"",i.toneMapping!==Fa?E7("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",Xt.encodings_pars_fragment,_7("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(rp).join(`
`)),o=QS(o),o=qM(o,i),o=XM(o,i),a=QS(a),a=qM(a,i),a=XM(a,i),o=YM(o),a=YM(a),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,p=["#define varying in",i.glslVersion===yM?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===yM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);let b=x+g+o,S=x+p+a,E=VM(n,35633,b),y=VM(n,35632,S);if(n.attachShader(v,E),n.attachShader(v,y),i.index0AttributeName!==void 0?n.bindAttribLocation(v,0,i.index0AttributeName):i.morphTargets===!0&&n.bindAttribLocation(v,0,"position"),n.linkProgram(v),e.debug.checkShaderErrors){let D=n.getProgramInfoLog(v).trim(),I=n.getShaderInfoLog(E).trim(),R=n.getShaderInfoLog(y).trim(),B=!0,G=!0;if(n.getProgramParameter(v,35714)===!1){B=!1;let j=WM(n,E,"vertex"),ee=WM(n,y,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(v,35715)+`

Program Info Log: `+D+`
`+j+`
`+ee)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(I===""||R==="")&&(G=!1);G&&(this.diagnostics={runnable:B,programLog:D,vertexShader:{log:I,prefix:g},fragmentShader:{log:R,prefix:p}})}n.deleteShader(E),n.deleteShader(y);let C;this.getUniforms=function(){return C===void 0&&(C=new s0(n,v)),C};let A;return this.getAttributes=function(){return A===void 0&&(A=T7(n,v)),A},this.destroy=function(){r.releaseStatesOfProgram(this),n.deleteProgram(v),this.program=void 0},this.name=i.shaderName,this.id=w7++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=E,this.fragmentShader=y,this}var F7=0,U7=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),n=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(n)===!1&&(s.add(n),n.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){let t=this.shaderCache;if(t.has(e)===!1){let i=new j7(e);t.set(e,i)}return t.get(e)}},j7=class{constructor(e){this.id=F7++,this.code=e,this.usedTimes=0}};function H7(e,t,i,r,n,s,o){let a=new O2,l=new U7,c=[],d=n.isWebGL2,u=n.logarithmicDepthBuffer,h=n.vertexTextures,f=n.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(A,D,I,R,B){let G=R.fog,j=B.geometry,ee=A.isMeshStandardMaterial?R.environment:null,Q=(A.isMeshStandardMaterial?i:t).get(A.envMap||ee),re=Q&&Q.mapping===Om?Q.image.height:null,z=m[A.type];A.precision!==null&&(f=n.getMaxPrecision(A.precision),f!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",f,"instead."));let X=j.morphAttributes.position||j.morphAttributes.normal||j.morphAttributes.color,Y=X!==void 0?X.length:0,K=0;j.morphAttributes.position!==void 0&&(K=1),j.morphAttributes.normal!==void 0&&(K=2),j.morphAttributes.color!==void 0&&(K=3);let Z,V,fe,ae;if(z){let xe=Bo[z];Z=xe.vertexShader,V=xe.fragmentShader}else Z=A.vertexShader,V=A.fragmentShader,l.update(A),fe=l.getVertexShaderID(A),ae=l.getFragmentShaderID(A);let ne=e.getRenderTarget(),we=A.alphaTest>0,me=A.clearcoat>0,ue=A.iridescence>0;return{isWebGL2:d,shaderID:z,shaderName:A.type,vertexShader:Z,fragmentShader:V,defines:A.defines,customVertexShaderID:fe,customFragmentShaderID:ae,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:f,instancing:B.isInstancedMesh===!0,instancingColor:B.isInstancedMesh===!0&&B.instanceColor!==null,supportsVertexTextures:h,outputEncoding:ne===null?e.outputEncoding:ne.isXRRenderTarget===!0?ne.texture.encoding:ta,map:!!A.map,matcap:!!A.matcap,envMap:!!Q,envMapMode:Q&&Q.mapping,envMapCubeUVHeight:re,lightMap:!!A.lightMap,aoMap:!!A.aoMap,emissiveMap:!!A.emissiveMap,bumpMap:!!A.bumpMap,normalMap:!!A.normalMap,objectSpaceNormalMap:A.normalMapType===JH,tangentSpaceNormalMap:A.normalMapType===$H,decodeVideoTexture:!!A.map&&A.map.isVideoTexture===!0&&A.map.encoding===Yt,clearcoat:me,clearcoatMap:me&&!!A.clearcoatMap,clearcoatRoughnessMap:me&&!!A.clearcoatRoughnessMap,clearcoatNormalMap:me&&!!A.clearcoatNormalMap,iridescence:ue,iridescenceMap:ue&&!!A.iridescenceMap,iridescenceThicknessMap:ue&&!!A.iridescenceThicknessMap,displacementMap:!!A.displacementMap,roughnessMap:!!A.roughnessMap,metalnessMap:!!A.metalnessMap,specularMap:!!A.specularMap,specularIntensityMap:!!A.specularIntensityMap,specularColorMap:!!A.specularColorMap,opaque:A.transparent===!1&&A.blending===ih,alphaMap:!!A.alphaMap,alphaTest:we,gradientMap:!!A.gradientMap,sheen:A.sheen>0,sheenColorMap:!!A.sheenColorMap,sheenRoughnessMap:!!A.sheenRoughnessMap,transmission:A.transmission>0,transmissionMap:!!A.transmissionMap,thicknessMap:!!A.thicknessMap,combine:A.combine,vertexTangents:!!A.normalMap&&!!j.attributes.tangent,vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!j.attributes.color&&j.attributes.color.itemSize===4,vertexUvs:!!A.map||!!A.bumpMap||!!A.normalMap||!!A.specularMap||!!A.alphaMap||!!A.emissiveMap||!!A.roughnessMap||!!A.metalnessMap||!!A.clearcoatMap||!!A.clearcoatRoughnessMap||!!A.clearcoatNormalMap||!!A.iridescenceMap||!!A.iridescenceThicknessMap||!!A.displacementMap||!!A.transmissionMap||!!A.thicknessMap||!!A.specularIntensityMap||!!A.specularColorMap||!!A.sheenColorMap||!!A.sheenRoughnessMap,uvsVertexOnly:!(A.map||A.bumpMap||A.normalMap||A.specularMap||A.alphaMap||A.emissiveMap||A.roughnessMap||A.metalnessMap||A.clearcoatNormalMap||A.iridescenceMap||A.iridescenceThicknessMap||A.transmission>0||A.transmissionMap||A.thicknessMap||A.specularIntensityMap||A.specularColorMap||A.sheen>0||A.sheenColorMap||A.sheenRoughnessMap)&&!!A.displacementMap,fog:!!G,useFog:A.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:!!A.flatShading,sizeAttenuation:A.sizeAttenuation,logarithmicDepthBuffer:u,skinning:B.isSkinnedMesh===!0,morphTargets:j.morphAttributes.position!==void 0,morphNormals:j.morphAttributes.normal!==void 0,morphColors:j.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:K,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:e.shadowMap.enabled&&I.length>0,shadowMapType:e.shadowMap.type,toneMapping:A.toneMapped?e.toneMapping:Fa,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===lo,flipSided:A.side===Zr,useDepthPacking:!!A.depthPacking,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:A.extensions&&A.extensions.derivatives,extensionFragDepth:A.extensions&&A.extensions.fragDepth,extensionDrawBuffers:A.extensions&&A.extensions.drawBuffers,extensionShaderTextureLOD:A.extensions&&A.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}}function g(A){let D=[];if(A.shaderID?D.push(A.shaderID):(D.push(A.customVertexShaderID),D.push(A.customFragmentShaderID)),A.defines!==void 0)for(let I in A.defines)D.push(I),D.push(A.defines[I]);return A.isRawShaderMaterial===!1&&(p(D,A),x(D,A),D.push(e.outputEncoding)),D.push(A.customProgramCacheKey),D.join()}function p(A,D){A.push(D.precision),A.push(D.outputEncoding),A.push(D.envMapMode),A.push(D.envMapCubeUVHeight),A.push(D.combine),A.push(D.vertexUvs),A.push(D.fogExp2),A.push(D.sizeAttenuation),A.push(D.morphTargetsCount),A.push(D.morphAttributeCount),A.push(D.numDirLights),A.push(D.numPointLights),A.push(D.numSpotLights),A.push(D.numHemiLights),A.push(D.numRectAreaLights),A.push(D.numDirLightShadows),A.push(D.numPointLightShadows),A.push(D.numSpotLightShadows),A.push(D.shadowMapType),A.push(D.toneMapping),A.push(D.numClippingPlanes),A.push(D.numClipIntersection),A.push(D.depthPacking)}function x(A,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.map&&a.enable(4),D.matcap&&a.enable(5),D.envMap&&a.enable(6),D.lightMap&&a.enable(7),D.aoMap&&a.enable(8),D.emissiveMap&&a.enable(9),D.bumpMap&&a.enable(10),D.normalMap&&a.enable(11),D.objectSpaceNormalMap&&a.enable(12),D.tangentSpaceNormalMap&&a.enable(13),D.clearcoat&&a.enable(14),D.clearcoatMap&&a.enable(15),D.clearcoatRoughnessMap&&a.enable(16),D.clearcoatNormalMap&&a.enable(17),D.iridescence&&a.enable(18),D.iridescenceMap&&a.enable(19),D.iridescenceThicknessMap&&a.enable(20),D.displacementMap&&a.enable(21),D.specularMap&&a.enable(22),D.roughnessMap&&a.enable(23),D.metalnessMap&&a.enable(24),D.gradientMap&&a.enable(25),D.alphaMap&&a.enable(26),D.alphaTest&&a.enable(27),D.vertexColors&&a.enable(28),D.vertexAlphas&&a.enable(29),D.vertexUvs&&a.enable(30),D.vertexTangents&&a.enable(31),D.uvsVertexOnly&&a.enable(32),D.fog&&a.enable(33),A.push(a.mask),a.disableAll(),D.useFog&&a.enable(0),D.flatShading&&a.enable(1),D.logarithmicDepthBuffer&&a.enable(2),D.skinning&&a.enable(3),D.morphTargets&&a.enable(4),D.morphNormals&&a.enable(5),D.morphColors&&a.enable(6),D.premultipliedAlpha&&a.enable(7),D.shadowMapEnabled&&a.enable(8),D.physicallyCorrectLights&&a.enable(9),D.doubleSided&&a.enable(10),D.flipSided&&a.enable(11),D.useDepthPacking&&a.enable(12),D.dithering&&a.enable(13),D.specularIntensityMap&&a.enable(14),D.specularColorMap&&a.enable(15),D.transmission&&a.enable(16),D.transmissionMap&&a.enable(17),D.thicknessMap&&a.enable(18),D.sheen&&a.enable(19),D.sheenColorMap&&a.enable(20),D.sheenRoughnessMap&&a.enable(21),D.decodeVideoTexture&&a.enable(22),D.opaque&&a.enable(23),A.push(a.mask)}function b(A){let D=m[A.type],I;if(D){let R=Bo[D];I=kh.clone(R.uniforms)}else I=A.uniforms;return I}function S(A,D){let I;for(let R=0,B=c.length;R<B;R++){let G=c[R];if(G.cacheKey===D){I=G,++I.usedTimes;break}}return I===void 0&&(I=new z7(e,D,A,s),c.push(I)),I}function E(A){if(--A.usedTimes===0){let D=c.indexOf(A);c[D]=c[c.length-1],c.pop(),A.destroy()}}function y(A){l.remove(A)}function C(){l.dispose()}return{getParameters:v,getProgramCacheKey:g,getUniforms:b,acquireProgram:S,releaseProgram:E,releaseShaderCache:y,programs:c,dispose:C}}function G7(){let e=new WeakMap;function t(s){let o=e.get(s);return o===void 0&&(o={},e.set(s,o)),o}function i(s){e.delete(s)}function r(s,o,a){e.get(s)[o]=a}function n(){e=new WeakMap}return{get:t,remove:i,update:r,dispose:n}}function V7(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function KM(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ZM(){let e=[],t=0,i=[],r=[],n=[];function s(){t=0,i.length=0,r.length=0,n.length=0}function o(u,h,f,m,v,g){let p=e[t];return p===void 0?(p={id:u.id,object:u,geometry:h,material:f,groupOrder:m,renderOrder:u.renderOrder,z:v,group:g},e[t]=p):(p.id=u.id,p.object=u,p.geometry=h,p.material=f,p.groupOrder=m,p.renderOrder=u.renderOrder,p.z=v,p.group=g),t++,p}function a(u,h,f,m,v,g){let p=o(u,h,f,m,v,g);f.transmission>0?r.push(p):f.transparent===!0?n.push(p):i.push(p)}function l(u,h,f,m,v,g){let p=o(u,h,f,m,v,g);f.transmission>0?r.unshift(p):f.transparent===!0?n.unshift(p):i.unshift(p)}function c(u,h){i.length>1&&i.sort(u||V7),r.length>1&&r.sort(h||KM),n.length>1&&n.sort(h||KM)}function d(){for(let u=t,h=e.length;u<h;u++){let f=e[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:i,transmissive:r,transparent:n,init:s,push:a,unshift:l,finish:d,sort:c}}function W7(){let e=new WeakMap;function t(r,n){let s;return e.has(r)===!1?(s=new ZM,e.set(r,[s])):n>=e.get(r).length?(s=new ZM,e.get(r).push(s)):s=e.get(r)[n],s}function i(){e=new WeakMap}return{get:t,dispose:i}}function q7(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new N,color:new Lt};break;case"SpotLight":i={position:new N,direction:new N,color:new Lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new N,color:new Lt,distance:0,decay:0};break;case"HemisphereLight":i={direction:new N,skyColor:new Lt,groundColor:new Lt};break;case"RectAreaLight":i={color:new Lt,position:new N,halfWidth:new N,halfHeight:new N};break}return e[t.id]=i,i}}}function X7(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=i,i}}}var Y7=0;function Q7(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function K7(e,t){let i=new q7,r=X7(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)n.probe.push(new N);let s=new N,o=new at,a=new at;function l(d,u){let h=0,f=0,m=0;for(let D=0;D<9;D++)n.probe[D].set(0,0,0);let v=0,g=0,p=0,x=0,b=0,S=0,E=0,y=0;d.sort(Q7);let C=u!==!0?Math.PI:1;for(let D=0,I=d.length;D<I;D++){let R=d[D],B=R.color,G=R.intensity,j=R.distance,ee=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)h+=B.r*G*C,f+=B.g*G*C,m+=B.b*G*C;else if(R.isLightProbe)for(let Q=0;Q<9;Q++)n.probe[Q].addScaledVector(R.sh.coefficients[Q],G);else if(R.isDirectionalLight){let Q=i.get(R);if(Q.color.copy(R.color).multiplyScalar(R.intensity*C),R.castShadow){let re=R.shadow,z=r.get(R);z.shadowBias=re.bias,z.shadowNormalBias=re.normalBias,z.shadowRadius=re.radius,z.shadowMapSize=re.mapSize,n.directionalShadow[v]=z,n.directionalShadowMap[v]=ee,n.directionalShadowMatrix[v]=R.shadow.matrix,S++}n.directional[v]=Q,v++}else if(R.isSpotLight){let Q=i.get(R);if(Q.position.setFromMatrixPosition(R.matrixWorld),Q.color.copy(B).multiplyScalar(G*C),Q.distance=j,Q.coneCos=Math.cos(R.angle),Q.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),Q.decay=R.decay,R.castShadow){let re=R.shadow,z=r.get(R);z.shadowBias=re.bias,z.shadowNormalBias=re.normalBias,z.shadowRadius=re.radius,z.shadowMapSize=re.mapSize,n.spotShadow[p]=z,n.spotShadowMap[p]=ee,n.spotShadowMatrix[p]=R.shadow.matrix,y++}n.spot[p]=Q,p++}else if(R.isRectAreaLight){let Q=i.get(R);Q.color.copy(B).multiplyScalar(G),Q.halfWidth.set(R.width*.5,0,0),Q.halfHeight.set(0,R.height*.5,0),n.rectArea[x]=Q,x++}else if(R.isPointLight){let Q=i.get(R);if(Q.color.copy(R.color).multiplyScalar(R.intensity*C),Q.distance=R.distance,Q.decay=R.decay,R.castShadow){let re=R.shadow,z=r.get(R);z.shadowBias=re.bias,z.shadowNormalBias=re.normalBias,z.shadowRadius=re.radius,z.shadowMapSize=re.mapSize,z.shadowCameraNear=re.camera.near,z.shadowCameraFar=re.camera.far,n.pointShadow[g]=z,n.pointShadowMap[g]=ee,n.pointShadowMatrix[g]=R.shadow.matrix,E++}n.point[g]=Q,g++}else if(R.isHemisphereLight){let Q=i.get(R);Q.skyColor.copy(R.color).multiplyScalar(G*C),Q.groundColor.copy(R.groundColor).multiplyScalar(G*C),n.hemi[b]=Q,b++}}x>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=it.LTC_FLOAT_1,n.rectAreaLTC2=it.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=it.LTC_HALF_1,n.rectAreaLTC2=it.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=h,n.ambient[1]=f,n.ambient[2]=m;let A=n.hash;(A.directionalLength!==v||A.pointLength!==g||A.spotLength!==p||A.rectAreaLength!==x||A.hemiLength!==b||A.numDirectionalShadows!==S||A.numPointShadows!==E||A.numSpotShadows!==y)&&(n.directional.length=v,n.spot.length=p,n.rectArea.length=x,n.point.length=g,n.hemi.length=b,n.directionalShadow.length=S,n.directionalShadowMap.length=S,n.pointShadow.length=E,n.pointShadowMap.length=E,n.spotShadow.length=y,n.spotShadowMap.length=y,n.directionalShadowMatrix.length=S,n.pointShadowMatrix.length=E,n.spotShadowMatrix.length=y,A.directionalLength=v,A.pointLength=g,A.spotLength=p,A.rectAreaLength=x,A.hemiLength=b,A.numDirectionalShadows=S,A.numPointShadows=E,A.numSpotShadows=y,n.version=Y7++)}function c(d,u){let h=0,f=0,m=0,v=0,g=0,p=u.matrixWorldInverse;for(let x=0,b=d.length;x<b;x++){let S=d[x];if(S.isDirectionalLight){let E=n.directional[h];E.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(p),h++}else if(S.isSpotLight){let E=n.spot[m];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(p),E.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(p),m++}else if(S.isRectAreaLight){let E=n.rectArea[v];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(p),a.identity(),o.copy(S.matrixWorld),o.premultiply(p),a.extractRotation(o),E.halfWidth.set(S.width*.5,0,0),E.halfHeight.set(0,S.height*.5,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),v++}else if(S.isPointLight){let E=n.point[f];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(p),f++}else if(S.isHemisphereLight){let E=n.hemi[g];E.direction.setFromMatrixPosition(S.matrixWorld),E.direction.transformDirection(p),g++}}}return{setup:l,setupView:c,state:n}}function $M(e,t){let i=new K7(e,t),r=[],n=[];function s(){r.length=0,n.length=0}function o(d){r.push(d)}function a(d){n.push(d)}function l(d){i.setup(r,d)}function c(d){i.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:n,lights:i},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function Z7(e,t){let i=new WeakMap;function r(s,o=0){let a;return i.has(s)===!1?(a=new $M(e,t),i.set(s,[a])):o>=i.get(s).length?(a=new $M(e,t),i.get(s).push(a)):a=i.get(s)[o],a}function n(){i=new WeakMap}return{get:r,dispose:n}}var hN=class extends Im{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=tl,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},$7=class extends Im{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new N,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},J7=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,e9=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function t9(e,t,i){let r=new I2,n=new de,s=new de,o=new Qt,a=new hN({depthPacking:JR}),l=new $7,c={},d=i.maxTextureSize,u={0:Zr,1:hc,2:lo},h=new _r({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new de},radius:{value:4}},vertexShader:J7,fragmentShader:e9}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let m=new It;m.setAttribute("position",new Gt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new $n(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=P2,this.render=function(S,E,y){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||S.length===0)return;let C=e.getRenderTarget(),A=e.getActiveCubeFace(),D=e.getActiveMipmapLevel(),I=e.state;I.setBlending(Nr),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);for(let R=0,B=S.length;R<B;R++){let G=S[R],j=G.shadow;if(j===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(j.autoUpdate===!1&&j.needsUpdate===!1)continue;n.copy(j.mapSize);let ee=j.getFrameExtents();if(n.multiply(ee),s.copy(j.mapSize),(n.x>d||n.y>d)&&(n.x>d&&(s.x=Math.floor(d/ee.x),n.x=s.x*ee.x,j.mapSize.x=s.x),n.y>d&&(s.y=Math.floor(d/ee.y),n.y=s.y*ee.y,j.mapSize.y=s.y)),j.map===null){let re=this.type!==ip?{minFilter:Qi,magFilter:Qi}:{};j.map=new lr(n.x,n.y,re),j.map.texture.name=G.name+".shadowMap",j.camera.updateProjectionMatrix()}e.setRenderTarget(j.map),e.clear();let Q=j.getViewportCount();for(let re=0;re<Q;re++){let z=j.getViewport(re);o.set(s.x*z.x,s.y*z.y,s.x*z.z,s.y*z.w),I.viewport(o),j.updateMatrices(G,re),r=j.getFrustum(),b(E,y,j.camera,G,this.type)}j.isPointLightShadow!==!0&&this.type===ip&&p(j,y),j.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(C,A,D)};function p(S,E){let y=t.update(v);h.defines.VSM_SAMPLES!==S.blurSamples&&(h.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new lr(n.x,n.y)),h.uniforms.shadow_pass.value=S.map.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,e.setRenderTarget(S.mapPass),e.clear(),e.renderBufferDirect(E,null,y,h,v,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,e.setRenderTarget(S.map),e.clear(),e.renderBufferDirect(E,null,y,f,v,null)}function x(S,E,y,C,A,D){let I=null,R=y.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(R!==void 0?I=R:I=y.isPointLight===!0?l:a,e.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0){let B=I.uuid,G=E.uuid,j=c[B];j===void 0&&(j={},c[B]=j);let ee=j[G];ee===void 0&&(ee=I.clone(),j[G]=ee),I=ee}return I.visible=E.visible,I.wireframe=E.wireframe,D===ip?I.side=E.shadowSide!==null?E.shadowSide:E.side:I.side=E.shadowSide!==null?E.shadowSide:u[E.side],I.alphaMap=E.alphaMap,I.alphaTest=E.alphaTest,I.clipShadows=E.clipShadows,I.clippingPlanes=E.clippingPlanes,I.clipIntersection=E.clipIntersection,I.displacementMap=E.displacementMap,I.displacementScale=E.displacementScale,I.displacementBias=E.displacementBias,I.wireframeLinewidth=E.wireframeLinewidth,I.linewidth=E.linewidth,y.isPointLight===!0&&I.isMeshDistanceMaterial===!0&&(I.referencePosition.setFromMatrixPosition(y.matrixWorld),I.nearDistance=C,I.farDistance=A),I}function b(S,E,y,C,A){if(S.visible===!1)return;if(S.layers.test(E.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&A===ip)&&(!S.frustumCulled||r.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(y.matrixWorldInverse,S.matrixWorld);let I=t.update(S),R=S.material;if(Array.isArray(R)){let B=I.groups;for(let G=0,j=B.length;G<j;G++){let ee=B[G],Q=R[ee.materialIndex];if(Q&&Q.visible){let re=x(S,Q,C,y.near,y.far,A);e.renderBufferDirect(y,null,I,re,S,ee)}}}else if(R.visible){let B=x(S,R,C,y.near,y.far,A);e.renderBufferDirect(y,null,I,B,S,null)}}let D=S.children;for(let I=0,R=D.length;I<R;I++)b(D[I],E,y,C,A)}}function i9(e,t,i){let r=i.isWebGL2;function n(){let ce=!1,tt=new Qt,et=null,ft=new Qt(0,0,0,0);return{setMask:function($e){et!==$e&&!ce&&(e.colorMask($e,$e,$e,$e),et=$e)},setLocked:function($e){ce=$e},setClear:function($e,Mt,Ze,vt,Vt){Vt===!0&&($e*=vt,Mt*=vt,Ze*=vt),tt.set($e,Mt,Ze,vt),ft.equals(tt)===!1&&(e.clearColor($e,Mt,Ze,vt),ft.copy(tt))},reset:function(){ce=!1,et=null,ft.set(-1,0,0,0)}}}function s(){let ce=!1,tt=null,et=null,ft=null;return{setTest:function($e){$e?ae(2929):ne(2929)},setMask:function($e){tt!==$e&&!ce&&(e.depthMask($e),tt=$e)},setFunc:function($e){if(et!==$e){if($e)switch($e){case SH:e.depthFunc(512);break;case _H:e.depthFunc(519);break;case EH:e.depthFunc(513);break;case HS:e.depthFunc(515);break;case AH:e.depthFunc(514);break;case CH:e.depthFunc(518);break;case TH:e.depthFunc(516);break;case MH:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);et=$e}},setLocked:function($e){ce=$e},setClear:function($e){ft!==$e&&(e.clearDepth($e),ft=$e)},reset:function(){ce=!1,tt=null,et=null,ft=null}}}function o(){let ce=!1,tt=null,et=null,ft=null,$e=null,Mt=null,Ze=null,vt=null,Vt=null;return{setTest:function(kt){ce||(kt?ae(2960):ne(2960))},setMask:function(kt){tt!==kt&&!ce&&(e.stencilMask(kt),tt=kt)},setFunc:function(kt,pi,Fr){(et!==kt||ft!==pi||$e!==Fr)&&(e.stencilFunc(kt,pi,Fr),et=kt,ft=pi,$e=Fr)},setOp:function(kt,pi,Fr){(Mt!==kt||Ze!==pi||vt!==Fr)&&(e.stencilOp(kt,pi,Fr),Mt=kt,Ze=pi,vt=Fr)},setLocked:function(kt){ce=kt},setClear:function(kt){Vt!==kt&&(e.clearStencil(kt),Vt=kt)},reset:function(){ce=!1,tt=null,et=null,ft=null,$e=null,Mt=null,Ze=null,vt=null,Vt=null}}}let a=new n,l=new s,c=new o,d={},u={},h=new WeakMap,f=[],m=null,v=!1,g=null,p=null,x=null,b=null,S=null,E=null,y=null,C=!1,A=null,D=null,I=null,R=null,B=null,G=e.getParameter(35661),j=!1,ee=0,Q=e.getParameter(7938);Q.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(Q)[1]),j=ee>=1):Q.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),j=ee>=2);let re=null,z={},X=e.getParameter(3088),Y=e.getParameter(2978),K=new Qt().fromArray(X),Z=new Qt().fromArray(Y);function V(ce,tt,et){let ft=new Uint8Array(4),$e=e.createTexture();e.bindTexture(ce,$e),e.texParameteri(ce,10241,9728),e.texParameteri(ce,10240,9728);for(let Mt=0;Mt<et;Mt++)e.texImage2D(tt+Mt,0,6408,1,1,0,6408,5121,ft);return $e}let fe={};fe[3553]=V(3553,3553,1),fe[34067]=V(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ae(2929),l.setFunc(HS),We(!1),He(GT),ae(2884),Re(Nr);function ae(ce){d[ce]!==!0&&(e.enable(ce),d[ce]=!0)}function ne(ce){d[ce]!==!1&&(e.disable(ce),d[ce]=!1)}function we(ce,tt){return u[ce]!==tt?(e.bindFramebuffer(ce,tt),u[ce]=tt,r&&(ce===36009&&(u[36160]=tt),ce===36160&&(u[36009]=tt)),!0):!1}function me(ce,tt){let et=f,ft=!1;if(ce)if(et=h.get(tt),et===void 0&&(et=[],h.set(tt,et)),ce.isWebGLMultipleRenderTargets){let $e=ce.texture;if(et.length!==$e.length||et[0]!==36064){for(let Mt=0,Ze=$e.length;Mt<Ze;Mt++)et[Mt]=36064+Mt;et.length=$e.length,ft=!0}}else et[0]!==36064&&(et[0]=36064,ft=!0);else et[0]!==1029&&(et[0]=1029,ft=!0);ft&&(i.isWebGL2?e.drawBuffers(et):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(et))}function ue(ce){return m!==ce?(e.useProgram(ce),m=ce,!0):!1}let xe={[bd]:32774,[dH]:32778,[hH]:32779};if(r)xe[XT]=32775,xe[YT]=32776;else{let ce=t.get("EXT_blend_minmax");ce!==null&&(xe[XT]=ce.MIN_EXT,xe[YT]=ce.MAX_EXT)}let Le={[fH]:0,[pH]:1,[mH]:768,[YR]:770,[bH]:776,[xH]:774,[vH]:772,[gH]:769,[QR]:771,[wH]:775,[yH]:773};function Re(ce,tt,et,ft,$e,Mt,Ze,vt){if(ce===Nr){v===!0&&(ne(3042),v=!1);return}if(v===!1&&(ae(3042),v=!0),ce!==uH){if(ce!==g||vt!==C){if((p!==bd||S!==bd)&&(e.blendEquation(32774),p=bd,S=bd),vt)switch(ce){case ih:e.blendFuncSeparate(1,771,1,771);break;case VT:e.blendFunc(1,1);break;case WT:e.blendFuncSeparate(0,769,0,1);break;case qT:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case ih:e.blendFuncSeparate(770,771,1,771);break;case VT:e.blendFunc(770,1);break;case WT:e.blendFuncSeparate(0,769,0,1);break;case qT:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}x=null,b=null,E=null,y=null,g=ce,C=vt}return}$e=$e||tt,Mt=Mt||et,Ze=Ze||ft,(tt!==p||$e!==S)&&(e.blendEquationSeparate(xe[tt],xe[$e]),p=tt,S=$e),(et!==x||ft!==b||Mt!==E||Ze!==y)&&(e.blendFuncSeparate(Le[et],Le[ft],Le[Mt],Le[Ze]),x=et,b=ft,E=Mt,y=Ze),g=ce,C=null}function Oe(ce,tt){ce.side===lo?ne(2884):ae(2884);let et=ce.side===Zr;tt&&(et=!et),We(et),ce.blending===ih&&ce.transparent===!1?Re(Nr):Re(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.premultipliedAlpha),l.setFunc(ce.depthFunc),l.setTest(ce.depthTest),l.setMask(ce.depthWrite),a.setMask(ce.colorWrite);let ft=ce.stencilWrite;c.setTest(ft),ft&&(c.setMask(ce.stencilWriteMask),c.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),c.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),Qe(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?ae(32926):ne(32926)}function We(ce){A!==ce&&(ce?e.frontFace(2304):e.frontFace(2305),A=ce)}function He(ce){ce!==aH?(ae(2884),ce!==D&&(ce===GT?e.cullFace(1029):ce===lH?e.cullFace(1028):e.cullFace(1032))):ne(2884),D=ce}function ye(ce){ce!==I&&(j&&e.lineWidth(ce),I=ce)}function Qe(ce,tt,et){ce?(ae(32823),(R!==tt||B!==et)&&(e.polygonOffset(tt,et),R=tt,B=et)):ne(32823)}function rt(ce){ce?ae(3089):ne(3089)}function Je(ce){ce===void 0&&(ce=33984+G-1),re!==ce&&(e.activeTexture(ce),re=ce)}function Bt(ce,tt){re===null&&Je();let et=z[re];et===void 0&&(et={type:void 0,texture:void 0},z[re]=et),(et.type!==ce||et.texture!==tt)&&(e.bindTexture(ce,tt||fe[ce]),et.type=ce,et.texture=tt)}function lt(){let ce=z[re];ce!==void 0&&ce.type!==void 0&&(e.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function J(){try{e.compressedTexImage2D.apply(e,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function q(){try{e.texSubImage2D.apply(e,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Se(){try{e.texSubImage3D.apply(e,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function je(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function qe(){try{e.texStorage2D.apply(e,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ot(){try{e.texStorage3D.apply(e,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function wt(){try{e.texImage2D.apply(e,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Pe(){try{e.texImage3D.apply(e,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function pt(ce){K.equals(ce)===!1&&(e.scissor(ce.x,ce.y,ce.z,ce.w),K.copy(ce))}function Be(ce){Z.equals(ce)===!1&&(e.viewport(ce.x,ce.y,ce.z,ce.w),Z.copy(ce))}function Ke(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),r===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},re=null,z={},u={},h=new WeakMap,f=[],m=null,v=!1,g=null,p=null,x=null,b=null,S=null,E=null,y=null,C=!1,A=null,D=null,I=null,R=null,B=null,K.set(0,0,e.canvas.width,e.canvas.height),Z.set(0,0,e.canvas.width,e.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ae,disable:ne,bindFramebuffer:we,drawBuffers:me,useProgram:ue,setBlending:Re,setMaterial:Oe,setFlipSided:We,setCullFace:He,setLineWidth:ye,setPolygonOffset:Qe,setScissorTest:rt,activeTexture:Je,bindTexture:Bt,unbindTexture:lt,compressedTexImage2D:J,texImage2D:wt,texImage3D:Pe,texStorage2D:qe,texStorage3D:ot,texSubImage2D:q,texSubImage3D:Se,compressedTexSubImage2D:je,scissor:pt,viewport:Be,reset:Ke}}function r9(e,t,i,r,n,s,o){let a=n.isWebGL2,l=n.maxTextures,c=n.maxCubemapSize,d=n.maxTextureSize,u=n.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,v,g=new WeakMap,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(J,q){return p?new OffscreenCanvas(J,q):Y0("canvas")}function b(J,q,Se,je){let qe=1;if((J.width>je||J.height>je)&&(qe=je/Math.max(J.width,J.height)),qe<1||q===!0)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap){let ot=q?X0:Math.floor,wt=ot(qe*J.width),Pe=ot(qe*J.height);v===void 0&&(v=x(wt,Pe));let pt=Se?x(wt,Pe):v;return pt.width=wt,pt.height=Pe,pt.getContext("2d").drawImage(J,0,0,wt,Pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+J.width+"x"+J.height+") to ("+wt+"x"+Pe+")."),pt}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+J.width+"x"+J.height+")."),J;return J}function S(J){return YS(J.width)&&YS(J.height)}function E(J){return a?!1:J.wrapS!==Yn||J.wrapT!==Yn||J.minFilter!==Qi&&J.minFilter!==vi}function y(J,q){return J.generateMipmaps&&q&&J.minFilter!==Qi&&J.minFilter!==vi}function C(J){e.generateMipmap(J)}function A(J,q,Se,je,qe=!1){if(a===!1)return q;if(J!==null){if(e[J]!==void 0)return e[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let ot=q;return q===6403&&(Se===5126&&(ot=33326),Se===5131&&(ot=33325),Se===5121&&(ot=33321)),q===33319&&(Se===5126&&(ot=33328),Se===5131&&(ot=33327),Se===5121&&(ot=33323)),q===6408&&(Se===5126&&(ot=34836),Se===5131&&(ot=34842),Se===5121&&(ot=je===Yt&&qe===!1?35907:32856),Se===32819&&(ot=32854),Se===32820&&(ot=32855)),(ot===33325||ot===33326||ot===33327||ot===33328||ot===34842||ot===34836)&&t.get("EXT_color_buffer_float"),ot}function D(J,q,Se){return y(J,Se)===!0||J.isFramebufferTexture&&J.minFilter!==Qi&&J.minFilter!==vi?Math.log2(Math.max(q.width,q.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?q.mipmaps.length:1}function I(J){return J===Qi||J===QT||J===KT?9728:9729}function R(J){let q=J.target;q.removeEventListener("dispose",R),G(q),q.isVideoTexture&&m.delete(q)}function B(J){let q=J.target;q.removeEventListener("dispose",B),ee(q)}function G(J){let q=r.get(J);if(q.__webglInit===void 0)return;let Se=J.source,je=g.get(Se);if(je){let qe=je[q.__cacheKey];qe.usedTimes--,qe.usedTimes===0&&j(J),Object.keys(je).length===0&&g.delete(Se)}r.remove(J)}function j(J){let q=r.get(J);e.deleteTexture(q.__webglTexture);let Se=J.source,je=g.get(Se);delete je[q.__cacheKey],o.memory.textures--}function ee(J){let q=J.texture,Se=r.get(J),je=r.get(q);if(je.__webglTexture!==void 0&&(e.deleteTexture(je.__webglTexture),o.memory.textures--),J.depthTexture&&J.depthTexture.dispose(),J.isWebGLCubeRenderTarget)for(let qe=0;qe<6;qe++)e.deleteFramebuffer(Se.__webglFramebuffer[qe]),Se.__webglDepthbuffer&&e.deleteRenderbuffer(Se.__webglDepthbuffer[qe]);else{if(e.deleteFramebuffer(Se.__webglFramebuffer),Se.__webglDepthbuffer&&e.deleteRenderbuffer(Se.__webglDepthbuffer),Se.__webglMultisampledFramebuffer&&e.deleteFramebuffer(Se.__webglMultisampledFramebuffer),Se.__webglColorRenderbuffer)for(let qe=0;qe<Se.__webglColorRenderbuffer.length;qe++)Se.__webglColorRenderbuffer[qe]&&e.deleteRenderbuffer(Se.__webglColorRenderbuffer[qe]);Se.__webglDepthRenderbuffer&&e.deleteRenderbuffer(Se.__webglDepthRenderbuffer)}if(J.isWebGLMultipleRenderTargets)for(let qe=0,ot=q.length;qe<ot;qe++){let wt=r.get(q[qe]);wt.__webglTexture&&(e.deleteTexture(wt.__webglTexture),o.memory.textures--),r.remove(q[qe])}r.remove(q),r.remove(J)}let Q=0;function re(){Q=0}function z(){let J=Q;return J>=l&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+l),Q+=1,J}function X(J){let q=[];return q.push(J.wrapS),q.push(J.wrapT),q.push(J.magFilter),q.push(J.minFilter),q.push(J.anisotropy),q.push(J.internalFormat),q.push(J.format),q.push(J.type),q.push(J.generateMipmaps),q.push(J.premultiplyAlpha),q.push(J.flipY),q.push(J.unpackAlignment),q.push(J.encoding),q.join()}function Y(J,q){let Se=r.get(J);if(J.isVideoTexture&&Bt(J),J.isRenderTargetTexture===!1&&J.version>0&&Se.__version!==J.version){let je=J.image;if(je===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(je.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{me(Se,J,q);return}}i.activeTexture(33984+q),i.bindTexture(3553,Se.__webglTexture)}function K(J,q){let Se=r.get(J);if(J.version>0&&Se.__version!==J.version){me(Se,J,q);return}i.activeTexture(33984+q),i.bindTexture(35866,Se.__webglTexture)}function Z(J,q){let Se=r.get(J);if(J.version>0&&Se.__version!==J.version){me(Se,J,q);return}i.activeTexture(33984+q),i.bindTexture(32879,Se.__webglTexture)}function V(J,q){let Se=r.get(J);if(J.version>0&&Se.__version!==J.version){ue(Se,J,q);return}i.activeTexture(33984+q),i.bindTexture(34067,Se.__webglTexture)}let fe={[em]:10497,[Yn]:33071,[WS]:33648},ae={[Qi]:9728,[QT]:9984,[KT]:9986,[vi]:9729,[BH]:9985,[Lm]:9987};function ne(J,q,Se){if(Se?(e.texParameteri(J,10242,fe[q.wrapS]),e.texParameteri(J,10243,fe[q.wrapT]),(J===32879||J===35866)&&e.texParameteri(J,32882,fe[q.wrapR]),e.texParameteri(J,10240,ae[q.magFilter]),e.texParameteri(J,10241,ae[q.minFilter])):(e.texParameteri(J,10242,33071),e.texParameteri(J,10243,33071),(J===32879||J===35866)&&e.texParameteri(J,32882,33071),(q.wrapS!==Yn||q.wrapT!==Yn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(J,10240,I(q.magFilter)),e.texParameteri(J,10241,I(q.minFilter)),q.minFilter!==Qi&&q.minFilter!==vi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let je=t.get("EXT_texture_filter_anisotropic");if(q.type===Ul&&t.has("OES_texture_float_linear")===!1||a===!1&&q.type===tm&&t.has("OES_texture_half_float_linear")===!1)return;(q.anisotropy>1||r.get(q).__currentAnisotropy)&&(e.texParameterf(J,je.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,n.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy)}}function we(J,q){let Se=!1;J.__webglInit===void 0&&(J.__webglInit=!0,q.addEventListener("dispose",R));let je=q.source,qe=g.get(je);qe===void 0&&(qe={},g.set(je,qe));let ot=X(q);if(ot!==J.__cacheKey){qe[ot]===void 0&&(qe[ot]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,Se=!0),qe[ot].usedTimes++;let wt=qe[J.__cacheKey];wt!==void 0&&(qe[J.__cacheKey].usedTimes--,wt.usedTimes===0&&j(q)),J.__cacheKey=ot,J.__webglTexture=qe[ot].texture}return Se}function me(J,q,Se){let je=3553;q.isDataArrayTexture&&(je=35866),q.isData3DTexture&&(je=32879);let qe=we(J,q),ot=q.source;if(i.activeTexture(33984+Se),i.bindTexture(je,J.__webglTexture),ot.version!==ot.__currentVersion||qe===!0){e.pixelStorei(37440,q.flipY),e.pixelStorei(37441,q.premultiplyAlpha),e.pixelStorei(3317,q.unpackAlignment),e.pixelStorei(37443,0);let wt=E(q)&&S(q.image)===!1,Pe=b(q.image,wt,!1,d);Pe=lt(q,Pe);let pt=S(Pe)||a,Be=s.convert(q.format,q.encoding),Ke=s.convert(q.type),ce=A(q.internalFormat,Be,Ke,q.encoding,q.isVideoTexture);ne(je,q,pt);let tt,et=q.mipmaps,ft=a&&q.isVideoTexture!==!0,$e=ot.__currentVersion===void 0||qe===!0,Mt=D(q,Pe,pt);if(q.isDepthTexture)ce=6402,a?q.type===Ul?ce=36012:q.type===Fl?ce=33190:q.type===uu?ce=35056:ce=33189:q.type===Ul&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),q.format===du&&ce===6402&&q.type!==$R&&q.type!==Fl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),q.type=Fl,Ke=s.convert(q.type)),q.format===Au&&ce===6402&&(ce=34041,q.type!==uu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),q.type=uu,Ke=s.convert(q.type))),$e&&(ft?i.texStorage2D(3553,1,ce,Pe.width,Pe.height):i.texImage2D(3553,0,ce,Pe.width,Pe.height,0,Be,Ke,null));else if(q.isDataTexture)if(et.length>0&&pt){ft&&$e&&i.texStorage2D(3553,Mt,ce,et[0].width,et[0].height);for(let Ze=0,vt=et.length;Ze<vt;Ze++)tt=et[Ze],ft?i.texSubImage2D(3553,Ze,0,0,tt.width,tt.height,Be,Ke,tt.data):i.texImage2D(3553,Ze,ce,tt.width,tt.height,0,Be,Ke,tt.data);q.generateMipmaps=!1}else ft?($e&&i.texStorage2D(3553,Mt,ce,Pe.width,Pe.height),i.texSubImage2D(3553,0,0,0,Pe.width,Pe.height,Be,Ke,Pe.data)):i.texImage2D(3553,0,ce,Pe.width,Pe.height,0,Be,Ke,Pe.data);else if(q.isCompressedTexture){ft&&$e&&i.texStorage2D(3553,Mt,ce,et[0].width,et[0].height);for(let Ze=0,vt=et.length;Ze<vt;Ze++)tt=et[Ze],q.format!==Vo?Be!==null?ft?i.compressedTexSubImage2D(3553,Ze,0,0,tt.width,tt.height,Be,tt.data):i.compressedTexImage2D(3553,Ze,ce,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ft?i.texSubImage2D(3553,Ze,0,0,tt.width,tt.height,Be,Ke,tt.data):i.texImage2D(3553,Ze,ce,tt.width,tt.height,0,Be,Ke,tt.data)}else if(q.isDataArrayTexture)ft?($e&&i.texStorage3D(35866,Mt,ce,Pe.width,Pe.height,Pe.depth),i.texSubImage3D(35866,0,0,0,0,Pe.width,Pe.height,Pe.depth,Be,Ke,Pe.data)):i.texImage3D(35866,0,ce,Pe.width,Pe.height,Pe.depth,0,Be,Ke,Pe.data);else if(q.isData3DTexture)ft?($e&&i.texStorage3D(32879,Mt,ce,Pe.width,Pe.height,Pe.depth),i.texSubImage3D(32879,0,0,0,0,Pe.width,Pe.height,Pe.depth,Be,Ke,Pe.data)):i.texImage3D(32879,0,ce,Pe.width,Pe.height,Pe.depth,0,Be,Ke,Pe.data);else if(q.isFramebufferTexture){if($e)if(ft)i.texStorage2D(3553,Mt,ce,Pe.width,Pe.height);else{let Ze=Pe.width,vt=Pe.height;for(let Vt=0;Vt<Mt;Vt++)i.texImage2D(3553,Vt,ce,Ze,vt,0,Be,Ke,null),Ze>>=1,vt>>=1}}else if(et.length>0&&pt){ft&&$e&&i.texStorage2D(3553,Mt,ce,et[0].width,et[0].height);for(let Ze=0,vt=et.length;Ze<vt;Ze++)tt=et[Ze],ft?i.texSubImage2D(3553,Ze,0,0,Be,Ke,tt):i.texImage2D(3553,Ze,ce,Be,Ke,tt);q.generateMipmaps=!1}else ft?($e&&i.texStorage2D(3553,Mt,ce,Pe.width,Pe.height),i.texSubImage2D(3553,0,0,0,Be,Ke,Pe)):i.texImage2D(3553,0,ce,Be,Ke,Pe);y(q,pt)&&C(je),ot.__currentVersion=ot.version,q.onUpdate&&q.onUpdate(q)}J.__version=q.version}function ue(J,q,Se){if(q.image.length!==6)return;let je=we(J,q),qe=q.source;if(i.activeTexture(33984+Se),i.bindTexture(34067,J.__webglTexture),qe.version!==qe.__currentVersion||je===!0){e.pixelStorei(37440,q.flipY),e.pixelStorei(37441,q.premultiplyAlpha),e.pixelStorei(3317,q.unpackAlignment),e.pixelStorei(37443,0);let ot=q.isCompressedTexture||q.image[0].isCompressedTexture,wt=q.image[0]&&q.image[0].isDataTexture,Pe=[];for(let Ze=0;Ze<6;Ze++)!ot&&!wt?Pe[Ze]=b(q.image[Ze],!1,!0,c):Pe[Ze]=wt?q.image[Ze].image:q.image[Ze],Pe[Ze]=lt(q,Pe[Ze]);let pt=Pe[0],Be=S(pt)||a,Ke=s.convert(q.format,q.encoding),ce=s.convert(q.type),tt=A(q.internalFormat,Ke,ce,q.encoding),et=a&&q.isVideoTexture!==!0,ft=qe.__currentVersion===void 0||je===!0,$e=D(q,pt,Be);ne(34067,q,Be);let Mt;if(ot){et&&ft&&i.texStorage2D(34067,$e,tt,pt.width,pt.height);for(let Ze=0;Ze<6;Ze++){Mt=Pe[Ze].mipmaps;for(let vt=0;vt<Mt.length;vt++){let Vt=Mt[vt];q.format!==Vo?Ke!==null?et?i.compressedTexSubImage2D(34069+Ze,vt,0,0,Vt.width,Vt.height,Ke,Vt.data):i.compressedTexImage2D(34069+Ze,vt,tt,Vt.width,Vt.height,0,Vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):et?i.texSubImage2D(34069+Ze,vt,0,0,Vt.width,Vt.height,Ke,ce,Vt.data):i.texImage2D(34069+Ze,vt,tt,Vt.width,Vt.height,0,Ke,ce,Vt.data)}}}else{Mt=q.mipmaps,et&&ft&&(Mt.length>0&&$e++,i.texStorage2D(34067,$e,tt,Pe[0].width,Pe[0].height));for(let Ze=0;Ze<6;Ze++)if(wt){et?i.texSubImage2D(34069+Ze,0,0,0,Pe[Ze].width,Pe[Ze].height,Ke,ce,Pe[Ze].data):i.texImage2D(34069+Ze,0,tt,Pe[Ze].width,Pe[Ze].height,0,Ke,ce,Pe[Ze].data);for(let vt=0;vt<Mt.length;vt++){let Vt=Mt[vt].image[Ze].image;et?i.texSubImage2D(34069+Ze,vt+1,0,0,Vt.width,Vt.height,Ke,ce,Vt.data):i.texImage2D(34069+Ze,vt+1,tt,Vt.width,Vt.height,0,Ke,ce,Vt.data)}}else{et?i.texSubImage2D(34069+Ze,0,0,0,Ke,ce,Pe[Ze]):i.texImage2D(34069+Ze,0,tt,Ke,ce,Pe[Ze]);for(let vt=0;vt<Mt.length;vt++){let Vt=Mt[vt];et?i.texSubImage2D(34069+Ze,vt+1,0,0,Ke,ce,Vt.image[Ze]):i.texImage2D(34069+Ze,vt+1,tt,Ke,ce,Vt.image[Ze])}}}y(q,Be)&&C(34067),qe.__currentVersion=qe.version,q.onUpdate&&q.onUpdate(q)}J.__version=q.version}function xe(J,q,Se,je,qe){let ot=s.convert(Se.format,Se.encoding),wt=s.convert(Se.type),Pe=A(Se.internalFormat,ot,wt,Se.encoding);r.get(q).__hasExternalTextures||(qe===32879||qe===35866?i.texImage3D(qe,0,Pe,q.width,q.height,q.depth,0,ot,wt,null):i.texImage2D(qe,0,Pe,q.width,q.height,0,ot,wt,null)),i.bindFramebuffer(36160,J),Je(q)?h.framebufferTexture2DMultisampleEXT(36160,je,qe,r.get(Se).__webglTexture,0,rt(q)):e.framebufferTexture2D(36160,je,qe,r.get(Se).__webglTexture,0),i.bindFramebuffer(36160,null)}function Le(J,q,Se){if(e.bindRenderbuffer(36161,J),q.depthBuffer&&!q.stencilBuffer){let je=33189;if(Se||Je(q)){let qe=q.depthTexture;qe&&qe.isDepthTexture&&(qe.type===Ul?je=36012:qe.type===Fl&&(je=33190));let ot=rt(q);Je(q)?h.renderbufferStorageMultisampleEXT(36161,ot,je,q.width,q.height):e.renderbufferStorageMultisample(36161,ot,je,q.width,q.height)}else e.renderbufferStorage(36161,je,q.width,q.height);e.framebufferRenderbuffer(36160,36096,36161,J)}else if(q.depthBuffer&&q.stencilBuffer){let je=rt(q);Se&&Je(q)===!1?e.renderbufferStorageMultisample(36161,je,35056,q.width,q.height):Je(q)?h.renderbufferStorageMultisampleEXT(36161,je,35056,q.width,q.height):e.renderbufferStorage(36161,34041,q.width,q.height),e.framebufferRenderbuffer(36160,33306,36161,J)}else{let je=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let qe=0;qe<je.length;qe++){let ot=je[qe],wt=s.convert(ot.format,ot.encoding),Pe=s.convert(ot.type),pt=A(ot.internalFormat,wt,Pe,ot.encoding),Be=rt(q);Se&&Je(q)===!1?e.renderbufferStorageMultisample(36161,Be,pt,q.width,q.height):Je(q)?h.renderbufferStorageMultisampleEXT(36161,Be,pt,q.width,q.height):e.renderbufferStorage(36161,pt,q.width,q.height)}}e.bindRenderbuffer(36161,null)}function Re(J,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,J),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(q.depthTexture).__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),Y(q.depthTexture,0);let Se=r.get(q.depthTexture).__webglTexture,je=rt(q);if(q.depthTexture.format===du)Je(q)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,Se,0,je):e.framebufferTexture2D(36160,36096,3553,Se,0);else if(q.depthTexture.format===Au)Je(q)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,Se,0,je):e.framebufferTexture2D(36160,33306,3553,Se,0);else throw new Error("Unknown depthTexture format")}function Oe(J){let q=r.get(J),Se=J.isWebGLCubeRenderTarget===!0;if(J.depthTexture&&!q.__autoAllocateDepthBuffer){if(Se)throw new Error("target.depthTexture not supported in Cube render targets");Re(q.__webglFramebuffer,J)}else if(Se){q.__webglDepthbuffer=[];for(let je=0;je<6;je++)i.bindFramebuffer(36160,q.__webglFramebuffer[je]),q.__webglDepthbuffer[je]=e.createRenderbuffer(),Le(q.__webglDepthbuffer[je],J,!1)}else i.bindFramebuffer(36160,q.__webglFramebuffer),q.__webglDepthbuffer=e.createRenderbuffer(),Le(q.__webglDepthbuffer,J,!1);i.bindFramebuffer(36160,null)}function We(J,q,Se){let je=r.get(J);q!==void 0&&xe(je.__webglFramebuffer,J,J.texture,36064,3553),Se!==void 0&&Oe(J)}function He(J){let q=J.texture,Se=r.get(J),je=r.get(q);J.addEventListener("dispose",B),J.isWebGLMultipleRenderTargets!==!0&&(je.__webglTexture===void 0&&(je.__webglTexture=e.createTexture()),je.__version=q.version,o.memory.textures++);let qe=J.isWebGLCubeRenderTarget===!0,ot=J.isWebGLMultipleRenderTargets===!0,wt=S(J)||a;if(qe){Se.__webglFramebuffer=[];for(let Pe=0;Pe<6;Pe++)Se.__webglFramebuffer[Pe]=e.createFramebuffer()}else{if(Se.__webglFramebuffer=e.createFramebuffer(),ot)if(n.drawBuffers){let Pe=J.texture;for(let pt=0,Be=Pe.length;pt<Be;pt++){let Ke=r.get(Pe[pt]);Ke.__webglTexture===void 0&&(Ke.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&J.samples>0&&Je(J)===!1){let Pe=ot?q:[q];Se.__webglMultisampledFramebuffer=e.createFramebuffer(),Se.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,Se.__webglMultisampledFramebuffer);for(let pt=0;pt<Pe.length;pt++){let Be=Pe[pt];Se.__webglColorRenderbuffer[pt]=e.createRenderbuffer(),e.bindRenderbuffer(36161,Se.__webglColorRenderbuffer[pt]);let Ke=s.convert(Be.format,Be.encoding),ce=s.convert(Be.type),tt=A(Be.internalFormat,Ke,ce,Be.encoding),et=rt(J);e.renderbufferStorageMultisample(36161,et,tt,J.width,J.height),e.framebufferRenderbuffer(36160,36064+pt,36161,Se.__webglColorRenderbuffer[pt])}e.bindRenderbuffer(36161,null),J.depthBuffer&&(Se.__webglDepthRenderbuffer=e.createRenderbuffer(),Le(Se.__webglDepthRenderbuffer,J,!0)),i.bindFramebuffer(36160,null)}}if(qe){i.bindTexture(34067,je.__webglTexture),ne(34067,q,wt);for(let Pe=0;Pe<6;Pe++)xe(Se.__webglFramebuffer[Pe],J,q,36064,34069+Pe);y(q,wt)&&C(34067),i.unbindTexture()}else if(ot){let Pe=J.texture;for(let pt=0,Be=Pe.length;pt<Be;pt++){let Ke=Pe[pt],ce=r.get(Ke);i.bindTexture(3553,ce.__webglTexture),ne(3553,Ke,wt),xe(Se.__webglFramebuffer,J,Ke,36064+pt,3553),y(Ke,wt)&&C(3553)}i.unbindTexture()}else{let Pe=3553;(J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(a?Pe=J.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(Pe,je.__webglTexture),ne(Pe,q,wt),xe(Se.__webglFramebuffer,J,q,36064,Pe),y(q,wt)&&C(Pe),i.unbindTexture()}J.depthBuffer&&Oe(J)}function ye(J){let q=S(J)||a,Se=J.isWebGLMultipleRenderTargets===!0?J.texture:[J.texture];for(let je=0,qe=Se.length;je<qe;je++){let ot=Se[je];if(y(ot,q)){let wt=J.isWebGLCubeRenderTarget?34067:3553,Pe=r.get(ot).__webglTexture;i.bindTexture(wt,Pe),C(wt),i.unbindTexture()}}}function Qe(J){if(a&&J.samples>0&&Je(J)===!1){let q=J.isWebGLMultipleRenderTargets?J.texture:[J.texture],Se=J.width,je=J.height,qe=16384,ot=[],wt=J.stencilBuffer?33306:36096,Pe=r.get(J),pt=J.isWebGLMultipleRenderTargets===!0;if(pt)for(let Be=0;Be<q.length;Be++)i.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Be,36161,null),i.bindFramebuffer(36160,Pe.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Be,3553,null,0);i.bindFramebuffer(36008,Pe.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,Pe.__webglFramebuffer);for(let Be=0;Be<q.length;Be++){ot.push(36064+Be),J.depthBuffer&&ot.push(wt);let Ke=Pe.__ignoreDepthValues!==void 0?Pe.__ignoreDepthValues:!1;if(Ke===!1&&(J.depthBuffer&&(qe|=256),J.stencilBuffer&&(qe|=1024)),pt&&e.framebufferRenderbuffer(36008,36064,36161,Pe.__webglColorRenderbuffer[Be]),Ke===!0&&(e.invalidateFramebuffer(36008,[wt]),e.invalidateFramebuffer(36009,[wt])),pt){let ce=r.get(q[Be]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,ce,0)}e.blitFramebuffer(0,0,Se,je,0,0,Se,je,qe,9728),f&&e.invalidateFramebuffer(36008,ot)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),pt)for(let Be=0;Be<q.length;Be++){i.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Be,36161,Pe.__webglColorRenderbuffer[Be]);let Ke=r.get(q[Be]).__webglTexture;i.bindFramebuffer(36160,Pe.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Be,3553,Ke,0)}i.bindFramebuffer(36009,Pe.__webglMultisampledFramebuffer)}}function rt(J){return Math.min(u,J.samples)}function Je(J){let q=r.get(J);return a&&J.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function Bt(J){let q=o.render.frame;m.get(J)!==q&&(m.set(J,q),J.update())}function lt(J,q){let Se=J.encoding,je=J.format,qe=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||J.format===XS||Se!==ta&&(Se===Yt?a===!1?t.has("EXT_sRGB")===!0&&je===Vo?(J.format=XS,J.minFilter=vi,J.generateMipmaps=!1):q=iN.sRGBToLinear(q):(je!==Vo||qe!==en)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Se)),q}this.allocateTextureUnit=z,this.resetTextureUnits=re,this.setTexture2D=Y,this.setTexture2DArray=K,this.setTexture3D=Z,this.setTextureCube=V,this.rebindTextures=We,this.setupRenderTarget=He,this.updateRenderTargetMipmap=ye,this.updateMultisampleRenderTarget=Qe,this.setupDepthRenderbuffer=Oe,this.setupFrameBufferTexture=xe,this.useMultisampledRTT=Je}function n9(e,t,i){let r=i.isWebGL2;function n(s,o=null){let a;if(s===en)return 5121;if(s===UH)return 32819;if(s===jH)return 32820;if(s===kH)return 5120;if(s===zH)return 5122;if(s===$R)return 5123;if(s===FH)return 5124;if(s===Fl)return 5125;if(s===Ul)return 5126;if(s===tm)return r?5131:(a=t.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===HH)return 6406;if(s===Vo)return 6408;if(s===VH)return 6409;if(s===WH)return 6410;if(s===du)return 6402;if(s===Au)return 34041;if(s===qH)return 6403;if(s===GH)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===XS)return a=t.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===XH)return 36244;if(s===YH)return 33319;if(s===QH)return 33320;if(s===KH)return 36249;if(s===Qx||s===Kx||s===Zx||s===$x)if(o===Yt)if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Qx)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Kx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Zx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===$x)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Qx)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Kx)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Zx)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===$x)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===ZT||s===$T||s===JT||s===eM)if(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===ZT)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===$T)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===JT)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===eM)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===ZH)return a=t.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===tM||s===iM)if(a=t.get("WEBGL_compressed_texture_etc"),a!==null){if(s===tM)return o===Yt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===iM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===rM||s===nM||s===sM||s===oM||s===aM||s===lM||s===cM||s===uM||s===dM||s===hM||s===fM||s===pM||s===mM||s===gM)if(a=t.get("WEBGL_compressed_texture_astc"),a!==null){if(s===rM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===nM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===sM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===oM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===aM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===lM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===cM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===uM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===dM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===hM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===fM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===pM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===mM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===gM)return o===Yt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===vM)if(a=t.get("EXT_texture_compression_bptc"),a!==null){if(s===vM)return o===Yt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===uu?r?34042:(a=t.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):e[s]!==void 0?e[s]:null}return{convert:n}}var s9=class extends Qr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Ud=class extends Di{constructor(){super(),this.isGroup=!0,this.type="Group"}},o9={type:"move"},Aw=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ud,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ud,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new N,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new N),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ud,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new N,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new N),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,n=null,s=null,o=this._targetRay,a=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){s=!0;for(let m of e.hand.values()){let v=t.getJointPose(m,i);if(l.joints[m.jointName]===void 0){let p=new Ud;p.matrixAutoUpdate=!1,p.visible=!1,l.joints[m.jointName]=p,l.add(p)}let g=l.joints[m.jointName];v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=v.radius),g.visible=v!==null}let c=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],u=c.position.distanceTo(d.position),h=.02,f=.005;l.inputState.pinching&&u>h+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&u<=h-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else a!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,i),n!==null&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&n!==null&&(r=n),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(o9)))}return o!==null&&(o.visible=r!==null),a!==null&&(a.visible=n!==null),l!==null&&(l.visible=s!==null),this}},N2=class extends tn{constructor(e,t,i,r,n,s,o,a,l,c){if(c=c!==void 0?c:du,c!==du&&c!==Au)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&c===du&&(i=Fl),i===void 0&&c===Au&&(i=uu),super(null,r,n,s,o,a,c,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Qi,this.minFilter=a!==void 0?a:Qi,this.flipY=!1,this.generateMipmaps=!1}},a9=class extends kn{constructor(e,t){super();let i=this,r=null,n=1,s=null,o="local-floor",a=null,l=null,c=null,d=null,u=null,h=null,f=t.getContextAttributes(),m=null,v=null,g=[],p=[],x=new Qr;x.layers.enable(1),x.viewport=new Qt;let b=new Qr;b.layers.enable(2),b.viewport=new Qt;let S=[x,b],E=new s9;E.layers.enable(1),E.layers.enable(2);let y=null,C=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let X=g[z];return X===void 0&&(X=new Aw,g[z]=X),X.getTargetRaySpace()},this.getControllerGrip=function(z){let X=g[z];return X===void 0&&(X=new Aw,g[z]=X),X.getGripSpace()},this.getHand=function(z){let X=g[z];return X===void 0&&(X=new Aw,g[z]=X),X.getHandSpace()};function A(z){let X=p.indexOf(z.inputSource);if(X===-1)return;let Y=g[X];Y!==void 0&&Y.dispatchEvent({type:z.type,data:z.inputSource})}function D(){r.removeEventListener("select",A),r.removeEventListener("selectstart",A),r.removeEventListener("selectend",A),r.removeEventListener("squeeze",A),r.removeEventListener("squeezestart",A),r.removeEventListener("squeezeend",A),r.removeEventListener("end",D),r.removeEventListener("inputsourceschange",I);for(let z=0;z<g.length;z++){let X=p[z];X!==null&&(p[z]=null,g[z].disconnect(X))}y=null,C=null,e.setRenderTarget(m),u=null,d=null,c=null,r=null,v=null,re.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){n=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){o=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||s},this.setReferenceSpace=function(z){a=z},this.getBaseLayer=function(){return d!==null?d:u},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(z){if(r=z,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",A),r.addEventListener("selectstart",A),r.addEventListener("selectend",A),r.addEventListener("squeeze",A),r.addEventListener("squeezestart",A),r.addEventListener("squeezeend",A),r.addEventListener("end",D),r.addEventListener("inputsourceschange",I),f.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let X={antialias:r.renderState.layers===void 0?f.antialias:!0,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:n};u=new XRWebGLLayer(r,t,X),r.updateRenderState({baseLayer:u}),v=new lr(u.framebufferWidth,u.framebufferHeight,{format:Vo,type:en,encoding:e.outputEncoding})}else{let X=null,Y=null,K=null;f.depth&&(K=f.stencil?35056:33190,X=f.stencil?Au:du,Y=f.stencil?uu:Fl);let Z={colorFormat:32856,depthFormat:K,scaleFactor:n};c=new XRWebGLBinding(r,t),d=c.createProjectionLayer(Z),r.updateRenderState({layers:[d]}),v=new lr(d.textureWidth,d.textureHeight,{format:Vo,type:en,depthTexture:new N2(d.textureWidth,d.textureHeight,Y,void 0,void 0,void 0,void 0,void 0,void 0,X),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0});let V=e.properties.get(v);V.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(1),a=null,s=await r.requestReferenceSpace(o),re.setContext(r),re.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function I(z){for(let X=0;X<z.removed.length;X++){let Y=z.removed[X],K=p.indexOf(Y);K>=0&&(p[K]=null,g[K].dispatchEvent({type:"disconnected",data:Y}))}for(let X=0;X<z.added.length;X++){let Y=z.added[X],K=p.indexOf(Y);if(K===-1){for(let V=0;V<g.length;V++)if(V>=p.length){p.push(Y),K=V;break}else if(p[V]===null){p[V]=Y,K=V;break}if(K===-1)break}let Z=g[K];Z&&Z.dispatchEvent({type:"connected",data:Y})}}let R=new N,B=new N;function G(z,X,Y){R.setFromMatrixPosition(X.matrixWorld),B.setFromMatrixPosition(Y.matrixWorld);let K=R.distanceTo(B),Z=X.projectionMatrix.elements,V=Y.projectionMatrix.elements,fe=Z[14]/(Z[10]-1),ae=Z[14]/(Z[10]+1),ne=(Z[9]+1)/Z[5],we=(Z[9]-1)/Z[5],me=(Z[8]-1)/Z[0],ue=(V[8]+1)/V[0],xe=fe*me,Le=fe*ue,Re=K/(-me+ue),Oe=Re*-me;X.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(Oe),z.translateZ(Re),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();let We=fe+Re,He=ae+Re,ye=xe-Oe,Qe=Le+(K-Oe),rt=ne*ae/He*We,Je=we*ae/He*We;z.projectionMatrix.makePerspective(ye,Qe,rt,Je,We,He)}function j(z,X){X===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(X.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(r===null)return;E.near=b.near=x.near=z.near,E.far=b.far=x.far=z.far,(y!==E.near||C!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),y=E.near,C=E.far);let X=z.parent,Y=E.cameras;j(E,X);for(let Z=0;Z<Y.length;Z++)j(Y[Z],X);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),z.position.copy(E.position),z.quaternion.copy(E.quaternion),z.scale.copy(E.scale),z.matrix.copy(E.matrix),z.matrixWorld.copy(E.matrixWorld);let K=z.children;for(let Z=0,V=K.length;Z<V;Z++)K[Z].updateMatrixWorld(!0);Y.length===2?G(E,x,b):E.projectionMatrix.copy(x.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(u!==null)return u.fixedFoveation},this.setFoveation=function(z){d!==null&&(d.fixedFoveation=z),u!==null&&u.fixedFoveation!==void 0&&(u.fixedFoveation=z)};let ee=null;function Q(z,X){if(l=X.getViewerPose(a||s),h=X,l!==null){let Y=l.views;u!==null&&(e.setRenderTargetFramebuffer(v,u.framebuffer),e.setRenderTarget(v));let K=!1;Y.length!==E.cameras.length&&(E.cameras.length=0,K=!0);for(let Z=0;Z<Y.length;Z++){let V=Y[Z],fe=null;if(u!==null)fe=u.getViewport(V);else{let ne=c.getViewSubImage(d,V);fe=ne.viewport,Z===0&&(e.setRenderTargetTextures(v,ne.colorTexture,d.ignoreDepthValues?void 0:ne.depthStencilTexture),e.setRenderTarget(v))}let ae=S[Z];ae===void 0&&(ae=new Qr,ae.layers.enable(Z),ae.viewport=new Qt,S[Z]=ae),ae.matrix.fromArray(V.transform.matrix),ae.projectionMatrix.fromArray(V.projectionMatrix),ae.viewport.set(fe.x,fe.y,fe.width,fe.height),Z===0&&E.matrix.copy(ae.matrix),K===!0&&E.cameras.push(ae)}}for(let Y=0;Y<g.length;Y++){let K=p[Y],Z=g[Y];K!==null&&Z!==void 0&&Z.update(K,X,a||s)}ee&&ee(z,X),h=null}let re=new oN;re.setAnimationLoop(Q),this.setAnimationLoop=function(z){ee=z},this.dispose=function(){}}};function l9(e,t){function i(v,g){v.fogColor.value.copy(g.color),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function r(v,g,p,x,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?n(v,g):g.isMeshToonMaterial?(n(v,g),d(v,g)):g.isMeshPhongMaterial?(n(v,g),c(v,g)):g.isMeshStandardMaterial?(n(v,g),u(v,g),g.isMeshPhysicalMaterial&&h(v,g,b)):g.isMeshMatcapMaterial?(n(v,g),f(v,g)):g.isMeshDepthMaterial?n(v,g):g.isMeshDistanceMaterial?(n(v,g),m(v,g)):g.isMeshNormalMaterial?n(v,g):g.isLineBasicMaterial?(s(v,g),g.isLineDashedMaterial&&o(v,g)):g.isPointsMaterial?a(v,g,p,x):g.isSpriteMaterial?l(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function n(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Zr&&(v.bumpScale.value*=-1)),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Zr&&v.normalScale.value.negate()),g.specularMap&&(v.specularMap.value=g.specularMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);let p=t.get(g).envMap;if(p&&(v.envMap.value=p,v.flipEnvMap.value=p.isCubeTexture&&p.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap){v.lightMap.value=g.lightMap;let S=e.physicallyCorrectLights!==!0?Math.PI:1;v.lightMapIntensity.value=g.lightMapIntensity*S}g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity);let x;g.map?x=g.map:g.specularMap?x=g.specularMap:g.displacementMap?x=g.displacementMap:g.normalMap?x=g.normalMap:g.bumpMap?x=g.bumpMap:g.roughnessMap?x=g.roughnessMap:g.metalnessMap?x=g.metalnessMap:g.alphaMap?x=g.alphaMap:g.emissiveMap?x=g.emissiveMap:g.clearcoatMap?x=g.clearcoatMap:g.clearcoatNormalMap?x=g.clearcoatNormalMap:g.clearcoatRoughnessMap?x=g.clearcoatRoughnessMap:g.iridescenceMap?x=g.iridescenceMap:g.iridescenceThicknessMap?x=g.iridescenceThicknessMap:g.specularIntensityMap?x=g.specularIntensityMap:g.specularColorMap?x=g.specularColorMap:g.transmissionMap?x=g.transmissionMap:g.thicknessMap?x=g.thicknessMap:g.sheenColorMap?x=g.sheenColorMap:g.sheenRoughnessMap&&(x=g.sheenRoughnessMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),v.uvTransform.value.copy(x.matrix));let b;g.aoMap?b=g.aoMap:g.lightMap&&(b=g.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uv2Transform.value.copy(b.matrix))}function s(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity}function o(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function a(v,g,p,x){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*p,v.scale.value=x*.5,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);let b;g.map?b=g.map:g.alphaMap&&(b=g.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uvTransform.value.copy(b.matrix))}function l(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);let p;g.map?p=g.map:g.alphaMap&&(p=g.alphaMap),p!==void 0&&(p.matrixAutoUpdate===!0&&p.updateMatrix(),v.uvTransform.value.copy(p.matrix))}function c(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function d(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function u(v,g){v.roughness.value=g.roughness,v.metalness.value=g.metalness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function h(v,g,p){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),v.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Zr&&v.clearcoatNormalScale.value.negate())),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=p.texture,v.transmissionSamplerSize.value.set(p.width,p.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap)}function f(v,g){g.matcap&&(v.matcap.value=g.matcap)}function m(v,g){v.referencePosition.value.copy(g.referencePosition),v.nearDistance.value=g.nearDistance,v.farDistance.value=g.farDistance}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function c9(){let e=Y0("canvas");return e.style.display="block",e}function fN(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:c9(),i=e.context!==void 0?e.context:null,r=e.depth!==void 0?e.depth:!0,n=e.stencil!==void 0?e.stencil:!0,s=e.antialias!==void 0?e.antialias:!1,o=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,a=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",c=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,d;i!==null?d=i.getContextAttributes().alpha:d=e.alpha!==void 0?e.alpha:!1;let u=null,h=null,f=[],m=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ta,this.physicallyCorrectLights=!1,this.toneMapping=Fa,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});let v=this,g=!1,p=0,x=0,b=null,S=-1,E=null,y=new Qt,C=new Qt,A=null,D=t.width,I=t.height,R=1,B=null,G=null,j=new Qt(0,0,D,I),ee=new Qt(0,0,D,I),Q=!1,re=new I2,z=!1,X=!1,Y=null,K=new at,Z=new de,V=new N,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ae(){return b===null?R:1}let ne=i;function we($,Ee){for(let De=0;De<$.length;De++){let Te=$[De],Fe=t.getContext(Te,Ee);if(Fe!==null)return Fe}return null}try{let $={alpha:!0,depth:r,stencil:n,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Dm}`),t.addEventListener("webglcontextlost",ce,!1),t.addEventListener("webglcontextrestored",tt,!1),t.addEventListener("webglcontextcreationerror",et,!1),ne===null){let Ee=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&Ee.shift(),ne=we(Ee,$),ne===null)throw we(Ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ne.getShaderPrecisionFormat===void 0&&(ne.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let me,ue,xe,Le,Re,Oe,We,He,ye,Qe,rt,Je,Bt,lt,J,q,Se,je,qe,ot,wt,Pe,pt;function Be(){me=new SW(ne),ue=new gW(ne,me,e),me.init(ue),Pe=new n9(ne,me,ue),xe=new i9(ne,me,ue),Le=new AW,Re=new G7,Oe=new r9(ne,me,xe,Re,ue,Pe,Le),We=new yW(v),He=new bW(v),ye=new kG(ne,ue),pt=new pW(ne,me,ye,ue),Qe=new _W(ne,ye,Le,pt),rt=new PW(ne,Qe,ye,Le),qe=new MW(ne,ue,Oe),q=new vW(Re),Je=new H7(v,We,He,me,ue,pt,q),Bt=new l9(v,Re),lt=new W7,J=new Z7(me,ue),je=new fW(v,We,xe,rt,d,o),Se=new t9(v,rt,ue),ot=new mW(ne,me,Le,ue),wt=new EW(ne,me,Le,ue),Le.programs=Je.programs,v.capabilities=ue,v.extensions=me,v.properties=Re,v.renderLists=lt,v.shadowMap=Se,v.state=xe,v.info=Le}Be();let Ke=new a9(v,ne);this.xr=Ke,this.getContext=function(){return ne},this.getContextAttributes=function(){return ne.getContextAttributes()},this.forceContextLoss=function(){let $=me.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){let $=me.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function($){$!==void 0&&(R=$,this.setSize(D,I,!1))},this.getSize=function($){return $.set(D,I)},this.setSize=function($,Ee,De){if(Ke.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}D=$,I=Ee,t.width=Math.floor($*R),t.height=Math.floor(Ee*R),De!==!1&&(t.style.width=$+"px",t.style.height=Ee+"px"),this.setViewport(0,0,$,Ee)},this.getDrawingBufferSize=function($){return $.set(D*R,I*R).floor()},this.setDrawingBufferSize=function($,Ee,De){D=$,I=Ee,R=De,t.width=Math.floor($*De),t.height=Math.floor(Ee*De),this.setViewport(0,0,$,Ee)},this.getCurrentViewport=function($){return $.copy(y)},this.getViewport=function($){return $.copy(j)},this.setViewport=function($,Ee,De,Te){$.isVector4?j.set($.x,$.y,$.z,$.w):j.set($,Ee,De,Te),xe.viewport(y.copy(j).multiplyScalar(R).floor())},this.getScissor=function($){return $.copy(ee)},this.setScissor=function($,Ee,De,Te){$.isVector4?ee.set($.x,$.y,$.z,$.w):ee.set($,Ee,De,Te),xe.scissor(C.copy(ee).multiplyScalar(R).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function($){xe.setScissorTest(Q=$)},this.setOpaqueSort=function($){B=$},this.setTransparentSort=function($){G=$},this.getClearColor=function($){return $.copy(je.getClearColor())},this.setClearColor=function(){je.setClearColor.apply(je,arguments)},this.getClearAlpha=function(){return je.getClearAlpha()},this.setClearAlpha=function(){je.setClearAlpha.apply(je,arguments)},this.clear=function($=!0,Ee=!0,De=!0){let Te=0;$&&(Te|=16384),Ee&&(Te|=256),De&&(Te|=1024),ne.clear(Te)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ce,!1),t.removeEventListener("webglcontextrestored",tt,!1),t.removeEventListener("webglcontextcreationerror",et,!1),lt.dispose(),J.dispose(),Re.dispose(),We.dispose(),He.dispose(),rt.dispose(),pt.dispose(),Je.dispose(),Ke.dispose(),Ke.removeEventListener("sessionstart",Vt),Ke.removeEventListener("sessionend",kt),Y&&(Y.dispose(),Y=null),pi.stop()};function ce($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function tt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let $=Le.autoReset,Ee=Se.enabled,De=Se.autoUpdate,Te=Se.needsUpdate,Fe=Se.type;Be(),Le.autoReset=$,Se.enabled=Ee,Se.autoUpdate=De,Se.needsUpdate=Te,Se.type=Fe}function et($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function ft($){let Ee=$.target;Ee.removeEventListener("dispose",ft),$e(Ee)}function $e($){Mt($),Re.remove($)}function Mt($){let Ee=Re.get($).programs;Ee!==void 0&&(Ee.forEach(function(De){Je.releaseProgram(De)}),$.isShaderMaterial&&Je.releaseShaderCache($))}this.renderBufferDirect=function($,Ee,De,Te,Fe,bt){Ee===null&&(Ee=fe);let Rt=Fe.isMesh&&Fe.matrixWorld.determinant()<0,zt=sl($,Ee,De,Te,Fe);xe.setMaterial(Te,Rt);let Zt=De.index,yi=De.attributes.position;if(Zt===null){if(yi===void 0||yi.count===0)return}else if(Zt.count===0)return;let Wt=1;Te.wireframe===!0&&(Zt=Qe.getWireframeAttribute(De),Wt=2),pt.setup(Fe,Te,zt,De,Zt);let qt,Ci=ot;Zt!==null&&(qt=ye.get(Zt),Ci=wt,Ci.setIndex(qt));let Oi=Zt!==null?Zt.count:yi.count,Gs=De.drawRange.start*Wt,Vs=De.drawRange.count*Wt,bn=bt!==null?bt.start*Wt:0,ei=bt!==null?bt.count*Wt:1/0,xo=Math.max(Gs,bn),ha=Math.min(Oi,Gs+Vs,bn+ei)-1,rn=Math.max(0,ha-xo+1);if(rn!==0){if(Fe.isMesh)Te.wireframe===!0?(xe.setLineWidth(Te.wireframeLinewidth*ae()),Ci.setMode(1)):Ci.setMode(4);else if(Fe.isLine){let Sn=Te.linewidth;Sn===void 0&&(Sn=1),xe.setLineWidth(Sn*ae()),Fe.isLineSegments?Ci.setMode(1):Fe.isLineLoop?Ci.setMode(2):Ci.setMode(3)}else Fe.isPoints?Ci.setMode(0):Fe.isSprite&&Ci.setMode(4);if(Fe.isInstancedMesh)Ci.renderInstances(xo,rn,Fe.count);else if(De.isInstancedBufferGeometry){let Sn=Math.min(De.instanceCount,De._maxInstanceCount);Ci.renderInstances(xo,rn,Sn)}else Ci.render(xo,rn)}},this.compile=function($,Ee){h=J.get($),h.init(),m.push(h),$.traverseVisible(function(De){De.isLight&&De.layers.test(Ee.layers)&&(h.pushLight(De),De.castShadow&&h.pushShadow(De))}),h.setupLights(v.physicallyCorrectLights),$.traverse(function(De){let Te=De.material;if(Te)if(Array.isArray(Te))for(let Fe=0;Fe<Te.length;Fe++){let bt=Te[Fe];Ec(bt,$,De)}else Ec(Te,$,De)}),m.pop(),h=null};let Ze=null;function vt($){Ze&&Ze($)}function Vt(){pi.stop()}function kt(){pi.start()}let pi=new oN;pi.setAnimationLoop(vt),typeof self<"u"&&pi.setContext(self),this.setAnimationLoop=function($){Ze=$,Ke.setAnimationLoop($),$===null?pi.stop():pi.start()},Ke.addEventListener("sessionstart",Vt),Ke.addEventListener("sessionend",kt),this.render=function($,Ee){if(Ee!==void 0&&Ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;$.autoUpdate===!0&&$.updateMatrixWorld(),Ee.parent===null&&Ee.updateMatrixWorld(),Ke.enabled===!0&&Ke.isPresenting===!0&&(Ke.cameraAutoUpdate===!0&&Ke.updateCamera(Ee),Ee=Ke.getCamera()),$.isScene===!0&&$.onBeforeRender(v,$,Ee,b),h=J.get($,m.length),h.init(),m.push(h),K.multiplyMatrices(Ee.projectionMatrix,Ee.matrixWorldInverse),re.setFromProjectionMatrix(K),X=this.localClippingEnabled,z=q.init(this.clippingPlanes,X,Ee),u=lt.get($,f.length),u.init(),f.push(u),Fr($,Ee,0,v.sortObjects),u.finish(),v.sortObjects===!0&&u.sort(B,G),z===!0&&q.beginShadows();let De=h.state.shadowsArray;if(Se.render(De,$,Ee),z===!0&&q.endShadows(),this.info.autoReset===!0&&this.info.reset(),je.render(u,$),h.setupLights(v.physicallyCorrectLights),Ee.isArrayCamera){let Te=Ee.cameras;for(let Fe=0,bt=Te.length;Fe<bt;Fe++){let Rt=Te[Fe];Us(u,$,Rt,Rt.viewport)}}else Us(u,$,Ee);b!==null&&(Oe.updateMultisampleRenderTarget(b),Oe.updateRenderTargetMipmap(b)),$.isScene===!0&&$.onAfterRender(v,$,Ee),pt.resetDefaultState(),S=-1,E=null,m.pop(),m.length>0?h=m[m.length-1]:h=null,f.pop(),f.length>0?u=f[f.length-1]:u=null};function Fr($,Ee,De,Te){if($.visible===!1)return;if($.layers.test(Ee.layers)){if($.isGroup)De=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(Ee);else if($.isLight)h.pushLight($),$.castShadow&&h.pushShadow($);else if($.isSprite){if(!$.frustumCulled||re.intersectsSprite($)){Te&&V.setFromMatrixPosition($.matrixWorld).applyMatrix4(K);let bt=rt.update($),Rt=$.material;Rt.visible&&u.push($,bt,Rt,De,V.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&($.isSkinnedMesh&&$.skeleton.frame!==Le.render.frame&&($.skeleton.update(),$.skeleton.frame=Le.render.frame),!$.frustumCulled||re.intersectsObject($))){Te&&V.setFromMatrixPosition($.matrixWorld).applyMatrix4(K);let bt=rt.update($),Rt=$.material;if(Array.isArray(Rt)){let zt=bt.groups;for(let Zt=0,yi=zt.length;Zt<yi;Zt++){let Wt=zt[Zt],qt=Rt[Wt.materialIndex];qt&&qt.visible&&u.push($,bt,qt,De,V.z,Wt)}}else Rt.visible&&u.push($,bt,Rt,De,V.z,null)}}let Fe=$.children;for(let bt=0,Rt=Fe.length;bt<Rt;bt++)Fr(Fe[bt],Ee,De,Te)}function Us($,Ee,De,Te){let Fe=$.opaque,bt=$.transmissive,Rt=$.transparent;h.setupLightsView(De),bt.length>0&&js(Fe,Ee,De),Te&&xe.viewport(y.copy(Te)),Fe.length>0&&Hs(Fe,Ee,De),bt.length>0&&Hs(bt,Ee,De),Rt.length>0&&Hs(Rt,Ee,De),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1)}function js($,Ee,De){let Te=ue.isWebGL2;Y===null&&(Y=new lr(1,1,{generateMipmaps:!0,type:me.has("EXT_color_buffer_half_float")?tm:en,minFilter:Lm,samples:Te&&s===!0?4:0})),v.getDrawingBufferSize(Z),Te?Y.setSize(Z.x,Z.y):Y.setSize(X0(Z.x),X0(Z.y));let Fe=v.getRenderTarget();v.setRenderTarget(Y),v.clear();let bt=v.toneMapping;v.toneMapping=Fa,Hs($,Ee,De),v.toneMapping=bt,Oe.updateMultisampleRenderTarget(Y),Oe.updateRenderTargetMipmap(Y),v.setRenderTarget(Fe)}function Hs($,Ee,De){let Te=Ee.isScene===!0?Ee.overrideMaterial:null;for(let Fe=0,bt=$.length;Fe<bt;Fe++){let Rt=$[Fe],zt=Rt.object,Zt=Rt.geometry,yi=Te===null?Rt.material:Te,Wt=Rt.group;zt.layers.test(De.layers)&&Kh(zt,Ee,De,Zt,yi,Wt)}}function Kh($,Ee,De,Te,Fe,bt){$.onBeforeRender(v,Ee,De,Te,Fe,bt),$.modelViewMatrix.multiplyMatrices(De.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),Fe.onBeforeRender(v,Ee,De,Te,$,bt),Fe.transparent===!0&&Fe.side===lo?(Fe.side=Zr,Fe.needsUpdate=!0,v.renderBufferDirect(De,Ee,Te,Fe,$,bt),Fe.side=hc,Fe.needsUpdate=!0,v.renderBufferDirect(De,Ee,Te,Fe,$,bt),Fe.side=lo):v.renderBufferDirect(De,Ee,Te,Fe,$,bt),$.onAfterRender(v,Ee,De,Te,Fe,bt)}function Ec($,Ee,De){Ee.isScene!==!0&&(Ee=fe);let Te=Re.get($),Fe=h.state.lights,bt=h.state.shadowsArray,Rt=Fe.state.version,zt=Je.getParameters($,Fe.state,bt,Ee,De),Zt=Je.getProgramCacheKey(zt),yi=Te.programs;Te.environment=$.isMeshStandardMaterial?Ee.environment:null,Te.fog=Ee.fog,Te.envMap=($.isMeshStandardMaterial?He:We).get($.envMap||Te.environment),yi===void 0&&($.addEventListener("dispose",ft),yi=new Map,Te.programs=yi);let Wt=yi.get(Zt);if(Wt!==void 0){if(Te.currentProgram===Wt&&Te.lightsStateVersion===Rt)return zu($,zt),Wt}else zt.uniforms=Je.getUniforms($),$.onBuild(De,zt,v),$.onBeforeCompile(zt,v),Wt=Je.acquireProgram(zt,Zt),yi.set(Zt,Wt),Te.uniforms=zt.uniforms;let qt=Te.uniforms;(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(qt.clippingPlanes=q.uniform),zu($,zt),Te.needsLights=$h($),Te.lightsStateVersion=Rt,Te.needsLights&&(qt.ambientLightColor.value=Fe.state.ambient,qt.lightProbe.value=Fe.state.probe,qt.directionalLights.value=Fe.state.directional,qt.directionalLightShadows.value=Fe.state.directionalShadow,qt.spotLights.value=Fe.state.spot,qt.spotLightShadows.value=Fe.state.spotShadow,qt.rectAreaLights.value=Fe.state.rectArea,qt.ltc_1.value=Fe.state.rectAreaLTC1,qt.ltc_2.value=Fe.state.rectAreaLTC2,qt.pointLights.value=Fe.state.point,qt.pointLightShadows.value=Fe.state.pointShadow,qt.hemisphereLights.value=Fe.state.hemi,qt.directionalShadowMap.value=Fe.state.directionalShadowMap,qt.directionalShadowMatrix.value=Fe.state.directionalShadowMatrix,qt.spotShadowMap.value=Fe.state.spotShadowMap,qt.spotShadowMatrix.value=Fe.state.spotShadowMatrix,qt.pointShadowMap.value=Fe.state.pointShadowMap,qt.pointShadowMatrix.value=Fe.state.pointShadowMatrix);let Ci=Wt.getUniforms(),Oi=s0.seqWithValue(Ci.seq,qt);return Te.currentProgram=Wt,Te.uniformsList=Oi,Wt}function zu($,Ee){let De=Re.get($);De.outputEncoding=Ee.outputEncoding,De.instancing=Ee.instancing,De.skinning=Ee.skinning,De.morphTargets=Ee.morphTargets,De.morphNormals=Ee.morphNormals,De.morphColors=Ee.morphColors,De.morphTargetsCount=Ee.morphTargetsCount,De.numClippingPlanes=Ee.numClippingPlanes,De.numIntersection=Ee.numClipIntersection,De.vertexAlphas=Ee.vertexAlphas,De.vertexTangents=Ee.vertexTangents,De.toneMapping=Ee.toneMapping}function sl($,Ee,De,Te,Fe){Ee.isScene!==!0&&(Ee=fe),Oe.resetTextureUnits();let bt=Ee.fog,Rt=Te.isMeshStandardMaterial?Ee.environment:null,zt=b===null?v.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:ta,Zt=(Te.isMeshStandardMaterial?He:We).get(Te.envMap||Rt),yi=Te.vertexColors===!0&&!!De.attributes.color&&De.attributes.color.itemSize===4,Wt=!!Te.normalMap&&!!De.attributes.tangent,qt=!!De.morphAttributes.position,Ci=!!De.morphAttributes.normal,Oi=!!De.morphAttributes.color,Gs=Te.toneMapped?v.toneMapping:Fa,Vs=De.morphAttributes.position||De.morphAttributes.normal||De.morphAttributes.color,bn=Vs!==void 0?Vs.length:0,ei=Re.get(Te),xo=h.state.lights;if(z===!0&&(X===!0||$!==E)){let En=$===E&&Te.id===S;q.setState(Te,$,En)}let ha=!1;Te.version===ei.__version?(ei.needsLights&&ei.lightsStateVersion!==xo.state.version||ei.outputEncoding!==zt||Fe.isInstancedMesh&&ei.instancing===!1||!Fe.isInstancedMesh&&ei.instancing===!0||Fe.isSkinnedMesh&&ei.skinning===!1||!Fe.isSkinnedMesh&&ei.skinning===!0||ei.envMap!==Zt||Te.fog===!0&&ei.fog!==bt||ei.numClippingPlanes!==void 0&&(ei.numClippingPlanes!==q.numPlanes||ei.numIntersection!==q.numIntersection)||ei.vertexAlphas!==yi||ei.vertexTangents!==Wt||ei.morphTargets!==qt||ei.morphNormals!==Ci||ei.morphColors!==Oi||ei.toneMapping!==Gs||ue.isWebGL2===!0&&ei.morphTargetsCount!==bn)&&(ha=!0):(ha=!0,ei.__version=Te.version);let rn=ei.currentProgram;ha===!0&&(rn=Ec(Te,Ee,Fe));let Sn=!1,Ws=!1,fa=!1,ui=rn.getUniforms(),_n=ei.uniforms;if(xe.useProgram(rn.program)&&(Sn=!0,Ws=!0,fa=!0),Te.id!==S&&(S=Te.id,Ws=!0),Sn||E!==$){if(ui.setValue(ne,"projectionMatrix",$.projectionMatrix),ue.logarithmicDepthBuffer&&ui.setValue(ne,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),E!==$&&(E=$,Ws=!0,fa=!0),Te.isShaderMaterial||Te.isMeshPhongMaterial||Te.isMeshToonMaterial||Te.isMeshStandardMaterial||Te.envMap){let En=ui.map.cameraPosition;En!==void 0&&En.setValue(ne,V.setFromMatrixPosition($.matrixWorld))}(Te.isMeshPhongMaterial||Te.isMeshToonMaterial||Te.isMeshLambertMaterial||Te.isMeshBasicMaterial||Te.isMeshStandardMaterial||Te.isShaderMaterial)&&ui.setValue(ne,"isOrthographic",$.isOrthographicCamera===!0),(Te.isMeshPhongMaterial||Te.isMeshToonMaterial||Te.isMeshLambertMaterial||Te.isMeshBasicMaterial||Te.isMeshStandardMaterial||Te.isShaderMaterial||Te.isShadowMaterial||Fe.isSkinnedMesh)&&ui.setValue(ne,"viewMatrix",$.matrixWorldInverse)}if(Fe.isSkinnedMesh){ui.setOptional(ne,Fe,"bindMatrix"),ui.setOptional(ne,Fe,"bindMatrixInverse");let En=Fe.skeleton;En&&(ue.floatVertexTextures?(En.boneTexture===null&&En.computeBoneTexture(),ui.setValue(ne,"boneTexture",En.boneTexture,Oe),ui.setValue(ne,"boneTextureSize",En.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let wo=De.morphAttributes;return(wo.position!==void 0||wo.normal!==void 0||wo.color!==void 0&&ue.isWebGL2===!0)&&qe.update(Fe,De,Te,rn),(Ws||ei.receiveShadow!==Fe.receiveShadow)&&(ei.receiveShadow=Fe.receiveShadow,ui.setValue(ne,"receiveShadow",Fe.receiveShadow)),Ws&&(ui.setValue(ne,"toneMappingExposure",v.toneMappingExposure),ei.needsLights&&Zh(_n,fa),bt&&Te.fog===!0&&Bt.refreshFogUniforms(_n,bt),Bt.refreshMaterialUniforms(_n,Te,R,I,Y),s0.upload(ne,ei.uniformsList,_n,Oe)),Te.isShaderMaterial&&Te.uniformsNeedUpdate===!0&&(s0.upload(ne,ei.uniformsList,_n,Oe),Te.uniformsNeedUpdate=!1),Te.isSpriteMaterial&&ui.setValue(ne,"center",Fe.center),ui.setValue(ne,"modelViewMatrix",Fe.modelViewMatrix),ui.setValue(ne,"normalMatrix",Fe.normalMatrix),ui.setValue(ne,"modelMatrix",Fe.matrixWorld),rn}function Zh($,Ee){$.ambientLightColor.needsUpdate=Ee,$.lightProbe.needsUpdate=Ee,$.directionalLights.needsUpdate=Ee,$.directionalLightShadows.needsUpdate=Ee,$.pointLights.needsUpdate=Ee,$.pointLightShadows.needsUpdate=Ee,$.spotLights.needsUpdate=Ee,$.spotLightShadows.needsUpdate=Ee,$.rectAreaLights.needsUpdate=Ee,$.hemisphereLights.needsUpdate=Ee}function $h($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return p},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function($,Ee,De){Re.get($.texture).__webglTexture=Ee,Re.get($.depthTexture).__webglTexture=De;let Te=Re.get($);Te.__hasExternalTextures=!0,Te.__hasExternalTextures&&(Te.__autoAllocateDepthBuffer=De===void 0,Te.__autoAllocateDepthBuffer||me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Te.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function($,Ee){let De=Re.get($);De.__webglFramebuffer=Ee,De.__useDefaultFramebuffer=Ee===void 0},this.setRenderTarget=function($,Ee=0,De=0){b=$,p=Ee,x=De;let Te=!0;if($){let zt=Re.get($);zt.__useDefaultFramebuffer!==void 0?(xe.bindFramebuffer(36160,null),Te=!1):zt.__webglFramebuffer===void 0?Oe.setupRenderTarget($):zt.__hasExternalTextures&&Oe.rebindTextures($,Re.get($.texture).__webglTexture,Re.get($.depthTexture).__webglTexture)}let Fe=null,bt=!1,Rt=!1;if($){let zt=$.texture;(zt.isData3DTexture||zt.isDataArrayTexture)&&(Rt=!0);let Zt=Re.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Fe=Zt[Ee],bt=!0):ue.isWebGL2&&$.samples>0&&Oe.useMultisampledRTT($)===!1?Fe=Re.get($).__webglMultisampledFramebuffer:Fe=Zt,y.copy($.viewport),C.copy($.scissor),A=$.scissorTest}else y.copy(j).multiplyScalar(R).floor(),C.copy(ee).multiplyScalar(R).floor(),A=Q;if(xe.bindFramebuffer(36160,Fe)&&ue.drawBuffers&&Te&&xe.drawBuffers($,Fe),xe.viewport(y),xe.scissor(C),xe.setScissorTest(A),bt){let zt=Re.get($.texture);ne.framebufferTexture2D(36160,36064,34069+Ee,zt.__webglTexture,De)}else if(Rt){let zt=Re.get($.texture),Zt=Ee||0;ne.framebufferTextureLayer(36160,36064,zt.__webglTexture,De||0,Zt)}S=-1},this.readRenderTargetPixels=function($,Ee,De,Te,Fe,bt,Rt){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let zt=Re.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&Rt!==void 0&&(zt=zt[Rt]),zt){xe.bindFramebuffer(36160,zt);try{let Zt=$.texture,yi=Zt.format,Wt=Zt.type;if(yi!==Vo&&Pe.convert(yi)!==ne.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let qt=Wt===tm&&(me.has("EXT_color_buffer_half_float")||ue.isWebGL2&&me.has("EXT_color_buffer_float"));if(Wt!==en&&Pe.convert(Wt)!==ne.getParameter(35738)&&!(Wt===Ul&&(ue.isWebGL2||me.has("OES_texture_float")||me.has("WEBGL_color_buffer_float")))&&!qt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ee>=0&&Ee<=$.width-Te&&De>=0&&De<=$.height-Fe&&ne.readPixels(Ee,De,Te,Fe,Pe.convert(yi),Pe.convert(Wt),bt)}finally{let Zt=b!==null?Re.get(b).__webglFramebuffer:null;xe.bindFramebuffer(36160,Zt)}}},this.copyFramebufferToTexture=function($,Ee,De=0){let Te=Math.pow(2,-De),Fe=Math.floor(Ee.image.width*Te),bt=Math.floor(Ee.image.height*Te);Oe.setTexture2D(Ee,0),ne.copyTexSubImage2D(3553,De,0,0,$.x,$.y,Fe,bt),xe.unbindTexture()},this.copyTextureToTexture=function($,Ee,De,Te=0){let Fe=Ee.image.width,bt=Ee.image.height,Rt=Pe.convert(De.format),zt=Pe.convert(De.type);Oe.setTexture2D(De,0),ne.pixelStorei(37440,De.flipY),ne.pixelStorei(37441,De.premultiplyAlpha),ne.pixelStorei(3317,De.unpackAlignment),Ee.isDataTexture?ne.texSubImage2D(3553,Te,$.x,$.y,Fe,bt,Rt,zt,Ee.image.data):Ee.isCompressedTexture?ne.compressedTexSubImage2D(3553,Te,$.x,$.y,Ee.mipmaps[0].width,Ee.mipmaps[0].height,Rt,Ee.mipmaps[0].data):ne.texSubImage2D(3553,Te,$.x,$.y,Rt,zt,Ee.image),Te===0&&De.generateMipmaps&&ne.generateMipmap(3553),xe.unbindTexture()},this.copyTextureToTexture3D=function($,Ee,De,Te,Fe=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let bt=$.max.x-$.min.x+1,Rt=$.max.y-$.min.y+1,zt=$.max.z-$.min.z+1,Zt=Pe.convert(Te.format),yi=Pe.convert(Te.type),Wt;if(Te.isData3DTexture)Oe.setTexture3D(Te,0),Wt=32879;else if(Te.isDataArrayTexture)Oe.setTexture2DArray(Te,0),Wt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ne.pixelStorei(37440,Te.flipY),ne.pixelStorei(37441,Te.premultiplyAlpha),ne.pixelStorei(3317,Te.unpackAlignment);let qt=ne.getParameter(3314),Ci=ne.getParameter(32878),Oi=ne.getParameter(3316),Gs=ne.getParameter(3315),Vs=ne.getParameter(32877),bn=De.isCompressedTexture?De.mipmaps[0]:De.image;ne.pixelStorei(3314,bn.width),ne.pixelStorei(32878,bn.height),ne.pixelStorei(3316,$.min.x),ne.pixelStorei(3315,$.min.y),ne.pixelStorei(32877,$.min.z),De.isDataTexture||De.isData3DTexture?ne.texSubImage3D(Wt,Fe,Ee.x,Ee.y,Ee.z,bt,Rt,zt,Zt,yi,bn.data):De.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ne.compressedTexSubImage3D(Wt,Fe,Ee.x,Ee.y,Ee.z,bt,Rt,zt,Zt,bn.data)):ne.texSubImage3D(Wt,Fe,Ee.x,Ee.y,Ee.z,bt,Rt,zt,Zt,yi,bn),ne.pixelStorei(3314,qt),ne.pixelStorei(32878,Ci),ne.pixelStorei(3316,Oi),ne.pixelStorei(3315,Gs),ne.pixelStorei(32877,Vs),Fe===0&&Te.generateMipmaps&&ne.generateMipmap(Wt),xe.unbindTexture()},this.initTexture=function($){$.isCubeTexture?Oe.setTextureCube($,0):$.isData3DTexture?Oe.setTexture3D($,0):$.isDataArrayTexture?Oe.setTexture2DArray($,0):Oe.setTexture2D($,0),xe.unbindTexture()},this.resetState=function(){p=0,x=0,b=null,xe.reset(),pt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var u9=class extends fN{};u9.prototype.isWebGL1Renderer=!0;var pN=class{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Lt(e),this.near=t,this.far=i}clone(){return new pN(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},fu=class extends Di{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}},d9=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=qS,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Zo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,n=this.stride;r<n;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},on=new N,KS=class{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)on.fromBufferAttribute(this,t),on.applyMatrix4(e),this.setXYZ(t,on.x,on.y,on.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)on.fromBufferAttribute(this,t),on.applyNormalMatrix(e),this.setXYZ(t,on.x,on.y,on.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)on.fromBufferAttribute(this,t),on.transformDirection(e),this.setXYZ(t,on.x,on.y,on.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[r+n])}return new Gt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new KS(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[r+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},h9=class extends Gt{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},bc=class extends Im{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Lt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},JM=new N,eP=new N,tP=new at,Cw=new Bh,Kg=new ks,K0=class extends Di{constructor(e=new It,t=new bc){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,n=t.count;r<n;r++)JM.fromBufferAttribute(t,r-1),eP.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=JM.distanceTo(eP);e.setAttribute("lineDistance",new ut(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,n=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Kg.copy(i.boundingSphere),Kg.applyMatrix4(r),Kg.radius+=n,e.ray.intersectsSphere(Kg)===!1)return;tP.copy(r).invert(),Cw.copy(e.ray).applyMatrix4(tP);let o=n/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new N,c=new N,d=new N,u=new N,h=this.isLineSegments?2:1,f=i.index,m=i.attributes.position;if(f!==null){let v=Math.max(0,s.start),g=Math.min(f.count,s.start+s.count);for(let p=v,x=g-1;p<x;p+=h){let b=f.getX(p),S=f.getX(p+1);if(l.fromBufferAttribute(m,b),c.fromBufferAttribute(m,S),Cw.distanceSqToSegment(l,c,u,d)>a)continue;u.applyMatrix4(this.matrixWorld);let E=e.ray.origin.distanceTo(u);E<e.near||E>e.far||t.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}else{let v=Math.max(0,s.start),g=Math.min(m.count,s.start+s.count);for(let p=v,x=g-1;p<x;p+=h){if(l.fromBufferAttribute(m,p),c.fromBufferAttribute(m,p+1),Cw.distanceSqToSegment(l,c,u,d)>a)continue;u.applyMatrix4(this.matrixWorld);let b=e.ray.origin.distanceTo(u);b<e.near||b>e.far||t.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=i.length;r<n;r++){let s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}},iP=new N,rP=new N,Nm=class extends K0{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,n=t.count;r<n;r+=2)iP.fromBufferAttribute(t,r),rP.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+iP.distanceTo(rP);e.setAttribute("lineDistance",new ut(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},f9=class extends tn{constructor(e,t,i,r,n,s,o,a,l){super(e,t,i,r,n,s,o,a,l),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:vi,this.magFilter=n!==void 0?n:vi,this.generateMipmaps=!1;let c=this;function d(){c.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},aa=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),n=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),n+=i.distanceTo(r),t.push(n),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let i=this.getLengths(),r=0,n=i.length,s;t?s=t:s=e*i[n-1];let o=0,a=n-1,l;for(;o<=a;)if(r=Math.floor(o+(a-o)/2),l=i[r]-s,l<0)o=r+1;else if(l>0)a=r-1;else{a=r;break}if(r=a,i[r]===s)return r/(n-1);let c=i[r],d=i[r+1]-c,u=(s-c)/d;return(r+u)/(n-1)}getTangent(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);let n=this.getPoint(i),s=this.getPoint(r),o=t||(n.isVector2?new de:new N);return o.copy(s).sub(n).normalize(),o}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){let i=new N,r=[],n=[],s=[],o=new N,a=new at;for(let h=0;h<=e;h++){let f=h/e;r[h]=this.getTangentAt(f,new N)}n[0]=new N,s[0]=new N;let l=Number.MAX_VALUE,c=Math.abs(r[0].x),d=Math.abs(r[0].y),u=Math.abs(r[0].z);c<=l&&(l=c,i.set(1,0,0)),d<=l&&(l=d,i.set(0,1,0)),u<=l&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),n[0].crossVectors(r[0],o),s[0].crossVectors(r[0],n[0]);for(let h=1;h<=e;h++){if(n[h]=n[h-1].clone(),s[h]=s[h-1].clone(),o.crossVectors(r[h-1],r[h]),o.length()>Number.EPSILON){o.normalize();let f=Math.acos(xr(r[h-1].dot(r[h]),-1,1));n[h].applyMatrix4(a.makeRotationAxis(o,f))}s[h].crossVectors(r[h],n[h])}if(t===!0){let h=Math.acos(xr(n[0].dot(n[e]),-1,1));h/=e,r[0].dot(o.crossVectors(n[0],n[e]))>0&&(h=-h);for(let f=1;f<=e;f++)n[f].applyMatrix4(a.makeRotationAxis(r[f],h*f)),s[f].crossVectors(r[f],n[f])}return{tangents:r,normals:n,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},v1=class extends aa{constructor(e=0,t=0,i=1,r=1,n=0,s=Math.PI*2,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(e,t){let i=t||new de,r=Math.PI*2,n=this.aEndAngle-this.aStartAngle,s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=r;for(;n>r;)n-=r;n<Number.EPSILON&&(s?n=0:n=r),this.aClockwise===!0&&!s&&(n===r?n=-r:n=n-r);let o=this.aStartAngle+e*n,a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){let c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),u=a-this.aX,h=l-this.aY;a=u*c-h*d+this.aX,l=u*d+h*c+this.aY}return i.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},p9=class extends v1{constructor(e,t,i,r,n,s){super(e,t,i,i,r,n,s),this.isArcCurve=!0,this.type="ArcCurve"}};function B2(){let e=0,t=0,i=0,r=0;function n(s,o,a,l){e=s,t=a,i=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){n(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,u){let h=(o-s)/c-(a-s)/(c+d)+(a-o)/d,f=(a-o)/d-(l-o)/(d+u)+(l-a)/u;h*=d,f*=d,n(o,a,h,f)},calc:function(s){let o=s*s,a=o*s;return e+t*s+i*o+r*a}}}var Zg=new N,Tw=new B2,Mw=new B2,Pw=new B2,m9=class extends aa{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new N){let i=t,r=this.points,n=r.length,s=(n-(this.closed?0:1))*e,o=Math.floor(s),a=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/n)+1)*n:a===0&&o===n-1&&(o=n-2,a=1);let l,c;this.closed||o>0?l=r[(o-1)%n]:(Zg.subVectors(r[0],r[1]).add(r[0]),l=Zg);let d=r[o%n],u=r[(o+1)%n];if(this.closed||o+2<n?c=r[(o+2)%n]:(Zg.subVectors(r[n-1],r[n-2]).add(r[n-1]),c=Zg),this.curveType==="centripetal"||this.curveType==="chordal"){let h=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(d),h),m=Math.pow(d.distanceToSquared(u),h),v=Math.pow(u.distanceToSquared(c),h);m<1e-4&&(m=1),f<1e-4&&(f=m),v<1e-4&&(v=m),Tw.initNonuniformCatmullRom(l.x,d.x,u.x,c.x,f,m,v),Mw.initNonuniformCatmullRom(l.y,d.y,u.y,c.y,f,m,v),Pw.initNonuniformCatmullRom(l.z,d.z,u.z,c.z,f,m,v)}else this.curveType==="catmullrom"&&(Tw.initCatmullRom(l.x,d.x,u.x,c.x,this.tension),Mw.initCatmullRom(l.y,d.y,u.y,c.y,this.tension),Pw.initCatmullRom(l.z,d.z,u.z,c.z,this.tension));return i.set(Tw.calc(a),Mw.calc(a),Pw.calc(a)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new N().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function nP(e,t,i,r,n){let s=(r-t)*.5,o=(n-i)*.5,a=e*e,l=e*a;return(2*i-2*r+s+o)*l+(-3*i+3*r-2*s-o)*a+s*e+i}function g9(e,t){let i=1-e;return i*i*t}function v9(e,t){return 2*(1-e)*e*t}function y9(e,t){return e*e*t}function Ep(e,t,i,r){return g9(e,t)+v9(e,i)+y9(e,r)}function x9(e,t){let i=1-e;return i*i*i*t}function w9(e,t){let i=1-e;return 3*i*i*e*t}function b9(e,t){return 3*(1-e)*e*e*t}function S9(e,t){return e*e*e*t}function Ap(e,t,i,r,n){return x9(e,t)+w9(e,i)+b9(e,r)+S9(e,n)}var co=class extends aa{constructor(e=new de,t=new de,i=new de,r=new de){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new de){let i=t,r=this.v0,n=this.v1,s=this.v2,o=this.v3;return i.set(Ap(e,r.x,n.x,s.x,o.x),Ap(e,r.y,n.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},_9=class extends aa{constructor(e=new N,t=new N,i=new N,r=new N){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new N){let i=t,r=this.v0,n=this.v1,s=this.v2,o=this.v3;return i.set(Ap(e,r.x,n.x,s.x,o.x),Ap(e,r.y,n.y,s.y,o.y),Ap(e,r.z,n.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},mo=class extends aa{constructor(e=new de,t=new de){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new de){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let i=t||new de;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},mN=class extends aa{constructor(e=new N,t=new N){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new N){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},fc=class extends aa{constructor(e=new de,t=new de,i=new de){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new de){let i=t,r=this.v0,n=this.v1,s=this.v2;return i.set(Ep(e,r.x,n.x,s.x),Ep(e,r.y,n.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},E9=class extends aa{constructor(e=new N,t=new N,i=new N){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new N){let i=t,r=this.v0,n=this.v1,s=this.v2;return i.set(Ep(e,r.x,n.x,s.x),Ep(e,r.y,n.y,s.y),Ep(e,r.z,n.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},k2=class extends aa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new de){let i=t,r=this.points,n=(r.length-1)*e,s=Math.floor(n),o=n-s,a=r[s===0?s:s-1],l=r[s],c=r[s>r.length-2?r.length-1:s+1],d=r[s>r.length-3?r.length-1:s+2];return i.set(nP(o,a.x,l.x,c.x,d.x),nP(o,a.y,l.y,c.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new de().fromArray(r))}return this}},A9=Object.freeze({__proto__:null,ArcCurve:p9,CatmullRomCurve3:m9,CubicBezierCurve:co,CubicBezierCurve3:_9,EllipseCurve:v1,LineCurve:mo,LineCurve3:mN,QuadraticBezierCurve:fc,QuadraticBezierCurve3:E9,SplineCurve:k2}),C9=class extends aa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new mo(t,e))}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),n=0;for(;n<r.length;){if(r[n]>=i){let s=r[n]-i,o=this.curves[n],a=o.getLength(),l=a===0?0:1-s/a;return o.getPointAt(l,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,n=this.curves;r<n.length;r++){let s=n[r],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,a=s.getPoints(o);for(let l=0;l<a.length;l++){let c=a[l];i&&i.equals(c)||(t.push(c),i=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new A9[r.type]().fromJSON(r))}return this}},Z0=class extends C9{constructor(e){super(),this.type="Path",this.currentPoint=new de,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new mo(this.currentPoint.clone(),new de(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let n=new fc(this.currentPoint.clone(),new de(e,t),new de(i,r));return this.curves.push(n),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,n,s){let o=new co(this.currentPoint.clone(),new de(e,t),new de(i,r),new de(n,s));return this.curves.push(o),this.currentPoint.set(n,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new k2(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,n,s){let o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+o,t+a,i,r,n,s),this}absarc(e,t,i,r,n,s){return this.absellipse(e,t,i,i,r,n,s),this}ellipse(e,t,i,r,n,s,o,a){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,i,r,n,s,o,a),this}absellipse(e,t,i,r,n,s,o,a){let l=new v1(e,t,i,r,n,s,o,a);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},gN=class extends It{constructor(e=[new de(0,.5),new de(.5,0),new de(0,-.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=xr(r,0,Math.PI*2);let n=[],s=[],o=[],a=[],l=[],c=1/t,d=new N,u=new de,h=new N,f=new N,m=new N,v=0,g=0;for(let p=0;p<=e.length-1;p++)switch(p){case 0:v=e[p+1].x-e[p].x,g=e[p+1].y-e[p].y,h.x=g*1,h.y=-v,h.z=g*0,m.copy(h),h.normalize(),a.push(h.x,h.y,h.z);break;case e.length-1:a.push(m.x,m.y,m.z);break;default:v=e[p+1].x-e[p].x,g=e[p+1].y-e[p].y,h.x=g*1,h.y=-v,h.z=g*0,f.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),a.push(h.x,h.y,h.z),m.copy(f)}for(let p=0;p<=t;p++){let x=i+p*c*r,b=Math.sin(x),S=Math.cos(x);for(let E=0;E<=e.length-1;E++){d.x=e[E].x*b,d.y=e[E].y,d.z=e[E].x*S,s.push(d.x,d.y,d.z),u.x=p/t,u.y=E/(e.length-1),o.push(u.x,u.y);let y=a[3*E+0]*b,C=a[3*E+1],A=a[3*E+0]*S;l.push(y,C,A)}}for(let p=0;p<t;p++)for(let x=0;x<e.length-1;x++){let b=x+p*e.length,S=b,E=b+e.length,y=b+e.length+1,C=b+1;n.push(S,E,C),n.push(y,C,E)}this.setIndex(n),this.setAttribute("position",new ut(s,3)),this.setAttribute("uv",new ut(o,2)),this.setAttribute("normal",new ut(l,3))}static fromJSON(e){return new gN(e.points,e.segments,e.phiStart,e.phiLength)}},z2=class extends It{constructor(e=1,t=1,i=1,r=8,n=1,s=!1,o=0,a=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:s,thetaStart:o,thetaLength:a};let l=this;r=Math.floor(r),n=Math.floor(n);let c=[],d=[],u=[],h=[],f=0,m=[],v=i/2,g=0;p(),s===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(c),this.setAttribute("position",new ut(d,3)),this.setAttribute("normal",new ut(u,3)),this.setAttribute("uv",new ut(h,2));function p(){let b=new N,S=new N,E=0,y=(t-e)/i;for(let C=0;C<=n;C++){let A=[],D=C/n,I=D*(t-e)+e;for(let R=0;R<=r;R++){let B=R/r,G=B*a+o,j=Math.sin(G),ee=Math.cos(G);S.x=I*j,S.y=-D*i+v,S.z=I*ee,d.push(S.x,S.y,S.z),b.set(j,y,ee).normalize(),u.push(b.x,b.y,b.z),h.push(B,1-D),A.push(f++)}m.push(A)}for(let C=0;C<r;C++)for(let A=0;A<n;A++){let D=m[A][C],I=m[A+1][C],R=m[A+1][C+1],B=m[A][C+1];c.push(D,I,B),c.push(I,R,B),E+=6}l.addGroup(g,E,0),g+=E}function x(b){let S=f,E=new de,y=new N,C=0,A=b===!0?e:t,D=b===!0?1:-1;for(let R=1;R<=r;R++)d.push(0,v*D,0),u.push(0,D,0),h.push(.5,.5),f++;let I=f;for(let R=0;R<=r;R++){let B=R/r*a+o,G=Math.cos(B),j=Math.sin(B);y.x=A*j,y.y=v*D,y.z=A*G,d.push(y.x,y.y,y.z),u.push(0,D,0),E.x=G*.5+.5,E.y=j*.5*D+.5,h.push(E.x,E.y),f++}for(let R=0;R<r;R++){let B=S+R,G=I+R;b===!0?c.push(G,G+1,B):c.push(G+1,G,B),C+=3}l.addGroup(g,C,b===!0?1:2),g+=C}}static fromJSON(e){return new z2(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},vN=class extends z2{constructor(e=1,t=1,i=8,r=1,n=!1,s=0,o=Math.PI*2){super(0,e,t,i,r,n,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:s,thetaLength:o}}static fromJSON(e){return new vN(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},F2=class extends It{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};let n=[],s=[];o(r),l(i),c(),this.setAttribute("position",new ut(n,3)),this.setAttribute("normal",new ut(n.slice(),3)),this.setAttribute("uv",new ut(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(p){let x=new N,b=new N,S=new N;for(let E=0;E<t.length;E+=3)h(t[E+0],x),h(t[E+1],b),h(t[E+2],S),a(x,b,S,p)}function a(p,x,b,S){let E=S+1,y=[];for(let C=0;C<=E;C++){y[C]=[];let A=p.clone().lerp(b,C/E),D=x.clone().lerp(b,C/E),I=E-C;for(let R=0;R<=I;R++)R===0&&C===E?y[C][R]=A:y[C][R]=A.clone().lerp(D,R/I)}for(let C=0;C<E;C++)for(let A=0;A<2*(E-C)-1;A++){let D=Math.floor(A/2);A%2===0?(u(y[C][D+1]),u(y[C+1][D]),u(y[C][D])):(u(y[C][D+1]),u(y[C+1][D+1]),u(y[C+1][D]))}}function l(p){let x=new N;for(let b=0;b<n.length;b+=3)x.x=n[b+0],x.y=n[b+1],x.z=n[b+2],x.normalize().multiplyScalar(p),n[b+0]=x.x,n[b+1]=x.y,n[b+2]=x.z}function c(){let p=new N;for(let x=0;x<n.length;x+=3){p.x=n[x+0],p.y=n[x+1],p.z=n[x+2];let b=v(p)/2/Math.PI+.5,S=g(p)/Math.PI+.5;s.push(b,1-S)}f(),d()}function d(){for(let p=0;p<s.length;p+=6){let x=s[p+0],b=s[p+2],S=s[p+4],E=Math.max(x,b,S),y=Math.min(x,b,S);E>.9&&y<.1&&(x<.2&&(s[p+0]+=1),b<.2&&(s[p+2]+=1),S<.2&&(s[p+4]+=1))}}function u(p){n.push(p.x,p.y,p.z)}function h(p,x){let b=p*3;x.x=e[b+0],x.y=e[b+1],x.z=e[b+2]}function f(){let p=new N,x=new N,b=new N,S=new N,E=new de,y=new de,C=new de;for(let A=0,D=0;A<n.length;A+=9,D+=6){p.set(n[A+0],n[A+1],n[A+2]),x.set(n[A+3],n[A+4],n[A+5]),b.set(n[A+6],n[A+7],n[A+8]),E.set(s[D+0],s[D+1]),y.set(s[D+2],s[D+3]),C.set(s[D+4],s[D+5]),S.copy(p).add(x).add(b).divideScalar(3);let I=v(S);m(E,D+0,p,I),m(y,D+2,x,I),m(C,D+4,b,I)}}function m(p,x,b,S){S<0&&p.x===1&&(s[x]=p.x-1),b.x===0&&b.z===0&&(s[x]=S/2/Math.PI+.5)}function v(p){return Math.atan2(p.z,-p.x)}function g(p){return Math.atan2(-p.y,Math.sqrt(p.x*p.x+p.z*p.z))}}static fromJSON(e){return new F2(e.vertices,e.indices,e.radius,e.details)}},yN=class extends F2{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=1/i,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yN(e.radius,e.detail)}},$0=class extends Z0{constructor(e){super(e),this.uuid=Zo(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new Z0().fromJSON(r))}return this}},T9={triangulate:function(e,t,i=2){let r=t&&t.length,n=r?t[0]*i:e.length,s=xN(e,0,n,i,!0),o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,u,h,f;if(r&&(s=L9(e,t,s,i)),e.length>80*i){a=c=e[0],l=d=e[1];for(let m=i;m<n;m+=i)u=e[m],h=e[m+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);f=Math.max(c-a,d-l),f=f!==0?1/f:0}return rm(s,o,i,a,l,f),o}};function xN(e,t,i,r,n){let s,o;if(n===G9(e,t,i,r)>0)for(s=t;s<i;s+=r)o=sP(s,e[s],e[s+1],o);else for(s=i-r;s>=t;s-=r)o=sP(s,e[s],e[s+1],o);return o&&y1(o,o.next)&&(sm(o),o=o.next),o}function pc(e,t){if(!e)return e;t||(t=e);let i=e,r;do if(r=!1,!i.steiner&&(y1(i,i.next)||ji(i.prev,i,i.next)===0)){if(sm(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function rm(e,t,i,r,n,s,o){if(!e)return;!o&&s&&k9(e,r,n,s);let a=e,l,c;for(;e.prev!==e.next;){if(l=e.prev,c=e.next,s?P9(e,r,n,s):M9(e)){t.push(l.i/i),t.push(e.i/i),t.push(c.i/i),sm(e),e=c.next,a=c.next;continue}if(e=c,e===a){o?o===1?(e=D9(pc(e),t,i),rm(e,t,i,r,n,s,2)):o===2&&O9(e,t,i,r,n,s):rm(pc(e),t,i,r,n,s,1);break}}}function M9(e){let t=e.prev,i=e,r=e.next;if(ji(t,i,r)>=0)return!1;let n=e.next.next;for(;n!==e.prev;){if(jd(t.x,t.y,i.x,i.y,r.x,r.y,n.x,n.y)&&ji(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function P9(e,t,i,r){let n=e.prev,s=e,o=e.next;if(ji(n,s,o)>=0)return!1;let a=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,l=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,c=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,d=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,u=ZS(a,l,t,i,r),h=ZS(c,d,t,i,r),f=e.prevZ,m=e.nextZ;for(;f&&f.z>=u&&m&&m.z<=h;){if(f!==e.prev&&f!==e.next&&jd(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&ji(f.prev,f,f.next)>=0||(f=f.prevZ,m!==e.prev&&m!==e.next&&jd(n.x,n.y,s.x,s.y,o.x,o.y,m.x,m.y)&&ji(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;f&&f.z>=u;){if(f!==e.prev&&f!==e.next&&jd(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&ji(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=h;){if(m!==e.prev&&m!==e.next&&jd(n.x,n.y,s.x,s.y,o.x,o.y,m.x,m.y)&&ji(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function D9(e,t,i){let r=e;do{let n=r.prev,s=r.next.next;!y1(n,s)&&wN(n,r,r.next,s)&&nm(n,s)&&nm(s,n)&&(t.push(n.i/i),t.push(r.i/i),t.push(s.i/i),sm(r),sm(r.next),r=e=s),r=r.next}while(r!==e);return pc(r)}function O9(e,t,i,r,n,s){let o=e;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&U9(o,a)){let l=bN(o,a);o=pc(o,o.next),l=pc(l,l.next),rm(o,t,i,r,n,s),rm(l,t,i,r,n,s);return}a=a.next}o=o.next}while(o!==e)}function L9(e,t,i,r){let n=[],s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*r,l=s<o-1?t[s+1]*r:e.length,c=xN(e,a,l,r,!1),c===c.next&&(c.steiner=!0),n.push(F9(c));for(n.sort(I9),s=0;s<n.length;s++)R9(n[s],i),i=pc(i,i.next);return i}function I9(e,t){return e.x-t.x}function R9(e,t){if(t=N9(e,t),t){let i=bN(t,e);pc(t,t.next),pc(i,i.next)}}function N9(e,t){let i=t,r=e.x,n=e.y,s=-1/0,o;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){let h=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(h<=r&&h>s){if(s=h,h===r){if(n===i.y)return i;if(n===i.next.y)return i.next}o=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!o)return null;if(r===s)return o;let a=o,l=o.x,c=o.y,d=1/0,u;i=o;do r>=i.x&&i.x>=l&&r!==i.x&&jd(n<c?r:s,n,l,c,n<c?s:r,n,i.x,i.y)&&(u=Math.abs(n-i.y)/(r-i.x),nm(i,e)&&(u<d||u===d&&(i.x>o.x||i.x===o.x&&B9(o,i)))&&(o=i,d=u)),i=i.next;while(i!==a);return o}function B9(e,t){return ji(e.prev,e,t.prev)<0&&ji(t.next,e,e.next)<0}function k9(e,t,i,r){let n=e;do n.z===null&&(n.z=ZS(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,z9(n)}function z9(e){let t,i,r,n,s,o,a,l,c=1;do{for(i=e,e=null,s=null,o=0;i;){for(o++,r=i,a=0,t=0;t<c&&(a++,r=r.nextZ,!!r);t++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,l--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;i=r}s.nextZ=null,c*=2}while(o>1);return e}function ZS(e,t,i,r,n){return e=32767*(e-i)*n,t=32767*(t-r)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function F9(e){let t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function jd(e,t,i,r,n,s,o,a){return(n-o)*(t-a)-(e-o)*(s-a)>=0&&(e-o)*(r-a)-(i-o)*(t-a)>=0&&(i-o)*(s-a)-(n-o)*(r-a)>=0}function U9(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!j9(e,t)&&(nm(e,t)&&nm(t,e)&&H9(e,t)&&(ji(e.prev,e,t.prev)||ji(e,t.prev,t))||y1(e,t)&&ji(e.prev,e,e.next)>0&&ji(t.prev,t,t.next)>0)}function ji(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function y1(e,t){return e.x===t.x&&e.y===t.y}function wN(e,t,i,r){let n=Jg(ji(e,t,i)),s=Jg(ji(e,t,r)),o=Jg(ji(i,r,e)),a=Jg(ji(i,r,t));return!!(n!==s&&o!==a||n===0&&$g(e,i,t)||s===0&&$g(e,r,t)||o===0&&$g(i,e,r)||a===0&&$g(i,t,r))}function $g(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Jg(e){return e>0?1:e<0?-1:0}function j9(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&wN(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function nm(e,t){return ji(e.prev,e,e.next)<0?ji(e,t,e.next)>=0&&ji(e,e.prev,t)>=0:ji(e,t,e.prev)<0||ji(e,e.next,t)<0}function H9(e,t){let i=e,r=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e);return r}function bN(e,t){let i=new $S(e.i,e.x,e.y),r=new $S(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function sP(e,t,i,r){let n=new $S(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function sm(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function $S(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function G9(e,t,i,r){let n=0;for(let s=t,o=i-r;s<i;s+=r)n+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return n}var SN=class{static area(e){let t=e.length,i=0;for(let r=t-1,n=0;n<t;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return i*.5}static isClockWise(e){return SN.area(e)<0}static triangulateShape(e,t){let i=[],r=[],n=[];oP(e),aP(i,e);let s=e.length;t.forEach(oP);for(let a=0;a<t.length;a++)r.push(s),s+=t[a].length,aP(i,t[a]);let o=T9.triangulate(i,r);for(let a=0;a<o.length;a+=3)n.push(o.slice(a,a+3));return n}};function oP(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function aP(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}var _N=class extends F2{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _N(e.radius,e.detail)}},U2=class extends It{constructor(e=1,t=32,i=16,r=0,n=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let a=Math.min(s+o,Math.PI),l=0,c=[],d=new N,u=new N,h=[],f=[],m=[],v=[];for(let g=0;g<=i;g++){let p=[],x=g/i,b=0;g==0&&s==0?b=.5/t:g==i&&a==Math.PI&&(b=-.5/t);for(let S=0;S<=t;S++){let E=S/t;d.x=-e*Math.cos(r+E*n)*Math.sin(s+x*o),d.y=e*Math.cos(s+x*o),d.z=e*Math.sin(r+E*n)*Math.sin(s+x*o),f.push(d.x,d.y,d.z),u.copy(d).normalize(),m.push(u.x,u.y,u.z),v.push(E+b,1-x),p.push(l++)}c.push(p)}for(let g=0;g<i;g++)for(let p=0;p<t;p++){let x=c[g][p+1],b=c[g][p],S=c[g+1][p],E=c[g+1][p+1];(g!==0||s>0)&&h.push(x,b,E),(g!==i-1||a<Math.PI)&&h.push(b,S,E)}this.setIndex(h),this.setAttribute("position",new ut(f,3)),this.setAttribute("normal",new ut(m,3)),this.setAttribute("uv",new ut(v,2))}static fromJSON(e){return new U2(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},EN=class extends It{constructor(e=1,t=.4,i=64,r=8,n=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:s},i=Math.floor(i),r=Math.floor(r);let o=[],a=[],l=[],c=[],d=new N,u=new N,h=new N,f=new N,m=new N,v=new N,g=new N;for(let x=0;x<=i;++x){let b=x/i*n*Math.PI*2;p(b,n,s,e,h),p(b+.01,n,s,e,f),v.subVectors(f,h),g.addVectors(f,h),m.crossVectors(v,g),g.crossVectors(m,v),m.normalize(),g.normalize();for(let S=0;S<=r;++S){let E=S/r*Math.PI*2,y=-t*Math.cos(E),C=t*Math.sin(E);d.x=h.x+(y*g.x+C*m.x),d.y=h.y+(y*g.y+C*m.y),d.z=h.z+(y*g.z+C*m.z),a.push(d.x,d.y,d.z),u.subVectors(d,h).normalize(),l.push(u.x,u.y,u.z),c.push(x/i),c.push(S/r)}}for(let x=1;x<=i;x++)for(let b=1;b<=r;b++){let S=(r+1)*(x-1)+(b-1),E=(r+1)*x+(b-1),y=(r+1)*x+b,C=(r+1)*(x-1)+b;o.push(S,E,C),o.push(E,y,C)}this.setIndex(o),this.setAttribute("position",new ut(a,3)),this.setAttribute("normal",new ut(l,3)),this.setAttribute("uv",new ut(c,2));function p(x,b,S,E,y){let C=Math.cos(x),A=Math.sin(x),D=S/b*x,I=Math.cos(D);y.x=E*(2+I)*.5*C,y.y=E*(2+I)*A*.5,y.z=E*Math.sin(D)*.5}}static fromJSON(e){return new EN(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},lP={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},AN=class{constructor(e,t,i){let r=this,n=!1,s=0,o=0,a,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(c){o++,n===!1&&r.onStart!==void 0&&r.onStart(c,s,o),n=!0},this.itemEnd=function(c){s++,r.onProgress!==void 0&&r.onProgress(c,s,o),s===o&&(n=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,d){return l.push(c,d),this},this.removeHandler=function(c){let d=l.indexOf(c);return d!==-1&&l.splice(d,2),this},this.getHandler=function(c){for(let d=0,u=l.length;d<u;d+=2){let h=l[d],f=l[d+1];if(h.global&&(h.lastIndex=0),h.test(c))return f}return null}}},V9=new AN,j2=class{constructor(e){this.manager=e!==void 0?e:V9,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let i=this;return new Promise(function(r,n){i.load(e,r,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Aa={},JS=class extends j2{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=lP.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(Aa[e]!==void 0){Aa[e].push({onLoad:t,onProgress:i,onError:r});return}Aa[e]=[],Aa[e].push({onLoad:t,onProgress:i,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let c=Aa[e],d=l.body.getReader(),u=l.headers.get("Content-Length"),h=u?parseInt(u):0,f=h!==0,m=0,v=new ReadableStream({start(g){p();function p(){d.read().then(({done:x,value:b})=>{if(x)g.close();else{m+=b.byteLength;let S=new ProgressEvent("progress",{lengthComputable:f,loaded:m,total:h});for(let E=0,y=c.length;E<y;E++){let C=c[E];C.onProgress&&C.onProgress(S)}g.enqueue(b),p()}})}}});return new Response(v)}else throw Error(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`)}).then(l=>{switch(a){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return l.json();default:if(o===void 0)return l.text();{let c=/charset="?([^;"\s]*)"?/i.exec(o),d=c&&c[1]?c[1].toLowerCase():void 0,u=new TextDecoder(d);return l.arrayBuffer().then(h=>u.decode(h))}}}).then(l=>{lP.add(e,l);let c=Aa[e];delete Aa[e];for(let d=0,u=c.length;d<u;d++){let h=c[d];h.onLoad&&h.onLoad(l)}}).catch(l=>{let c=Aa[e];if(c===void 0)throw this.manager.itemError(e),l;delete Aa[e];for(let d=0,u=c.length;d<u;d++){let h=c[d];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},Bm=class extends Di{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Lt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},W9=class extends Bm{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Di.DefaultUp),this.updateMatrix(),this.groundColor=new Lt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},cP=new at,uP=new N,dP=new N,H2=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new de(512,512),this.map=null,this.mapPass=null,this.matrix=new at,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new I2,this._frameExtents=new de(1,1),this._viewportCount=1,this._viewports=[new Qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;uP.setFromMatrixPosition(e.matrixWorld),t.position.copy(uP),dP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(dP),t.updateMatrixWorld(),cP.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cP),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},q9=class extends H2{constructor(){super(new Qr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=im*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(i!==t.fov||r!==t.aspect||n!==t.far)&&(t.fov=i,t.aspect=r,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},X9=class extends Bm{constructor(e,t,i=0,r=Math.PI/3,n=0,s=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Di.DefaultUp),this.updateMatrix(),this.target=new Di,this.distance=i,this.angle=r,this.penumbra=n,this.decay=s,this.shadow=new q9}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},hP=new at,Cf=new N,Dw=new N,Y9=class extends H2{constructor(){super(new Qr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new de(4,2),this._viewportCount=6,this._viewports=[new Qt(2,1,1,1),new Qt(0,1,1,1),new Qt(3,1,1,1),new Qt(1,1,1,1),new Qt(3,0,1,1),new Qt(1,0,1,1)],this._cubeDirections=[new N(1,0,0),new N(-1,0,0),new N(0,0,1),new N(0,0,-1),new N(0,1,0),new N(0,-1,0)],this._cubeUps=[new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,0,1),new N(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,n=e.distance||i.far;n!==i.far&&(i.far=n,i.updateProjectionMatrix()),Cf.setFromMatrixPosition(e.matrixWorld),i.position.copy(Cf),Dw.copy(i.position),Dw.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Dw),i.updateMatrixWorld(),r.makeTranslation(-Cf.x,-Cf.y,-Cf.z),hP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hP)}},Q9=class extends Bm{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Y9}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},K9=class extends H2{constructor(){super(new Q0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Z9=class extends Bm{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Di.DefaultUp),this.updateMatrix(),this.target=new Di,this.shadow=new K9}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},$9=class extends It{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){let e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},CN=class extends j2{constructor(e){super(e)}load(e,t,i,r){let n=this,s=new JS(n.manager);s.setPath(n.path),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(o){try{t(n.parse(JSON.parse(o)))}catch(a){r?r(a):console.error(a),n.manager.itemError(e)}},i,r)}parse(e){let t={},i={};function r(u,h){if(t[h]!==void 0)return t[h];let f=u.interleavedBuffers[h],m=n(u,f.buffer),v=Pg(f.type,m),g=new d9(v,f.stride);return g.uuid=f.uuid,t[h]=g,g}function n(u,h){if(i[h]!==void 0)return i[h];let f=u.arrayBuffers[h],m=new Uint32Array(f).buffer;return i[h]=m,m}let s=e.isInstancedBufferGeometry?new $9:new It,o=e.data.index;if(o!==void 0){let u=Pg(o.type,o.array);s.setIndex(new Gt(u,1))}let a=e.data.attributes;for(let u in a){let h=a[u],f;if(h.isInterleavedBufferAttribute){let m=r(e.data,h.data);f=new KS(m,h.itemSize,h.offset,h.normalized)}else{let m=Pg(h.type,h.array),v=h.isInstancedBufferAttribute?h9:Gt;f=new v(m,h.itemSize,h.normalized)}h.name!==void 0&&(f.name=h.name),h.usage!==void 0&&f.setUsage(h.usage),h.updateRange!==void 0&&(f.updateRange.offset=h.updateRange.offset,f.updateRange.count=h.updateRange.count),s.setAttribute(u,f)}let l=e.data.morphAttributes;if(l)for(let u in l){let h=l[u],f=[];for(let m=0,v=h.length;m<v;m++){let g=h[m],p;if(g.isInterleavedBufferAttribute){let x=r(e.data,g.data);p=new KS(x,g.itemSize,g.offset,g.normalized)}else{let x=Pg(g.type,g.array);p=new Gt(x,g.itemSize,g.normalized)}g.name!==void 0&&(p.name=g.name),f.push(p)}s.morphAttributes[u]=f}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let c=e.data.groups||e.data.drawcalls||e.data.offsets;if(c!==void 0)for(let u=0,h=c.length;u!==h;++u){let f=c[u];s.addGroup(f.start,f.count,f.materialIndex)}let d=e.data.boundingSphere;if(d!==void 0){let u=new N;d.center!==void 0&&u.fromArray(d.center),s.boundingSphere=new ks(u,d.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},J9=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=fP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=fP();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function fP(){return(typeof performance>"u"?Date:performance).now()}var TN="\\[\\]\\.:\\/",G2="[^"+TN+"]",eq="[^"+TN.replace("\\.","")+"]";/((?:WC+[\/:])*)/.source.replace("WC",G2);/(WCOD+)?/.source.replace("WCOD",eq);/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",G2);/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",G2);var gt=class{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new gt(this.value.clone===void 0?this.value:this.value.clone())}},MN=class{constructor(e,t,i=0,r=1/0){this.ray=new Bh(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new O2,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return e_(e,this,i,t),i.sort(pP),i}intersectObjects(e,t=!0,i=[]){for(let r=0,n=e.length;r<n;r++)e_(e[r],this,i,t);return i.sort(pP),i}};function pP(e,t){return e.distance-t.distance}function e_(e,t,i,r){if(e.layers.test(t.layers)&&e.raycast(t,i),r===!0){let n=e.children;for(let s=0,o=n.length;s<o;s++)e_(n[s],t,i,!0)}}var mP=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(xr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},gP=new de,tq=class{constructor(e=new de(1/0,1/0),t=new de(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=gP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return gP.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},vP=new N,ev=new N,Os=class{constructor(e=new N,t=new N){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){vP.subVectors(e,this.start),ev.subVectors(this.end,this.start);let i=ev.dot(ev),r=ev.dot(vP)/i;return t&&(r=xr(r,0,1)),r}closestPointToPoint(e,t,i){let r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},yP=new N,iq=class extends Di{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;let i=new It,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,a=32;s<a;s++,o++){let l=s/a*Math.PI*2,c=o/a*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}i.setAttribute("position",new ut(r,3));let n=new bc({fog:!1,toneMapped:!1});this.cone=new Nm(i,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),yP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(yP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},rq=class extends $n{constructor(e,t,i){let r=new U2(t,4,2),n=new Rm({wireframe:!0,fog:!1,toneMapped:!1});super(r,n),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},xP=new N,tv=new N,wP=new N,nq=class extends Di{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let r=new It;r.setAttribute("position",new ut([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new bc({fog:!1,toneMapped:!1});this.lightPlane=new K0(r,n),this.add(this.lightPlane),r=new It,r.setAttribute("position",new ut([0,0,0,0,0,1],3)),this.targetLine=new K0(r,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){xP.setFromMatrixPosition(this.light.matrixWorld),tv.setFromMatrixPosition(this.light.target.matrixWorld),wP.subVectors(tv,xP),this.lightPlane.lookAt(tv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(tv),this.targetLine.scale.z=wP.length()}},iv=new N,qi=new zh,J0=class extends Nm{constructor(e){let t=new It,i=new bc({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],n=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(f,m){a(f),a(m)}function a(f){r.push(0,0,0),n.push(0,0,0),s[f]===void 0&&(s[f]=[]),s[f].push(r.length/3-1)}t.setAttribute("position",new ut(r,3)),t.setAttribute("color",new ut(n,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new Lt(16755200),c=new Lt(16711680),d=new Lt(43775),u=new Lt(16777215),h=new Lt(3355443);this.setColors(l,c,d,u,h)}setColors(e,t,i,r,n){let s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,i.r,i.g,i.b),s.setXYZ(33,i.r,i.g,i.b),s.setXYZ(34,i.r,i.g,i.b),s.setXYZ(35,i.r,i.g,i.b),s.setXYZ(36,i.r,i.g,i.b),s.setXYZ(37,i.r,i.g,i.b),s.setXYZ(38,r.r,r.g,r.b),s.setXYZ(39,r.r,r.g,r.b),s.setXYZ(40,n.r,n.g,n.b),s.setXYZ(41,n.r,n.g,n.b),s.setXYZ(42,n.r,n.g,n.b),s.setXYZ(43,n.r,n.g,n.b),s.setXYZ(44,n.r,n.g,n.b),s.setXYZ(45,n.r,n.g,n.b),s.setXYZ(46,n.r,n.g,n.b),s.setXYZ(47,n.r,n.g,n.b),s.setXYZ(48,n.r,n.g,n.b),s.setXYZ(49,n.r,n.g,n.b),s.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,i=1,r=1;qi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),rr("c",t,e,qi,0,0,-1),rr("t",t,e,qi,0,0,1),rr("n1",t,e,qi,-i,-r,-1),rr("n2",t,e,qi,i,-r,-1),rr("n3",t,e,qi,-i,r,-1),rr("n4",t,e,qi,i,r,-1),rr("f1",t,e,qi,-i,-r,1),rr("f2",t,e,qi,i,-r,1),rr("f3",t,e,qi,-i,r,1),rr("f4",t,e,qi,i,r,1),rr("u1",t,e,qi,i*.7,r*1.1,-1),rr("u2",t,e,qi,-i*.7,r*1.1,-1),rr("u3",t,e,qi,0,r*2,-1),rr("cf1",t,e,qi,-i,0,1),rr("cf2",t,e,qi,i,0,1),rr("cf3",t,e,qi,0,-r,1),rr("cf4",t,e,qi,0,r,1),rr("cn1",t,e,qi,-i,0,-1),rr("cn2",t,e,qi,i,0,-1),rr("cn3",t,e,qi,0,-r,-1),rr("cn4",t,e,qi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function rr(e,t,i,r,n,s,o){iv.set(n,s,o).unproject(r);let a=t[e];if(a!==void 0){let l=i.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],iv.x,iv.y,iv.z)}}var ey=class extends Nm{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new It;n.setIndex(new Gt(i,1)),n.setAttribute("position",new ut(r,3)),super(n,new bc({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}},sq=class extends Nm{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new It;r.setAttribute("position",new ut(t,3)),r.setAttribute("color",new ut(i,3));let n=new bc({vertexColors:!0,toneMapped:!1});super(r,n),this.type="AxesHelper"}setColors(e,t,i){let r=new Lt,n=this.geometry.attributes.color.array;return r.set(e),r.toArray(n,0),r.toArray(n,3),r.set(t),r.toArray(n,6),r.toArray(n,9),r.set(i),r.toArray(n,12),r.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}};oq();function oq(){let e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),r=new Uint32Array(512),n=new Uint32Array(512);for(let l=0;l<256;++l){let c=l-127;c<-27?(r[l]=0,r[l|256]=32768,n[l]=24,n[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,n[l]=-c-1,n[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,n[l]=13,n[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,n[l]=24,n[l|256]=24):(r[l]=31744,r[l|256]=64512,n[l]=13,n[l|256]=13)}let s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(c&8388608);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:t,uint32View:i,baseTable:r,shiftTable:n,mantissaTable:s,exponentTable:o,offsetTable:a}}var aq=class extends lr{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Dm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Dm);var Tf=".",V2=Symbol("target"),PN=Symbol("unsubscribe");function t_(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function lq(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var Uo=Array.isArray;function W2(e){return typeof e=="symbol"}var cq={after:(e,t)=>Uo(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>Uo(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=Tf),W2(t)?e+t.toString():e+t):e,initial:e=>{if(Uo(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(Tf);return t===-1?"":e.slice(0,t)},last:e=>{if(Uo(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(Tf);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(Uo(e))for(let i of e)t(i);else if(e!==""){let i=0,r=e.indexOf(Tf);if(r===-1)t(e);else for(;i<e.length;)r===-1&&(r=e.length),t(e.slice(i,r)),i=r+1,r=e.indexOf(Tf,i)}},get(e,t){return this.walk(t,i=>{e&&(e=e[i])}),e}},ws=cq;function uq(e){return typeof e=="object"&&typeof e.next=="function"}function dq(e,t,i,r,n){let s=e.next;if(t.name==="entries")e.next=function(){let o=s.call(this);return o.done===!1&&(o.value[0]=n(o.value[0],t,o.value[0],r),o.value[1]=n(o.value[1],t,o.value[0],r)),o};else if(t.name==="values"){let o=i[V2].keys();e.next=function(){let a=s.call(this);return a.done===!1&&(a.value=n(a.value,t,o.next().value,r)),a}}else e.next=function(){let o=s.call(this);return o.done===!1&&(o.value=n(o.value,t,o.value,r)),o};return e}function bP(e,t,i){return e.isUnsubscribed||t.ignoreSymbols&&W2(i)||t.ignoreUnderscores&&i.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(i)}var hq=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),i=t.get(e);return i===void 0&&(i={},t.set(e,i)),i}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let i=this._getProperties(e),r=i[t];return r===void 0&&(r=Reflect.getOwnPropertyDescriptor(e,t),i[t]=r),r}getProxy(e,t,i,r){if(this.isUnsubscribed)return e;let n=e[r],s=n||e;this._pathCache.set(s,t);let o=this._proxyCache.get(s);return o===void 0&&(o=n===void 0?new Proxy(e,i):e,this._proxyCache.set(s,o)),o}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,ws.get(t,this.getPath(e)))}defineProperty(e,t,i){return Reflect.defineProperty(e,t,i)?(this.isUnsubscribed||(this._getProperties(e)[t]=i),!0):!1}setProperty(e,t,i,r,n){if(!this._equals(n,i)||!(t in e)){let s=this._getOwnPropertyDescriptor(e,t);return s!==void 0&&"set"in s?Reflect.set(e,t,i,r):Reflect.set(e,t,i)}return!0}deleteProperty(e,t,i){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let r=this._getDescriptorCache().get(e);r&&(delete r[t],this._pathCache.delete(i))}return!0}return!1}isSameDescriptor(e,t,i){let r=this._getOwnPropertyDescriptor(t,i);return e!==void 0&&r!==void 0&&Object.is(e.value,r.value)&&(e.writable||!1)===(r.writable||!1)&&(e.enumerable||!1)===(r.enumerable||!1)&&(e.configurable||!1)===(r.configurable||!1)&&e.get===r.get&&e.set===r.set}isGetInvariant(e,t){let i=this._getOwnPropertyDescriptor(e,t);return i!==void 0&&i.configurable!==!0&&i.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function i_(e){return toString.call(e)==="[object Object]"}function rv(){return!0}function dd(e,t){return e.length!==t.length||e.some((i,r)=>t[r]!==i)}var DN=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),fq=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),ON={push:rv,pop:rv,shift:rv,unshift:rv,copyWithin:dd,reverse:dd,sort:dd,splice:dd,flat:dd,fill:dd},pq=new Set([...DN,...fq,...Object.keys(ON)]);function nv(e,t){if(e.size!==t.size)return!0;for(let i of e)if(!t.has(i))return!0;return!1}var LN=["keys","values","entries"],IN=new Set(["has","toString"]),RN={add:nv,clear:nv,delete:nv,forEach:nv},mq=new Set([...IN,...Object.keys(RN),...LN]);function sv(e,t){if(e.size!==t.size)return!0;let i;for(let[r,n]of e)if(i=t.get(r),i!==n||i===void 0&&!t.has(r))return!0;return!1}var gq=new Set([...IN,"get"]),NN={set:sv,clear:sv,delete:sv,forEach:sv},vq=new Set([...gq,...Object.keys(NN),...LN]),mc=class{constructor(e,t,i,r){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=r,this._changes=r?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return DN.has(e)}_shallowClone(e){let t=e;if(i_(e))t={...e};else if(Uo(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(i=>this._shallowClone(i)));else if(e instanceof Map){t=new Map;for(let[i,r]of e.entries())t.set(i,this._shallowClone(r))}return this._clonedCache.add(t),t}preferredThisArg(e,t,i,r){return e?(Uo(r)?this._onIsChanged=ON[t]:r instanceof Set?this._onIsChanged=RN[t]:r instanceof Map&&(this._onIsChanged=NN[t]),r):i}update(e,t,i){let r=ws.after(e,this._path);if(t!=="length"){let n=this.clone;ws.walk(r,s=>{n&&n[s]&&(this._clonedCache.has(n[s])||(n[s]=this._shallowClone(n[s])),n=n[s])}),this._hasOnValidate&&this._changes.push({path:r,property:t,previous:i}),n&&n[t]&&(n[t]=i)}this._isChanged=!0}undo(e){let t;for(let i=this._changes.length-1;i!==-1;i--)t=this._changes[i],ws.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},SP=class extends mc{static isHandledMethod(e){return pq.has(e)}},yq=class extends mc{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},_P=class extends mc{static isHandledMethod(e){return mq.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},EP=class extends mc{static isHandledMethod(e){return vq.has(e)}undo(e){for(let[t,i]of this.clone.entries())e.set(t,i);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},xq=class extends mc{constructor(e,t,i,r){super(void 0,t,i,r),this._arg1=i[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},wq=class extends mc{constructor(e,t,i,r){super(void 0,t,i,r),this._weakKey=i[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},Sd=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return i_(e)||Uo(e)||t_(e)}static isHandledMethod(e,t){return i_(e)?mc.isHandledMethod(t):Uo(e)?SP.isHandledMethod(t):e instanceof Set?_P.isHandledMethod(t):e instanceof Map?EP.isHandledMethod(t):t_(e)}get isCloning(){return this._stack.length>0}start(e,t,i){let r=mc;Uo(e)?r=SP:e instanceof Date?r=yq:e instanceof Set?r=_P:e instanceof Map?r=EP:e instanceof WeakSet?r=xq:e instanceof WeakMap&&(r=wq),this._stack.push(new r(e,t,i,this._hasOnValidate))}update(e,t,i){this._stack[this._stack.length-1].update(e,t,i)}preferredThisArg(e,t,i){let{name:r}=e,n=Sd.isHandledMethod(i,r);return this._stack[this._stack.length-1].preferredThisArg(n,r,t,i)}isChanged(e,t,i){return this._stack[this._stack.length-1].isChanged(e,t,i)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},bq={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},q2=(e,t,i={})=>{i={...bq,...i};let r=Symbol("ProxyTarget"),{equals:n,isShallow:s,ignoreDetached:o,details:a}=i,l=new hq(n),c=typeof i.onValidate=="function",d=new Sd(c),u=(x,b,S,E,y)=>!c||d.isCloning||i.onValidate(ws.concat(l.getPath(x),b),S,E,y)===!0,h=(x,b,S,E)=>{!bP(l,i,b)&&!(o&&l.isDetached(x,e))&&f(l.getPath(x),b,S,E)},f=(x,b,S,E,y)=>{d.isCloning?d.update(x,b,E):t(ws.concat(x,b),S,E,y)},m=x=>x&&(x[r]||x),v=(x,b,S,E)=>lq(x)||S==="constructor"||s&&!Sd.isHandledMethod(b,S)||bP(l,i,S)||l.isGetInvariant(b,S)||o&&l.isDetached(b,e)?x:(E===void 0&&(E=l.getPath(b)),l.getProxy(x,ws.concat(E,S),g,r)),g={get(x,b,S){if(W2(b)){if(b===r||b===V2)return x;if(b===PN&&!l.isUnsubscribed&&l.getPath(x).length===0)return l.unsubscribe(),x}let E=t_(x)?Reflect.get(x,b):Reflect.get(x,b,S);return v(E,x,b)},set(x,b,S,E){S=m(S);let y=x[r]||x,C=y[b];if(n(C,S)&&b in x)return!0;let A=u(x,b,S,C);return A&&l.setProperty(y,b,S,E,C)?(h(x,b,x[b],C),!0):!A},defineProperty(x,b,S){if(!l.isSameDescriptor(S,x,b)){let E=x[b];u(x,b,S.value,E)&&l.defineProperty(x,b,S,E)&&h(x,b,S.value,E)}return!0},deleteProperty(x,b){if(!Reflect.has(x,b))return!0;let S=Reflect.get(x,b),E=u(x,b,void 0,S);return E&&l.deleteProperty(x,b,S)?(h(x,b,void 0,S),!0):!E},apply(x,b,S){let E=b[r]||b;if(l.isUnsubscribed)return Reflect.apply(x,E,S);if((a===!1||a!==!0&&!a.includes(x.name))&&Sd.isHandledType(E)){let y=ws.initial(l.getPath(x)),C=Sd.isHandledMethod(E,x.name);d.start(E,y,S);let A=Reflect.apply(x,d.preferredThisArg(x,b,E),C?S.map(R=>m(R)):S),D=d.isChanged(E,n),I=d.stop();if(Sd.isHandledType(A)&&C&&(b instanceof Map&&x.name==="get"&&(y=ws.concat(y,S[0])),A=l.getProxy(A,y,g)),D){let R={name:x.name,args:S,result:A},B=d.isCloning?ws.initial(y):y,G=d.isCloning?ws.last(y):"";u(ws.get(e,B),G,E,I,R)?f(B,G,E,I,R):d.undo(E)}return(b instanceof Map||b instanceof Set)&&uq(A)?dq(A,x,b,y,v):A}return Reflect.apply(x,b,S)}},p=l.getProxy(e,i.pathAsArray?[]:"",g);return t=t.bind(p),c&&(i.onValidate=i.onValidate.bind(p)),p};q2.target=e=>e&&e[V2]||e;q2.unsubscribe=e=>e[PN]||e;var AP=q2,Sq=typeof global=="object"&&global&&global.Object===Object&&global,BN=Sq,_q=typeof self=="object"&&self&&self.Object===Object&&self,Eq=BN||_q||Function("return this")(),yo=Eq,Aq=yo.Symbol,zs=Aq,kN=Object.prototype,Cq=kN.hasOwnProperty,Tq=kN.toString,Mf=zs?zs.toStringTag:void 0;function Mq(e){var t=Cq.call(e,Mf),i=e[Mf];try{e[Mf]=void 0;var r=!0}catch{}var n=Tq.call(e);return r&&(t?e[Mf]=i:delete e[Mf]),n}var Pq=Mq,Dq=Object.prototype,Oq=Dq.toString;function Lq(e){return Oq.call(e)}var Iq=Lq,Rq="[object Null]",Nq="[object Undefined]",CP=zs?zs.toStringTag:void 0;function Bq(e){return e==null?e===void 0?Nq:Rq:CP&&CP in Object(e)?Pq(e):Iq(e)}var Iu=Bq;function kq(e){return e!=null&&typeof e=="object"}var Xa=kq,zq="[object Symbol]";function Fq(e){return typeof e=="symbol"||Xa(e)&&Iu(e)==zq}var x1=Fq;function Uq(e,t){for(var i=-1,r=e==null?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n}var zN=Uq,jq=Array.isArray,ra=jq,Hq=1/0,TP=zs?zs.prototype:void 0,MP=TP?TP.toString:void 0;function FN(e){if(typeof e=="string")return e;if(ra(e))return zN(e,FN)+"";if(x1(e))return MP?MP.call(e):"";var t=e+"";return t=="0"&&1/e==-Hq?"-0":t}var Gq=FN,Vq=/\s/;function Wq(e){for(var t=e.length;t--&&Vq.test(e.charAt(t)););return t}var qq=Wq,Xq=/^\s+/;function Yq(e){return e&&e.slice(0,qq(e)+1).replace(Xq,"")}var Qq=Yq;function Kq(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var na=Kq,PP=0/0,Zq=/^[-+]0x[0-9a-f]+$/i,$q=/^0b[01]+$/i,Jq=/^0o[0-7]+$/i,eX=parseInt;function tX(e){if(typeof e=="number")return e;if(x1(e))return PP;if(na(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=na(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Qq(e);var i=$q.test(e);return i||Jq.test(e)?eX(e.slice(2),i?2:8):Zq.test(e)?PP:+e}var DP=tX;function iX(e){return e}var rX=iX,nX="[object AsyncFunction]",sX="[object Function]",oX="[object GeneratorFunction]",aX="[object Proxy]";function lX(e){if(!na(e))return!1;var t=Iu(e);return t==sX||t==oX||t==nX||t==aX}var UN=lX,cX=yo["__core-js_shared__"],Ow=cX,OP=function(){var e=/[^.]+$/.exec(Ow&&Ow.keys&&Ow.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function uX(e){return!!OP&&OP in e}var dX=uX,hX=Function.prototype,fX=hX.toString;function pX(e){if(e!=null){try{return fX.call(e)}catch{}try{return e+""}catch{}}return""}var Ru=pX,mX=/[\\^$.*+?()[\]{}|]/g,gX=/^\[object .+?Constructor\]$/,vX=Function.prototype,yX=Object.prototype,xX=vX.toString,wX=yX.hasOwnProperty,bX=RegExp("^"+xX.call(wX).replace(mX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function SX(e){if(!na(e)||dX(e))return!1;var t=UN(e)?bX:gX;return t.test(Ru(e))}var _X=SX;function EX(e,t){return e==null?void 0:e[t]}var AX=EX;function CX(e,t){var i=AX(e,t);return _X(i)?i:void 0}var Nu=CX,TX=Nu(yo,"WeakMap"),r_=TX,LP=Object.create,MX=function(){function e(){}return function(t){if(!na(t))return{};if(LP)return LP(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),PX=MX;function DX(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var OX=DX;function LX(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var IX=LX,RX=800,NX=16,BX=Date.now;function kX(e){var t=0,i=0;return function(){var r=BX(),n=NX-(r-i);if(i=r,n>0){if(++t>=RX)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var zX=kX;function FX(e){return function(){return e}}var UX=FX,jX=function(){try{var e=Nu(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ty=jX,HX=ty?function(e,t){return ty(e,"toString",{configurable:!0,enumerable:!1,value:UX(t),writable:!0})}:rX,GX=HX,VX=zX(GX),WX=VX;function qX(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}var XX=qX,YX=9007199254740991,QX=/^(?:0|[1-9]\d*)$/;function KX(e,t){var i=typeof e;return t=t??YX,!!t&&(i=="number"||i!="symbol"&&QX.test(e))&&e>-1&&e%1==0&&e<t}var X2=KX;function ZX(e,t,i){t=="__proto__"&&ty?ty(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}var jN=ZX;function $X(e,t){return e===t||e!==e&&t!==t}var Y2=$X,JX=Object.prototype,eY=JX.hasOwnProperty;function tY(e,t,i){var r=e[t];(!(eY.call(e,t)&&Y2(r,i))||i===void 0&&!(t in e))&&jN(e,t,i)}var Q2=tY;function iY(e,t,i,r){var n=!i;i||(i={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=r?r(i[a],e[a],a,i,e):void 0;l===void 0&&(l=e[a]),n?jN(i,a,l):Q2(i,a,l)}return i}var km=iY,IP=Math.max;function rY(e,t,i){return t=IP(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,s=IP(r.length-t,0),o=Array(s);++n<s;)o[n]=r[t+n];n=-1;for(var a=Array(t+1);++n<t;)a[n]=r[n];return a[t]=i(o),OX(e,this,a)}}var nY=rY,sY=9007199254740991;function oY(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=sY}var K2=oY;function aY(e){return e!=null&&K2(e.length)&&!UN(e)}var HN=aY,lY=Object.prototype;function cY(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||lY;return e===i}var Z2=cY;function uY(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var dY=uY,hY="[object Arguments]";function fY(e){return Xa(e)&&Iu(e)==hY}var RP=fY,GN=Object.prototype,pY=GN.hasOwnProperty,mY=GN.propertyIsEnumerable,gY=RP(function(){return arguments}())?RP:function(e){return Xa(e)&&pY.call(e,"callee")&&!mY.call(e,"callee")},$2=gY;function vY(){return!1}var yY=vY,VN=typeof ts=="object"&&ts&&!ts.nodeType&&ts,NP=VN&&typeof is=="object"&&is&&!is.nodeType&&is,xY=NP&&NP.exports===VN,BP=xY?yo.Buffer:void 0,wY=BP?BP.isBuffer:void 0,bY=wY||yY,iy=bY,SY="[object Arguments]",_Y="[object Array]",EY="[object Boolean]",AY="[object Date]",CY="[object Error]",TY="[object Function]",MY="[object Map]",PY="[object Number]",DY="[object Object]",OY="[object RegExp]",LY="[object Set]",IY="[object String]",RY="[object WeakMap]",NY="[object ArrayBuffer]",BY="[object DataView]",kY="[object Float32Array]",zY="[object Float64Array]",FY="[object Int8Array]",UY="[object Int16Array]",jY="[object Int32Array]",HY="[object Uint8Array]",GY="[object Uint8ClampedArray]",VY="[object Uint16Array]",WY="[object Uint32Array]",Ri={};Ri[kY]=Ri[zY]=Ri[FY]=Ri[UY]=Ri[jY]=Ri[HY]=Ri[GY]=Ri[VY]=Ri[WY]=!0;Ri[SY]=Ri[_Y]=Ri[NY]=Ri[EY]=Ri[BY]=Ri[AY]=Ri[CY]=Ri[TY]=Ri[MY]=Ri[PY]=Ri[DY]=Ri[OY]=Ri[LY]=Ri[IY]=Ri[RY]=!1;function qY(e){return Xa(e)&&K2(e.length)&&!!Ri[Iu(e)]}var XY=qY;function YY(e){return function(t){return e(t)}}var J2=YY,WN=typeof ts=="object"&&ts&&!ts.nodeType&&ts,Cp=WN&&typeof is=="object"&&is&&!is.nodeType&&is,QY=Cp&&Cp.exports===WN,Lw=QY&&BN.process,KY=function(){try{var e=Cp&&Cp.require&&Cp.require("util").types;return e||Lw&&Lw.binding&&Lw.binding("util")}catch{}}(),_h=KY,kP=_h&&_h.isTypedArray,ZY=kP?J2(kP):XY,qN=ZY,$Y=Object.prototype,JY=$Y.hasOwnProperty;function eQ(e,t){var i=ra(e),r=!i&&$2(e),n=!i&&!r&&iy(e),s=!i&&!r&&!n&&qN(e),o=i||r||n||s,a=o?dY(e.length,String):[],l=a.length;for(var c in e)(t||JY.call(e,c))&&!(o&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||X2(c,l)))&&a.push(c);return a}var XN=eQ;function tQ(e,t){return function(i){return e(t(i))}}var YN=tQ,iQ=YN(Object.keys,Object),rQ=iQ,nQ=Object.prototype,sQ=nQ.hasOwnProperty;function oQ(e){if(!Z2(e))return rQ(e);var t=[];for(var i in Object(e))sQ.call(e,i)&&i!="constructor"&&t.push(i);return t}var aQ=oQ;function lQ(e){return HN(e)?XN(e):aQ(e)}var eA=lQ;function cQ(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var uQ=cQ,dQ=Object.prototype,hQ=dQ.hasOwnProperty;function fQ(e){if(!na(e))return uQ(e);var t=Z2(e),i=[];for(var r in e)r=="constructor"&&(t||!hQ.call(e,r))||i.push(r);return i}var pQ=fQ;function mQ(e){return HN(e)?XN(e,!0):pQ(e)}var tA=mQ,gQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vQ=/^\w*$/;function yQ(e,t){if(ra(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||x1(e)?!0:vQ.test(e)||!gQ.test(e)||t!=null&&e in Object(t)}var xQ=yQ,wQ=Nu(Object,"create"),om=wQ;function bQ(){this.__data__=om?om(null):{},this.size=0}var SQ=bQ;function _Q(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var EQ=_Q,AQ="__lodash_hash_undefined__",CQ=Object.prototype,TQ=CQ.hasOwnProperty;function MQ(e){var t=this.__data__;if(om){var i=t[e];return i===AQ?void 0:i}return TQ.call(t,e)?t[e]:void 0}var PQ=MQ,DQ=Object.prototype,OQ=DQ.hasOwnProperty;function LQ(e){var t=this.__data__;return om?t[e]!==void 0:OQ.call(t,e)}var IQ=LQ,RQ="__lodash_hash_undefined__";function NQ(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=om&&t===void 0?RQ:t,this}var BQ=NQ;function Uh(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Uh.prototype.clear=SQ;Uh.prototype.delete=EQ;Uh.prototype.get=PQ;Uh.prototype.has=IQ;Uh.prototype.set=BQ;var zP=Uh;function kQ(){this.__data__=[],this.size=0}var zQ=kQ;function FQ(e,t){for(var i=e.length;i--;)if(Y2(e[i][0],t))return i;return-1}var w1=FQ,UQ=Array.prototype,jQ=UQ.splice;function HQ(e){var t=this.__data__,i=w1(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():jQ.call(t,i,1),--this.size,!0}var GQ=HQ;function VQ(e){var t=this.__data__,i=w1(t,e);return i<0?void 0:t[i][1]}var WQ=VQ;function qQ(e){return w1(this.__data__,e)>-1}var XQ=qQ;function YQ(e,t){var i=this.__data__,r=w1(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}var QQ=YQ;function jh(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}jh.prototype.clear=zQ;jh.prototype.delete=GQ;jh.prototype.get=WQ;jh.prototype.has=XQ;jh.prototype.set=QQ;var b1=jh,KQ=Nu(yo,"Map"),am=KQ;function ZQ(){this.size=0,this.__data__={hash:new zP,map:new(am||b1),string:new zP}}var $Q=ZQ;function JQ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var eK=JQ;function tK(e,t){var i=e.__data__;return eK(t)?i[typeof t=="string"?"string":"hash"]:i.map}var S1=tK;function iK(e){var t=S1(this,e).delete(e);return this.size-=t?1:0,t}var rK=iK;function nK(e){return S1(this,e).get(e)}var sK=nK;function oK(e){return S1(this,e).has(e)}var aK=oK;function lK(e,t){var i=S1(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}var cK=lK;function Hh(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Hh.prototype.clear=$Q;Hh.prototype.delete=rK;Hh.prototype.get=sK;Hh.prototype.has=aK;Hh.prototype.set=cK;var _1=Hh,uK="Expected a function";function iA(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(uK);var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var o=e.apply(this,r);return i.cache=s.set(n,o)||s,o};return i.cache=new(iA.Cache||_1),i}iA.Cache=_1;var dK=iA,hK=500;function fK(e){var t=dK(e,function(r){return i.size===hK&&i.clear(),r}),i=t.cache;return t}var pK=fK,mK=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gK=/\\(\\)?/g,vK=pK(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(mK,function(i,r,n,s){t.push(n?s.replace(gK,"$1"):r||i)}),t}),yK=vK;function xK(e){return e==null?"":Gq(e)}var wK=xK;function bK(e,t){return ra(e)?e:xQ(e,t)?[e]:yK(wK(e))}var Gh=bK,SK=1/0;function _K(e){if(typeof e=="string"||x1(e))return e;var t=e+"";return t=="0"&&1/e==-SK?"-0":t}var E1=_K;function EK(e,t){t=Gh(t,e);for(var i=0,r=t.length;e!=null&&i<r;)e=e[E1(t[i++])];return i&&i==r?e:void 0}var QN=EK;function AK(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}var rA=AK,FP=zs?zs.isConcatSpreadable:void 0;function CK(e){return ra(e)||$2(e)||!!(FP&&e&&e[FP])}var TK=CK;function KN(e,t,i,r,n){var s=-1,o=e.length;for(i||(i=TK),n||(n=[]);++s<o;){var a=e[s];t>0&&i(a)?t>1?KN(a,t-1,i,r,n):rA(n,a):r||(n[n.length]=a)}return n}var MK=KN;function PK(e){var t=e==null?0:e.length;return t?MK(e,1):[]}var DK=PK;function OK(e){return WX(nY(e,void 0,DK),e+"")}var ZN=OK,LK=YN(Object.getPrototypeOf,Object),nA=LK,IK="[object Object]",RK=Function.prototype,NK=Object.prototype,$N=RK.toString,BK=NK.hasOwnProperty,kK=$N.call(Object);function zK(e){if(!Xa(e)||Iu(e)!=IK)return!1;var t=nA(e);if(t===null)return!0;var i=BK.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&$N.call(i)==kK}var FK=zK;function UK(e,t,i){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t),i=i>n?n:i,i<0&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0;for(var s=Array(n);++r<n;)s[r]=e[r+t];return s}var jK=UK;function HK(){this.__data__=new b1,this.size=0}var GK=HK;function VK(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}var WK=VK;function qK(e){return this.__data__.get(e)}var XK=qK;function YK(e){return this.__data__.has(e)}var QK=YK,KK=200;function ZK(e,t){var i=this.__data__;if(i instanceof b1){var r=i.__data__;if(!am||r.length<KK-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new _1(r)}return i.set(e,t),this.size=i.size,this}var $K=ZK;function Vh(e){var t=this.__data__=new b1(e);this.size=t.size}Vh.prototype.clear=GK;Vh.prototype.delete=WK;Vh.prototype.get=XK;Vh.prototype.has=QK;Vh.prototype.set=$K;var o0=Vh;function JK(e,t){return e&&km(t,eA(t),e)}var eZ=JK;function tZ(e,t){return e&&km(t,tA(t),e)}var iZ=tZ,JN=typeof ts=="object"&&ts&&!ts.nodeType&&ts,UP=JN&&typeof is=="object"&&is&&!is.nodeType&&is,rZ=UP&&UP.exports===JN,jP=rZ?yo.Buffer:void 0,HP=jP?jP.allocUnsafe:void 0;function nZ(e,t){if(t)return e.slice();var i=e.length,r=HP?HP(i):new e.constructor(i);return e.copy(r),r}var sZ=nZ;function oZ(e,t){for(var i=-1,r=e==null?0:e.length,n=0,s=[];++i<r;){var o=e[i];t(o,i,e)&&(s[n++]=o)}return s}var aZ=oZ;function lZ(){return[]}var eB=lZ,cZ=Object.prototype,uZ=cZ.propertyIsEnumerable,GP=Object.getOwnPropertySymbols,dZ=GP?function(e){return e==null?[]:(e=Object(e),aZ(GP(e),function(t){return uZ.call(e,t)}))}:eB,sA=dZ;function hZ(e,t){return km(e,sA(e),t)}var fZ=hZ,pZ=Object.getOwnPropertySymbols,mZ=pZ?function(e){for(var t=[];e;)rA(t,sA(e)),e=nA(e);return t}:eB,tB=mZ;function gZ(e,t){return km(e,tB(e),t)}var vZ=gZ;function yZ(e,t,i){var r=t(e);return ra(e)?r:rA(r,i(e))}var iB=yZ;function xZ(e){return iB(e,eA,sA)}var n_=xZ;function wZ(e){return iB(e,tA,tB)}var rB=wZ,bZ=Nu(yo,"DataView"),s_=bZ,SZ=Nu(yo,"Promise"),o_=SZ,_Z=Nu(yo,"Set"),a_=_Z,VP="[object Map]",EZ="[object Object]",WP="[object Promise]",qP="[object Set]",XP="[object WeakMap]",YP="[object DataView]",AZ=Ru(s_),CZ=Ru(am),TZ=Ru(o_),MZ=Ru(a_),PZ=Ru(r_),Vc=Iu;(s_&&Vc(new s_(new ArrayBuffer(1)))!=YP||am&&Vc(new am)!=VP||o_&&Vc(o_.resolve())!=WP||a_&&Vc(new a_)!=qP||r_&&Vc(new r_)!=XP)&&(Vc=function(e){var t=Iu(e),i=t==EZ?e.constructor:void 0,r=i?Ru(i):"";if(r)switch(r){case AZ:return YP;case CZ:return VP;case TZ:return WP;case MZ:return qP;case PZ:return XP}return t});var lm=Vc,DZ=Object.prototype,OZ=DZ.hasOwnProperty;function LZ(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&OZ.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var IZ=LZ,RZ=yo.Uint8Array,ry=RZ;function NZ(e){var t=new e.constructor(e.byteLength);return new ry(t).set(new ry(e)),t}var oA=NZ;function BZ(e,t){var i=t?oA(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var kZ=BZ,zZ=/\w*$/;function FZ(e){var t=new e.constructor(e.source,zZ.exec(e));return t.lastIndex=e.lastIndex,t}var UZ=FZ,QP=zs?zs.prototype:void 0,KP=QP?QP.valueOf:void 0;function jZ(e){return KP?Object(KP.call(e)):{}}var HZ=jZ;function GZ(e,t){var i=t?oA(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var VZ=GZ,WZ="[object Boolean]",qZ="[object Date]",XZ="[object Map]",YZ="[object Number]",QZ="[object RegExp]",KZ="[object Set]",ZZ="[object String]",$Z="[object Symbol]",JZ="[object ArrayBuffer]",e$="[object DataView]",t$="[object Float32Array]",i$="[object Float64Array]",r$="[object Int8Array]",n$="[object Int16Array]",s$="[object Int32Array]",o$="[object Uint8Array]",a$="[object Uint8ClampedArray]",l$="[object Uint16Array]",c$="[object Uint32Array]";function u$(e,t,i){var r=e.constructor;switch(t){case JZ:return oA(e);case WZ:case qZ:return new r(+e);case e$:return kZ(e,i);case t$:case i$:case r$:case n$:case s$:case o$:case a$:case l$:case c$:return VZ(e,i);case XZ:return new r;case YZ:case ZZ:return new r(e);case QZ:return UZ(e);case KZ:return new r;case $Z:return HZ(e)}}var d$=u$;function h$(e){return typeof e.constructor=="function"&&!Z2(e)?PX(nA(e)):{}}var f$=h$,p$="[object Map]";function m$(e){return Xa(e)&&lm(e)==p$}var g$=m$,ZP=_h&&_h.isMap,v$=ZP?J2(ZP):g$,y$=v$,x$="[object Set]";function w$(e){return Xa(e)&&lm(e)==x$}var b$=w$,$P=_h&&_h.isSet,S$=$P?J2($P):b$,_$=S$,E$=1,A$=2,C$=4,nB="[object Arguments]",T$="[object Array]",M$="[object Boolean]",P$="[object Date]",D$="[object Error]",sB="[object Function]",O$="[object GeneratorFunction]",L$="[object Map]",I$="[object Number]",oB="[object Object]",R$="[object RegExp]",N$="[object Set]",B$="[object String]",k$="[object Symbol]",z$="[object WeakMap]",F$="[object ArrayBuffer]",U$="[object DataView]",j$="[object Float32Array]",H$="[object Float64Array]",G$="[object Int8Array]",V$="[object Int16Array]",W$="[object Int32Array]",q$="[object Uint8Array]",X$="[object Uint8ClampedArray]",Y$="[object Uint16Array]",Q$="[object Uint32Array]",Mi={};Mi[nB]=Mi[T$]=Mi[F$]=Mi[U$]=Mi[M$]=Mi[P$]=Mi[j$]=Mi[H$]=Mi[G$]=Mi[V$]=Mi[W$]=Mi[L$]=Mi[I$]=Mi[oB]=Mi[R$]=Mi[N$]=Mi[B$]=Mi[k$]=Mi[q$]=Mi[X$]=Mi[Y$]=Mi[Q$]=!0;Mi[D$]=Mi[sB]=Mi[z$]=!1;function a0(e,t,i,r,n,s){var o,a=t&E$,l=t&A$,c=t&C$;if(i&&(o=n?i(e,r,n,s):i(e)),o!==void 0)return o;if(!na(e))return e;var d=ra(e);if(d){if(o=IZ(e),!a)return IX(e,o)}else{var u=lm(e),h=u==sB||u==O$;if(iy(e))return sZ(e,a);if(u==oB||u==nB||h&&!n){if(o=l||h?{}:f$(e),!a)return l?vZ(e,iZ(o,e)):fZ(e,eZ(o,e))}else{if(!Mi[u])return n?e:{};o=d$(e,u,a)}}s||(s=new o0);var f=s.get(e);if(f)return f;s.set(e,o),_$(e)?e.forEach(function(g){o.add(a0(g,t,i,g,e,s))}):y$(e)&&e.forEach(function(g,p){o.set(p,a0(g,t,i,p,e,s))});var m=c?l?rB:n_:l?tA:eA,v=d?void 0:m(e);return XX(v||e,function(g,p){v&&(p=g,g=e[p]),Q2(o,p,a0(g,t,i,p,e,s))}),o}var aB=a0,K$=1,Z$=4;function $$(e){return aB(e,K$|Z$)}var aA=$$,J$="__lodash_hash_undefined__";function eJ(e){return this.__data__.set(e,J$),this}var tJ=eJ;function iJ(e){return this.__data__.has(e)}var rJ=iJ;function ny(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new _1;++t<i;)this.add(e[t])}ny.prototype.add=ny.prototype.push=tJ;ny.prototype.has=rJ;var nJ=ny;function sJ(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}var oJ=sJ;function aJ(e,t){return e.has(t)}var lJ=aJ,cJ=1,uJ=2;function dJ(e,t,i,r,n,s){var o=i&cJ,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(e),d=s.get(t);if(c&&d)return c==t&&d==e;var u=-1,h=!0,f=i&uJ?new nJ:void 0;for(s.set(e,t),s.set(t,e);++u<a;){var m=e[u],v=t[u];if(r)var g=o?r(v,m,u,t,e,s):r(m,v,u,e,t,s);if(g!==void 0){if(g)continue;h=!1;break}if(f){if(!oJ(t,function(p,x){if(!lJ(f,x)&&(m===p||n(m,p,i,r,s)))return f.push(x)})){h=!1;break}}else if(!(m===v||n(m,v,i,r,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var lB=dJ;function hJ(e){var t=-1,i=Array(e.size);return e.forEach(function(r,n){i[++t]=[n,r]}),i}var fJ=hJ;function pJ(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}var mJ=pJ,gJ=1,vJ=2,yJ="[object Boolean]",xJ="[object Date]",wJ="[object Error]",bJ="[object Map]",SJ="[object Number]",_J="[object RegExp]",EJ="[object Set]",AJ="[object String]",CJ="[object Symbol]",TJ="[object ArrayBuffer]",MJ="[object DataView]",JP=zs?zs.prototype:void 0,Iw=JP?JP.valueOf:void 0;function PJ(e,t,i,r,n,s,o){switch(i){case MJ:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case TJ:return!(e.byteLength!=t.byteLength||!s(new ry(e),new ry(t)));case yJ:case xJ:case SJ:return Y2(+e,+t);case wJ:return e.name==t.name&&e.message==t.message;case _J:case AJ:return e==t+"";case bJ:var a=fJ;case EJ:var l=r&gJ;if(a||(a=mJ),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=vJ,o.set(e,t);var d=lB(a(e),a(t),r,n,s,o);return o.delete(e),d;case CJ:if(Iw)return Iw.call(e)==Iw.call(t)}return!1}var DJ=PJ,OJ=1,LJ=Object.prototype,IJ=LJ.hasOwnProperty;function RJ(e,t,i,r,n,s){var o=i&OJ,a=n_(e),l=a.length,c=n_(t),d=c.length;if(l!=d&&!o)return!1;for(var u=l;u--;){var h=a[u];if(!(o?h in t:IJ.call(t,h)))return!1}var f=s.get(e),m=s.get(t);if(f&&m)return f==t&&m==e;var v=!0;s.set(e,t),s.set(t,e);for(var g=o;++u<l;){h=a[u];var p=e[h],x=t[h];if(r)var b=o?r(x,p,h,t,e,s):r(p,x,h,e,t,s);if(!(b===void 0?p===x||n(p,x,i,r,s):b)){v=!1;break}g||(g=h=="constructor")}if(v&&!g){var S=e.constructor,E=t.constructor;S!=E&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof E=="function"&&E instanceof E)&&(v=!1)}return s.delete(e),s.delete(t),v}var NJ=RJ,BJ=1,e3="[object Arguments]",t3="[object Array]",ov="[object Object]",kJ=Object.prototype,i3=kJ.hasOwnProperty;function zJ(e,t,i,r,n,s){var o=ra(e),a=ra(t),l=o?t3:lm(e),c=a?t3:lm(t);l=l==e3?ov:l,c=c==e3?ov:c;var d=l==ov,u=c==ov,h=l==c;if(h&&iy(e)){if(!iy(t))return!1;o=!0,d=!1}if(h&&!d)return s||(s=new o0),o||qN(e)?lB(e,t,i,r,n,s):DJ(e,t,l,i,r,n,s);if(!(i&BJ)){var f=d&&i3.call(e,"__wrapped__"),m=u&&i3.call(t,"__wrapped__");if(f||m){var v=f?e.value():e,g=m?t.value():t;return s||(s=new o0),n(v,g,i,r,s)}}return h?(s||(s=new o0),NJ(e,t,i,r,n,s)):!1}var FJ=zJ;function cB(e,t,i,r,n){return e===t?!0:e==null||t==null||!Xa(e)&&!Xa(t)?e!==e&&t!==t:FJ(e,t,i,r,cB,n)}var UJ=cB;function jJ(e,t){return e!=null&&t in Object(e)}var HJ=jJ;function GJ(e,t,i){t=Gh(t,e);for(var r=-1,n=t.length,s=!1;++r<n;){var o=E1(t[r]);if(!(s=e!=null&&i(e,o)))break;e=e[o]}return s||++r!=n?s:(n=e==null?0:e.length,!!n&&K2(n)&&X2(o,n)&&(ra(e)||$2(e)))}var VJ=GJ;function WJ(e,t){return e!=null&&VJ(e,t,HJ)}var qJ=WJ,XJ=function(){return yo.Date.now()},Rw=XJ,YJ="Expected a function",QJ=Math.max,KJ=Math.min;function ZJ(e,t,i){var r,n,s,o,a,l,c=0,d=!1,u=!1,h=!0;if(typeof e!="function")throw new TypeError(YJ);t=DP(t)||0,na(i)&&(d=!!i.leading,u="maxWait"in i,s=u?QJ(DP(i.maxWait)||0,t):s,h="trailing"in i?!!i.trailing:h);function f(y){var C=r,A=n;return r=n=void 0,c=y,o=e.apply(A,C),o}function m(y){return c=y,a=setTimeout(p,t),d?f(y):o}function v(y){var C=y-l,A=y-c,D=t-C;return u?KJ(D,s-A):D}function g(y){var C=y-l,A=y-c;return l===void 0||C>=t||C<0||u&&A>=s}function p(){var y=Rw();if(g(y))return x(y);a=setTimeout(p,v(y))}function x(y){return a=void 0,h&&r?f(y):(r=n=void 0,o)}function b(){a!==void 0&&clearTimeout(a),c=0,r=l=n=a=void 0}function S(){return a===void 0?o:x(Rw())}function E(){var y=Rw(),C=g(y);if(r=arguments,n=this,l=y,C){if(a===void 0)return m(l);if(u)return clearTimeout(a),a=setTimeout(p,t),f(l)}return a===void 0&&(a=setTimeout(p,t)),o}return E.cancel=b,E.flush=S,E}var uB=ZJ;function $J(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var JJ=$J;function eee(e,t){return t.length<2?e:QN(e,jK(t,0,-1))}var tee=eee;function iee(e,t){return UJ(e,t)}var lA=iee;function ree(e,t){return t=Gh(t,e),e=tee(e,t),e==null||delete e[E1(JJ(t))]}var nee=ree;function see(e){return FK(e)?void 0:e}var oee=see,aee=1,lee=2,cee=4,uee=ZN(function(e,t){var i={};if(e==null)return i;var r=!1;t=zN(t,function(s){return s=Gh(s,e),r||(r=s.length>1),s}),km(e,rB(e),i),r&&(i=aB(i,aee|lee|cee,oee));for(var n=t.length;n--;)nee(i,t[n]);return i}),l_=uee;function dee(e,t,i,r){if(!na(e))return e;t=Gh(t,e);for(var n=-1,s=t.length,o=s-1,a=e;a!=null&&++n<s;){var l=E1(t[n]),c=i;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=o){var d=a[l];c=r?r(d,l,a):void 0,c===void 0&&(c=na(d)?d:X2(t[n+1])?[]:{})}Q2(a,l,c),a=a[l]}return e}var hee=dee;function fee(e,t,i){for(var r=-1,n=t.length,s={};++r<n;){var o=t[r],a=QN(e,o);i(a,o)&&hee(s,Gh(o,e),a)}return s}var pee=fee;function mee(e,t){return pee(e,t,function(i,r){return qJ(e,r)})}var gee=mee,vee=ZN(function(e,t){return e==null?{}:gee(e,t)}),sy=vee,dB,yee=new Promise(e=>{dB=e}),r3=!1;async function xee(){if(r3)return;let e=await f1(()=>import("./physics-18863788.js"),[]);await e.init(),dB(e),r3=!0}var yr=class{modifyById(e,t){let i=this;if(i[e]===void 0)throw new Error("not expected");{let r={...i,[e]:t};return Object.setPrototypeOf(r,yr.prototype),r}}add(e,t){var i;return((i=this.runOp({type:1,id:e,data:t}))==null?void 0:i.data)??this}runOp(e){let t=this;if(e.type===1){let i=t[e.id],r;i===void 0?r={type:2,id:e.id}:r={type:1,id:e.id,data:i};let{id:n,data:s}=e,o={...t,[n]:s};return Object.setPrototypeOf(o,yr.prototype),{data:o,actual:e,reverse:r}}else if(e.type===2){let{id:i}=e,r=t[i];if(r===void 0)return null;{let n={...t};return Object.setPrototypeOf(n,yr.prototype),delete n[i],{data:n,actual:e,reverse:{type:1,id:i,data:r}}}}return null}};function cA(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let i of t){let r=e[i];r&&typeof r=="object"&&cA(r)}return Object.freeze(e)}function wee(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}var hB=class extends Error{};function Nw(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function jl(e,t,i){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let s=e;e=t,t=s}let r=[],n=1/(i+1);for(let s=0;s<i;s++){let o=e+(t-e)*(s+.75+Math.random()*.5)*n;r.push(o)}return r}function uA(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function bee(){return typeof process<"u"}function fB(e,t){for(let i of e)t(i.id,i.data)!==!0&&fB(i.children,t)}function pB(e,t){if(t(e.id,e.data)!==!0)for(let i of e.children)pB(i,t)}var Bn=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Bn.prototype)}deepFreeze(){let e=0;for(;e<this.length;)cA(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let i of e.children)this.fillCaches0(i,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}isDescendantOf(e,t){for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let i=this.get(e);i&&pB(i,t)}}traverse(e){fB(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let i=this.parent(e),r=this.childrenArray(i),n=r.findIndex(o=>o.id===e);if(n<0)throw new Error("not expected");let s=r[n];return r=[...r],r[n]={...s,data:t},this.modifyArrayBy(i,r)}}modifyArrayBy(e,t){let i=e,r=t;for(;i!==null;){let s=r,o=i;if(i=this.parent(i),i===void 0)throw new Error;r=this.childrenArray(i);let a=r.findIndex(l=>l.id===o);if(a<0)throw new Error;r=[...r],r[a]={...r[a],children:s}}Object.setPrototypeOf(r,Bn.prototype);let n=r;return n.fillCaches(),n}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let i of t)if(this.checkDuplicatedIdRec(i))return!0;return!1}addOp(e){let{parent:t,fi:i,id:r,data:n,children:s}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let o=t,a=this.childrenArray(o),l={fi:i,id:r,data:n,children:s};return a=[...a,l],a.sort((c,d)=>c.fi-d.fi),e.localIndex=a.indexOf(l),{data:this.modifyArrayBy(o,a),actual:e,reverse:{type:8,id:r}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let i=this.parent(t);if(i===void 0)return null;let r=this.childrenArray(i),n=r.findIndex(o=>o.id===t);e.localIndex=n,r=[...r];let s=r.splice(n,1)[0];return{data:this.modifyArrayBy(i,r),actual:e,reverse:{type:7,...s,parent:i}}}}moveOp(e){let{parent:t,fi:i,id:r}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:r});if(t!==null){let u=t;for(;u!==null;){if(u===void 0)throw new Error;if(u===r)throw new hB("cyclic tree");u=this.parent(u)}}let n=this.parent(r);if(n===void 0)return null;let s=n,o=this.childrenArray(n),a=o.findIndex(u=>u.id===r);o=[...o];let l=o.splice(a,1)[0],c=this.modifyArrayBy(n,o);n=t,o=c.childrenArray(n);let d=l.fi;return l={...l,fi:i},o=[...o,l],o.sort((u,h)=>u.fi-h.fi),e.localIndex=o.indexOf(l),c=c.modifyArrayBy(n,o),{data:c,actual:e,reverse:{type:9,parent:s,fi:d,id:r}}}previous(e,t){if(t===null){let r=this.childrenArray(e);return r.length===0?null:r[r.length-1].id}let i=null;for(let r of this.childrenArray(e)){if(r.id===t)return i;i=r.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(n=>n.id===e)+1;if(r<i.length)return i[r].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(n=>n.id===e)-1;return r>=0?this.traverseSortPrevious(i[r].id):t}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push({...i,...r})}t.sort((i,r)=>wee(i.sortKey,r.sortKey));for(let i of t)delete i.sortKey;return t}getWithSortKey(e){var t=e;let i=[],r=this.get(t),n=r;if(r!==void 0){for(;t;)i.splice(0,0,r.fi),t=this.parent(t),t!==null&&(r=this.get(t));return{...n,sortKey:i}}}insertBeforeHelper(e,t,i){return this.insertAfterHelper(e,this.previous(e,t),i)}insertAfterHelper(e,t,i){let r=this.childrenArray(e);if(t===null){if(r.length===0)return jl(0,i,i);{let n=r[0].fi;return jl(n-i,n,i)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let s=r.find(o=>o.fi>n.fi);if(s===void 0){let o=r[r.length-1].fi;return jl(o,o+i,i)}else return jl(n.fi,s.fi,i)}}},oy;(e=>{function t(i,r){if(r.type!==0)return null;if(Array.isArray(i)){let n=r.props,s={},o=[...i],a=!1;if(n)for(let l of Object.keys(n)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=o[c],o[c]=n[l],a=!0}return a?{data:o,actual:r,reverse:{type:0,props:s}}:null}else{let n=r.props,s={},o={...i},a=!1;if(n)for(let l of Object.keys(n)){s[l]=o[l];let c=n[l];c===void 0?delete o[l]:o[l]=c,a=!0}return a?{data:o,actual:r,reverse:{type:0,props:s}}:null}}e.runOp=t})(oy||(oy={}));var ti=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ti.prototype)}deepFreeze(){let e=0;for(;e<this.length;)cA(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let i=this,r=i.findIndex(s=>s.id===e);if(r<0)throw new Error("not expected");let n=i[r];return i=[...i],i[r]={...n,data:t},this.modifyArrayBy(i)}}modifyArrayBy(e){Object.setPrototypeOf(e,ti.prototype);let t=e;return bee()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:i,data:r}=e,n=this,s={fi:t,id:i,data:r};return n=[...n,s],n.sort((o,a)=>o.fi-a.fi),e.localIndex=n.indexOf(s),{data:this.modifyArrayBy(n),actual:e,reverse:{type:5,id:i}}}deleteOp(e){let{id:t}=e,i=this,r=i.findIndex(s=>s.id===t);if(r===-1)return null;e.localIndex=r,i=[...i];let n=i.splice(r,1)[0];return{data:this.modifyArrayBy(i),actual:e,reverse:{type:4,...n}}}moveOp(e){let{fi:t,id:i}=e,r=this;r=[...r];let n=r.findIndex(a=>a.id===i);if(n===-1)return null;let s=r[n].fi,o={...r[n],fi:t};return r[n]=o,r.sort((a,l)=>a.fi-l.fi),e.localIndex=r.indexOf(o),{data:this.modifyArrayBy(r),actual:e,reverse:{type:6,fi:s,id:i}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let i of this){if(i.id===e)return t;t=i.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let i=this;if(e===null){if(i.length===0)return jl(0,t,t);{let r=i[0].fi;return jl(r-t,r,t)}}else{let r=this.get(e);if(r===void 0)throw new Error("illegal args");let n=i.find(s=>s.fi>r.fi);if(n===void 0){let s=i[i.length-1].fi;return jl(s,s+t,t)}else return jl(r.fi,n.fi,t)}}};function Eh(e){return e&&typeof e=="object"&&e instanceof Br}var Br=class{unusedFunOverridesTable(e){}runOp(e){let t=[],i=this,r=0,n={};for(;r<e.path.length;){if(t.push(i),i=i===void 0?void 0:i[e.path[r]],i!==void 0&&!Eh(i))return null;r+=1}i=i?Nw(i):new Br;for(let[a,l]of Object.entries(e.props)){let c=i[a];n[a]=c,l===void 0?delete i[a]:i[a]=l}for(;r>0;){if(Object.keys(i).length===0){let a=t[r-1];a&&(i=Nw(a),delete i[e.path[r-1]])}else{let a=t[r-1];if(a){let l=Nw(a);l[e.path[r-1]]=i,i=l}else{let l=new Br;l[e.path[r-1]]=i,i=l}}r-=1}let s=Object.setPrototypeOf(i,Br.prototype),o={...e,props:n};return{data:s,actual:e,reverse:o}}},pu;(e=>{function t(n,s){return cm(n,s)??n}e.apply=t;function i(n,s){return hA(n,s)}e.merge=i;function r(n,s){let o=0,a=s.path,l=n;for(;o<a.length&&l!==void 0;){if(l=$o.zoomOnce(l,a[o]),l===void 0)return s;if(!Eh(l))return;o+=1}if(l===void 0)return s;if(Eh(l))if(s.type===0){let c={...s.props};for(let d of Object.keys(l))delete c[d];return{...s,props:c}}else if(s.type===1||s.type===4||s.type===7){let c=dA([s],l);return c?(console.log(c),c):s}else return s}e.filterOp=r})(pu||(pu={}));function dA(e,t){if(t===void 0)return;let i=!1,r=e.map(n=>{let s=n.id,o=cm(n.data,t[s]);if(i=i||o!==void 0,o===void 0&&(o=n.data),n.children){let a=dA(n.children,t);return a!==void 0?i=!0:a=n.children,{...n,id:s,data:o,children:a}}else return{...n,id:s,data:o}});if(i)return r}function See(e,t){if(t===void 0)return;let i=!1,r=e.map(n=>{let s=n.id,o=cm(n.data,t[s]);return i=i||o!==void 0,o===void 0&&(o=n.data),{...n,id:s,data:o}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}function cm(e,t){if(!Eh(t))return t;if(e instanceof Bn){let i=dA(e,t);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof ti)return See(e,t);if(Array.isArray(e)){let i=!1,r=e.map((n,s)=>{let o=cm(n,t[s]);return i=i||o!==void 0,o===void 0&&(o=n),o});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else{if(e instanceof Br)return hA(e,t);if(e&&typeof e=="object"){let i={},r=!1;for(let[n,s]of Object.entries(e)){let o=cm(s,t[n]);r=r||o!==void 0,o===void 0&&(o=s),i[n]=o}return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}}}}function hA(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!Eh(t))return t;if(!Eh(e))return pu.apply(e,t);let i=new Set;for(let n of Object.keys(e))i.add(n);for(let n of Object.keys(t))i.add(n);let r=new Br;for(let n of i){let s=hA(e===void 0?void 0:e[n],t===void 0?void 0:t[n]);r[n]=s}return r}function _ee(e,t){let i={cur:[],result:[],len:0};return e=um(e,t,i)??e,[e,i.result]}function ay(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function ly(e){e&&(e.len-=1)}function Eee(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function mB(e,t,i){let r=!1,n=e.map(s=>{let o=s.id,a=t[o];if(a!==void 0&&typeof a=="string"&&(r=!0,o=a,i!==null))throw new Error("not supported");let l=um(s.data,t,ay(i,o));ly(i),r=r||l!==void 0,l===void 0&&(l=s.data);let c=mB(s.children,t,i);return c!==void 0?r=!0:c=s.children,{...s,id:o,data:l,children:c}});if(r)return n}function Aee(e,t,i){let r=!1,n=e.map(s=>{let o=s.id,a=t[o];if(a!==void 0&&typeof a=="string"&&(r=!0,o=a,i!==null))throw new Error("not supported");let l=um(s.data,t,ay(i,o));return ly(i),r=r||l!==void 0,l===void 0&&(l=s.data),{...s,id:o,data:l}});if(r)return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}function um(e,t,i){if(e instanceof Bn){let r=mB(e,t,i);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof ti)return Aee(e,t,i);if(Array.isArray(e)){let r=!1,n=e.map((s,o)=>{let a=um(s,t,ay(i,o));return ly(i),r=r||a!==void 0,a===void 0&&(a=s),a});return r?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else if(e&&typeof e=="object"&&!uA(e)){let r={},n=!1;for(let[s,o]of Object.entries(e))if(s!=="name"&&s!=="text"){let a=t[s];if(typeof a=="string"){if(i!==null)throw new Error("not supported");n=!0,s=a}let l=um(o,t,ay(i,s));ly(i),n=n||l!==void 0,l===void 0&&(l=o),r[s]=l}else r[s]=o;return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else if(typeof e=="string"){let r=t[e];if(r!==void 0){if(e.length!==36)throw new Error("for now you should only call this method when the key is a uuid");Eee(i)}return r}else return}}var c_;(e=>{function t(i,r){let n=$o.zoom(r,i.path);if(typeof n=="object"){let s={};for(let o of Object.keys(i.props))s[o]=n[o];return{...i,props:s}}else return{...i,props:{}}}e.replaceProps=t})(c_||(c_={}));var Jn;(e=>{function t(l,c){return{...l,path:l.path.slice(c)}}e.drop=t;function i(l,c){var d;return((d=r(l,c))==null?void 0:d.data)??l}e.applySimple=i;function r(l,c){var h,f;let d=c.path;for(var u=[];;){let m;if(l instanceof Br&&c.type===0&&(m=l.runOp({...c,path:d.slice(u.length)}),m===null&&(m=void 0)),u.length===d.length&&(l instanceof Bn||l instanceof ti||l instanceof yr?m=l.runOp(c):m=oy.runOp(l,c)),m!==void 0)if(m!==null){let p=m.data;for(let x=u.length-1;x>=0;x--){let b=d[x],S=u[x];if(S instanceof Bn){if(typeof b=="number")throw new Error("illegal arg");p=S.modifyById(b,p)}else if(S instanceof ti){if(typeof b=="number")throw new Error("illegal arg");p=S.modifyById(b,p)}else if(S instanceof yr){if(typeof b=="number")throw new Error("illegal arg");p=S.modifyById(b,p)}else if(S instanceof Br){let E={...S,[b]:p};p=Object.setPrototypeOf(E,Br.prototype)}else if(typeof S=="object")if(Array.isArray(S)){if(typeof b=="string"&&(b=parseInt(b),isNaN(b)))throw new Error("Invalid path");let E=p;p=[...S],p[b]=E}else p={...S,[b]:p};else return null}return{data:p,actual:{...m.actual,path:d},reverse:{...m.reverse,path:d}}}else return null;let v=d[u.length],g;if(l instanceof Bn){if(typeof v=="number")throw new Error("");g=(h=l.get(v))==null?void 0:h.data}else if(l instanceof ti){if(typeof v=="number")throw new Error("");g=(f=l.get(v))==null?void 0:f.data}else l!==null&&(g=l[v]);if(g!==void 0)u.push(l),l=g;else return null}}e.apply=r;function n(l,c){for(let d=0;d<l.length&&d<c.length;d++)if(l[d]!==c[d])return!0;return!1}e.pathDisjoint=n;function s(l,c){if(l.length!==c.length)return!1;for(let d=0;d<l.length;d++)if(l[d]!==c[d])return!1;return!0}e.pathEq=s;function o(l,c){return n(l.path,c.path)}e.commutative=o;function a(l,c){return l.type===0&&c.type===0&&s(l.path,c.path)?Object.keys(l.props).every(d=>c.props[d]!==void 0):!1}e.subsumed=a})(Jn||(Jn={}));var n3;(e=>{function t(){return[]}e.empty=t;function i(c,d){let u=[];for(let h of c){let[f,...m]=h.path;f===d&&u.push({...h,path:m})}return u}e.removePrefix=i;function r(c,d){return c.map(u=>({...u,path:[d,...u.path]}))}e.addPrefix=r;function n(c,d){return[...c,...d]}e.concat=n;function s(c,d){return[...c.filter(u=>!d.some(h=>Jn.subsumed(u,h))),...d]}e.compress=s;function o(c,d){return c.every(u=>d.every(h=>Jn.commutative(u,h)))}e.commutative=o;function a(c,d){for(let u of d){let h=l(c,u);h!==null&&(c=h.data)}return c}e.applyAll=a;function l(c,d){var u=c;let h=[],f=[];for(let m of d)try{if(m.type===3){let v=$o.zoom(u,[...m.path,m.id]),g=Jn.apply(u,{...m,type:2});if(g!==null){u=g.data;let[p,x]=_ee(u,{[m.id]:v});u=p;for(let b of x){let S=b[b.length-1];b.splice(b.length-1,1),h.push({type:0,path:b,props:{[S]:v}}),f.push({type:0,path:b,props:{[S]:m.id}})}f.push(g.reverse),h.push(g.actual)}}else{let v=Jn.apply(u,m);v!==null&&(h.push(v.actual),u=v.data,f.push(v.reverse))}}catch(v){if(v instanceof hB)return null;throw v}return{data:u,actual:h,reverse:f.reverse()}}e.apply=l})(n3||(n3={}));var gB=Symbol(),Cee=Symbol(),A1=Symbol(),zm=class{reportOp(e,t,i=[]){let r=this;if(t===null)return;r._current=t.data;let n=i;for(;!(r instanceof yB);){let s=r._path,o=r._current;if(s!==""&&n.splice(0,0,s),r=r._parent,r===null)return;r.update(s,o)}r.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let i=t[A1];i&&i(),delete this._children[e]}}}},Tee=class extends zm{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,oy.runOp(this._current,e),e.path)}},Mee=class extends zm{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,yr.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},vB={get(e,t){if(t===A1)return()=>{e._parent=null};if(t===gB)return e._current;if(t===Cee)return e;let{_current:i,_children:r}=e;if(t==="push"&&Array.isArray(i))throw new Error("not supported to expand array");let n=r===void 0?void 0:r[t];if(n!==void 0)return n;let s=i[t],o=C1(e,t,s);return o!==s?(r===void 0&&(r={},e._children=r),r[t]=o,o):s},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let i=e._current,r=Reflect.getOwnPropertyDescriptor(i,t);return r&&{writable:!0,configurable:!0,enumerable:r.enumerable,value:i[t]}}},Pee={...vB,set(e,t,i){let r={type:0,props:{[t]:$r(i)??i}};return e.deleteChildren(t),e.runOp(r),!0},deleteProperty(e,t){let i={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(i),!0}},Dee={...vB,set(e,t,i){return i===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:i})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},fA=class extends zm{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[A1]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,i)=>{e(t,this.data(t))})}data(e){var o;let{_current:t,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let n=(o=t.get(e))==null?void 0:o.data,s=C1(this,e,n);return s!==n?(i===void 0&&(i={},this._children=i),i[e]=s,s):n}add(e,t,i,r,n){this.runOp({type:7,parent:e,fi:t,id:i,data:r,children:n})}move(e,t,i){this.runOp({type:9,parent:e,fi:t,id:i})}insertAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.add(e,r[n],s.id,s.data,s.children)}}insertBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.add(e,r[n],s.id,s.data,s.children)}}moveAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.move(e,r[n],s)}}moveBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let n=0;n<i.length;n++){let s=i[n];this.move(e,r[n],s)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},pA=class extends zm{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[A1]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let i=0;i<t;i++){let r=this._current[i].id,n=this._current[i].fi;e(this.data(this._current[i].id),r,n)}}find(e){let t=this.length;for(let i=0;i<t;i++){let r=this._current[i].id;if(e(this.data(r),r))return this.get(r)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var o;let{_current:t,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let n=(o=t.get(e))==null?void 0:o.data,s=C1(this,e,n);return s!==n?(i===void 0&&(i={},this._children=i),i[e]=s,s):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,i){this.runOp({type:4,fi:e,id:t,data:i})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.add(i[r],n.id,n.data)}}insertBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.add(i[r],n.id,n.data)}}moveAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.move(i[r],n)}}moveBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.move(i[r],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function Bw(e,t,i){if(e.length>0){let r=e[e.length-1];if(r.type===0&&t.type===0&&$o.equal(r.path,i)){Object.assign(r.props,t.props);return}}e.push({...t,path:i})}var yB=class extends zm{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,i,r){Bw(this.ts,t,e),Bw(this.actual,i,e),Bw(this.reverse,r,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function C1(e,t,i){return i instanceof Bn?new fA(e,t,i):i instanceof ti?new pA(e,t,i):i instanceof yr?new Proxy(new Mee(e,t,i),Dee):i!==null&&typeof i=="object"?uA(i)?i:new Proxy(new Tee(e,t,i),Pee):i}function xB(e){let t=new yB(e);return[C1(t,"",e),t]}function cy(e,t){let[i,r]=xB(e);return t(i),r.result()}function $r(e){return e instanceof fA||e instanceof pA?e._current:e!==null&&typeof e=="object"?e[gB]:e}var $o;(e=>{function t(s,o){if(o.length===s.length)for(var a=0;a<s.length;){if(s[a]!==o[a])return!1;a+=1}else return!1;return!0}e.equal=t;function i(s,o,a){let l=n(a,s);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...o};return Object.keys(l).forEach(d=>{delete c[d]}),c}else return o}e.removeOverridden=i;function r(s,o){if((s instanceof Bn||s instanceof fA)&&typeof o=="string"||(s instanceof ti||s instanceof pA)&&typeof o=="string")return s.data(o);if(typeof o=="number"&&Array.isArray(s)||typeof o=="string"&&typeof s=="object"&&s!==null)return s[o]}e.zoomOnce=r;function n(s,o,a=0){for(;a<o.length&&s!==void 0;)s=r(s,o[a]),a+=1;return s}e.zoom=n})($o||($o={}));function Oee(e,t){let i=[];if(t.length===e.length)for(var r=0;r<e.length;){if(t[r]==="*")i.push(e[r]);else if(e[r]!==t[r])return null;r+=1}else return null;return i}function nu(e,t){let i=[];if(t.length<=e.length)for(var r=0;r<t.length;){if(t[r]==="*")i.push(e[r]);else if(e[r]!==t[r])return null;r+=1}else return null;return i}var wB=class{},s3=class extends wB{constructor(e){super(),this.id=e}},o3=class extends wB{constructor(e){super(),this.data=e}},u_;try{u_=new TextDecoder}catch{}var ct,sc,be=0,Mn={},fi,Hl,bs=0,jo=0,Wn,Ua,yn=[],gi,a3={useRecords:!1,mapsAsObjects:!0},bB=class{},SB=new bB;SB.name="MessagePack 0xC1";var Ah=!1,uy=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(ct)return MB(()=>(h_(),this?this.unpack(e,t):uy.prototype.unpack.call(a3,e,t)));sc=t>-1?t:e.length,be=0,jo=0,Hl=null,Wn=null,ct=e;try{gi=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(i){throw ct=null,e instanceof Uint8Array?i:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof uy){if(Mn=this,this.structures)return fi=this.structures,av();(!fi||fi.length>0)&&(fi=[])}else Mn=a3,(!fi||fi.length>0)&&(fi=[]);return av()}unpackMultiple(e,t){let i,r=0;try{Ah=!0;let n=e.length,s=this?this.unpack(e,n):M1.unpack(e,n);if(t){for(t(s);be<n;)if(r=be,t(av())===!1)return}else{for(i=[s];be<n;)r=be,i.push(av());return i}}catch(n){throw n.lastPosition=r,n.values=i,n}finally{Ah=!1,h_()}}_mergeStructures(e,t){e=e||[];for(let i=0,r=e.length;i<r;i++){let n=e[i];n&&(n.isShared=!0,i>=32&&(n.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in t||[])if(i>=0){let r=e[i],n=t[i];n&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[i]=r),e[i]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function av(){try{if(!Mn.trusted&&!Ah){let t=fi.sharedLength||0;t<fi.length&&(fi.length=t)}let e=Ki();if(be==sc)fi.restoreStructures&&l3(),fi=null,ct=null,Ua&&(Ua=null);else if(be>sc){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!Ah)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw fi.restoreStructures&&l3(),h_(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function l3(){for(let e in fi.restoreStructures)fi[e]=fi.restoreStructures[e];fi.restoreStructures=null}function Ki(){let e=ct[be++];if(e<160)if(e<128){if(e<64)return e;{let t=fi[e&63]||Mn.getStructures&&_B()[e&63];return t?(t.read||(t.read=mA(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,Mn.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[AB()]=Ki();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(Ki(),Ki());return t}else{e-=144;let t=new Array(e);for(let i=0;i<e;i++)t[i]=Ki();return t}else if(e<192){let t=e-160;if(jo>=be)return Hl.slice(be-bs,(be+=t)-bs);if(jo==0&&sc<140){let i=t<16?gA(t):EB(t);if(i!=null)return i}return d_(t)}else{let t;switch(e){case 192:return null;case 193:return Wn?(t=Ki(),t>0?Wn[1].slice(Wn.position1,Wn.position1+=t):Wn[0].slice(Wn.position0,Wn.position0-=t)):SB;case 194:return!1;case 195:return!0;case 196:return kw(ct[be++]);case 197:return t=gi.getUint16(be),be+=2,kw(t);case 198:return t=gi.getUint32(be),be+=4,kw(t);case 199:return Bc(ct[be++]);case 200:return t=gi.getUint16(be),be+=2,Bc(t);case 201:return t=gi.getUint32(be),be+=4,Bc(t);case 202:if(t=gi.getFloat32(be),Mn.useFloat32>2){let i=vA[(ct[be]&127)<<1|ct[be+1]>>7];return be+=4,(i*t+(t>0?.5:-.5)>>0)/i}return be+=4,t;case 203:return t=gi.getFloat64(be),be+=8,t;case 204:return ct[be++];case 205:return t=gi.getUint16(be),be+=2,t;case 206:return t=gi.getUint32(be),be+=4,t;case 207:return Mn.int64AsNumber?(t=gi.getUint32(be)*4294967296,t+=gi.getUint32(be+4)):t=gi.getBigUint64(be),be+=8,t;case 208:return gi.getInt8(be++);case 209:return t=gi.getInt16(be),be+=2,t;case 210:return t=gi.getInt32(be),be+=4,t;case 211:return Mn.int64AsNumber?(t=gi.getInt32(be)*4294967296,t+=gi.getUint32(be+4)):t=gi.getBigInt64(be),be+=8,t;case 212:if(t=ct[be++],t==114)return f3(ct[be++]&63);{let i=yn[t];if(i)return i.read?(be++,i.read(Ki())):i.noBuffer?(be++,i()):i(ct.subarray(be,++be));throw new Error("Unknown extension "+t)}case 213:return t=ct[be],t==114?(be++,f3(ct[be++]&63,ct[be++])):Bc(2);case 214:return Bc(4);case 215:return Bc(8);case 216:return Bc(16);case 217:return t=ct[be++],jo>=be?Hl.slice(be-bs,(be+=t)-bs):Iee(t);case 218:return t=gi.getUint16(be),be+=2,jo>=be?Hl.slice(be-bs,(be+=t)-bs):Ree(t);case 219:return t=gi.getUint32(be),be+=4,jo>=be?Hl.slice(be-bs,(be+=t)-bs):Nee(t);case 220:return t=gi.getUint16(be),be+=2,u3(t);case 221:return t=gi.getUint32(be),be+=4,u3(t);case 222:return t=gi.getUint16(be),be+=2,d3(t);case 223:return t=gi.getUint32(be),be+=4,d3(t);default:if(e>=224)return e-256;if(e===void 0){let i=new Error("Unexpected end of MessagePack data");throw i.incomplete=!0,i}throw new Error("Unknown MessagePack token "+e)}}}var Lee=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function mA(e,t){function i(){if(i.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(s=>Lee.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(Ki);return e.highByte===0&&(e.read=c3(t,e.read)),n()}let r={};for(let n=0,s=e.length;n<s;n++){let o=e[n];r[o]=Ki()}return r}return i.count=0,e.highByte===0?c3(t,i):i}var c3=(e,t)=>function(){let i=ct[be++];if(i===0)return t();let r=e<32?-(e+(i<<5)):e+(i<<5),n=fi[r]||_B()[r];if(!n)throw new Error("Record id is not defined for "+r);return n.read||(n.read=mA(n,e)),n.read()};function _B(){let e=MB(()=>(ct=null,Mn.getStructures()));return fi=Mn._mergeStructures(e,fi)}var d_=T1,Iee=T1,Ree=T1,Nee=T1;function T1(e){let t;if(e<16&&(t=gA(e)))return t;if(e>64&&u_)return u_.decode(ct.subarray(be,be+=e));let i=be+e,r=[];for(t="";be<i;){let n=ct[be++];if(!(n&128))r.push(n);else if((n&224)===192){let s=ct[be++]&63;r.push((n&31)<<6|s)}else if((n&240)===224){let s=ct[be++]&63,o=ct[be++]&63;r.push((n&31)<<12|s<<6|o)}else if((n&248)===240){let s=ct[be++]&63,o=ct[be++]&63,a=ct[be++]&63,l=(n&7)<<18|s<<12|o<<6|a;l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|l&1023),r.push(l)}else r.push(n);r.length>=4096&&(t+=Cr.apply(String,r),r.length=0)}return r.length>0&&(t+=Cr.apply(String,r)),t}function u3(e){let t=new Array(e);for(let i=0;i<e;i++)t[i]=Ki();return t}function d3(e){if(Mn.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[AB()]=Ki();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(Ki(),Ki());return t}}var Cr=String.fromCharCode;function EB(e){let t=be,i=new Array(e);for(let r=0;r<e;r++){let n=ct[be++];if((n&128)>0){be=t;return}i[r]=n}return Cr.apply(String,i)}function gA(e){if(e<4)if(e<2){if(e===0)return"";{let t=ct[be++];if((t&128)>1){be-=1;return}return Cr(t)}}else{let t=ct[be++],i=ct[be++];if((t&128)>0||(i&128)>0){be-=2;return}if(e<3)return Cr(t,i);let r=ct[be++];if((r&128)>0){be-=3;return}return Cr(t,i,r)}else{let t=ct[be++],i=ct[be++],r=ct[be++],n=ct[be++];if((t&128)>0||(i&128)>0||(r&128)>0||(n&128)>0){be-=4;return}if(e<6){if(e===4)return Cr(t,i,r,n);{let s=ct[be++];if((s&128)>0){be-=5;return}return Cr(t,i,r,n,s)}}else if(e<8){let s=ct[be++],o=ct[be++];if((s&128)>0||(o&128)>0){be-=6;return}if(e<7)return Cr(t,i,r,n,s,o);let a=ct[be++];if((a&128)>0){be-=7;return}return Cr(t,i,r,n,s,o,a)}else{let s=ct[be++],o=ct[be++],a=ct[be++],l=ct[be++];if((s&128)>0||(o&128)>0||(a&128)>0||(l&128)>0){be-=8;return}if(e<10){if(e===8)return Cr(t,i,r,n,s,o,a,l);{let c=ct[be++];if((c&128)>0){be-=9;return}return Cr(t,i,r,n,s,o,a,l,c)}}else if(e<12){let c=ct[be++],d=ct[be++];if((c&128)>0||(d&128)>0){be-=10;return}if(e<11)return Cr(t,i,r,n,s,o,a,l,c,d);let u=ct[be++];if((u&128)>0){be-=11;return}return Cr(t,i,r,n,s,o,a,l,c,d,u)}else{let c=ct[be++],d=ct[be++],u=ct[be++],h=ct[be++];if((c&128)>0||(d&128)>0||(u&128)>0||(h&128)>0){be-=12;return}if(e<14){if(e===12)return Cr(t,i,r,n,s,o,a,l,c,d,u,h);{let f=ct[be++];if((f&128)>0){be-=13;return}return Cr(t,i,r,n,s,o,a,l,c,d,u,h,f)}}else{let f=ct[be++],m=ct[be++];if((f&128)>0||(m&128)>0){be-=14;return}if(e<15)return Cr(t,i,r,n,s,o,a,l,c,d,u,h,f,m);let v=ct[be++];if((v&128)>0){be-=15;return}return Cr(t,i,r,n,s,o,a,l,c,d,u,h,f,m,v)}}}}}function kw(e){return Mn.copyBuffers?Uint8Array.prototype.slice.call(ct,be,be+=e):ct.subarray(be,be+=e)}function Bc(e){let t=ct[be++];if(yn[t])return yn[t](ct.subarray(be,be+=e));throw new Error("Unknown extension type "+t)}var h3=new Array(4096);function AB(){let e=ct[be++];if(e>=160&&e<192){if(e=e-160,jo>=be)return Hl.slice(be-bs,(be+=e)-bs);if(!(jo==0&&sc<180))return d_(e)}else return be--,Ki();let t=(e<<5^(e>1?gi.getUint16(be):e>0?ct[be]:0))&4095,i=h3[t],r=be,n=be+e-3,s,o=0;if(i&&i.bytes==e){for(;r<n;){if(s=gi.getUint32(r),s!=i[o++]){r=1879048192;break}r+=4}for(n+=3;r<n;)if(s=ct[r++],s!=i[o++]){r=1879048192;break}if(r===n)return be=r,i.string;n-=3,r=be}for(i=[],h3[t]=i,i.bytes=e;r<n;)s=gi.getUint32(r),i.push(s),r+=4;for(n+=3;r<n;)s=ct[r++],i.push(s);let a=e<16?gA(e):EB(e);return a!=null?i.string=a:i.string=d_(e)}var f3=(e,t)=>{var i=Ki();let r=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,i.highByte=t);let n=fi[e];return n&&n.isShared&&((fi.restoreStructures||(fi.restoreStructures=[]))[e]=n),fi[e]=i,i.read=mA(i,r),i.read()},CB=typeof self=="object"?self:global;yn[0]=()=>{};yn[0].noBuffer=!0;yn[101]=()=>{let e=Ki();return(CB[e[0]]||Error)(e[1])};yn[105]=e=>{let t=gi.getUint32(be-4);Ua||(Ua=new Map);let i=ct[be],r;i>=144&&i<160||i==220||i==221?r=[]:r={};let n={target:r};Ua.set(t,n);let s=Ki();return n.used?Object.assign(r,s):(n.target=s,s)};yn[112]=e=>{let t=gi.getUint32(be-4),i=Ua.get(t);return i.used=!0,i.target};yn[115]=()=>new Set(Ki());var TB=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");yn[116]=e=>{let t=e[0],i=TB[t];if(!i)throw new Error("Could not find typed array for code "+t);return new CB[i](Uint8Array.prototype.slice.call(e,1).buffer)};yn[120]=()=>{let e=Ki();return new RegExp(e[0],e[1])};yn[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],i=be;be+=t-4,Wn=[Ki(),Ki()],Wn.position0=0,Wn.position1=0;let r=be;be=i;try{return Ki()}finally{be=r}};yn[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function MB(e){let t=sc,i=be,r=bs,n=jo,s=Hl,o=Ua,a=Wn,l=new Uint8Array(ct.slice(0,sc)),c=fi,d=fi.slice(0,fi.length),u=Mn,h=Ah,f=e();return sc=t,be=i,bs=r,jo=n,Hl=s,Ua=o,Wn=a,ct=l,Ah=h,fi=c,fi.splice(0,fi.length,...d),Mn=u,gi=new DataView(ct.buffer,ct.byteOffset,ct.byteLength),f}function h_(){ct=null,Ua=null,fi=null}function Bee(e){e.unpack?yn[e.type]=e.unpack:yn[e.type]=e}var vA=new Array(147);for(let e=0;e<256;e++)vA[e]=+("1e"+Math.floor(45.15-e*.30103));var M1=new uy({useRecords:!1});M1.unpack;M1.unpackMultiple;M1.unpack;var kee=new Float32Array(1);new Uint8Array(kee.buffer,0,4);var l0;try{l0=new TextEncoder}catch{}var dy,yA,P1=typeof Buffer<"u",zw=P1?Buffer.allocUnsafeSlow:Uint8Array,PB=P1?Buffer:Uint8Array,p3=P1?4294967296:2144337920,ke,nr,Ae=0,Eo,Ao=null,zee=/[\u0080-\uFFFF]/,Pf=Symbol("record-id"),DB=class extends uy{constructor(e){super(e),this.offset=0;let t,i,r,n,s,o=0,a=PB.prototype.utf8Write?function(y,C,A){return ke.utf8Write(y,C,A)}:l0&&l0.encodeInto?function(y,C){return l0.encodeInto(y,ke.subarray(C)).written}:!1,l=this;e||(e={});let c=e&&e.sequential,d=e.structures||e.saveStructures,u=e.maxSharedStructures;if(u==null&&(u=d?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=e.maxOwnStructures;h==null&&(h=d?32:64),c&&!e.saveStructures&&(this.structures=[]);let f=u>32||h+u>64,m=u+64,v=u+h+64;if(v>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],p=0,x=0;this.pack=this.encode=function(y,C){if(ke||(ke=new zw(8192),nr=new DataView(ke.buffer,0,8192),Ae=0),Eo=ke.length-10,Eo-Ae<2048?(ke=new zw(ke.length),nr=new DataView(ke.buffer,0,ke.length),Eo=ke.length-10,Ae=0):Ae=Ae+7&2147483640,t=Ae,s=l.structuredClone?new Map:null,l.bundleStrings?(Ao=["",""],ke[Ae++]=214,ke[Ae++]=98,Ao.position=Ae-t,Ae+=4):Ao=null,i=l.structures,i){i.uninitialized&&(i=l._mergeStructures(l.getStructures()));let A=i.sharedLength||0;if(A>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let D=0;D<A;D++){let I=i[D];if(!I)continue;let R,B=i.transitions;for(let G=0,j=I.length;G<j;G++){let ee=I[G];R=B[ee],R||(R=B[ee]=Object.create(null)),B=R}B[Pf]=D+64}o=A}c||(i.nextId=A+64)}r&&(r=!1),n=i||[];try{if(b(y),Ao){nr.setUint32(Ao.position+t,Ae-Ao.position-t);let A=Ao;Ao=null,b(A[0]),b(A[1])}if(l.offset=Ae,s&&s.idsToInsert){Ae+=s.idsToInsert.length*6,Ae>Eo&&E(Ae),l.offset=Ae;let A=Uee(ke.subarray(t,Ae),s.idsToInsert);return s=null,A}return C&jee?(ke.start=t,ke.end=Ae,ke):ke.subarray(t,Ae)}finally{if(i){if(x<10&&x++,p>1e4)i.transitions=null,x=0,p=0,g.length>0&&(g=[]);else if(g.length>0&&!c){for(let A=0,D=g.length;A<D;A++)g[A][Pf]=0;g=[]}if(r&&l.saveStructures){let A=i.sharedLength||u;i.length>A&&(i=i.slice(0,A));let D=ke.subarray(t,Ae);return l.saveStructures(i,o)===!1?(l._mergeStructures(l.getStructures()),l.pack(y)):(o=A,D)}}C&Hee&&(Ae=t)}};let b=y=>{Ae>Eo&&(ke=E(Ae));var C=typeof y,A;if(C==="string"){let D=y.length;if(Ao&&D>=8&&D<4096){let B=zee.test(y);Ao[B?0:1]+=y,ke[Ae++]=193,b(B?-D:D);return}let I;D<32?I=1:D<256?I=2:D<65536?I=3:I=5;let R=D*3;if(Ae+R>Eo&&(ke=E(Ae+R)),D<64||!a){let B,G,j,ee=Ae+I;for(B=0;B<D;B++)G=y.charCodeAt(B),G<128?ke[ee++]=G:G<2048?(ke[ee++]=G>>6|192,ke[ee++]=G&63|128):(G&64512)===55296&&((j=y.charCodeAt(B+1))&64512)===56320?(G=65536+((G&1023)<<10)+(j&1023),B++,ke[ee++]=G>>18|240,ke[ee++]=G>>12&63|128,ke[ee++]=G>>6&63|128,ke[ee++]=G&63|128):(ke[ee++]=G>>12|224,ke[ee++]=G>>6&63|128,ke[ee++]=G&63|128);A=ee-Ae-I}else A=a(y,Ae+I,R);A<32?ke[Ae++]=160|A:A<256?(I<2&&ke.copyWithin(Ae+2,Ae+1,Ae+1+A),ke[Ae++]=217,ke[Ae++]=A):A<65536?(I<3&&ke.copyWithin(Ae+3,Ae+2,Ae+2+A),ke[Ae++]=218,ke[Ae++]=A>>8,ke[Ae++]=A&255):(I<5&&ke.copyWithin(Ae+5,Ae+3,Ae+3+A),ke[Ae++]=219,nr.setUint32(Ae,A),Ae+=4),Ae+=A}else if(C==="number")if(y>>>0===y)y<64?ke[Ae++]=y:y<256?(ke[Ae++]=204,ke[Ae++]=y):y<65536?(ke[Ae++]=205,ke[Ae++]=y>>8,ke[Ae++]=y&255):(ke[Ae++]=206,nr.setUint32(Ae,y),Ae+=4);else if(y>>0===y)y>=-32?ke[Ae++]=256+y:y>=-128?(ke[Ae++]=208,ke[Ae++]=y+256):y>=-32768?(ke[Ae++]=209,nr.setInt16(Ae,y),Ae+=2):(ke[Ae++]=210,nr.setInt32(Ae,y),Ae+=4);else{let D;if((D=this.useFloat32)>0&&y<4294967296&&y>=-2147483648){ke[Ae++]=202,nr.setFloat32(Ae,y);let I;if(D<4||(I=y*vA[(ke[Ae]&127)<<1|ke[Ae+1]>>7])>>0===I){Ae+=4;return}else Ae--}ke[Ae++]=203,nr.setFloat64(Ae,y),Ae+=8}else if(C==="object")if(!y)ke[Ae++]=192;else{if(s){let I=s.get(y);if(I){if(!I.id){let R=s.idsToInsert||(s.idsToInsert=[]);I.id=R.push(I)}ke[Ae++]=214,ke[Ae++]=112,nr.setUint32(Ae,I.id),Ae+=4;return}else s.set(y,{offset:Ae-t})}let D=y.constructor;if(D===Object)S(y,!0);else if(D===Array){A=y.length,A<16?ke[Ae++]=144|A:A<65536?(ke[Ae++]=220,ke[Ae++]=A>>8,ke[Ae++]=A&255):(ke[Ae++]=221,nr.setUint32(Ae,A),Ae+=4);for(let I=0;I<A;I++)b(y[I])}else if(D===Map){A=y.size,A<16?ke[Ae++]=128|A:A<65536?(ke[Ae++]=222,ke[Ae++]=A>>8,ke[Ae++]=A&255):(ke[Ae++]=223,nr.setUint32(Ae,A),Ae+=4);for(let[I,R]of y)b(I),b(R)}else{for(let I=0,R=dy.length;I<R;I++){let B=yA[I];if(y instanceof B){let G=dy[I];if(G.write){G.type&&(ke[Ae++]=212,ke[Ae++]=G.type,ke[Ae++]=0),b(G.write.call(this,y));return}let j=ke,ee=nr,Q=Ae;ke=null;let re;try{re=G.pack.call(this,y,z=>(ke=j,j=null,Ae+=z,Ae>Eo&&E(Ae),{target:ke,targetView:nr,position:Ae-z}),b)}finally{j&&(ke=j,nr=ee,Ae=Q,Eo=ke.length-10)}re&&(re.length+Ae>Eo&&E(re.length+Ae),Ae=Fee(re,ke,Ae,G.type));return}}S(y,!y.hasOwnProperty)}}else if(C==="boolean")ke[Ae++]=y?195:194;else if(C==="bigint"){if(y<BigInt(1)<<BigInt(63)&&y>=-(BigInt(1)<<BigInt(63)))ke[Ae++]=211,nr.setBigInt64(Ae,y);else if(y<BigInt(1)<<BigInt(64)&&y>0)ke[Ae++]=207,nr.setBigUint64(Ae,y);else if(this.largeBigIntToFloat)ke[Ae++]=203,nr.setFloat64(Ae,Number(y));else throw new RangeError(y+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");Ae+=8}else if(C==="undefined")this.encodeUndefinedAsNil?ke[Ae++]=192:(ke[Ae++]=212,ke[Ae++]=0,ke[Ae++]=0);else if(C==="function")b(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+C)},S=this.useRecords===!1?this.variableMapSize?y=>{let C=Object.keys(y),A=C.length;A<16?ke[Ae++]=128|A:A<65536?(ke[Ae++]=222,ke[Ae++]=A>>8,ke[Ae++]=A&255):(ke[Ae++]=223,nr.setUint32(Ae,A),Ae+=4);let D;for(let I=0;I<A;I++)b(D=C[I]),b(y[D])}:(y,C)=>{ke[Ae++]=222;let A=Ae-t;Ae+=2;let D=0;for(let I in y)(C||y.hasOwnProperty(I))&&(b(I),b(y[I]),D++);ke[A+++t]=D>>8,ke[A+t]=D&255}:y=>{let C=Object.keys(y),A,D=n.transitions||(n.transitions=Object.create(null)),I=0;for(let B=0,G=C.length;B<G;B++){let j=C[B];A=D[j],A||(A=D[j]=Object.create(null),I++),D=A}let R=D[Pf];if(R)R>=96&&f?(ke[Ae++]=((R-=96)&31)+96,ke[Ae++]=R>>5):ke[Ae++]=R;else{R=n.nextId,R||(R=64),R<m&&this.shouldShareStructure&&!this.shouldShareStructure(C)?(R=n.nextOwnId,R<v||(R=m),n.nextOwnId=R+1):(R>=v&&(R=m),n.nextId=R+1);let B=C.highByte=R>=96&&f?R-96>>5:-1;D[Pf]=R,n[R-64]=C,R<m?(C.isShared=!0,n.sharedLength=R-63,r=!0,B>=0?(ke[Ae++]=(R&31)+96,ke[Ae++]=B):ke[Ae++]=R):(B>=0?(ke[Ae++]=213,ke[Ae++]=114,ke[Ae++]=(R&31)+96,ke[Ae++]=B):(ke[Ae++]=212,ke[Ae++]=114,ke[Ae++]=R),I&&(p+=x*I),g.length>=h&&(g.shift()[Pf]=0),g.push(D),b(C))}for(let B=0,G=C.length;B<G;B++)b(y[C[B]])},E=y=>{let C;if(y>16777216){if(y-t>p3)throw new Error("Packed buffer would be larger than maximum buffer size");C=Math.min(p3,Math.round(Math.max((y-t)*(y>67108864?1.25:2),4194304)/4096)*4096)}else C=(Math.max(y-t<<2,ke.length-1)>>12)+1<<12;let A=new zw(C);return nr=new DataView(A.buffer,0,C),ke.copy?ke.copy(A,0,t,y):A.set(ke.slice(t,y)),Ae-=t,t=0,Eo=A.length-10,ke=A}}useBuffer(e){ke=e,nr=new DataView(ke.buffer,ke.byteOffset,ke.byteLength),Ae=0}};yA=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,bB];dy=[{pack(e,t,i){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){let{target:n,targetView:s,position:o}=t(6);n[o++]=214,n[o++]=255,s.setUint32(o,r)}else if(r>0&&r<17179869184){let{target:n,targetView:s,position:o}=t(10);n[o++]=215,n[o++]=255,s.setUint32(o,e.getMilliseconds()*4e6+(r/1e3/4294967296>>0)),s.setUint32(o+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),i(this.onInvalidDate());let{target:n,targetView:s,position:o}=t(3);n[o++]=212,n[o++]=255,n[o++]=255}else{let{target:n,targetView:s,position:o}=t(15);n[o++]=199,n[o++]=12,n[o++]=255,s.setUint32(o,e.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(r)))}}},{pack(e,t,i){let r=Array.from(e),{target:n,position:s}=t(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=115,n[s++]=0),i(r)}},{pack(e,t,i){let{target:r,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(r[n++]=212,r[n++]=101,r[n++]=0),i([e.name,e.message])}},{pack(e,t,i){let{target:r,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(r[n++]=212,r[n++]=120,r[n++]=0),i([e.source,e.flags])}},{pack(e,t){this.structuredClone?m3(e,16,t):g3(P1?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let i=e.constructor;i!==PB&&this.structuredClone?m3(e,TB.indexOf(i.name),t):g3(e,t)}},{pack(e,t){let{target:i,position:r}=t(1);i[r]=193}}];function m3(e,t,i,r){let n=e.byteLength;if(n+1<256){var{target:s,position:o}=i(4+n);s[o++]=199,s[o++]=n+1}else if(n+1<65536){var{target:s,position:o}=i(5+n);s[o++]=200,s[o++]=n+1>>8,s[o++]=n+1&255}else{var{target:s,position:o,targetView:a}=i(7+n);s[o++]=201,a.setUint32(o,n+1),o+=4}s[o++]=116,s[o++]=t,s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o)}function g3(e,t){let i=e.byteLength;var r,n;if(i<256){var{target:r,position:n}=t(i+2);r[n++]=196,r[n++]=i}else if(i<65536){var{target:r,position:n}=t(i+3);r[n++]=197,r[n++]=i>>8,r[n++]=i&255}else{var{target:r,position:n,targetView:s}=t(i+5);r[n++]=198,s.setUint32(n,i),n+=4}r.set(e,n)}function Fee(e,t,i,r){let n=e.length;switch(n){case 1:t[i++]=212;break;case 2:t[i++]=213;break;case 4:t[i++]=214;break;case 8:t[i++]=215;break;case 16:t[i++]=216;break;default:n<256?(t[i++]=199,t[i++]=n):n<65536?(t[i++]=200,t[i++]=n>>8,t[i++]=n&255):(t[i++]=201,t[i++]=n>>24,t[i++]=n>>16&255,t[i++]=n>>8&255,t[i++]=n&255)}return t[i++]=r,t.set(e,i),i+=n,i}function Uee(e,t){let i,r=t.length*6,n=e.length-r;for(t.sort((s,o)=>s.offset>o.offset?1:-1);i=t.pop();){let s=i.offset,o=i.id;e.copyWithin(s+r,s,n),r-=6;let a=s+r;e[a++]=214,e[a++]=105,e[a++]=o>>24,e[a++]=o>>16&255,e[a++]=o>>8&255,e[a++]=o&255,n=s}return e}function Wh(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");yA.unshift(e.Class),dy.unshift(e)}Bee(e)}var OB=new DB({useRecords:!1});OB.pack;OB.pack;var jee=512,Hee=1024,v3=new DB({structuredClone:!0});Wh({Class:yr.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,yr.prototype),e}});Wh({Class:ti.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,ti.prototype),e}});Wh({Class:Bn.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Bn.prototype),e}});Wh({Class:s3.prototype.constructor,type:4,write(e){return e.id},read(e){return new s3(e)}});Wh({Class:o3.prototype.constructor,type:5,write(e){return e.data},read(e){return new o3(e)}});Wh({Class:Br.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Br.prototype),e}});function Gee(e){var t=0;if(e.length===0)return t;for(let i=0;i<e.length;i++){let r=e[i];t=(t<<5)-t+r,t=t&t}return t}function f_(e){if(uA(e))return e;if(Array.isArray(e))return e.map(f_);if(typeof e=="object"&&e!==null){let t={};for(let i of Object.keys(e).sort())t[i]=f_(e[i]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var p_;(e=>{function t(n){return v3.pack(n)}e.serialize=t;function i(n){return v3.unpack(n)}e.deserialize=i;function r(n){return Gee(t(f_(n))).toString()}e.checksum=r})(p_||(p_={}));var Df={LookAt:[],Follow:[],MouseHover:["Transition"],Scroll:["Transition"],Start:["Transition","Audio","Video"],Conditional:["Transition","Audio","Video"],MouseDown:["Transition","Audio","Video","Link","Reset"],MouseUp:["Transition","Audio","Video","Link","Reset"],MousePress:["Transition","Audio","Video","Link","Reset"],KeyDown:["Transition","Audio","Video","Link","Reset"],KeyUp:["Transition","Audio","Video","Link","Reset"],KeyPress:["Transition","Audio","Video","Link","Reset"],GameControl:["Transition","Audio"],Collision:["Transition","Audio"]},y3;(e=>{function t(r){return r.type==="MouseDown"||r.type==="MouseUp"||r.type==="MousePress"||r.type==="KeyDown"||r.type==="KeyUp"||r.type==="KeyPress"}e.is=t;function i(r){return r==="MouseDown"||r==="MouseUp"||r==="MousePress"?{type:r,disabled:!1,toggle:!1,actions:new ti}:{type:r,disabled:!1,key:void 0,toggle:!1,actions:new ti}}e.defaultData=i})(y3||(y3={}));var hy;(e=>{function t(i){return{type:"Property",value:[i??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(hy||(hy={}));var m_;(e=>{function t(n){return{type:"Comparison",operator:"==",lOperand:hy.propertyDefaultData(n),rOperand:{...hy.valueDefaultData}}}e.comparisonDefaultData=t;function i(n){return{type:"Distance",toObject:n??null,fromObject:n??null,distance:200}}e.distanceDefaultData=i;function r(n,s){return{type:"State",object:n??null,state:s??null}}e.stateDefaultData=r})(m_||(m_={}));var x3;(e=>{function t(r){return r.type==="Conditional"}e.is=t;function i(r){return{type:"Conditional",disabled:!1,inActions:new ti,outActions:new ti,condition:m_.distanceDefaultData(r)}}e.defaultData=i})(x3||(x3={}));var w3;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,plane:"custom",resetOnPointerLeave:!0})(w3||(w3={}));var b3;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0})(b3||(b3={}));var S3;(e=>{function t(r){return r.type==="MouseHover"}e.is=t;function i(){return{type:"MouseHover",disabled:!1,actions:new ti}}e.defaultData=i})(S3||(S3={}));var _3;(e=>{function t(r){return r.type==="Scroll"}e.is=t;function i(){return{type:"Scroll",disabled:!1,steps:100,actions:new ti}}e.defaultData=i})(_3||(_3={}));var E3;(e=>{function t(r){return r.type==="Start"}e.is=t;function i(){return{type:"Start",disabled:!1,actions:new ti}}e.defaultData=i})(E3||(E3={}));var A3;(e=>{function t(r){return r.type==="Collision"}e.is=t;function i(){return{type:"Collision",disabled:!1,toggle:!1,target:"character",actions:new ti}}e.defaultData=i})(A3||(A3={}));var Hd;(e=>{function t(r,n){return r[0]===n[0]&&r[1]===n[1]}e.isEqual=t;function i(r,n,s){return[r[0]+(n[0]-r[0])*s,r[1]+(n[1]-r[1])*s]}e.lerp=i})(Hd||(Hd={}));var mu;(e=>{function t(a,l){return a[0]===l[0]&&a[1]===l[1]&&a[2]===l[2]}e.isEqual=t;function i(a,l){return[a[0]+l[0],a[1]+l[1],a[2]+l[2]]}e.add=i;function r(a,l){return[a[0]-l[0],a[1]-l[1],a[2]-l[2]]}e.sub=r;function n(a,l){return[a[0]/l[0],a[1]/l[1],a[2]/l[2]]}e.div=n;function s(a,l){return[a[0]*l[0],a[1]*l[1],a[2]*l[2]]}e.mul=s;function o(a,l,c){return[a[0]+(l[0]-a[0])*c,a[1]+(l[1]-a[1])*c,a[2]+(l[2]-a[2])*c]}e.lerp=o})(mu||(mu={}));var fy;(e=>{function t(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]}e.isEqual=t;function i(r,n,s){return[r[0]+(n[0]-r[0])*s,r[1]+(n[1]-r[1])*s,r[2]+(n[2]-r[2])*s,r[3]+(n[3]-r[3])*s]}e.lerp=i})(fy||(fy={}));var Ch;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(n,s){for(let o=0;o<16;o++)if(n[o]!==s[o])return!1;return!0}e.isEqual=t;function i(n){return n??e.identity}e.simplify=i;function r(n,s){let o=s.slice(0);for(var a=0,l=s.length;a<l;a+=3){let c=n[3]*s[a]+n[7]*s[a+1]+n[11]*s[a+2]+n[15];o[a]=(n[0]*s[a]+n[4]*s[a+1]+n[8]*s[a+2]+n[12])/c,o[a+1]=(n[1]*s[a]+n[5]*s[a+1]+n[9]*s[a+2]+n[13])/c,o[a+2]=(n[2]*s[a]+n[6]*s[a+1]+n[10]*s[a+2]+n[14])/c}return o}e.applyMatrix4=r})(Ch||(Ch={}));var Qn;(e=>{function t(a){return typeof a=="object"&&typeof a.r=="number"&&typeof a.g=="number"&&typeof a.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function i(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:1}}e.toRgb255a1=i;function r(a){return{r:a.r,g:a.g,b:a.b}}e.clone=r;function n(a){return a=Math.floor(a),{r:(a>>16&255)/255,g:(a>>8&255)/255,b:(a&255)/255}}e.fromHex=n;function s(a,l){return a.r===l.r&&a.g===l.g&&a.b===l.b}e.equals=s;function o(a,l,c){return{r:a.r+(l.r-a.r)*c,g:a.g+(l.g-a.g)*c,b:a.b+(l.b-a.b)*c}}e.lerp=o})(Qn||(Qn={}));var uo;(e=>{e.white={...Qn.white,a:1},e.transparent={...Qn.white,a:0};function t(o){return{r:o[0],g:o[1],b:o[2],a:o[3]}}e.from0to1=t;function i(o,a){return{...Qn.fromHex(o),a}}e.fromHexAndA=i;function r(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:o.a}}e.toRgb255a1=r;function n(o,a){return Qn.equals(o,a)&&o.a===a.a}e.equals=n;function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l,a:o.a+(a.a-o.a)*l}}e.lerp=s})(uo||(uo={}));var g_;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(g_||(g_={}));var C3;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(C3||(C3={}));var T3;(e=>e.defaultData={control1:[.5,.05],control2:[.1,.3]})(T3||(T3={}));var Cu;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(i){return e.all.includes(i)}e.is=t})(Cu||(Cu={}));var dm;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1,autoZoom:!1,autoZoomFrustumSize:790},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(i){return i.type==="PerspectiveCamera"?i.perspective.zoom:i.orthographic.zoom}e.getZoom=t})(dm||(dm={}));var Gl;(e=>{function t(r,n=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(r[0],r[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[r[0]+r[0]*n,0,0]},grid:{count:[2,2,2],size:r.map(s=>s*(1+n)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function i(r,n){let s={...r};if(LB.forEach(o=>{Object.assign(s,{[o]:n[o]??r[o]})}),s.radial={...r.radial},n.radial){let o=r.radial,a=n.radial;IB.forEach(l=>{Object.assign(s.radial,{[l]:a[l]??o[l]})})}if(s.linear={...r.linear},n.linear){let o=r.linear,a=n.linear;RB.forEach(l=>{Object.assign(s.linear,{[l]:a[l]??o[l]})})}if(s.grid={...r.grid},n.grid){let o=r.grid,a=n.grid;NB.forEach(l=>{Object.assign(s.grid,{[l]:a[l]??o[l]})})}if(s.toObject={...r.toObject},n.toObject){let o=r.toObject,a=n.toObject;BB.forEach(l=>{Object.assign(s.toObject,{[l]:a[l]??o[l]})})}if(s.randomnessObject={...r.randomnessObject},n.randomnessObject){let o=r.randomnessObject,a=n.randomnessObject;kB.forEach(l=>{Object.assign(s.randomnessObject,{[l]:a[l]??o[l]})})}return s}e.merge=i})(Gl||(Gl={}));var v_;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function i(r,n){let s=[];r.count!==void 0&&s.push({type:0,path:n,props:{count:r.count}});for(let o of t){let a=r[o];a&&Object.keys(a).length>0&&s.push({type:0,path:[...n,o],props:a})}return s}e.toOps=i})(v_||(v_={}));var LB=["count"],IB=["radius","start","end","position","scale","rotation"],RB=["position","scale","rotation"],NB=["count","size"],BB=["count","position","scale","rotation"],kB=["strength","scale","rotation","position","movement","seed","freqScale"],hm;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focalLength:2,focusDistance:2,bokehScale:2},noise:{...t,blendFunction:16}}})(hm||(hm={}));var y_;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(i){return e.all.includes(i)}e.is=t})(y_||(y_={}));var x_;(e=>{function t(r){return i(r)}e.defaultData=t;function i(r){if(r==="PointLight")return{type:r,color:uo.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if(r==="SpotLight")return{type:r,color:uo.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if(r==="DirectionalLight")return{type:r,color:uo.white,intensity:1,shadows:!0,size:1e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(x_||(x_={}));var w_;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(i,r){return i.castShadow===r.castShadow&&i.receiveShadow===r.receiveShadow}e.equals=t})(w_||(w_={}));var b_;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(i,r){return i.flatShading===r.flatShading&&i.side===r.side&&i.wireframe===r.wireframe}e.equals=t})(b_||(b_={}));var S_;(e=>e.defaultData={...b_.defaultData,...w_.defaultData})(S_||(S_={}));var py;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(py||(py={}));var zB=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Vee=["wrapping","image","video"],Cs;(e=>{function t(s,o){let{texture:a,...l}=o;if(Object.assign(s,l),a){let c=s.texture;c&&Object.assign(c,a)}}e.patch=t;function i(s,o){return s==="light"&&o?r(o):n(s)}e.defaultData=i;function r(s){switch(s){case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",alpha:.6,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}function n(s){switch(s){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"texture",projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"video",projection:0,texture:{video:py.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:Qn.fromHex(4737101)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Qn.fromHex(6710886),a:1},colorB:{...Qn.fromHex(6710886),a:1},colorC:{...Qn.fromHex(16777215),a:1},colorD:{...Qn.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:uo.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{type:"toon",alpha:1,visible:!0,mode:0,positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:uo.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{type:"outline",alpha:1,visible:!0,mode:0,outlineColor:uo.fromHexAndA(0,1),contourColor:uo.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}})(Cs||(Cs={}));var ns;(e=>{function t(c){return!c.layers.some(d=>d.data.type==="texture"&&d.data.projection!==0||d.data.type==="depth"&&!d.data.isWorldSpace||d.data.type==="noise"||d.data.type==="displace")}e.isMergable=t;function i(c){let d="";return c.layers.forEach(u=>{Object.entries(u.data).forEach(([h,f])=>{d+=`${h}${f}`,Array.isArray(f)?f.forEach(m=>d+=`${m}`):typeof f=="object"?Object.values(f).forEach(m=>{typeof m=="number"?d+=`${m.toFixed(4)}`:d+=`${m}`}):d+=`${f}`})}),d}e.getHash=i;function r(){return{layers:new ti}}e.defaultEmptyData=r;function n(c="layer1",d="layer2"){return o("phong",c,d)}e.defaultData=n;function s(c,d){return{...c,name:d}}e.withName=s;function o(c,d="layer1",u="layer2"){let h=new ti;return h.push({fi:0,data:Cs.defaultData("light",c),id:d}),h.push({fi:1,data:Cs.defaultData("color"),id:u}),{layers:h}}e.defaultTwoLayerData=o;function a(c,d="phong",u="layer1",h="layer2"){let f=Cs.defaultData("texture");Object.assign(f.texture,{image:c});let m=new ti;return m.push({fi:0,data:f,id:u}),m.push({fi:1,data:Cs.defaultData("light",d),id:h}),{layers:m}}e.defaultTwoLayerTextureData=a;function l(c,d="phong",u="layer1",h="layer2"){let f=Cs.defaultData("video");Object.assign(f.texture,{video:c});let m=new ti;return m.push({fi:0,data:f,id:u}),m.push({fi:1,data:Cs.defaultData("light",d),id:h}),{layers:m}}e.defaultTwoLayerVideoTextureData=l})(ns||(ns={}));var my;(e=>{function t(){return{points:new ti,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(my||(my={}));var gy;(e=>{function t(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"}e.is2DParametricMesh=t})(gy||(gy={}));var rh;(e=>{function t(i){if(i==="RectangleGeometry")return{width:320,height:320,type:i,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="VectorGeometry")return{width:1,height:1,type:i,subdivisions:12,shape:my.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="BooleanGeometry")return{type:i,operation:2,width:0,height:0,depth:0,phongAngle:35};if(i==="TextGeometry")return{type:i,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};throw new Error("not implemented")}e.defaultData=t})(rh||(rh={}));var M3;(e=>{function t(r){return r==="Component"||r==="Instance"}e.isComponentRelated=t;function i(r){return r==="Empty"||r==="Instance"}e.isEmptyOrComponent=i})(M3||(M3={}));var Th;(e=>{e.identity={...g_.identity,hiddenMatrix:Ch.identity};function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function i(n,s){return{position:(s==null?void 0:s.position)||n.position,rotation:(s==null?void 0:s.rotation)||n.rotation,scale:(s==null?void 0:s.scale)||n.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||n.hiddenMatrix}}e.merge=i;function r(n,s){return{position:mu.isEqual(n.position,s.position)?null:s.position,rotation:mu.isEqual(n.rotation,s.rotation)?null:s.rotation,scale:mu.isEqual(n.scale,s.scale)?null:s.scale,hiddenMatrix:Ch.isEqual(n.hiddenMatrix,s.hiddenMatrix)?null:s.hiddenMatrix}}e.diff=r})(Th||(Th={}));var __;(e=>e.defaultData={fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(__||(__={}));var Ls;(e=>e.defaultData={states:new ti,events:new ti,visible:!0,raycastLock:!1,physics:null,...Th.identity,cloner:null})(Ls||(Ls={}));var P3;(e=>e.defaultData={type:"Empty",...Ls.defaultData})(P3||(P3={}));var D3;(e=>e.defaultData={type:"Component",...Ls.defaultData})(D3||(D3={}));var nh;(e=>e.defaultData={type:"Mesh",...Ls.defaultData,...S_.defaultData})(nh||(nh={}));var vy;(e=>e.defaultData={...Ls.defaultData,...Th.identity,...dm.defaultData})(vy||(vy={}));var E_;(e=>{function t(i){return{...Ls.defaultData,...x_.defaultData(i)}}e.defaultData=t})(E_||(E_={}));var yy;(e=>{function t(r,n,s=0){for(;s<n.length;){let o=r?r[n[s]]:void 0;if(n.length===s+1)return o;if(o)r=o.descendants,s+=1;else return}}e.resolveWithDes=t;function i(r,n,s=0){let o=t(r,n,s);if(o){let a=Object.keys(o);if(a.length===1&&a[0]==="descendants")return}return o}e.resolve=i})(yy||(yy={}));var Mh;(e=>{e.rootOverrideProps=["physics"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(r,n){return{...Ls.defaultData,...n,component:r,overrides:new Br,physics:void 0,type:"Instance"}}e.ofComponent=t;function i(r){let n=Th.fromObject(r.data);return t(r.id,n)}e.fromComponentData=i})(Mh||(Mh={}));var A_;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Ch.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:__.defaultData,states:new ti,events:new ti,cloner:null,...dm.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...Ls.defaultData,...nh.defaultData,geometry:rh.defaultData("RectangleGeometry"),material:ns.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...Ls.defaultData,...nh.defaultData,geometry:rh.defaultData("BooleanGeometry"),material:ns.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...Ls.defaultData,...nh.defaultData,geometry:rh.defaultData("TextGeometry"),material:ns.defaultTwoLayerData("phong","layer1","layer2")}))(A_||(A_={}));var su;(e=>{function t(s,o){let a={name:o};return s.type==="Mesh"?(a.geometry={},"material"in s&&(a.material={layers:new Br}),"materials"in s&&(a.materials=s.materials.map(l=>({layers:new Br})))):Cu.is(s.type)&&(a.perspective={},a.orthographic={}),a}e.newEmpty=t;function i(s,o){if(o===void 0)return s;let a={...s};return"material"in a&&"material"in o&&o.material&&(a.material=cy(a.material,l=>{if(typeof l!="string")for(let[c,d]of Object.entries(o.material.layers)){let u=l.layers.data(c);u&&Cs.patch(u,d)}}).data),a.materials&&o.materials&&(a.materials=cy(a.materials,l=>{var c,d;for(let u=0;u<a.materials.length;u++){let h=o.materials[u];if(typeof h!="string")for(let[f,m]of Object.entries(h.layers)){let v=(d=(c=l[u])==null?void 0:c.layers)==null?void 0:d.data(f);v&&Cs.patch(v,m)}}}).data),a}function r(s,o){let a,l=[],c={orthographic:0,perspective:0,geometry:0};function d(u,h){for(let[f,m]of Object.entries(h.layers)){let{texture:v,...g}=m;if(v!==void 0&&Object.keys(v).length>0){let p={path:[...u,"layers",f,"texture"],props:v,type:0};l.push(p)}if(Object.keys(g).length>0){let p={path:[...u,"layers",f],props:g,type:0};l.push(p)}}}for(let[u,h]of Object.entries(o))if(u!=="name")if(u==="cloner")l.push(...v_.toOps(h,["cloner"]));else if(u==="material")d(["material"],h);else if(u==="materials")for(let[f,m]of Object.entries(h))d(["materials",f],m);else if(c[u]===0){if(Object.keys(h).length>0){let f={path:[u],props:h,type:0};l.push(f)}}else a===void 0&&(a={path:[],props:{},type:0},l.push(a)),a.props[u]=h;return l}e.toOps=r;function n(s,o){var l,c;if(o===void 0)return s;let a={...s};if(Object.assign(a,Th.merge(a,o)),Cu.is(s.type)){a.orthographic={...a.orthographic},a.perspective={...a.perspective};let d=o;((l=d.orthographic)==null?void 0:l.zoom)!==void 0&&(a.orthographic.zoom=d.orthographic.zoom),((c=d.perspective)==null?void 0:c.zoom)!==void 0&&(a.perspective.zoom=d.perspective.zoom),d.isUpVectorFlipped!==void 0&&(a.isUpVectorFlipped=d.isUpVectorFlipped),d.targetOffset!==void 0&&(a.targetOffset=d.targetOffset)}else if(s.type==="Mesh")o.geometry&&(a.geometry={...a.geometry},Object.assign(a.geometry,o.geometry)),(o.material||o.materials)&&(a=i(a,o)),a.cloner&&"cloner"in o&&Object.assign(a,{cloner:Gl.merge(a.cloner,o.cloner)});else if(s.type==="Empty")a.cloner&&"cloner"in o&&Object.assign(a,{cloner:Gl.merge(a.cloner,o.cloner)});else if(y_.is(s.type)){let d=o;d.intensity!==void 0&&(a.intensity=d.intensity),d.color!==void 0&&(typeof d.color=="string"?a.color=d.color:a.color=Qn.clone(d.color))}return a}e.patch=n})(su||(su={}));var xy;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:Qn.white,near:.1,far:2e3})(xy||(xy={}));var wy;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0,autoZoom:!1})(wy||(wy={}));var Ph;(e=>e.defaultData={orbitControls:wy.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,hideCursor:!1,settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:typeof window<"u"?Math.floor(window.devicePixelRatio):1,stopMode:"manual",duration:5e3},web:{compress:!0,preset:1,preload:!0}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map((t,i)=>{let r=0,n=0;return i<5?n=-30:i<10&&(n=30),i===0||i===10||i===5?r=30:(i===4||i===11||i===9)&&(r=-30),[120,[r,n],"show"]}),gameControlObject:null})(Ph||(Ph={}));function qh(e,t){return Object.setPrototypeOf(e,t),e}var Wee=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),qee=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),Xee=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||D1&&"ontouchend"in document,Yee=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Qee=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,Kee=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},Zee=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]};Wee();var D1=qee(),C_=Xee(),$ee=Yee(),fn=Qee(),by=Kee(),Sy=Number(Zee());function FB(e){return Array.isArray(e)?e:[e]}function Jee(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}function lv(e){return D1?e.metaKey:e.ctrlKey}var Ht=[],_y={},np={},c0={};function UB(e){Ht.includes(e)||Ht.push(e)}function sh(e){delete _y[e.pointerId];for(let t=0;t<Ht.length;t++)if(Ht[t].pointerId===e.pointerId){Ht.splice(t,1);break}}function ete(){Ht.splice(0,Ht.length)}function Ey(e){if(e.pointerType!=="touch")return;let t=_y[e.pointerId];t===void 0&&(t={x:0,y:0},_y[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function Fw(e){let t=e.pointerId===Ht[0].pointerId?Ht[1]:Ht[0];return _y[t.pointerId]}function jB(e){np[e.key]=!0,c0[e.key]=c0[e.key]===void 0?1:c0[e.key]+1}function HB(e){if(D1&&np.Meta)for(let t in np)np[t]=!1;else np[e.key]=!1;c0={}}function tte(e){e.addEventListener("pointerdown",UB,!0),e.addEventListener("pointerdown",Ey,!0),e.addEventListener("pointermove",Ey,!0),e.addEventListener("pointerup",sh,!0),e.addEventListener("pointercancel",sh,!0),e.addEventListener("pointerleave",sh,!0),window.addEventListener("keydown",jB,!0),window.addEventListener("keyup",HB,!0)}function ite(e){e.removeEventListener("pointerdown",UB,!0),e.removeEventListener("pointerdown",Ey,!0),e.removeEventListener("pointermove",Ey,!0),e.removeEventListener("pointerup",sh,!0),e.removeEventListener("pointercancel",sh,!0),e.removeEventListener("pointerleave",sh,!0),window.removeEventListener("keydown",jB,!0),window.removeEventListener("keyup",HB,!0)}var Xn;(e=>e.defaultData={ambientLight:{enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75,depth:100,groundColor:{r:.5098039215686274,g:.5098039215686274,b:.5098039215686274},softShadows:!0,softShadowQuality:"low"},usePhysics:!1,gravity:-10,pixelsPerMeter:200,skinWidthRelative:.02,stepThreshRelative:.3,slopeThresh:65})(Xn||(Xn={}));var T_;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function t(n={withLight:!0,withSquare:!0}){let s=new Bn,o=A_.defaultMeshObject;return n.withLight===!0&&s.push({fi:-1,data:{...E_.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7},id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),n.withSquare===!0&&s.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:o,children:[]}),s}e.defaultData={backgroundColor:uo.fromHexAndA(1908256,1),postprocessing:hm.defaultData,fog:xy.defaultData,objects:t(),environment:Xn.defaultData,publish:Ph.defaultData},e.emptyData=function(n){return{backgroundColor:uo.fromHexAndA(1908256,1),postprocessing:hm.defaultData,fog:xy.defaultData,objects:n?t(n):new Bn,environment:Xn.defaultData,publish:Ph.defaultData}};function i(n){return{...e.defaultData,objects:qh(n,Bn.prototype)}}e.withObjs=i;function r(n,s){return i([{id:n,data:s,children:[],fi:0}])}e.withObj=r})(T_||(T_={}));var Ay;(e=>{function t(){let r={};return r["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},qh(r,yr.prototype)}e.defaultColors=t;function i(){return{materials:new yr,images:new yr,videos:new yr,colors:new yr,audios:new yr,fonts:new yr,penumbraSize:[.5,.5,.5]}}e.emptyData=i})(Ay||(Ay={}));function O3(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let i=t.colorA,r=t.colorB,n=[[i.r,i.g,i.b,i.a],[r.r,r.g,r.b,r.a]],s=[0,1];for(let a=2;a<10;a++)n.push(n[1]),s.push(1);let o={...sy($r(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:n,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,o)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let i={...$r(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,i)}})}function u0(e,t){Object.values(e.shared.materials).forEach(i=>t(i))}function d0(e,t){e.scene.objects.traverse((i,r)=>{"materials"in r?r.materials.forEach(n=>{typeof n!="string"&&t(n)}):"material"in r&&typeof r.material!="string"&&t(r.material)})}function rte(e){Object.assign(e.scene.publish,{orbitControls:{...wy.defaultData,...$r(e.scene.publish.orbitControls)}})}function nte(e){Object.assign(e.scene.publish.settings,{video:{...Ph.defaultData.settings.video,...$r(e.scene.publish.settings.video)}})}function ste(e){function t(i){if(i.layers){for(let r of Object.values(i.layers))if(r){for(let[n,s]of Object.entries(r))if((zB.includes(n)||typeof s=="boolean")&&delete r[n],n==="texture")for(let[o,a]of Object.entries(s))(Vee.includes(o)||typeof a=="boolean")&&delete s[o]}}}e.scene.objects.traverse((i,r)=>{r.states.forEach(n=>{let s=n;s.material?t(s.material):s.materials&&s.materials.forEach(o=>{t(o)})})})}function ote(e){e.scene.publish.withBackground=!0}function ate(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1}}function lte(e){e.scene.objects.traverse((t,i)=>{let r=i.cloner;r&&(r.radial.scale=r.radial.scale.map(n=>n+1),r.linear.scale=r.linear.scale.map(n=>n+1))})}function cte(e){e.scene.objects.traverse((t,i)=>{let r=i.geometry;r&&(r.type==="DodecahedronGeometry"||r.type==="IcosahedronGeometry")&&(r.detail=Math.round(r.detail))})}function ute(e){e.scene.objects.traverse((t,i)=>{let r=e.scene.objects.unproxy().parent(t);if(r){let n=$r(e.scene.objects.data(r));n&&n.type==="Mesh"&&n.geometry.type==="BooleanGeometry"&&i.type==="Mesh"&&(i.visible=$r(i).booleanExclude!==!0)}})}function dte(e){e.scene.objects.traverse((t,i)=>{if(i.type==="Mesh"){let r=i;i.geometry.type==="NonParametricGeometry"?r.material!==void 0&&delete r.material:r.materials!==void 0&&delete r.materials}})}function hte(e){function t(r){Object.setPrototypeOf(r,Br.prototype),r.texture&&Object.setPrototypeOf(r.texture,Br.prototype)}function i(r){Object.setPrototypeOf(r,Br.prototype);for(let n in r)t(r[n])}e.scene.objects.traverse((r,n)=>{n.states.forEach(s=>{let o=s;if(o.material){let a=$r(o.material).layers;i(a),o.material.layers=a}if(o.materials)for(let a=0;a<o.materials.length;a++){let l=o.materials[a],c=$r(l).layers;i(c),l.layers=c}})})}function L3(e){e.layers===void 0&&Object.assign(e,ns.defaultTwoLayerData("lambert"))}function Uw(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let i=[...t.colors];i.push(t.colors[9]);let r=[...t.steps];r.push(t.steps[9]);let n={...$r(t),colors:i,steps:r};Object.assign(t,n)}})}function fte(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&(i.geometry.type==="BooleanGeometry"||i.geometry.type==="SubdivGeometry")&&(i.geometry.phongAngle=35)})}function I3(e){e.scene.objects.traverse((t,i)=>{"materials"in i?i.materials.forEach(r=>{typeof r!="string"&&Uw(r)}):"material"in i&&typeof i.material!="string"&&Uw(i.material)}),Object.values(e.shared.materials).forEach(t=>Uw(t))}function pte(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,i)=>{(i.type==="DirectionalLight"||i.type==="SpotLight")&&(i.shadowResolution=1024,i.shadowRadius=1,i.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function mte(e){e.shared.audios=qh({},yr.prototype)}function gte(e){e.shared.videos=qh({},yr.prototype)}function vte(e){let t=e.shared.materials;Object.entries(t).forEach(([i,r])=>{if(!r.layers){let n={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[i]:n})}})}function yte(e){Object.entries($r(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries($r(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function xte(e){e.scene.publish.settings.web.preload=!1}function R3(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function wte(e){e.shared.fonts=qh({},yr.prototype)}function bte(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function Ste(e){let t=[];e.scene.objects.traverse((i,r)=>{let n=r;if(n.type==="TextFrame"){let s=ns.defaultTwoLayerData("phong"),o=typeof n.color=="string"?e.shared.colors[n.color]:n.color;s.layers[1].data.color={r:o.r,g:o.g,b:o.b},s.layers[1].data.alpha=n.alpha;let a=bte(n.font);e.shared.fonts[a]===void 0&&(e.shared.fonts[a]={name:a});let l={name:n.name,...Ls.defaultData,...nh.defaultData,flatShading:!1,wireframe:!1,geometry:{...rh.defaultData("TextGeometry"),width:n.width,height:n.height,font:a,depth:0,horizontalAlign:n.horizontalAlign,verticalAlign:n.verticalAlign,fontSize:n.fontSize*1.40625,lineHeight:n.lineHeight/1.40625,letterSpacing:n.letterSpacing-1,text:n.text,textTransform:n.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:s,states:$r(n.states),events:$r(n.events),visible:n.visible,raycastLock:n.raycastLock,position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix},c=$r(e.scene.objects).parent(i);e.scene.objects.insertAfter(c??null,i,[{id:i+"new",data:l,children:[]}]),t.push(i)}}),t.forEach(i=>{e.scene.objects.delete(i)})}function _te(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((i,r)=>{r.events.forEach(n=>{if(t[Number(n.type)])if(Object.assign(n,{type:t[Number(n.type)]}),n.type==="Audio"&&"audioEvent"in n&&(Object.assign(n,{playAudio:n.audioEvent}),delete n.audioEvent),n.type==="GameControl")Object.assign(n,{gameActions:{idle:new ti,move:new ti,jump:new ti}});else{let s=new ti;Object.assign(n,{actions:s}),(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp")&&"url"in n&&s.push({fi:0,id:Jt.generateUUID(),data:{type:"Link",url:n.url,delay:0}}),"targets"in n&&(n.targets.forEach((o,a,l)=>{let c={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},d={easing:o.easing,duration:o.duration};o.easing===6?Object.assign(d,sy(o,"mass","stiffness","damping","velocity")):o.easing===5&&Object.assign(d,{control1:{...o.control1},control2:{...o.control2}});let u={repeat:o.repeat?-1:0,delay:o.delay,delayDirection:o.delayDirection,direction:o.cycle&&o.rewind?"pingpong-rewind":o.cycle?"pingpong":"normal"},h={state:o.state,...u,...d},f={allowSlerp:!0,type:"Transition",object:o.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new ti({fi:0,id:Jt.generateUUID(),data:c},{fi:1,id:Jt.generateUUID(),data:h})};s.push({fi:l,id:a,data:f})}),delete n.targets)}})})}function Ete(e){e.scene.objects.traverse((t,i)=>{function r(n,s){var l;let o=new ti,a=[];if(i.events.forEach((c,d,u)=>{if(c.type==="Audio"&&c.trigger===s){let h;a.push(d),c.interaction==="play"?h={...sy(c,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in c?c.after:void 0,toggle:"after"in c?c.toggle:void 0,type:"Audio"}:(c.interaction==="pause"||c.interaction==="stop")&&(h={...sy(c,"interaction","delay","object","playAudio"),type:"Audio"}),h&&o.push({fi:u,id:d,data:h})}}),a.forEach(c=>i.events.delete(c)),o.length){let c=(l=i.events.find(d=>d.type===n))==null?void 0:l.data;c?"actions"in c&&c.actions.insertBefore(null,o):i.events.insertBefore(null,[{id:Jt.generateUUID(),data:{type:n,actions:o}}])}}r("Start","start"),r("MouseDown","mouseDown"),r("MouseUp","mouseUp"),r("KeyDown","keyDown"),r("KeyUp","keyUp")})}function N3(e){var i;let t=(i=e.layers.find(r=>r.type==="light"))==null?void 0:i.data;if((t==null?void 0:t.category)==="basic"){let r=Cs.defaultData("light","phong"),n=t;Object.assign(n,r),n.visible=!1}}function B3(e){u0(e,N3),d0(e,N3)}function Ate(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(i.geometry.scaleBaked||(i.geometry.scaleBaked=[1,1,1]))})}function Cte(e){e.scene.objects.traverse((t,i)=>{(i.type==="Empty"||i.type==="Mesh")&&i.cloner&&!i.cloner.randomnessObject&&!i.cloner.toObject&&!i.cloner.randomness&&(i.cloner={...i.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function Tte(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&i.geometry.type==="NonParametricGeometry"&&!("material"in i)&&!("materials"in i)&&(i.material=ns.defaultTwoLayerData("phong"))})}function Mte(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,i)=>{(i.type==="OrthographicCamera"||i.type==="PerspectiveCamera")&&(i.orthographic.autoZoom===void 0&&(i.orthographic.autoZoom=!1),i.orthographic.autoZoomFrustumSize===void 0&&(i.orthographic.autoZoomFrustumSize=790))})}var k3=31;function Pte(e){let t=e.schema??0;t!==k3&&(console.warn("updating from ",t,"to ",k3),t<1&&(d0(e,O3),u0(e,O3),e.schema=1),t<2&&(rte(e),e.schema=2),t<3&&(ste(e),e.schema=3),t<4&&(ote(e),e.schema=4),t<5&&(ate(e),e.schema=5),t<6&&(lte(e),e.schema=6),t<7&&(cte(e),e.schema=7),t<8&&(e.schema=8),t<9&&(I3(e),e.schema=9),t<10&&(fte(e),e.schema=10),t<11&&(pte(e),e.schema=11),t<12&&(I3(e),e.schema=12),t<13&&(mte(e),e.schema=13),t<14&&(vte(e),e.schema=14),t<15&&(yte(e),e.schema=15),t<16&&(xte(e),e.schema=16),t<17&&(d0(e,R3),u0(e,R3),e.schema=17),t<18&&(d0(e,L3),u0(e,L3),e.schema=18),t<19&&(nte(e),e.schema=19),t<20&&(wte(e),Ste(e),e.schema=20),t<21&&(_te(e),Ete(e),e.schema=21),t<22&&(B3(e),e.schema=22),t<23&&(Ate(e),e.schema=23),t<24&&(Cte(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(gte(e),t<25&&(e.schema=25)),t<26&&(ute(e),e.schema=26),t<27&&(dte(e),e.schema=27),t<28&&(B3(e),e.schema=28),t<29&&(hte(e),e.schema=29),t<30&&(Tte(e),e.schema=30),t<31&&(Mte(e),e.schema=31))}var M_;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="})(M_||(M_={}));function Gd(e,t=!1){let i=e[0].index!==null,r=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),s={},o={},a=e[0].morphTargetsRelative,l=new It,c=0;for(let d=0;d<e.length;++d){let u=e[d],h=0;if(i!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in u.attributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;s[f]===void 0&&(s[f]=[]),s[f].push(u.attributes[f]),h++}if(h!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in u.morphAttributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(u.morphAttributes[f])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(u.userData),t){let f;if(i)f=u.index.count;else if(u.attributes.position!==void 0)f=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,d),c+=f}}if(i){let d=0,u=[];for(let h=0;h<e.length;++h){let f=e[h].index;for(let m=0;m<f.count;++m)u.push(f.getX(m)+d);d+=e[h].attributes.position.count}l.setIndex(u)}for(let d in s){let u=z3(s[d]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;l.setAttribute(d,u)}for(let d in o){let u=o[d][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[d]=[];for(let h=0;h<u;++h){let f=[];for(let v=0;v<o[d].length;++v)f.push(o[d][v][h]);let m=z3(f);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" morphAttribute."),null;l.morphAttributes[d].push(m)}}return l}function z3(e){let t,i,r,n=0;for(let a=0;a<e.length;++a){let l=e[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(i===void 0&&(i=l.itemSize),i!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=l.normalized),r!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let s=new t(n),o=0;for(let a=0;a<e.length;++a)s.set(e[a].array,o),o+=e[a].array.length;return new Gt(s,i,r)}var P_;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",speedTranslate:1e3,speedRotate:100,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:-3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new ti,move:new ti,jump:new ti}}))(P_||(P_={}));var Dte=Math.pow(2,-24),cv=class{constructor(){}};function Ho(e,t,i){return i.min.x=t[e],i.min.y=t[e+1],i.min.z=t[e+2],i.max.x=t[e+3],i.max.y=t[e+4],i.max.z=t[e+5],i}function F3(e){let t=-1,i=-1/0;for(let r=0;r<3;r++){let n=e[r+3]-e[r];n>i&&(i=n,t=r)}return t}function U3(e,t){t.set(e)}function j3(e,t,i){let r,n;for(let s=0;s<3;s++){let o=s+3;r=e[s],n=t[s],i[s]=r<n?r:n,r=e[o],n=t[o],i[o]=r>n?r:n}}function uv(e,t,i){for(let r=0;r<3;r++){let n=t[e+2*r],s=t[e+2*r+1],o=n-s,a=n+s;o<i[r]&&(i[r]=o),a>i[r+3]&&(i[r+3]=a)}}function Of(e){let t=e[3]-e[0],i=e[4]-e[1],r=e[5]-e[2];return 2*(t*i+i*r+r*t)}function Ote(e,t){if(!e.index){let i=e.attributes.position.count,r=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n;i>65535?n=new Uint32Array(new r(4*i)):n=new Uint16Array(new r(2*i)),e.setIndex(new Gt(n,1));for(let s=0;s<i;s++)n[s]=s}}function Lte(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],i=new Set;for(let n of e.groups)i.add(n.start),i.add(n.start+n.count);let r=Array.from(i.values()).sort((n,s)=>n-s);for(let n=0;n<r.length-1;n++){let s=r[n],o=r[n+1];t.push({offset:s/3,count:(o-s)/3})}return t}function jw(e,t,i,r,n=null){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,d=-1/0,u=1/0,h=1/0,f=1/0,m=-1/0,v=-1/0,g=-1/0,p=n!==null;for(let x=t*6,b=(t+i)*6;x<b;x+=6){let S=e[x+0],E=e[x+1],y=S-E,C=S+E;y<s&&(s=y),C>l&&(l=C),p&&S<u&&(u=S),p&&S>m&&(m=S);let A=e[x+2],D=e[x+3],I=A-D,R=A+D;I<o&&(o=I),R>c&&(c=R),p&&A<h&&(h=A),p&&A>v&&(v=A);let B=e[x+4],G=e[x+5],j=B-G,ee=B+G;j<a&&(a=j),ee>d&&(d=ee),p&&B<f&&(f=B),p&&B>g&&(g=B)}r[0]=s,r[1]=o,r[2]=a,r[3]=l,r[4]=c,r[5]=d,p&&(n[0]=u,n[1]=h,n[2]=f,n[3]=m,n[4]=v,n[5]=g)}function Ite(e,t,i,r){let n=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let d=t*6,u=(t+i)*6;d<u;d+=6){let h=e[d+0];h<n&&(n=h),h>a&&(a=h);let f=e[d+2];f<s&&(s=f),f>l&&(l=f);let m=e[d+4];m<o&&(o=m),m>c&&(c=m)}r[0]=n,r[1]=s,r[2]=o,r[3]=a,r[4]=l,r[5]=c}function Rte(e,t,i,r,n){let s=i,o=i+r-1,a=n.pos,l=n.axis*2;for(;;){for(;s<=o&&t[s*6+l]<a;)s++;for(;s<=o&&t[o*6+l]>=a;)o--;if(s<o){for(let c=0;c<3;c++){let d=e[s*3+c];e[s*3+c]=e[o*3+c],e[o*3+c]=d;let u=t[s*6+c*2+0];t[s*6+c*2+0]=t[o*6+c*2+0],t[o*6+c*2+0]=u;let h=t[s*6+c*2+1];t[s*6+c*2+1]=t[o*6+c*2+1],t[o*6+c*2+1]=h}s++,o--}else return s}}var Ma=32,Nte=(e,t)=>e.candidate-t.candidate,wl=new Array(Ma).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),dv=new Float32Array(6);function Bte(e,t,i,r,n,s){let o=-1,a=0;if(s===0)o=F3(t),o!==-1&&(a=(t[o]+t[o+3])/2);else if(s===1)o=F3(e),o!==-1&&(a=kte(i,r,n,o));else if(s===2){let l=Of(e),c=1.25*n,d=r*6,u=(r+n)*6;for(let h=0;h<3;h++){let f=t[h],m=(t[h+3]-f)/Ma;if(n<Ma/4){let v=[...wl];v.length=n;let g=0;for(let x=d;x<u;x+=6,g++){let b=v[g];b.candidate=i[x+2*h],b.count=0;let{bounds:S,leftCacheBounds:E,rightCacheBounds:y}=b;for(let C=0;C<3;C++)y[C]=1/0,y[C+3]=-1/0,E[C]=1/0,E[C+3]=-1/0,S[C]=1/0,S[C+3]=-1/0;uv(x,i,S)}v.sort(Nte);let p=n;for(let x=0;x<p;x++){let b=v[x];for(;x+1<p&&v[x+1].candidate===b.candidate;)v.splice(x+1,1),p--}for(let x=d;x<u;x+=6){let b=i[x+2*h];for(let S=0;S<p;S++){let E=v[S];b>=E.candidate?uv(x,i,E.rightCacheBounds):(uv(x,i,E.leftCacheBounds),E.count++)}}for(let x=0;x<p;x++){let b=v[x],S=b.count,E=n-b.count,y=b.leftCacheBounds,C=b.rightCacheBounds,A=0;S!==0&&(A=Of(y)/l);let D=0;E!==0&&(D=Of(C)/l);let I=1+1.25*(A*S+D*E);I<c&&(o=h,c=I,a=b.candidate)}}else{for(let p=0;p<Ma;p++){let x=wl[p];x.count=0,x.candidate=f+m+p*m;let b=x.bounds;for(let S=0;S<3;S++)b[S]=1/0,b[S+3]=-1/0}for(let p=d;p<u;p+=6){let x=~~((i[p+2*h]-f)/m);x>=Ma&&(x=Ma-1);let b=wl[x];b.count++,uv(p,i,b.bounds)}let v=wl[Ma-1];U3(v.bounds,v.rightCacheBounds);for(let p=Ma-2;p>=0;p--){let x=wl[p],b=wl[p+1];j3(x.bounds,b.rightCacheBounds,x.rightCacheBounds)}let g=0;for(let p=0;p<Ma-1;p++){let x=wl[p],b=x.count,S=x.bounds,E=wl[p+1].rightCacheBounds;b!==0&&(g===0?U3(S,dv):j3(S,dv,dv)),g+=b;let y=0,C=0;g!==0&&(y=Of(dv)/l);let A=n-g;A!==0&&(C=Of(E)/l);let D=1+1.25*(y*g+C*A);D<c&&(o=h,c=D,a=x.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function kte(e,t,i,r){let n=0;for(let s=t,o=t+i;s<o;s++)n+=e[s*6+r*2];return n/i}function zte(e,t){let i=e.attributes.position,r=i.array,n=e.index.array,s=n.length/3,o=new Float32Array(s*6),a=i.offset||0,l=3;i.isInterleavedBufferAttribute&&(l=i.data.stride);for(let c=0;c<s;c++){let d=c*3,u=c*6,h=n[d+0]*l+a,f=n[d+1]*l+a,m=n[d+2]*l+a;for(let v=0;v<3;v++){let g=r[h+v],p=r[f+v],x=r[m+v],b=g;p<b&&(b=p),x<b&&(b=x);let S=g;p>S&&(S=p),x>S&&(S=x);let E=(S-b)/2,y=v*2;o[u+y+0]=b+E,o[u+y+1]=E+(Math.abs(b)+E)*Dte,b<t[v]&&(t[v]=b),S>t[v+3]&&(t[v+3]=S)}}return o}function Fte(e,t){function i(p){h&&h(p/f)}function r(p,x,b,S=null,E=0){if(!m&&E>=l&&(m=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),b<=d||E>=l)return i(x+b),p.offset=x,p.count=b,p;let y=Bte(p.boundingData,S,o,x,b,u);if(y.axis===-1)return i(x+b),p.offset=x,p.count=b,p;let C=Rte(a,o,x,b,y);if(C===x||C===x+b)i(x+b),p.offset=x,p.count=b;else{p.splitAxis=y.axis;let A=new cv,D=x,I=C-x;p.left=A,A.boundingData=new Float32Array(6),jw(o,D,I,A.boundingData,s),r(A,D,I,s,E+1);let R=new cv,B=C,G=b-I;p.right=R,R.boundingData=new Float32Array(6),jw(o,B,G,R.boundingData,s),r(R,B,G,s,E+1)}return p}Ote(e,t);let n=new Float32Array(6),s=new Float32Array(6),o=zte(e,n),a=e.index.array,l=t.maxDepth,c=t.verbose,d=t.maxLeafTris,u=t.strategy,h=t.onProgress,f=e.index.count/3,m=!1,v=[],g=Lte(e);if(g.length===1){let p=g[0],x=new cv;x.boundingData=n,Ite(o,p.offset,p.count,s),r(x,p.offset,p.count,s),v.push(x)}else for(let p of g){let x=new cv;x.boundingData=new Float32Array(6),jw(o,p.offset,p.count,x.boundingData,s),r(x,p.offset,p.count,s),v.push(x)}return v}function Ute(e,t){let i=Fte(e,t),r,n,s,o=[],a=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let d=0;d<i.length;d++){let u=i[d],h=l(u),f=new a(32*h);r=new Float32Array(f),n=new Uint32Array(f),s=new Uint16Array(f),c(0,u),o.push(f)}return o;function l(d){return d.count?1:1+l(d.left)+l(d.right)}function c(d,u){let h=d/4,f=d/2,m=!!u.count,v=u.boundingData;for(let g=0;g<6;g++)r[h+g]=v[g];if(m){let g=u.offset,p=u.count;return n[h+6]=g,s[f+14]=p,s[f+15]=65535,d+32}else{let g=u.left,p=u.right,x=u.splitAxis,b;if(b=c(d+32,g),b/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[h+6]=b/4,b=c(b,p),n[h+7]=x,b}}}var Ya=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,r=-1/0;for(let n=0,s=e.length;n<s;n++){let o=e[n][t];i=o<i?o:i,r=o>r?o:r}this.min=i,this.max=r}setFromPoints(e,t){let i=1/0,r=-1/0;for(let n=0,s=t.length;n<s;n++){let o=t[n],a=e.dot(o);i=a<i?a:i,r=a>r?a:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}};Ya.prototype.setFromBox=function(){let e=new N;return function(t,i){let r=i.min,n=i.max,s=1/0,o=-1/0;for(let a=0;a<=1;a++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){e.x=r.x*a+n.x*(1-a),e.y=r.y*l+n.y*(1-l),e.z=r.z*c+n.z*(1-c);let d=t.dot(e);s=Math.min(d,s),o=Math.max(d,o)}this.min=s,this.max=o}}();var jte=function(){let e=new N,t=new N,i=new N;return function(r,n,s){let o=r.start,a=e,l=n.start,c=t;i.subVectors(o,l),e.subVectors(r.end,n.start),t.subVectors(n.end,n.start);let d=i.dot(c),u=c.dot(a),h=c.dot(c),f=i.dot(a),m=a.dot(a)*h-u*u,v,g;m!==0?v=(d*u-f*h)/m:v=0,g=(d+v*u)/h,s.x=v,s.y=g}}(),xA=function(){let e=new de,t=new N,i=new N;return function(r,n,s,o){jte(r,n,e);let a=e.x,l=e.y;if(a>=0&&a<=1&&l>=0&&l<=1){r.at(a,s),n.at(l,o);return}else if(a>=0&&a<=1){l<0?n.at(0,o):n.at(1,o),r.closestPointToPoint(o,!0,s);return}else if(l>=0&&l<=1){a<0?r.at(0,s):r.at(1,s),n.closestPointToPoint(s,!0,o);return}else{let c;a<0?c=r.start:c=r.end;let d;l<0?d=n.start:d=n.end;let u=t,h=i;if(r.closestPointToPoint(d,!0,t),n.closestPointToPoint(c,!0,i),u.distanceToSquared(d)<=h.distanceToSquared(c)){s.copy(u),o.copy(d);return}else{s.copy(c),o.copy(h);return}}}}(),Hte=function(){let e=new N,t=new N,i=new As,r=new Os;return function(n,s){let{radius:o,center:a}=n,{a:l,b:c,c:d}=s;if(r.start=l,r.end=c,r.closestPointToPoint(a,!0,e).distanceTo(a)<=o||(r.start=l,r.end=d,r.closestPointToPoint(a,!0,e).distanceTo(a)<=o)||(r.start=c,r.end=d,r.closestPointToPoint(a,!0,e).distanceTo(a)<=o))return!0;let u=s.getPlane(i);if(Math.abs(u.distanceToPoint(a))<=o){let h=u.projectPoint(a,t);if(s.containsPoint(h))return!0}return!1}}(),Gte=1e-15;function hd(e){return Math.abs(e)<Gte}var Qa=class extends Tn{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new N),this.satBounds=new Array(4).fill().map(()=>new Ya),this.points=[this.a,this.b,this.c],this.sphere=new ks,this.plane=new As,this.needsUpdate=!0}intersectsSphere(e){return Hte(e,this)}update(){let e=this.a,t=this.b,i=this.c,r=this.points,n=this.satAxes,s=this.satBounds,o=n[0],a=s[0];this.getNormal(o),a.setFromPoints(o,r);let l=n[1],c=s[1];l.subVectors(e,t),c.setFromPoints(l,r);let d=n[2],u=s[2];d.subVectors(t,i),u.setFromPoints(d,r);let h=n[3],f=s[3];h.subVectors(i,e),f.setFromPoints(h,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}};Qa.prototype.closestPointToSegment=function(){let e=new N,t=new N,i=new Os;return function(r,n=null,s=null){let{start:o,end:a}=r,l=this.points,c,d=1/0;for(let u=0;u<3;u++){let h=(u+1)%3;i.start.copy(l[u]),i.end.copy(l[h]),xA(i,r,e,t),c=e.distanceToSquared(t),c<d&&(d=c,n&&n.copy(e),s&&s.copy(t))}return this.closestPointToPoint(o,e),c=o.distanceToSquared(e),c<d&&(d=c,n&&n.copy(e),s&&s.copy(o)),this.closestPointToPoint(a,e),c=a.distanceToSquared(e),c<d&&(d=c,n&&n.copy(e),s&&s.copy(a)),Math.sqrt(d)}}();Qa.prototype.intersectsTriangle=function(){let e=new Qa,t=new Array(3),i=new Array(3),r=new Ya,n=new Ya,s=new N,o=new N,a=new N,l=new N,c=new Os,d=new Os,u=new Os;return function(h,f=null){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(e.copy(h),e.update(),h=e);let m=this.plane,v=h.plane;if(Math.abs(m.normal.dot(v.normal))>1-1e-10){let g=this.satBounds,p=this.satAxes;i[0]=h.a,i[1]=h.b,i[2]=h.c;for(let S=0;S<4;S++){let E=g[S],y=p[S];if(r.setFromPoints(y,i),E.isSeparated(r))return!1}let x=h.satBounds,b=h.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let S=0;S<4;S++){let E=x[S],y=b[S];if(r.setFromPoints(y,t),E.isSeparated(r))return!1}for(let S=0;S<4;S++){let E=p[S];for(let y=0;y<4;y++){let C=b[y];if(s.crossVectors(E,C),r.setFromPoints(s,t),n.setFromPoints(s,i),r.isSeparated(n))return!1}}return f&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let g=this.points,p=!1,x=0;for(let B=0;B<3;B++){let G=g[B],j=g[(B+1)%3];c.start.copy(G),c.end.copy(j),c.delta(o);let ee=p?d.start:d.end,Q=hd(v.distanceToPoint(G));if(hd(v.normal.dot(o))&&Q){d.copy(c),x=2;break}if((v.intersectLine(c,ee)||Q)&&!hd(ee.distanceTo(j))){if(x++,p)break;p=!0}}if(x===1&&this.containsPoint(d.start))return f&&(f.start.copy(d.start),f.end.copy(d.start)),!0;if(x!==2)return!1;let b=h.points,S=!1,E=0;for(let B=0;B<3;B++){let G=b[B],j=b[(B+1)%3];c.start.copy(G),c.end.copy(j),c.delta(a);let ee=S?u.start:u.end,Q=hd(m.distanceToPoint(G));if(hd(m.normal.dot(a))&&Q){u.copy(c),E=2;break}if((m.intersectLine(c,ee)||Q)&&!hd(ee.distanceTo(j))){if(E++,S)break;S=!0}}if(E===1&&this.containsPoint(u.start))return f&&(f.start.copy(u.start),f.end.copy(u.start)),!0;if(E!==2)return!1;if(d.delta(o),u.delta(a),o.dot(a)<0){let B=u.start;u.start=u.end,u.end=B}let y=d.start.dot(o),C=d.end.dot(o),A=u.start.dot(o),D=u.end.dot(o),I=C<A,R=y<D;return y!==D&&A!==C&&I===R?!1:(f&&(l.subVectors(d.start,u.start),l.dot(o)>0?f.start.copy(d.start):f.start.copy(u.start),l.subVectors(d.end,u.end),l.dot(o)<0?f.end.copy(d.end):f.end.copy(u.end)),!0)}}}();Qa.prototype.distanceToPoint=function(){let e=new N;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Qa.prototype.distanceToTriangle=function(){let e=new N,t=new N,i=["a","b","c"],r=new Os,n=new Os;return function(s,o=null,a=null){let l=o||a?r:null;if(this.intersectsTriangle(s,l))return(o||a)&&(o&&l.getCenter(o),a&&l.getCenter(a)),0;let c=1/0;for(let d=0;d<3;d++){let u,h=i[d],f=s[h];this.closestPointToPoint(f,e),u=f.distanceToSquared(e),u<c&&(c=u,o&&o.copy(e),a&&a.copy(f));let m=this[h];s.closestPointToPoint(m,e),u=m.distanceToSquared(e),u<c&&(c=u,o&&o.copy(m),a&&a.copy(e))}for(let d=0;d<3;d++){let u=i[d],h=i[(d+1)%3];r.set(this[u],this[h]);for(let f=0;f<3;f++){let m=i[f],v=i[(f+1)%3];n.set(s[m],s[v]),xA(r,n,e,t);let g=e.distanceToSquared(t);g<c&&(c=g,o&&o.copy(e),a&&a.copy(t))}}return Math.sqrt(c)}}();var sa=class extends fr{constructor(...e){super(...e),this.isOrientedBox=!0,this.matrix=new at,this.invMatrix=new at,this.points=new Array(8).fill().map(()=>new N),this.satAxes=new Array(3).fill().map(()=>new N),this.satBounds=new Array(3).fill().map(()=>new Ya),this.alignedSatBounds=new Array(3).fill().map(()=>new Ya),this.needsUpdate=!1}set(e,t,i){super.set(e,t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){super.copy(e),this.matrix.copy(e.matrix),this.needsUpdate=!0}};sa.prototype.update=function(){return function(){let e=this.matrix,t=this.min,i=this.max,r=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let d=0;d<=1;d++){let u=1*l|2*c|4*d,h=r[u];h.x=l?i.x:t.x,h.y=c?i.y:t.y,h.z=d?i.z:t.z,h.applyMatrix4(e)}let n=this.satBounds,s=this.satAxes,o=r[0];for(let l=0;l<3;l++){let c=s[l],d=n[l],u=1<<l,h=r[u];c.subVectors(o,h),d.setFromPoints(c,r)}let a=this.alignedSatBounds;a[0].setFromPointsField(r,"x"),a[1].setFromPointsField(r,"y"),a[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();sa.prototype.intersectsBox=function(){let e=new Ya;return function(t){this.needsUpdate&&this.update();let i=t.min,r=t.max,n=this.satBounds,s=this.satAxes,o=this.alignedSatBounds;if(e.min=i.x,e.max=r.x,o[0].isSeparated(e)||(e.min=i.y,e.max=r.y,o[1].isSeparated(e))||(e.min=i.z,e.max=r.z,o[2].isSeparated(e)))return!1;for(let a=0;a<3;a++){let l=s[a],c=n[a];if(e.setFromBox(l,t),c.isSeparated(e))return!1}return!0}}();sa.prototype.intersectsTriangle=function(){let e=new Qa,t=new Array(3),i=new Ya,r=new Ya,n=new N;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(e.copy(s),e.update(),s=e);let o=this.satBounds,a=this.satAxes;t[0]=s.a,t[1]=s.b,t[2]=s.c;for(let u=0;u<3;u++){let h=o[u],f=a[u];if(i.setFromPoints(f,t),h.isSeparated(i))return!1}let l=s.satBounds,c=s.satAxes,d=this.points;for(let u=0;u<3;u++){let h=l[u],f=c[u];if(i.setFromPoints(f,d),h.isSeparated(i))return!1}for(let u=0;u<3;u++){let h=a[u];for(let f=0;f<4;f++){let m=c[f];if(n.crossVectors(h,m),i.setFromPoints(n,t),r.setFromPoints(n,d),i.isSeparated(r))return!1}}return!0}}();sa.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();sa.prototype.distanceToPoint=function(){let e=new N;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();sa.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Os),i=new Array(12).fill().map(()=>new Os),r=new N,n=new N;return function(s,o=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(a||l)&&(s.getCenter(n),this.closestPointToPoint(n,r),s.closestPointToPoint(r,n),a&&a.copy(r),l&&l.copy(n)),0;let c=o*o,d=s.min,u=s.max,h=this.points,f=1/0;for(let v=0;v<8;v++){let g=h[v];n.copy(g).clamp(d,u);let p=g.distanceToSquared(n);if(p<f&&(f=p,a&&a.copy(g),l&&l.copy(n),p<c))return Math.sqrt(p)}let m=0;for(let v=0;v<3;v++)for(let g=0;g<=1;g++)for(let p=0;p<=1;p++){let x=(v+1)%3,b=(v+2)%3,S=g<<x|p<<b,E=1<<v|g<<x|p<<b,y=h[S],C=h[E];t[m].set(y,C);let A=e[v],D=e[x],I=e[b],R=i[m],B=R.start,G=R.end;B[A]=d[A],B[D]=g?d[D]:u[D],B[I]=p?d[I]:u[D],G[A]=u[A],G[D]=g?d[D]:u[D],G[I]=p?d[I]:u[D],m++}for(let v=0;v<=1;v++)for(let g=0;g<=1;g++)for(let p=0;p<=1;p++){n.x=v?u.x:d.x,n.y=g?u.y:d.y,n.z=p?u.z:d.z,this.closestPointToPoint(n,r);let x=n.distanceToSquared(r);if(x<f&&(f=x,a&&a.copy(r),l&&l.copy(n),x<c))return Math.sqrt(x)}for(let v=0;v<12;v++){let g=t[v];for(let p=0;p<12;p++){let x=i[p];xA(g,x,r,n);let b=r.distanceToSquared(n);if(b<f&&(f=b,a&&a.copy(r),l&&l.copy(n),b<c))return Math.sqrt(b)}}return Math.sqrt(f)}}();var hv=new N,fv=new N,pv=new N,H3=new de,G3=new de,V3=new de,W3=new N;function Vte(e,t,i,r,n,s){let o;return s===Zr?o=e.intersectTriangle(r,i,t,!0,n):o=e.intersectTriangle(t,i,r,s!==lo,n),o===null?null:{distance:e.origin.distanceTo(n),point:n.clone()}}function Wte(e,t,i,r,n,s,o){hv.fromBufferAttribute(t,r),fv.fromBufferAttribute(t,n),pv.fromBufferAttribute(t,s);let a=Vte(e,hv,fv,pv,W3,o);if(a){i&&(H3.fromBufferAttribute(i,r),G3.fromBufferAttribute(i,n),V3.fromBufferAttribute(i,s),a.uv=Tn.getUV(W3,hv,fv,pv,H3,G3,V3,new de));let l={a:r,b:n,c:s,normal:new N,materialIndex:0};Tn.getNormal(hv,fv,pv,l.normal),a.face=l,a.faceIndex=r}return a}function GB(e,t,i,r,n){let s=r*3,o=e.index.getX(s),a=e.index.getX(s+1),l=e.index.getX(s+2),c=Wte(i,e.attributes.position,e.attributes.uv,o,a,l,t);return c?(c.faceIndex=r,n&&n.push(c),c):null}function qte(e,t,i,r,n,s){for(let o=r,a=r+n;o<a;o++)GB(e,t,i,o,s)}function Xte(e,t,i,r,n){let s=1/0,o=null;for(let a=r,l=r+n;a<l;a++){let c=GB(e,t,i,a);c&&c.distance<s&&(o=c,s=c.distance)}return o}function VB(e,t,i){return e===null||(e.point.applyMatrix4(t.matrixWorld),e.distance=e.point.distanceTo(i.ray.origin),e.object=t,e.distance<i.near||e.distance>i.far)?null:e}function ko(e,t,i,r){let n=e.a,s=e.b,o=e.c,a=t,l=t+1,c=t+2;i&&(a=i.getX(t),l=i.getX(t+1),c=i.getX(t+2)),n.x=r.getX(a),n.y=r.getY(a),n.z=r.getZ(a),s.x=r.getX(l),s.y=r.getY(l),s.z=r.getZ(l),o.x=r.getX(c),o.y=r.getY(c),o.z=r.getZ(c)}function q3(e,t,i,r,n,s,o){let a=i.index,l=i.attributes.position;for(let c=e,d=t+e;c<d;c++)if(ko(o,c*3,a,l),o.needsUpdate=!0,r(o,c,n,s))return!0;return!1}var WB=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function Nl(e,t){return t[e+15]===65535}function oh(e,t){return t[e+6]}function fm(e,t){return t[e+14]}function pm(e){return e+8}function mm(e,t){return t[e+6]}function Yte(e,t){return t[e+7]}var Vd=new fr,Cy=new N,Qte=["x","y","z"];function D_(e,t,i,r,n){let s=e*2,o=Xh,a=oc,l=ac;if(Nl(s,a)){let c=oh(e,l),d=fm(s,a);qte(t,i,r,c,d,n)}else{let c=pm(e);Ty(c,o,r,Cy)&&D_(c,t,i,r,n);let d=mm(e,l);Ty(d,o,r,Cy)&&D_(d,t,i,r,n)}}function O_(e,t,i,r){let n=e*2,s=Xh,o=oc,a=ac;if(Nl(n,o)){let l=oh(e,a),c=fm(n,o);return Xte(t,i,r,l,c)}else{let l=Yte(e,a),c=Qte[l],d=r.direction[c]>=0,u,h;d?(u=pm(e),h=mm(e,a)):(u=mm(e,a),h=pm(e));let f=Ty(u,s,r,Cy)?O_(u,t,i,r):null;if(f){let v=f.point[c];if(d?v<=s[h+l]:v>=s[h+l+3])return f}let m=Ty(h,s,r,Cy)?O_(h,t,i,r):null;return f&&m?f.distance<=m.distance?f:m:f||m||null}}var Kte=function(){let e,t,i=[],r=new WB(()=>new fr);return function(...s){e=r.getPrimitive(),t=r.getPrimitive(),i.push(e,t);let o=n(...s);r.releasePrimitive(e),r.releasePrimitive(t),i.pop(),i.pop();let a=i.length;return a>0&&(t=i[a-1],e=i[a-2]),o};function n(s,o,a,l,c=null,d=0,u=0){function h(x){let b=x*2,S=oc,E=ac;for(;!Nl(b,S);)x=pm(x),b=x*2;return oh(x,E)}function f(x){let b=x*2,S=oc,E=ac;for(;!Nl(b,S);)x=mm(x,E),b=x*2;return oh(x,E)+fm(b,S)}let m=s*2,v=Xh,g=oc,p=ac;if(Nl(m,g)){let x=oh(s,p),b=fm(m,g);return Ho(s,v,e),l(x,b,!1,u,d+s,e)}else{let x=pm(s),b=mm(s,p),S=x,E=b,y,C,A,D;if(c&&(A=e,D=t,Ho(S,v,A),Ho(E,v,D),y=c(A),C=c(D),C<y)){S=b,E=x;let Q=y;y=C,C=Q,A=D}A||(A=e,Ho(S,v,A));let I=Nl(S*2,g),R=a(A,I,y,u+1,d+S),B;if(R===2){let Q=h(S),re=f(S)-Q;B=l(Q,re,!0,u+1,d+S,A)}else B=R&&n(S,o,a,l,c,d,u+1);if(B)return!0;D=t,Ho(E,v,D);let G=Nl(E*2,g),j=a(D,G,C,u+1,d+E),ee;if(j===2){let Q=h(E),re=f(E)-Q;ee=l(Q,re,!0,u+1,d+E,D)}else ee=j&&n(E,o,a,l,c,d,u+1);return!!ee}}}(),Zte=function(){let e=new Qa,t=new Qa,i=new at,r=new sa,n=new sa;return function s(o,a,l,c,d=null){let u=o*2,h=Xh,f=oc,m=ac;if(d===null&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,c),d=r),Nl(u,f)){let v=a,g=v.index,p=v.attributes.position,x=l.index,b=l.attributes.position,S=oh(o,m),E=fm(u,f);if(i.copy(c).invert(),l.boundsTree)return Ho(o,h,n),n.matrix.copy(i),n.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:y=>n.intersectsBox(y),intersectsTriangle:y=>{y.a.applyMatrix4(c),y.b.applyMatrix4(c),y.c.applyMatrix4(c),y.needsUpdate=!0;for(let C=S*3,A=(E+S)*3;C<A;C+=3)if(ko(t,C,g,p),t.needsUpdate=!0,y.intersectsTriangle(t))return!0;return!1}});for(let y=S*3,C=E+S*3;y<C;y+=3){ko(e,y,g,p),e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let A=0,D=x.count;A<D;A+=3)if(ko(t,A,x,b),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let v=o+8,g=m[o+6];return Ho(v,h,Vd),!!(d.intersectsBox(Vd)&&s(v,a,l,c,d)||(Ho(g,h,Vd),d.intersectsBox(Vd)&&s(g,a,l,c,d)))}}}();function Ty(e,t,i,r){return Ho(e,t,Vd),i.intersectBox(Vd,r)}var L_=[],h0,Xh,oc,ac;function sp(e){h0&&L_.push(h0),h0=e,Xh=new Float32Array(e),oc=new Uint16Array(e),ac=new Uint32Array(e)}function mv(){h0=null,Xh=null,oc=null,ac=null,L_.length&&sp(L_.pop())}var Hw=Symbol("skip tree generation"),Gw=new fr,Vw=new fr,fd=new at,kc=new sa,Lf=new sa,If=new N,gv=new N,$te=new N,Jte=new N,eie=new N,X3=new fr,Co=new WB(()=>new Qa),kr=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),kr.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let i=e.geometry,r=e._roots,n=i.getIndex(),s;return t.cloneBuffers?s={roots:r.map(o=>o.slice()),index:n.array.slice()}:s={roots:r,index:n.array},s}static deserialize(e,t,i={}){if(typeof i=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),kr.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});i={setIndex:!0,...i};let{index:r,roots:n}=e,s=new kr(t,{...i,[Hw]:!0});if(s._roots=n,i.setIndex){let o=t.getIndex();if(o===null){let a=new Gt(e.index,1,!1);t.setIndex(a)}else o.array!==r&&(o.array.set(r),o.needsUpdate=!0)}return s}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[Hw]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[Hw]||(this._roots=Ute(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new fr))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,i=t.index.array,r=t.attributes.position,n=r.array,s=r.offset||0,o=3;r.isInterleavedBufferAttribute&&(o=r.data.stride);let a,l,c,d,u=0,h=this._roots;for(let m=0,v=h.length;m<v;m++)a=h[m],l=new Uint32Array(a),c=new Uint16Array(a),d=new Float32Array(a),f(0,u),u+=a.byteLength;function f(m,v,g=!1){let p=m*2;if(c[p+15]===65535){let x=l[m+6],b=c[p+14],S=1/0,E=1/0,y=1/0,C=-1/0,A=-1/0,D=-1/0;for(let I=3*x,R=3*(x+b);I<R;I++){let B=i[I]*o+s,G=n[B+0],j=n[B+1],ee=n[B+2];G<S&&(S=G),G>C&&(C=G),j<E&&(E=j),j>A&&(A=j),ee<y&&(y=ee),ee>D&&(D=ee)}return d[m+0]!==S||d[m+1]!==E||d[m+2]!==y||d[m+3]!==C||d[m+4]!==A||d[m+5]!==D?(d[m+0]=S,d[m+1]=E,d[m+2]=y,d[m+3]=C,d[m+4]=A,d[m+5]=D,!0):!1}else{let x=m+8,b=l[m+6],S=x+v,E=b+v,y=g,C=!1,A=!1;e?y||(C=e.has(S),A=e.has(E),y=!C&&!A):(C=!0,A=!0);let D=y||C,I=y||A,R=!1;D&&(R=f(x,v,y));let B=!1;I&&(B=f(b,v,y));let G=R||B;if(G)for(let j=0;j<3;j++){let ee=x+j,Q=b+j,re=d[ee],z=d[ee+3],X=d[Q],Y=d[Q+3];d[m+j]=re<X?re:X,d[m+j+3]=z>Y?z:Y}return G}}}traverse(e,t=0){let i=this._roots[t],r=new Uint32Array(i),n=new Uint16Array(i);s(0);function s(o,a=0){let l=o*2,c=n[l+15]===65535;if(c){let d=r[o+6],u=n[l+14];e(a,c,new Float32Array(i,o*4,6),d,u)}else{let d=o+8,u=r[o+6],h=r[o+7];e(a,c,new Float32Array(i,o*4,6),h)||(s(d,a+1),s(u,a+1))}}}raycast(e,t=hc){let i=this._roots,r=this.geometry,n=[],s=t.isMaterial,o=Array.isArray(t),a=r.groups,l=s?t.side:t;for(let c=0,d=i.length;c<d;c++){let u=o?t[a[c].materialIndex].side:l,h=n.length;if(sp(i[c]),D_(0,r,u,e,n),mv(),o){let f=a[c].materialIndex;for(let m=h,v=n.length;m<v;m++)n[m].face.materialIndex=f}}return n}raycastFirst(e,t=hc){let i=this._roots,r=this.geometry,n=t.isMaterial,s=Array.isArray(t),o=null,a=r.groups,l=n?t.side:t;for(let c=0,d=i.length;c<d;c++){let u=s?t[a[c].materialIndex].side:l;sp(i[c]);let h=O_(0,r,u,e);mv(),h!=null&&(o==null||h.distance<o.distance)&&(o=h,s&&(h.face.materialIndex=a[c].materialIndex))}return o}intersectsGeometry(e,t){let i=this.geometry,r=!1;for(let n of this._roots)if(sp(n),r=Zte(0,i,e,t),mv(),r)break;return r}shapecast(e,t,i){let r=this.geometry;if(e instanceof Function){if(t){let u=t;t=(h,f,m,v)=>{let g=f*3;return u(h,g,g+1,g+2,m,v)}}e={boundsTraverseOrder:i,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let n=Co.getPrimitive(),{boundsTraverseOrder:s,intersectsBounds:o,intersectsRange:a,intersectsTriangle:l}=e;if(a&&l){let u=a;a=(h,f,m,v,g)=>u(h,f,m,v,g)?!0:q3(h,f,r,l,m,v,n)}else a||(l?a=(u,h,f,m)=>q3(u,h,r,l,f,m,n):a=(u,h,f)=>f);let c=!1,d=0;for(let u of this._roots){if(sp(u),c=Kte(0,r,o,a,s,d),mv(),c)break;d+=u.byteLength}return Co.releasePrimitive(n),c}bvhcast(e,t,i){let{intersectsRanges:r,intersectsTriangles:n}=i,s=this.geometry.index,o=this.geometry.attributes.position,a=e.geometry.index,l=e.geometry.attributes.position;fd.copy(t).invert();let c=Co.getPrimitive(),d=Co.getPrimitive();if(n){let h=function(f,m,v,g,p,x,b,S){for(let E=v,y=v+g;E<y;E++){ko(d,E*3,a,l),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let C=f,A=f+m;C<A;C++)if(ko(c,C*3,s,o),c.needsUpdate=!0,n(c,d,C,E,p,x,b,S))return!0}return!1};if(r){let f=r;r=function(m,v,g,p,x,b,S,E){return f(m,v,g,p,x,b,S,E)?!0:h(m,v,g,p,x,b,S,E)}}else r=h}e.getBoundingBox(Vw),Vw.applyMatrix4(t);let u=this.shapecast({intersectsBounds:h=>Vw.intersectsBox(h),intersectsRange:(h,f,m,v,g,p)=>(Gw.copy(p),Gw.applyMatrix4(fd),e.shapecast({intersectsBounds:x=>Gw.intersectsBox(x),intersectsRange:(x,b,S,E,y)=>r(h,f,x,b,v,g,E,y)}))});return Co.releasePrimitive(c),Co.releasePrimitive(d),u}intersectsBox(e,t){return kc.set(e.min,e.max,t),kc.needsUpdate=!0,this.shapecast({intersectsBounds:i=>kc.intersectsBox(i),intersectsTriangle:i=>kc.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,i={},r={},n=0,s=1/0){e.boundingBox||e.computeBoundingBox(),kc.set(e.boundingBox.min,e.boundingBox.max,t),kc.needsUpdate=!0;let o=this.geometry,a=o.attributes.position,l=o.index,c=e.attributes.position,d=e.index,u=Co.getPrimitive(),h=Co.getPrimitive(),f=gv,m=$te,v=null,g=null;r&&(v=Jte,g=eie);let p=1/0,x=null,b=null;return fd.copy(t).invert(),Lf.matrix.copy(fd),this.shapecast({boundsTraverseOrder:S=>kc.distanceToBox(S),intersectsBounds:(S,E,y)=>y<p&&y<s?(E&&(Lf.min.copy(S.min),Lf.max.copy(S.max),Lf.needsUpdate=!0),!0):!1,intersectsRange:(S,E)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:y=>Lf.distanceToBox(y),intersectsBounds:(y,C,A)=>A<p&&A<s,intersectsRange:(y,C)=>{for(let A=y*3,D=(y+C)*3;A<D;A+=3){ko(h,A,d,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let I=S*3,R=(S+E)*3;I<R;I+=3){ko(u,I,l,a),u.needsUpdate=!0;let B=u.distanceToTriangle(h,f,v);if(B<p&&(m.copy(f),g&&g.copy(v),p=B,x=I/3,b=A/3),B<n)return!0}}}});{let y=d?d.count:c.count;for(let C=0,A=y;C<A;C+=3){ko(h,C,d,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let D=S*3,I=(S+E)*3;D<I;D+=3){ko(u,D,l,a),u.needsUpdate=!0;let R=u.distanceToTriangle(h,f,v);if(R<p&&(m.copy(f),g&&g.copy(v),p=R,x=D/3,b=C/3),R<n)return!0}}}}}),Co.releasePrimitive(u),Co.releasePrimitive(h),p===1/0?null:(i.point?i.point.copy(m):i.point=m.clone(),i.distance=p,i.faceIndex=x,r&&(r.point?r.point.copy(g):r.point=g.clone(),r.point.applyMatrix4(fd),m.applyMatrix4(fd),r.distance=m.sub(r.point).length(),r.faceIndex=b),i)}closestPointToPoint(e,t={},i=0,r=1/0){let n=i*i,s=r*r,o=1/0,a=null;if(this.shapecast({boundsTraverseOrder:c=>(If.copy(e).clamp(c.min,c.max),If.distanceToSquared(e)),intersectsBounds:(c,d,u)=>u<o&&u<s,intersectsTriangle:(c,d)=>{c.closestPointToPoint(e,If);let u=e.distanceToSquared(If);return u<o&&(gv.copy(If),o=u,a=d),u<n}}),o===1/0)return null;let l=Math.sqrt(o);return t.point?t.point.copy(gv):t.point=gv.clone(),t.distance=l,t.faceIndex=a,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{Ho(0,new Float32Array(t),X3),e.union(X3)}),e}},Y3=kr.prototype.raycast;kr.prototype.raycast=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycast" has changed. See docs for new signature.');let[t,i,r,n]=e;return Y3.call(this,r,t.material).forEach(s=>{s=VB(s,t,i),s&&n.push(s)}),n}else return Y3.apply(this,e)};var Q3=kr.prototype.raycastFirst;kr.prototype.raycastFirst=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycastFirst" has changed. See docs for new signature.');let[t,i,r]=e;return VB(Q3.call(this,r,t.material),t,i)}else return Q3.apply(this,e)};var K3=kr.prototype.closestPointToPoint;kr.prototype.closestPointToPoint=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "closestPointToPoint" has changed. See docs for new signature.'),e.unshift();let t=e[1],i={};return e[1]=i,K3.apply(this,e),t&&t.copy(i.point),i.distance}else return K3.apply(this,e)};var Z3=kr.prototype.closestPointToGeometry;kr.prototype.closestPointToGeometry=function(...e){let t=e[2],i=e[3];if(t&&t.isVector3||i&&i.isVector3){console.warn('MeshBVH: The function signature and results frame for "closestPointToGeometry" has changed. See docs for new signature.');let r={},n={},s=e[1];return e[2]=r,e[3]=n,Z3.apply(this,e),t&&t.copy(r.point),i&&i.copy(n.point).applyMatrix4(s),r.distance}else return Z3.apply(this,e)};var $3=kr.prototype.refit;kr.prototype.refit=function(...e){let t=e[0],i=e[1];if(i&&(i instanceof Set||Array.isArray(i))){console.warn('MeshBVH: The function signature for "refit" has changed. See docs for new signature.');let r=new Set;i.forEach(n=>r.add(n)),t&&t.forEach(n=>r.add(n)),$3.call(this,r)}else $3.apply(this,e)};["intersectsGeometry","shapecast","intersectsBox","intersectsSphere"].forEach(e=>{let t=kr.prototype[e];kr.prototype[e]=function(...i){return(i[0]===null||i[0].isMesh)&&(i.shift(),console.warn(`MeshBVH: The function signature for "${e}" has changed and no longer takes Mesh. See docs for new signature.`)),t.apply(this,i)}});var Rf=p1(sH()),tie=.5*(Math.sqrt(3)-1),Nf=(3-Math.sqrt(3))/6,iie=1/3,To=1/6,Tp=e=>Math.floor(e)|0,J3=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),Ww=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function qw(e=Math.random){let t=qB(e),i=new Float64Array(t).map(n=>J3[n%12*2]),r=new Float64Array(t).map(n=>J3[n%12*2+1]);return function(n,s){let o=0,a=0,l=0,c=(n+s)*tie,d=Tp(n+c),u=Tp(s+c),h=(d+u)*Nf,f=d-h,m=u-h,v=n-f,g=s-m,p,x;v>g?(p=1,x=0):(p=0,x=1);let b=v-p+Nf,S=g-x+Nf,E=v-1+2*Nf,y=g-1+2*Nf,C=d&255,A=u&255,D=.5-v*v-g*g;if(D>=0){let B=C+t[A],G=i[B],j=r[B];D*=D,o=D*D*(G*v+j*g)}let I=.5-b*b-S*S;if(I>=0){let B=C+p+t[A+x],G=i[B],j=r[B];I*=I,a=I*I*(G*b+j*S)}let R=.5-E*E-y*y;if(R>=0){let B=C+1+t[A+1],G=i[B],j=r[B];R*=R,l=R*R*(G*E+j*y)}return 70*(o+a+l)}}function rie(e=Math.random){let t=qB(e),i=new Float64Array(t).map(s=>Ww[s%12*3]),r=new Float64Array(t).map(s=>Ww[s%12*3+1]),n=new Float64Array(t).map(s=>Ww[s%12*3+2]);return function(s,o,a){let l,c,d,u,h=(s+o+a)*iie,f=Tp(s+h),m=Tp(o+h),v=Tp(a+h),g=(f+m+v)*To,p=f-g,x=m-g,b=v-g,S=s-p,E=o-x,y=a-b,C,A,D,I,R,B;S>=E?E>=y?(C=1,A=0,D=0,I=1,R=1,B=0):S>=y?(C=1,A=0,D=0,I=1,R=0,B=1):(C=0,A=0,D=1,I=1,R=0,B=1):E<y?(C=0,A=0,D=1,I=0,R=1,B=1):S<y?(C=0,A=1,D=0,I=0,R=1,B=1):(C=0,A=1,D=0,I=1,R=1,B=0);let G=S-C+To,j=E-A+To,ee=y-D+To,Q=S-I+2*To,re=E-R+2*To,z=y-B+2*To,X=S-1+3*To,Y=E-1+3*To,K=y-1+3*To,Z=f&255,V=m&255,fe=v&255,ae=.6-S*S-E*E-y*y;if(ae<0)l=0;else{let ue=Z+t[V+t[fe]];ae*=ae,l=ae*ae*(i[ue]*S+r[ue]*E+n[ue]*y)}let ne=.6-G*G-j*j-ee*ee;if(ne<0)c=0;else{let ue=Z+C+t[V+A+t[fe+D]];ne*=ne,c=ne*ne*(i[ue]*G+r[ue]*j+n[ue]*ee)}let we=.6-Q*Q-re*re-z*z;if(we<0)d=0;else{let ue=Z+I+t[V+R+t[fe+B]];we*=we,d=we*we*(i[ue]*Q+r[ue]*re+n[ue]*z)}let me=.6-X*X-Y*Y-K*K;if(me<0)u=0;else{let ue=Z+1+t[V+1+t[fe+1]];me*=me,u=me*me*(i[ue]*X+r[ue]*Y+n[ue]*K)}return 32*(l+c+d+u)}}function qB(e){let t=new Uint8Array(512);for(let i=0;i<512/2;i++)t[i]=i;for(let i=0;i<512/2-1;i++){let r=i+~~(e()*(256-i)),n=t[i];t[i]=t[r],t[r]=n}for(let i=256;i<512;i++)t[i]=t[i-256];return t}var Js=new Tn,nie=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let r=0;r<e.count;r+=3){let n=1;Js.a.fromBufferAttribute(e,r),Js.b.fromBufferAttribute(e,r+1),Js.c.fromBufferAttribute(e,r+2),n*=Js.getArea(),t[r/3]=n}this.distribution=new Float32Array(e.count/3);let i=0;for(let r=0;r<t.length;r++)i+=t[r],this.distribution[r]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let i=this.distribution[this.distribution.length-1],r=this.binarySearch(this.randomFunction()*i);return this.sampleFace(r,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,i=0,r=t.length-1,n=-1;for(;i<=r;){let s=Math.ceil((i+r)/2);if(s===0||t[s-1]<=e&&t[s]>e){n=s;break}else e<t[s]?r=s-1:i=s+1}return n}sampleFace(e,t,i){let r=this.randomFunction(),n=this.randomFunction();return r+n>1&&(r=1-r,n=1-n),Js.a.fromBufferAttribute(this.positionAttribute,e*3),Js.b.fromBufferAttribute(this.positionAttribute,e*3+1),Js.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(Js.a,r).addScaledVector(Js.b,n).addScaledVector(Js.c,1-(r+n)),Js.getNormal(i),this}},sie=p1(qR()),oie=new at,aie=new at,lie=new at,My;(e=>{function t(i){return i&&i.__isSPEObject}e.is=t})(My||(My={}));var wA=e=>class extends e{constructor(){super(...arguments),this.hiddenMatrix=new at,this.matrixWorldRigid=new at,this.shearScale=new at,this.shearScaleInv=new at}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof Di&&(t=t.uuid);let i=this;for(;i.parent;){if(i.parent.uuid===t)return!0;i=i.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let i of this.children)i.updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),i)for(let n of this.children)n.updateWorldMatrix(!1,!0)}traverseObject(t,i=0){if(t(this,i)!==!0)for(let r of this.children)My.is(r)&&r.traverseObject(t,i+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,i=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:r,v:n,q:s}=(0,sie.SVD)(i),o=oie.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),a=aie.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),l=lie.copy(a).transpose();this.shearScale.makeScale(s[0],s[1],s[2]).multiply(l).premultiply(a),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),s.every(c=>Math.abs(s[0]-c)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,i){this.updateWorldMatrix(!0,!1);let r=new at().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),r.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof at?t.hiddenMatrix.premultiply(r):t.applyMatrix4(r),t.updateWorldMatrix(!1,!1),this.add(t),i!==void 0&&(this.children.pop(),this.children.splice(i,0,t)),this}},cie=class extends wA(Di){},uie=e=>e.type==="Mesh",ou=class extends cie{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let i=this.children[e];(i==null?void 0:i.object)!==t&&(i&&this.remove(i),i=new ou(t),this.add(i),i.matrixAutoUpdate=!1,i.matrix=t.matrix,i.hiddenMatrix=t.hiddenMatrix),i.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return uie(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},Qc=new N,Kc=new N,ah=new at,XB=[new N(-1,1,1),new N(-1,-1,1),new N(1,-1,1),new N(1,1,1),new N(-1,1,-1),new N(-1,-1,-1),new N(1,-1,-1),new N(1,1,-1)],die=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],hie=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],eD=(e,t,i)=>{e.updateEntityBoxSize(Qc,Kc),ah.copy(t).multiply(e.matrixWorld),Kc.x===0&&Kc.y===0&&Kc.z===0?i.push(new N(Qc.x,Qc.y,Qc.z).applyMatrix4(ah)):XB.forEach(r=>{i.push(r.clone().multiply(Kc).add(Qc).applyMatrix4(ah))})},tD=class extends fr{constructor(){super(...arguments),this.matrix=new at,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let i=new at().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t,i=!1){let r=[];return i===!0?e.traverseEntity(n=>{n.visible&&eD(n,t,r)}):eD(e,t,r),this.setFromPoints(r)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(ah.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Kc).multiplyScalar(.5),this.getCenter(Qc),ah.copy(this.matrix).setPosition(Qc),this.vertices=XB.map(e=>e.clone().multiply(Kc).applyMatrix4(ah))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=die.map(([e,t])=>new Os(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new N))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=hie.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},Vl={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},sr;(e=>{function t(i){return i&&i.__isEntity}e.is=t})(sr||(sr={}));var Kn=e=>sr.is(e),YB=e=>class extends wA(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new tD,this._recursiveBBox=new tD,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get __isEntity(){return!0}entityChildren(t){let i=this.children[t];if(sr.is(i))return i}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let i=t.parent;if(sr.is(i))t=i;else return}return t}forInstancesRec(t){this.instances.forEach(i=>{i.disposed||t(i),i.forInstancesRec(t)})}super_Entity(t,i){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=i,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,i,r=!1){if(!(this.data.states.length===0&&!r)){for(let n of this.data.states)su.toOps(this.data,n.data).forEach(s=>{let o=c_.replaceProps(s,this.data);this.updateByPatchedOp(o,this.data,i)});if(t!==null){let n=this.data.states.data(t);n&&(this.dataPatched=su.patch(this.data,n),su.toOps(this.data,n).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,i)}))}else this.dataPatched=this.data;r&&this.updateTransformState(this.dataPatched),this.stateSelection=t}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,i){t.setScalar(0),i.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{Kn(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let i;return this.traverseEntity(r=>{r.uuid===t&&(i=r)}),i}traverseSortNextHelper(){let t=this.parent;if(t){let i=t.children,r=i.indexOf(this)+1;if(sr.is(i[r]))return i[r];if(sr.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&sr.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let i=this;for(;t>0&&i!==null;)i=i.parent,t-=1;return i}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let i=this.parent;for(;i;){if(t===i)return!0;i=i.parent}return!1}countToAccestor(t){let i=0,r=this;for(;r!==t;){if(r===null)return-1;r=r.parent,i+=1}return i}forEachEntity(t){for(let i of this.children)Kn(i)&&t(i)}traverseEntityAncestors(t){this.traverseAncestors(i=>{sr.is(i)&&t(i)})}traverseEntity(t,i=0){if(t(this,i)!==!0)for(let r of this.children)Kn(r)&&r.traverseEntity(t,i+1)}traverseVisibleEntity(t){t(this);for(let i of this.children)Kn(i)&&i.visible&&i.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}copy(t,i=!0){return super.copy(t,!1),this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>Kn(t))}isAncestorOf(t){if(this.uuid===t)return!1;let i=!1;return this.traverseEntity(r=>{r.uuid===t&&(i=!0)}),i}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let i={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return l_(i,t)}updateTransformState(t){let i=!1;return t.position&&(this.position.fromArray(t.position),i=!0),t.rotation&&(this.rotation.fromArray(t.rotation),i=!0),t.scale&&(i=!0,this.scale.fromArray(t.scale)),t.hiddenMatrix!==void 0&&(i=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??Ch.identity)),i&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(r=>{r.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),i}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)sr.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{sr.is(t)&&t.disposeRecursively()})}toState(t=[]){let i={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return l_(i,t)}updateByOp(t,i,r,n){let s=this.data;this.data=i;let o=t,a=nu(t.path,["states","*"]);if(a!==null){if(t.type===0){let[l]=a;if((this==null?void 0:this.stateSelection)===l){let c={...t.props};if(Object.values(t.props).some(d=>d===void 0)){let d=this.data;if(d!==void 0){let u=$o.zoom(d,t.path.slice(2));if(u)for(let h in t.props)t.props[h]===void 0&&h in u&&(c[h]=u[h])}}o={...t,props:c,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:d,...u}=l;l=u}if(t.props.material!==void 0&&"material"in l){let{material:d,...u}=l;l=u}let c=$o.removeOverridden(t.path,t.props,l);o={...t,props:c}}}if(this.updateByPatchedOpBase(o,su.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),r),nu(t.path,["overrides"])){let l=[],c=[...t.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&c[0]==="descendants";)l.push(c[1]),c.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let d of Object.keys(t.props)){l[l.length-1]=d;let u=r.scene.findInstance([this.uuid,...l]);u&&(u.overrideData=t.props[d],u.updateState(pu.apply(u.component.data,u.overrideData),r))}}else{let d=r.scene.findInstance([this.uuid,...l]);if(d){let u=$o.zoom(d.component.data,c);if(t={...t,path:c},t.type===0){let h=t.props;if(u)for(let[f,m]of Object.entries(t.props))m===void 0&&(h===t.props&&(h={...t.props}),h[f]=u[f]);t={...t,props:h}}d.overrideData=yy.resolve(i.overrides,l),d.updateByOp(t,Jn.applySimple(d.data,t),r,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let c;for(let d of Mh.rootOverrideProps)d in t.props&&(c===void 0&&(c={}),c[d]=t.props[d]);c&&(l={...t,props:c})}else for(let c of Mh.rootOverrideProps)if(nu(t.path,[c])){l=t;break}l!==void 0&&this.instances.forEach(c=>{if(c.isInstanceRoot){let d=pu.filterOp(c.overrideData,l);d&&c.updateByOp(d,Jn.applySimple(c.data,d),r,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let d=pu.filterOp(c.overrideData,t);if(d){let u;s===c.data&&t===d?u=i:u=Jn.applySimple(c.data,d),c.updateByOp(d,u,r,!0)}}})}}updateByPatchedOpBase(t,i,r){if(this.dataPatched=i,t.path.length===0&&t.type===0)t.props.type!==void 0&&!Cu.is(t.props.type)&&Vl.changeEntityProptotype(this,i,r);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){Vl.changeEntityProptotype(this,i,r);for(let n of this.children)sr.is(n)&&n.updateVisible()}this.updateByPatchedOp(t,i,r)}updateByPatchedOp(t,i,r){if(t.path.length===0&&t.type===0&&this.updateState(t.props,r),nu(t.path,["cloner"])!==null){let n=Jn.drop(t,1);n.path.length===0&&n.type===0&&n.props.disabled===!0?this.setFromClonerState(null,r):this.cloner?this.cloner.updateState(i.cloner,r.scene):(this.setFromClonerState(i.cloner,r),this.expandCloner(r.scene)),this.updateVisible()}}updateVisible(){var t;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((t=this.dataPatched.cloner)==null?void 0:t.hideBase)!==!0)}updateState_Entity(t,i){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,i),this.updateVisible()),this.updateTransformState(t)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof Vl.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,i){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):(this.cloner===void 0&&(this.cloner=new Vl.Cloner(this,t),i.scene.addPendingExpandCloner(this)),this.cloner.updateState(t,i.scene)))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}},fie=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},e.parameters),r=i.width/2,n=i.radiusTop??r,s=i.radiusBottom??r;return n===s?(n=r,s=r):n>s?(n=r,s=s*r/n):(n=n*r/s,s=r),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),radiusTop:n,radiusBottom:s})}}static build(e){let{width:t,depth:i,height:r,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,radiusTop:c,radiusBottom:d,cornerRadius:u,cornerSegments:h,hollow:f}=e.parameters,m;return u||f?m=new QB(c,d,r,n,s,o,a,l*Math.PI/180,u,u,h,f):m=new z2(c,d,r,n,s,o,a,l*Math.PI/180),m.scale(1,1,i/t),Object.assign(m,{userData:{...e,type:"CylinderGeometry"}})}};function bl(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function iD(e){return new de(e.y,-e.x)}var QB=class extends It{constructor(e,t,i,r,n,s,o,a,l,c,d,u,h=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,i=i||1,r=Math.floor(r)||8,n=Math.floor(n)||1,s=s!==void 0?s:!1,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI*2,s&&(l=0,c=0);let f=[],m=[],v=[],g=[],p=0,x=i/2,b=new N,S=new N;h&&e==0&&(e=l),h&&t==0&&(t=c);let E=new de(e,x),y=new de(t,-x),C=null,A=null,D=null,I=null,R=E.clone().sub(y),B=0,G=0,j=0;u>0&&(B=Math.min(e,t)*(1-u),G=e-B,j=t-B);let ee=E.clone();ee.x-=B;let Q=Math.PI-R.angle(),re=R.angle(),z=Math.tan(re/2),X=Math.tan(Q/2),Y=z+X,K=u?Y:X,Z=u?Y:z;if(l=Math.min(l,(e-G)/K,R.length()/Y),c=Math.min(c,(t-j)/Z,R.length()/Y),l>0){let me=l/z;C=E.clone().sub(new de(me,l)),u&&(D=C.clone(),D.x-=B-Y*l),E.sub(R.clone().setLength(me))}if(c>0){let me=c/X;A=y.clone().sub(new de(me,-c)),y.add(R.clone().setLength(me)),u&&(I=A.clone(),I.x-=B-Y*c,ee.sub(R.clone().setLength(me)))}R=E.clone().sub(y);let V=R.length()<.5,fe=[];for(let me=0;me<=r;me++){let ue=[],xe=me/r,Le=xe*a+o,Re=new de(Math.sin(Le),Math.cos(Le));I&&A?(ae(ue,xe,Re,Q,c,I,-1,!0),ae(ue,xe,Re,re,c,A,-1,!1)):A?(ne(ue,Re,A.x,0,-1),ae(ue,xe,Re,re,c,A,-1,!1)):s||ne(ue,Re,t,j,-1);let Oe=iD(R).normalize();if(bl(Oe,Re,b),!V)for(let We=0;We<=n;We++){let He=We/n,ye=R.clone().multiplyScalar(He).add(y);bl(ye,Re,S),m.push(S.x,S.y,S.z),v.push(b.x,b.y,b.z),g.push(xe,.5+S.y/i),ue.push(p++)}if(D&&C?(ae(ue,xe,Re,Q,l,C,1,!1),ae(ue,xe,Re,re,l,D,1,!0)):C?(ae(ue,xe,Re,Q,l,C,1,!1),ne(ue,Re,C.x,0,1)):s||ne(ue,Re,e,G,1),u&&!V){let We=iD(R).multiplyScalar(-1).normalize();bl(We,Re,b);for(let He=0;He<=n;He++){let ye=He/n,Qe=R.clone().multiplyScalar(-ye).add(ee);bl(Qe,Re,S),m.push(S.x,S.y,S.z),v.push(b.x,b.y,b.z),g.push(xe,.5+S.y/i),ue.push(p++)}}u&&!s&&ue.push(ue[0]),fe.push(ue)}for(let me=0;me<fe.length-1;me++)for(let ue=0;ue<fe[0].length-1;ue++){if(s&&u&&ue==n)continue;let xe=fe[me][ue],Le=fe[me+1][ue],Re=fe[me+1][ue+1],Oe=fe[me][ue+1],We=m[Re*3+0],He=m[Re*3+2];f.push(xe,Le,Oe),(We!=0||He!=0)&&f.push(Le,Re,Oe)}a<Math.PI*2&&(we(-1,fe[0],o),we(1,fe[fe.length-1],o+a)),this.setIndex(f),this.setAttribute("position",new ut(m,3)),this.setAttribute("normal",new ut(v,3)),this.setAttribute("uv",new ut(g,2));function ae(me,ue,xe,Le,Re,Oe,We,He){for(let ye=0;ye<d+1;ye++){let Qe=ye/d,rt=We<0?Qe:1-Qe;He&&(rt-=1),rt*=Le;let Je=new de(Math.sin(rt),Math.cos(rt)*We),Bt=Je.clone().multiplyScalar(Re).add(Oe);bl(Bt,xe,S),m.push(S.x,S.y,S.z),bl(Je,xe,b),v.push(b.x,b.y,b.z),g.push(ue,.5+S.y/i),me.push(p++)}}function ne(me,ue,xe,Le,Re){let Oe=new N,We=new de,He=[xe,Le];Re<0&&He.reverse();for(let ye of He)We.set(ye,x*Re),bl(We,ue,Oe),m.push(Oe.x,Oe.y,Oe.z),v.push(0,Re,0),g.push(.5,.5),me.push(p++)}function we(me,ue,xe){let Le=new de(Math.sin(xe),Math.cos(xe)),Re=new de(-Math.cos(xe),Math.sin(xe)),Oe=new N,We=me<0?(Qe,rt,Je)=>f.push(Qe,rt,Je):(Qe,rt,Je)=>f.push(Qe,Je,rt),He=new de((e+t+G+j)/4,0);bl(He,Le,Oe),m.push(Oe.x,Oe.y,Oe.z),v.push(Re.x,0,Re.y),g.push(.5,.5);let ye=p++;for(let Qe of ue){let rt=m.slice(Qe*3,Qe*3+3);m.push(...rt),v.push(Re.x,0,Re.y);let Je=g.slice(Qe*2,Qe*2+2);g.push(...Je),p++}for(let Qe=ye+1;Qe<p-1;Qe++)We(ye,Qe,Qe+1);We(ye,p-1,ye+1)}}},pie=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,depth:i,height:r,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:d,cornerSegments:u}=e.parameters,h;return c>0||d>0||l<360?h=new QB(0,t/2,r,n,s,o,a,l*Math.PI/180,c,d,u,0,!0):h=new vN(t/2,r,n,s,o),h.scale(1,1,i/t),Object.assign(h,{userData:{...e,type:"ConeGeometry"}})}},mie=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,widthSegments:n,heightSegments:s,depthSegments:o,cornerRadius:a,cornerSegments:l}=e.parameters,c;return a==0?c=new ia(t,i,r,n,s,o):c=new gie(t,i,r,n,s,o,a,l),Object.assign(c,{userData:{...e,type:"CubeGeometry"}})}},Xw=Math.PI/2,gie=class extends It{constructor(e=1,t=1,i=1,r=1,n=1,s=1,o=0,a=4){super(),this.type="BoxGeometry";let l=this;r=Math.floor(r),n=Math.floor(n),s=Math.floor(s),a=Math.floor(a),o=Math.min(o,e/2,t/2,i/2);let c=[],d=[],u=[],h=[],f=0,m=0;v("z","y","x",-1,-1,i,t,e,s,n,0),v("z","y","x",1,-1,i,t,-e,s,n,1),v("x","z","y",1,1,e,i,t,r,s,2),v("x","z","y",1,-1,e,i,-t,r,s,3),v("x","y","z",1,-1,e,t,i,r,n,4),v("x","y","z",-1,-1,e,t,-i,r,n,5),o>0&&(g("z","y","x",-1,-1,1,i,t,e,s,0),g("z","y","x",1,-1,-1,i,t,e,s,1),g("z","y","x",-1,1,-1,i,t,e,s,1),g("z","y","x",1,1,1,i,t,e,s,0),g("x","y","z",-1,-1,-1,e,t,i,r,0),g("x","y","z",1,-1,1,e,t,i,r,1),g("x","y","z",-1,1,1,e,t,i,r,0),g("x","y","z",1,1,-1,e,t,i,r,1),g("y","x","z",-1,-1,1,t,e,i,n,0),g("y","x","z",1,-1,-1,t,e,i,n,1),g("y","x","z",1,1,1,t,e,i,n,1),g("y","x","z",-1,1,-1,t,e,i,n,0),p(1,1,1),p(-1,1,1),p(1,-1,1),p(-1,-1,1),p(1,1,-1),p(-1,1,-1),p(1,-1,-1),p(-1,-1,-1)),this.setIndex(c),this.setAttribute("position",new ut(d,3)),this.setAttribute("normal",new ut(u,3)),this.setAttribute("uv",new ut(h,2));function v(x,b,S,E,y,C,A,D,I,R,B){let G=(C-2*o)/I,j=(A-2*o)/R,ee=C/2-o,Q=A/2-o,re=D/2,z=I+1,X=R+1,Y=0,K=0,Z=new N;for(let V=0;V<X;V++){let fe=V*j-Q;for(let ae=0;ae<z;ae++){let ne=ae*G-ee;Z[x]=ne*E,Z[b]=fe*y,Z[S]=re,d.push(Z.x,Z.y,Z.z),Z[x]=0,Z[b]=0,Z[S]=D>0?1:-1,u.push(Z.x,Z.y,Z.z),h.push(ae/I),h.push(1-V/R),Y+=1}}for(let V=0;V<R;V++)for(let fe=0;fe<I;fe++){let ae=f+fe+z*V,ne=f+fe+z*(V+1),we=f+(fe+1)+z*(V+1),me=f+(fe+1)+z*V;c.push(ae,ne,me),c.push(ne,we,me),K+=6}l.addGroup(m,K,B),m+=K,f+=Y}function g(x,b,S,E,y,C,A,D,I,R,B){let G=(A-2*o)/R,j=A/2-o,ee=D/2-o,Q=I/2,re=R+1,z=0,X=0,Y=new N,K=new N;for(let Z=0;Z<a+1;Z++){let V=Z/a*Xw,fe=Math.sin(V)*o,ae=(1-Math.cos(V))*o,ne=Math.sin(V),we=Math.cos(V);Y[b]=(ee+fe)*y,Y[S]=(Q-ae)*C,K[x]=0,K[b]=ne*Math.sign(Y[b]),K[S]=we*Math.sign(Y[S]);for(let me=0;me<re;me++){let ue=me*G-j;Y[x]=ue*E,d.push(Y.x,Y.y,Y.z),u.push(K.x,K.y,K.z),h.push(me/R),h.push(0),z+=1}}for(let Z=0;Z<a;Z++)for(let V=0;V<R;V++){let fe=f+V+re*Z,ae=f+V+re*(Z+1),ne=f+(V+1)+re*(Z+1),we=f+(V+1)+re*Z;c.push(fe,ae,we),c.push(ae,ne,we),X+=6}l.addGroup(m,X,B),m+=X,f+=z}function p(x,b,S){let E=new N,y=new N(e/2,t/2,i/2);y.subScalar(o);let C=[],A=x*b*S>0?(I,R,B)=>c.push(I,R,B):(I,R,B)=>c.push(I,B,R);for(let I=0;I<=a;I++){let R=[],B=Xw*(1-I/a),G=Math.cos(B),j=Math.sin(B),ee=0;for(let Q=0;Q<=I;Q++){let re=Math.cos(ee),z=Math.sin(ee);E.x=G*re,E.y=j,E.z=G*z;let X=y.clone().addScaledVector(E,o);d.push(x*X.x,b*X.y,S*X.z),u.push(x*E.x,b*E.y,S*E.z),h.push(0,0),R.push(f++),ee+=Xw/I}C.push(R)}let D=C.length-1;for(let I=0;I<D;I++){let R=C[I],B=C[I+1],G=R.length-1;A(R[0],B[1],B[0]);for(let j=1;j<=G;j++)A(R[j-1],R[j],B[j]),A(R[j],B[j+1],B[j])}}}},bA=class extends It{constructor(e=[],t=[],i="",r=1,n=.2,s=4){super(),this.type="PolyhedronGeometryRound";let o=[],a=[],l=[];c(),d(),this.setAttribute("position",new ut(o,3)),this.setAttribute("normal",new ut(l,3)),this.setAttribute("uv",new ut(a,2));return;function c(){var re;n=Math.min(1-1e-5,n),n==0&&(s=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[i],h=new N,f=h.clone(),m=new Tn,v=n*r,g=r-v,p=s+1,x=new N,b=(z,X)=>x.subVectors(z,X).normalize(),S=(z,X)=>Array(z).fill(void 0).map(X),E=S(e.length/3,(z,X)=>new N().fromArray(e,X*3).setLength(r)),y=[],C=1e6;for(let z=0;z<E.length;z++){let X=E[z],Y=[],K,Z,V,fe=1e10,ae=-1;for(;(ae=t.indexOf(z,ae+1))!=-1;){let ue=ae-ae%3;K=t[ue+(ae+1)%3],Z=t[ue+(ae+2)%3],V=X.distanceToSquared(E[K]),fe=Math.min(fe,V),Y.push([K,Z,V])}fe+=1e-6;let ne=[],we=0,me=Y.length;for(let ue=0;ue<me;ue++){[K,Z,V]=Y[we];let xe=((re=y[K])==null?void 0:re.includes(z))==!0;V<=fe&&ne.push(K+ +xe*C),we=Y.findIndex(Le=>Le[0]==Z)}y.push(ne)}let A=[];{let z=0,X=0,Y,K,Z=u==3;for(let V=0;V<=s;V++){Y=V*(V+1)/2,K=(V+1)*(V+2)/2;for(let fe=0;fe<s-V;fe++)[z,X]=[Y+fe+V+2,K+fe+V+3],A.push(Y,K,...Z?[X,Y]:[z,K],X,z),[Y,K]=[z,X];A.push(Y,K,Y+s+2)}}let D=h.clone(),I=h.clone(),R=h.clone(),B=h.clone(),G=h.clone(),j=[],ee=S(E.length,()=>S(u,()=>h.clone()));for(let z=0;z<E.length;z++){h.copy(E[z]).normalize(),D.copy(h).multiplyScalar(g);let X=y[z];for(let ne=0;ne<X.length;ne++){let we=X[ne],me=X[(ne+1)%u];m.setFromPointsAndIndices(E,z,we%C,me%C),m.b.sub(m.a).setLength(1e10).add(m.a),m.c.sub(m.a).setLength(1e10).add(m.a),m.closestPointToPoint(D,ee[z][ne])}let Y=[],K=[],Z=[],V=new N;s==0&&[...ee[z]].reduce((ne,we)=>ne.add(we),V).multiplyScalar(1/u);for(let ne=0;ne<u;ne++){let we=[],me=(ne-1+u)%u,ue=ee[z][me],xe=ee[z][ne];h.copy(ue).sub(D),f.copy(xe).sub(D);let Le=D.angleTo(h),Re=h.angleTo(f),Oe=Math.cos(Le)*v;s==0?I.copy(V):I.copy(D).setLength(g+Oe),K.push(Oe);let We=[I,ue,xe];for(let He=0;He<2;He++){let ye=We[He],Qe=We[He+1];B.subVectors(ye,D),G.subVectors(Qe,D),R.crossVectors(B,G).normalize();for(let rt=0;rt<p;rt++){let Je=[Le,Re][He]*rt/p;h.copy(B).applyAxisAngle(R,Je).add(D),Y.push(h.clone()),He&&(b(h,D),we.push([rt==0?ye:h.clone(),x.clone()]))}He&&(b(Qe,D),we.push([Qe,x.clone()]))}Z.push(we)}j.push(Z);let fe=2*p,ae=2;for(let ne=0;ne<u;ne++){let we=fe*ne,me=fe*((ne+1)%u),ue=[Y[we]];for(let Le=1;Le<p;Le++){B=Y[we+Le],G=Y[me+Le],ue.push(B);for(let Re=1,Oe=Le-ae+1;Re<=Oe;Re++)h.lerpVectors(B,G,Re/(Oe+1)),h.sub(D).setLength(K[ne]).add(D),ue.push(h.clone());ue.push(G)}for(let Le=0;Le<p;Le++)ue.push(Y[Le+p+we]);ue.push(Y[me+p]);let xe=A.map(Le=>ue[Le]);o.push(...xe.map(Le=>[Le.x,Le.y,Le.z]).flat()),l.push(...xe.map(Le=>(b(Le,D),[x.x,x.y,x.z])).flat())}}let Q=[];for(let z=0;z<y.length;z++)for(let X=0;X<u;X++){let Y=y[z][X];if(Y<C){let K=y[Y].findIndex(fe=>fe%C==z),Z=j[z][X],V=j[Y][K];for(let fe=0;fe<p;fe++){let ae=Z[fe],ne=V[p-fe],we=Z[fe+1],me=V[p-(fe+1)];[ae,ne,we,we,ne,me].forEach(ue=>{o.push(ue[0].x,ue[0].y,ue[0].z),l.push(ue[1].x,ue[1].y,ue[1].z)})}Q.push(Z[0][0],V[p][0],Z[p][0],V[0][0])}}for(;Q.length;){let z,X,Y,K;[z,X]=Q.splice(0,2);let Z=[z];for(;z!=X;)Z.push(X),Y=Q.indexOf(X),K=Y%2,X=Q.splice(Y-K,2)[1-K];x.subVectors(Z[0],Z[1]).cross(h.subVectors(Z[0],Z[2])).normalize();let V=x.dot(Z[0])<0;V&&x.negate();for(let fe=1;fe<=Z.length-2;fe++)[Z[fe+ +V],Z[fe+1-+V],Z[0]].forEach(ae=>{o.push(ae.x,ae.y,ae.z),l.push(x.x,x.y,x.z)})}}function d(){let u=new N;for(let y=0;y<o.length;y+=3){u.x=o[y+0],u.y=o[y+1],u.z=o[y+2];let C=S(u)/2/Math.PI+.5,A=E(u)/Math.PI+.5;a.push(C,1-A)}let h=new N,f=new N,m=new N,v=new N,g=new de,p=new de,x=new de,b=(y,C,A,D)=>{D<0&&y.x===1&&(a[C]=y.x-1),A.x===0&&A.z===0&&(a[C]=D/2/Math.PI+.5)};for(let y=0,C=0;y<o.length;y+=9,C+=6){h.set(o[y+0],o[y+1],o[y+2]),f.set(o[y+3],o[y+4],o[y+5]),m.set(o[y+6],o[y+7],o[y+8]),g.set(a[C+0],a[C+1]),p.set(a[C+2],a[C+3]),x.set(a[C+4],a[C+5]),v.copy(h).add(f).add(m).divideScalar(3);let A=S(v);b(g,C+0,h,A),b(p,C+2,f,A),b(x,C+4,m,A)}for(let y=0;y<a.length;y+=6){let C=a[y+0],A=a[y+2],D=a[y+4],I=Math.max(C,A,D),R=Math.min(C,A,D);I>.9&&R<.1&&(C<.2&&(a[y+0]+=1),A<.2&&(a[y+2]+=1),D<.2&&(a[y+4]+=1))}function S(y){return Math.atan2(y.z,-y.x)}function E(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}}static fromJSON(e){return new bA(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},vie=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:n,corner:s,cornerSides:o}=e.parameters,a=n===0&&s!==0?new KB(t*.5,s,o):new yN(t*.5,n);return a.scale(1,i/t,r/t),Object.assign(a,{userData:{...e,type:"DodecahedronGeometry"}})}},KB=class extends bA{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,n=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a="DodecahedronGeometry";super(s,o,a,e,t,i),this.type=a}static fromJSON(e){return new KB(e.radius,e.corner,e.cornerSides)}},Bf=1e-12,SA=class{constructor(e){this.position=new de,this.startPosition=new de,this.uuid=Jt.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new SA(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},I_=class extends SA{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new I_(this.parent).copy(this)}},lh=class extends SA{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new I_(this),new I_(this))}static create(e,t){let i=new lh(e,new de(...t.position));return i.controls[0].position.set(...t.controlPrevious.position),i.controls[1].position.set(...t.controlNext.position),i.roundness=t.roundness,i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,i}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let i=0,r=this.controls.length;i<r;i++){let n=this.controls[i];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new lh(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var i,r;let e=(i=this.curveBefore)==null?void 0:i.getTangentAt(1),t=(r=this.curveAfter)==null?void 0:r.getTangentAt(0);return[e,t]}computeNormals(e=new de,t=new de){let[i,r]=this.computeTangents();return i&&r&&(rD(i,e),rD(r,t)),[e,t]}computeTangent(e=new de){let[t,i]=this.computeTangents();return t&&i&&e.copy(t).add(i).normalize(),e}computeNormal(e=new de){let[t,i]=this.computeNormals();return e.copy(t).add(i).normalize(),e}};function rD(e,t=new de){let i=e.length();return t.set(-e.y/i,e.x/i)}var _A=e=>e,Yh=new de,O1=new de,yie=new de,xie=new de,wie=new de,bie=new de,ZB=new N,$B=new N;function Sie(e){let t=new de;t.addVectors(e.v0,Yh.subVectors(e.v1,e.v0).multiplyScalar(2/3));let i=new de;return i.addVectors(e.v2,O1.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new co(e.v0,t,i,e.v2)}function op(e,t,i=Number.EPSILON){return Math.abs(e-t)<i}function _ie(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function Eie(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function JB(e,t,i){let r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)),s=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));return Math.acos((n*n+r*r-s*s)/(2*n*r))}function Aie(e,t,i){return sD(e,t)&&sD(t,i)&&R_(e.position,t.position,i.position)}function R_(e,t,i){return Yh.copy(t).sub(e).cross(O1.copy(i).sub(e))===0}function Cie(e,t,i,r,n){let s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=(e.y+t.y)/2,a=(e.x+t.x)/2,l=Math.sqrt(Math.pow(i,2)-Math.pow(s/2,2))*(e.y-t.y)/s,c=Math.sqrt(Math.pow(i,2)-Math.pow(s/2,2))*(t.x-e.x)/s;return r.set(a+l,o+c),n.set(a-l,o-c),[r,n]}function Tie(e,t,i){let r=e.distanceTo(i),n=t.distanceTo(i);return r<n?t:e}function Mie(e,t,i,r,n,s){let o=t.x-e.x,a=t.y-e.y,l=i.x-e.x,c=i.y-e.y,d=Math.sqrt((o+l)*(o+l)+(a+c)*(a+c)),u;return JB(t,e,i)>Math.PI&&(d*=-1),op(c,a)?u=(a+c)*(r/d-.5)*8/3/(o-l):u=(o+l)*(r/d-.5)*8/3/(c-a),n.set(t.x-u*a,t.y+u*o),s.set(i.x+u*c,i.y-u*l),[n,s]}function nD(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function sD(e,t){return R_(e.position,e.controls[1].position,t.position)&&R_(e.position,t.controls[0].position,t.position)}function Pie(e,t,i,r,n=.5){let s=Yh.subVectors(t,e).multiplyScalar(n).add(e),o=O1.subVectors(i,t).multiplyScalar(n).add(t),a=yie.subVectors(r,i).multiplyScalar(n).add(i),l=s,c=xie.subVectors(o,s).multiplyScalar(n).add(s),d=wie.subVectors(a,o).multiplyScalar(n).add(o),u=a,h=bie.subVectors(d,c).multiplyScalar(n).add(c);return[e.x,e.y,l.x,l.y,c.x,c.y,h.x,h.y,d.x,d.y,u.x,u.y,r.x,r.y]}function Die(e,t,i=12,r=!0){let n=$B.set(0,0,0),s,o=0;for(let a=0;a<t.length;a++){let l=_A(t[a]),c=Yh,d=gu(l,i);for(let u=0;u<=d;u++)if(l instanceof co||l instanceof fc||l instanceof mo){if(l.getPoint(u/d,c),n.set(c.x,c.y,0),s!==void 0&&Eie(s,n))continue;s===void 0&&(s=ZB),s.copy(n),e.setXYZ(o,n.x,n.y,n.z),o++}}return r&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),e}function Oie(e,t,i,r=12,n=!0){let s=$B.set(0,0,0),o=0,a=[];for(let l=0;l<t.length;l++){if(i[l]===!1)continue;let c,d=_A(t[l]),u=Yh,h=gu(d,r);a.push(h);for(let f=0;f<=h;f++)if(d instanceof co||d instanceof fc||d instanceof mo){if(d.getPoint(f/h,u),s.set(u.x,u.y,0),c==null?void 0:c.equals(s))continue;c===void 0?c=ZB:(e.setXYZ(o,c.x,c.y,c.z),o++,e.setXYZ(o,s.x,s.y,s.z),o++),c.copy(s)}}return n&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),a}function oD(e,t=12,i=!1){let r=[];for(let n=0,s=e.length;n<s;n++){let o=e[n],a=0;if(i&&o.roundedCurveCorner!==void 0){let l=gu(o.roundedCurveCorner,t)*.5;n>0&&(r[n-1]+=l),a+=l}o.curveAfter!==void 0&&(a+=gu(o.curveAfter,t)),r.push(a)}return e.length>0&&i&&e[0].roundedCurveCorner!==void 0&&(r[e.length-1]+=gu(e[0].roundedCurveCorner,t)*.5),r}function gu(e,t=12){return e&&e instanceof v1?t*2:e&&(e instanceof mo||e instanceof mN)?1:e&&e instanceof k2?t*e.points.length:t}function Lie(e,t,i=12,r=!0){let n,s=0;for(let o=0;o<t.length;o++){let a=_A(t[o]),l=gu(a,i),c=Yh;for(let d=0;d<=l;d++)if(a instanceof co||a instanceof fc||a instanceof mo){if(a.getPoint(d/l,c),n!==void 0&&_ie(n,c,Bf))continue;n===void 0&&(n=O1),n.copy(c),e.push(c.x,c.y),s++}}return op(e[0],e[e.length-2],Bf)&&op(e[1],e[e.length-1],Bf)&&(e.pop(),e.pop()),r&&s>1&&!(op(e[s-1],e[1],Bf)&&op(e[s-2],e[0],Bf))&&(e.push(e[0],e[1]),s++),e}var Yw=new de,Iie=new de,Rie=new de,Nie=new de,Bie=new de,kie=new de,Zi=class extends $0{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new As(new N(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Jt.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,i){let r=new Zi;return r.isClosed=e.isClosed,r.points=e.points.map(n=>lh.create(n.id,n.data)),typeof e.roundness=="number"&&(r.roundness=e.roundness),r.shapeHoles=e.shapeHoles.map(n=>Zi.createFromState(n)),t!==void 0&&i!==void 0&&r.applySize(t,i),r.update(),r}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,i=this.points.length;t<i;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,i=this.points.findIndex(r=>r.uuid===e);if(i<0){let r=t;for(let n=0,s=this.shapeHoles.length;n<s;n++){let o=this.shapeHoles[n],a=o.points.length,l=o.getPointIndexById(e);if(l<0)r+=a;else return l+r}}return i}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let i=0,r=this.shapeHoles.length;i<r;i++){let n=this.shapeHoles[i],s=e-t;if(s<=n.points.length-1)return n.points[s];t+=n.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let i=0,r=this.shapeHoles.length;i<r;i++){let n=this.shapeHoles[i],s=n.points.indexOf(e);if(s>=0)return t+s;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let i=Yw.set(e,t);for(let r=0,n=this.points.length;r<n;r++){let s=this.points[r];s.position.multiply(i),s.controls[0].position.multiply(i),s.controls[1].position.multiply(i)}for(let r=0,n=this.shapeHoles.length;r<n;r++)this.shapeHoles[r].applyScale(e,t);this._update()}createPoint(e,t=0,i=Jt.generateUUID()){let r;e instanceof de?r=e:r=new de(e,t);let n=new lh(i,r);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];if(r.uuid===e)return r}for(let t=0,i=this.shapeHoles.length;t<i;t++){let r=this.shapeHoles[t].getPointByUuid(e);if(r)return r}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(i=>i.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,i=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let r=i?this.roundedCurveDivisions:this.curveDivisions;return Die(e,i?this.roundedCurves:this.curves,t,this.autoClose),r.reduce((n,s)=>n+s,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=oD(this.points,e,!1),this.roundedCurveDivisions=oD(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,i=12){return Oie(e,this.curves,t,i,this.autoClose).reduce((r,n)=>r+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),Lie(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let i=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let r=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=gu(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=e-n;s<0&&(s+=r.reduce((o,a)=>o+a,0));for(let o=0,a=r.length;o<a;o++){let l=r[o];if(s<i+l)return[o,(s-i+1)/l];i+=l}return[0,1]}getCurveT(e,t,i){let r=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],s=this.curveDivisions,o=s[e];if(nD(r,n)){let l=r.position.distanceTo(n.position);return r.position.distanceTo(Yw.set(i.x,i.y))/l}let a=0;for(let l=0;l<e;l++)a+=s[l];return(t-a)/o}dispose(){}_applyCurveForPoint(e,t){nD(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let i=this.curves[this.curves.length-1];e.curveBefore=i,t.curveAfter=i;let r=i.clone();e.roundedCurveBefore=r,t.roundedCurveAfter=r,e.roundedCurveCorner=void 0,this.roundedCurves.push(r)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];if(t===0)this.moveTo(r.position.x,r.position.y);else{let n=this.points[t-1];this._applyCurveForPoint(r,n)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],i=this.points[this.points.length-1];this._applyCurveForPoint(t,i)}if(this.points.length>2){let t=0;for(let i=0,r=this.points.length;i<r;i++){let n=this.points[i],s=this.points[i-1]??this.points[this.points.length-1],o=this.points[i+1]??this.points[0],a=n.roundness,l=s&&o&&Aie(s,n,o);if(!n.controlsMoved()&&a>0&&!l){let c=n.curveBefore,d=n.curveAfter;if(c===void 0||d===void 0)continue;let u=n.roundedCurveBefore,h=n.roundedCurveAfter,f=c.getLength(),m=d.getLength(),v=Math.min(a,f*.499),g=Math.min(a,m*.499),p=Math.min(v,g),x=1-p/f,b=p/m,S=c.getPointAt(x,Yw),E=d.getPointAt(b,Iie);this._subSplitCurve(c,u,x,S,void 0),this._subSplitCurve(d,h,b,void 0,E);let y;if(this.useCubicForRoundedCorners){let C=JB(S,n.position,E)/2,A=Math.tan(C)*S.distanceTo(n.position),[D,I]=Cie(S,E,A,Rie,Nie),R=Tie(D,I,n.position),[B,G]=Mie(R,S,E,A,Bie,kie);y=new co(S.clone(),B.clone(),G.clone(),E.clone())}else y=new fc(S.clone(),n.position.clone(),E.clone());n.roundedCurveCorner=y,this.roundedCurves.splice(i+t,0,y),t++}}}}_subSplitCurve(e,t,i,r,n){if(e instanceof mo)r!==void 0&&t.v2.copy(r),n!==void 0&&t.v1.copy(n);else{let s=e,o=t,a=s.getUtoTmapping(i,0),l=Pie(s.v0,s.v1,s.v2,s.v3,a);return r!==void 0&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),n!==void 0&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return t}clone(){let e=new Zi(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var i;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let r=0;r<t;r++){let n=r*7,s=e.points[n+0],o=e.points[n+1],a=e.points[n+2],l=e.points[n+3],c=e.points[n+4],d=e.points[n+5],u=e.points[n+6],h=new lh(Jt.generateUUID(),new de(s,o));h.controls[0].position.set(a,l),h.controls[1].position.set(c,d),h.roundness=u,this.points.push(h)}return this.shapeHoles=(i=e.shapeHoles)!=null&&i.length?e.shapeHoles.map(r=>{let n=new Zi;return n.fromJSON(r),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(r,n)=>{n instanceof co&&n.v3.equals(r.position)&&r.controls[0].position.copy(n.v2)},i=r=>{let n=[],s,o;for(s=0,o=r.length;s<o;s++)r[s]instanceof fc&&(r[s]=Sie(r[s]));for(s=0,o=r.length;s<o;s++){let c=r[s],d=s>0?r[s-1]:null,u;c instanceof co?(u=this.createPoint(c.v0),u.controls[1].position.copy(c.v1)):c instanceof mo&&(u=this.createPoint(c.v1)),u!==void 0&&(d!==null&&t(u,d),n.push(u))}let a=r[r.length-1],l=!1;return a instanceof co?a.v3.equals(n[0].position)&&(n[0].controls[0].position.copy(a.v2),l=!0):a instanceof mo&&a.v2.equals(n[0].position)&&(l=!0),this.isClosed=l,n};return this.points=i(e.curves),e instanceof $0&&(this.shapeHoles=e.holes.map(r=>{let n=new Zi;return n.fromShape(r),n})),this.update(),this}updatePoint(e,t){let i=this.getPointByUuid(e);i&&(t.position!==void 0&&i.position.fromArray(t.position),t.roundness!==void 0&&(i.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var r;let i=(r=this.getPointByUuid(e))==null?void 0:r.controls[0];i&&(t.position&&i.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var r;let i=(r=this.getPointByUuid(e))==null?void 0:r.controls[1];i&&(t.position&&i.position.fromArray(t.position),this.needsUpdate=!0)}},N_=Math.PI*2;function Qw({x:e,y:t},i,r,n,s){return{x:e*i+n,y:t*r+s}}function zie(e,t){let i=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=Math.cos(e),n=Math.sin(e),s=Math.cos(e+t),o=Math.sin(e+t);return[{x:r-n*i,y:n+r*i},{x:s+o*i,y:o-s*i},{x:s,y:o}]}function aD(e,t,i,r){let n=e*r-t*i<0?-1:1,s=Math.min(1,Math.max(-1,e*i+t*r));return n*Math.acos(s)}function Fie(e,t,i,r,n,s,o,a,l,c){let d=Math.pow(n,2),u=Math.pow(s,2),h=Math.pow(o,2),f=Math.pow(a,2),m=d*u-d*f-u*h;m<0&&(m=0),m/=d*f+u*h,m=Math.sqrt(m)*(l===c?-1:1);let v=m*n/s*a,g=m*-s/n*o,p=v+(e+i)/2,x=g+(t+r)/2,b=(o-v)/n,S=(a-g)/s,E=(-o-v)/n,y=(-a-g)/s,C=aD(1,0,b,S),A=aD(b,S,E,y);return!c&&A>0&&(A-=N_),c&&A<0&&(A+=N_),{centerx:p,centery:x,ang1:C,ang2:A}}function Uie({px:e,py:t,cx:i,cy:r,rx:n,ry:s,largeArcFlag:o,sweepFlag:a}){let l=[];if(n===0||s===0)return[];let c=(e-i)/2,d=(t-r)/2;if(c===0&&d===0)return[];n=Math.abs(n),s=Math.abs(s);let u=Math.pow(c,2)/Math.pow(n,2)+Math.pow(d,2)/Math.pow(s,2);u>1&&(n*=Math.sqrt(u),s*=Math.sqrt(u));let h=Fie(e,t,i,r,n,s,c,d,o,a),{ang1:f,ang2:m}=h,{centerx:v,centery:g}=h,p=Math.abs(m)/(N_/4);Math.abs(1-p)<1e-7&&(p=1);let x=Math.max(Math.ceil(p),1);m/=x;for(let b=0;b<x;b++)l.push(zie(f,m)),f+=m;return l.map(b=>{let{x:S,y:E}=Qw(b[0],n,s,v,g),{x:y,y:C}=Qw(b[1],n,s,v,g),{x:A,y:D}=Qw(b[2],n,s,v,g);return{x1:S,y1:E,x2:y,y2:C,x:A,y:D}})}var Bi;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(Bi||(Bi={}));var Ir;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Ir||(Ir={}));function Dt(e,t){if(!e)throw t||"Assertion Failed!"}var _t=function(){function e(){}return e.vertEq=function(t,i){return t.s===i.s&&t.t===i.t},e.vertLeq=function(t,i){return t.s<i.s||t.s===i.s&&t.t<=i.t},e.transLeq=function(t,i){return t.t<i.t||t.t===i.t&&t.s<=i.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,i){return Math.abs(t.s-i.s)+Math.abs(t.t-i.t)},e.edgeEval=function(t,i,r){Dt(e.vertLeq(t,i)&&e.vertLeq(i,r));var n=i.s-t.s,s=r.s-i.s;return n+s>0?n<s?i.t-t.t+(t.t-r.t)*(n/(n+s)):i.t-r.t+(r.t-t.t)*(s/(n+s)):0},e.edgeSign=function(t,i,r){Dt(e.vertLeq(t,i)&&e.vertLeq(i,r));var n=i.s-t.s,s=r.s-i.s;return n+s>0?(i.t-r.t)*n+(i.t-t.t)*s:0},e.transEval=function(t,i,r){Dt(e.transLeq(t,i)&&e.transLeq(i,r));var n=i.t-t.t,s=r.t-i.t;return n+s>0?n<s?i.s-t.s+(t.s-r.s)*(n/(n+s)):i.s-r.s+(r.s-t.s)*(s/(n+s)):0},e.transSign=function(t,i,r){Dt(e.transLeq(t,i)&&e.transLeq(i,r));var n=i.t-t.t,s=r.t-i.t;return n+s>0?(i.s-r.s)*n+(i.s-t.s)*s:0},e.vertCCW=function(t,i,r){return t.s*(i.t-r.t)+i.s*(r.t-t.t)+r.s*(t.t-i.t)>=0},e.interpolate=function(t,i,r,n){return t=t<0?0:t,r=r<0?0:r,t<=r?r===0?(i+n)/2:i+(n-i)*(t/(t+r)):n+(i-n)*(r/(t+r))},e.intersect=function(t,i,r,n,s){var o,a,l;e.vertLeq(t,i)||(l=t,t=i,i=l),e.vertLeq(r,n)||(l=r,r=n,n=l),e.vertLeq(t,r)||(l=t,t=r,r=l,l=i,i=n,n=l),e.vertLeq(r,i)?e.vertLeq(i,n)?(o=e.edgeEval(t,r,i),a=e.edgeEval(r,i,n),o+a<0&&(o=-o,a=-a),s.s=e.interpolate(o,r.s,a,i.s)):(o=e.edgeSign(t,r,i),a=-e.edgeSign(t,n,i),o+a<0&&(o=-o,a=-a),s.s=e.interpolate(o,r.s,a,n.s)):s.s=(r.s+i.s)/2,e.transLeq(t,i)||(l=t,t=i,i=l),e.transLeq(r,n)||(l=r,r=n,n=l),e.transLeq(t,r)||(l=t,t=r,r=l,l=i,i=n,n=l),e.transLeq(r,i)?e.transLeq(i,n)?(o=e.transEval(t,r,i),a=e.transEval(r,i,n),o+a<0&&(o=-o,a=-a),s.t=e.interpolate(o,r.t,a,i.t)):(o=e.transSign(t,r,i),a=-e.transSign(t,n,i),o+a<0&&(o=-o,a=-a),s.t=e.interpolate(o,r.t,a,n.t)):s.t=(r.t+i.t)/2},e}(),kf=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),vv=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),_d=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),lD=function(){function e(){var t=new _d,i=new kf,r=new vv(0),n=new vv(1);t.next=t.prev=t,t.anEdge=null,i.next=i.prev=i,r.next=r,r.Sym=n,n.next=n,n.Sym=r,this.vHead=t,this.fHead=i,this.eHead=r,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var i=new vv(0),r=new vv(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return r.next=n,n.Sym.next=i,i.next=t,t.Sym.next=r,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i},e.prototype.splice_=function(t,i){var r=t.Onext,n=i.Onext;r.Sym.Lnext=i,n.Sym.Lnext=t,t.Onext=n,i.Onext=r},e.prototype.makeVertex_=function(t,i,r){var n=t;Dt(n,"Vertex can't be null!");var s=r.prev;n.prev=s,s.next=n,n.next=r,r.prev=n,n.anEdge=i;var o=i;do o.Org=n,o=o.Onext;while(o!==i)},e.prototype.makeFace_=function(t,i,r){var n=t;Dt(n,"Face can't be null");var s=r.prev;n.prev=s,s.next=n,n.next=r,r.prev=n,n.anEdge=i,n.trail=null,n.marked=!1,n.inside=r.inside;var o=i;do o.Lface=n,o=o.Lnext;while(o!==i)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var i=t.next,r=t.Sym.next;i.Sym.next=r,r.Sym.next=i},e.prototype.killVertex_=function(t,i){var r=t.anEdge,n=r;do n.Org=i,n=n.Onext;while(n!==r);var s=t.prev,o=t.next;o.prev=s,s.next=o},e.prototype.killFace_=function(t,i){var r=t.anEdge,n=r;do n.Lface=i,n=n.Lnext;while(n!==r);var s=t.prev,o=t.next;o.prev=s,s.next=o},e.prototype.makeEdge=function(){var t=new _d,i=new _d,r=new kf,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(i,n.Sym,this.vHead),this.makeFace_(r,n,this.fHead),n},e.prototype.splice=function(t,i){var r=!1,n=!1;if(t!==i){if(i.Org!==t.Org&&(n=!0,this.killVertex_(i.Org,t.Org)),i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(i,t),!n){var s=new _d;this.makeVertex_(s,i,t.Org),t.Org.anEdge=t}if(!r){var o=new kf;this.makeFace_(o,i,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var i=t.Sym,r=!1;if(t.Lface!==t.Rface&&(r=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!r){var n=new kf;this.makeFace_(n,t,t.Lface)}i.Onext===i?(this.killVertex_(i.Org,null),this.killFace_(i.Lface,null)):(t.Lface.anEdge=i.Oprev,i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var i=this.makeEdge_(t),r=i.Sym;this.splice_(i,t.Lnext),i.Org=t.Dst;var n=new _d;return this.makeVertex_(n,r,i.Org),i.Lface=r.Lface=t.Lface,i},e.prototype.splitEdge=function(t){var i=this.addEdgeVertex(t),r=i.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,r),t.Dst=r.Org,r.Dst.anEdge=r.Sym,r.Rface=t.Rface,r.winding=t.winding,r.Sym.winding=t.Sym.winding,r.idx=t.idx,r.Sym.idx=t.Sym.idx,r},e.prototype.connect=function(t,i){var r=!1,n=this.makeEdge_(t),s=n.Sym;if(i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(s,i),n.Org=t.Dst,s.Org=i.Org,n.Lface=s.Lface=t.Lface,t.Lface.anEdge=s,!r){var o=new kf;this.makeFace_(o,n,t.Lface)}return n},e.prototype.zapFace=function(t){var i=t.anEdge,r,n,s,o,a;n=i.Lnext;do r=n,n=r.Lnext,r.Lface=null,r.Rface===null&&(r.Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),s=r.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(r));while(r!=i);o=t.prev,a=t.next,a.prev=o,o.next=a},e.prototype.countFaceVerts_=function(t){var i=t.anEdge,r=0;do r++,i=i.Lnext;while(i!==t.anEdge);return r},e.prototype.mergeConvexFaces=function(t){var i,r,n,s,o,a,l;for(i=this.fHead.next;i!==this.fHead;i=i.next)if(i.inside)for(r=i.anEdge,o=r.Org;n=r.Lnext,s=r.Sym,s&&s.Lface&&s.Lface.inside&&(a=this.countFaceVerts_(i),l=this.countFaceVerts_(s.Lface),a+l-2<=t&&_t.vertCCW(r.Lprev.Org,r.Org,s.Lnext.Lnext.Org)&&_t.vertCCW(s.Lprev.Org,s.Org,r.Lnext.Lnext.Org)&&(n=s.Lnext,this.delete(s),r=null,s=null)),!(r&&r.Lnext.Org===o);)r=n;return!0},e.prototype.check=function(){var t=this.fHead,i=this.vHead,r=this.eHead,n,s,o,a,l,c;for(s=t,s=t;(n=s.next)!==t;s=n){Dt(n.prev===s),l=n.anEdge;do Dt(l.Sym!==l),Dt(l.Sym.Sym===l),Dt(l.Lnext.Onext.Sym===l),Dt(l.Onext.Sym.Lnext===l),Dt(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(Dt(n.prev===s&&n.anEdge===null),a=i,a=i;(o=a.next)!==i;a=o){Dt(o.prev===a),l=o.anEdge;do Dt(l.Sym!==l),Dt(l.Sym.Sym===l),Dt(l.Lnext.Onext.Sym===l),Dt(l.Onext.Sym.Lnext===l),Dt(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(Dt(o.prev===a&&o.anEdge===null),c=r,c=r;(l=c.next)!==r;c=l)Dt(l.Sym.next===c.Sym),Dt(l.Sym!==l),Dt(l.Sym.Sym===l),Dt(l.Org!==null),Dt(l.Dst!==null),Dt(l.Lnext.Onext.Sym===l),Dt(l.Onext.Sym.Lnext===l);Dt(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),cD=function(){function e(){this.handle=null}return e}(),uD=function(){function e(){this.key=null,this.node=0}return e}(),jie=function(){function e(t,i){this.leq=i,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var r=0;r<t+1;r++)this.nodes[r]=new cD,this.handles[r]=new uD;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var i=this.nodes,r=this.handles,n,s,o;for(n=i[t].handle;;){if(o=t<<1,o<this.size&&this.leq(r[i[o+1].handle].key,r[i[o].handle].key)&&++o,Dt(o<=this.max),s=i[o].handle,o>this.size||this.leq(r[n].key,r[s].key)){i[t].handle=n,r[n].node=t;break}i[t].handle=s,r[s].node=t,t=o}},e.prototype.floatUp_=function(t){var i=this.nodes,r=this.handles,n,s,o;for(n=i[t].handle;;){if(o=t>>1,s=i[o].handle,o===0||this.leq(r[s].key,r[n].key)){i[t].handle=n,r[n].node=t;break}i[t].handle=s,r[s].node=t,t=o}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var i,r;if(i=++this.size,i*2>this.max){this.max*=2;var n,s;for(s=this.nodes.length,this.nodes.length=this.max+1,n=s;n<this.nodes.length;n++)this.nodes[n]=new cD;for(s=this.handles.length,this.handles.length=this.max+1,n=s;n<this.handles.length;n++)this.handles[n]=new uD}return this.freeList===0?r=i:(r=this.freeList,this.freeList=this.handles[r].node),this.nodes[i].handle=r,this.handles[r].node=i,this.handles[r].key=t,this.initialized&&this.floatUp_(i),r},e.prototype.extractMin=function(){var t=this.nodes,i=this.handles,r=t[1].handle,n=i[r].key;return this.size>0&&(t[1].handle=t[this.size].handle,i[t[1].handle].node=1,i[r].key=null,i[r].node=this.freeList,this.freeList=r,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var i=this.nodes,r=this.handles,n;Dt(t>=1&&t<=this.max&&r[t].key!==null),n=r[t].node,i[n].handle=i[this.size].handle,r[i[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(r[i[n>>1].handle].key,r[i[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),r[t].key=null,r[t].node=this.freeList,this.freeList=t},e}(),Kw=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),dD=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),Hie=function(){function e(t,i){this.frame=t,this.leq=i,this.head=new dD,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var i=this.head;do i=i.next;while(i.key!==null&&!this.leq(this.frame,t,i.key));return i},e.prototype.insertBefore=function(t,i){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,i));var r=new dD;return r.key=i,r.next=t.next,t.next.prev=r,r.prev=t,t.next=r,r},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),Gie=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.edgeLeq=function(t,i,r){var n=t.event,s=i.eUp,o=r.eUp;if(s.Dst===n)return o.Dst===n?_t.vertLeq(s.Org,o.Org)?_t.edgeSign(o.Dst,s.Org,o.Org)<=0:_t.edgeSign(s.Dst,o.Org,s.Org)>=0:_t.edgeSign(o.Dst,n,o.Org)<=0;if(o.Dst===n)return _t.edgeSign(s.Dst,n,s.Org)>=0;var a=_t.edgeEval(s.Dst,n,s.Org),l=_t.edgeEval(o.Dst,n,o.Org);return a>=l},e.deleteRegion=function(t,i){i.fixUpperEdge&&Dt(i.eUp.winding===0),i.eUp.activeRegion=null,t.dict.delete(i.nodeUp)},e.fixUpperEdge=function(t,i,r){Dt(i.fixUpperEdge),t.mesh.delete(i.eUp),i.fixUpperEdge=!1,i.eUp=r,r.activeRegion=i},e.topLeftRegion=function(t,i){var r=i.eUp.Org,n;do i=e.regionAbove(i);while(i.eUp.Org===r);if(i.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(i).eUp.Sym,i.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,i,n),i=e.regionAbove(i)}return i},e.topRightRegion=function(t){var i=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===i);return t},e.addRegionBelow=function(t,i,r){var n=new Kw;return n.eUp=r,n.nodeUp=t.dict.insertBefore(i.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,r.activeRegion=n,n},e.isWindingInside=function(t,i){switch(t.windingRule){case Bi.ODD:return(i&1)!==0;case Bi.NONZERO:return i!==0;case Bi.POSITIVE:return i>0;case Bi.NEGATIVE:return i<0;case Bi.ABS_GEQ_TWO:return i>=2||i<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,i){i.windingNumber=e.regionAbove(i).windingNumber+i.eUp.winding,i.inside=e.isWindingInside(t,i.windingNumber)},e.finishRegion=function(t,i){var r=i.eUp,n=r.Lface;n.inside=i.inside,n.anEdge=r,e.deleteRegion(t,i)},e.finishLeftRegions=function(t,i,r){for(var n,s=null,o=i,a=i.eUp;o!==r;){if(o.fixUpperEdge=!1,s=e.regionBelow(o),n=s.eUp,n.Org!=a.Org){if(!s.fixUpperEdge){e.finishRegion(t,o);break}n=t.mesh.connect(a.Lprev,n.Sym),e.fixUpperEdge(t,s,n)}a.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(a,n)),e.finishRegion(t,o),a=s.eUp,o=s}return a},e.addRightEdges=function(t,i,r,n,s,o){var a,l,c,d,u=!0;c=r;do Dt(_t.vertLeq(c.Org,c.Dst)),e.addRegionBelow(t,i,c.Sym),c=c.Onext;while(c!==n);for(s===null&&(s=e.regionBelow(i).eUp.Rprev),l=i,d=s;a=e.regionBelow(l),c=a.eUp.Sym,c.Org===d.Org;)c.Onext!==d&&(t.mesh.splice(c.Oprev,c),t.mesh.splice(d.Oprev,c)),a.windingNumber=l.windingNumber-c.winding,a.inside=e.isWindingInside(t,a.windingNumber),l.dirty=!0,!u&&e.checkForRightSplice(t,l)&&(e.addWinding(c,d),e.deleteRegion(t,l),t.mesh.delete(d)),u=!1,l=a,d=c;l.dirty=!0,Dt(l.windingNumber-c.winding===a.windingNumber),o&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,i,r){t.mesh.splice(i,r)},e.vertexWeights=function(t,i,r){var n=_t.vertL1dist(i,t),s=_t.vertL1dist(r,t),o=.5*s/(n+s),a=.5*n/(n+s);t.coords[0]+=o*i.coords[0]+a*r.coords[0],t.coords[1]+=o*i.coords[1]+a*r.coords[1],t.coords[2]+=o*i.coords[2]+a*r.coords[2]},e.getIntersectData=function(t,i,r,n,s,o){i.coords[0]=i.coords[1]=i.coords[2]=0,i.idx=-1,e.vertexWeights(i,r,n),e.vertexWeights(i,s,o)},e.checkForRightSplice=function(t,i){var r=e.regionBelow(i),n=i.eUp,s=r.eUp;if(_t.vertLeq(n.Org,s.Org)){if(_t.edgeSign(s.Dst,n.Org,s.Org)>0)return!1;_t.vertEq(n.Org,s.Org)?n.Org!==s.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,s.Oprev,n)):(t.mesh.splitEdge(s.Sym),t.mesh.splice(n,s.Oprev),i.dirty=r.dirty=!0)}else{if(_t.edgeSign(n.Dst,s.Org,n.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Oprev,n)}return!0},e.checkForLeftSplice=function(t,i){var r=e.regionBelow(i),n=i.eUp,s=r.eUp,o;if(Dt(!_t.vertEq(n.Dst,s.Dst)),_t.vertLeq(n.Dst,s.Dst)){if(_t.edgeSign(n.Dst,s.Dst,n.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,o=t.mesh.splitEdge(n),t.mesh.splice(s.Sym,o),o.Lface.inside=i.inside}else{if(_t.edgeSign(s.Dst,n.Dst,s.Org)>0)return!1;i.dirty=r.dirty=!0,o=t.mesh.splitEdge(s),t.mesh.splice(n.Lnext,s.Sym),o.Rface.inside=i.inside}return!0},e.checkForIntersect=function(t,i){var r=e.regionBelow(i),n=i.eUp,s=r.eUp,o=n.Org,a=s.Org,l=n.Dst,c=s.Dst,d,u,h=new _d,f,m;if(Dt(!_t.vertEq(c,l)),Dt(_t.edgeSign(l,t.event,o)<=0),Dt(_t.edgeSign(c,t.event,a)>=0),Dt(o!==t.event&&a!==t.event),Dt(!i.fixUpperEdge&&!r.fixUpperEdge),o===a||(d=Math.min(o.t,l.t),u=Math.max(a.t,c.t),d>u))return!1;if(_t.vertLeq(o,a)){if(_t.edgeSign(c,o,a)>0)return!1}else if(_t.edgeSign(l,a,o)<0)return!1;return e.debugEvent(t),_t.intersect(l,o,c,a,h),Dt(Math.min(o.t,l.t)<=h.t),Dt(h.t<=Math.max(a.t,c.t)),Dt(Math.min(c.s,l.s)<=h.s),Dt(h.s<=Math.max(a.s,o.s)),_t.vertLeq(h,t.event)&&(h.s=t.event.s,h.t=t.event.t),f=_t.vertLeq(o,a)?o:a,_t.vertLeq(f,h)&&(h.s=f.s,h.t=f.t),_t.vertEq(h,o)||_t.vertEq(h,a)?(e.checkForRightSplice(t,i),!1):!_t.vertEq(l,t.event)&&_t.edgeSign(l,t.event,h)>=0||!_t.vertEq(c,t.event)&&_t.edgeSign(c,t.event,h)<=0?c===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Sym,n),i=e.topLeftRegion(t,i),n=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),r),e.addRightEdges(t,i,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(n.Lnext,s.Oprev),r=i,i=e.topRightRegion(i),m=e.regionBelow(i).eUp.Rprev,r.eUp=s.Oprev,s=e.finishLeftRegions(t,r,null),e.addRightEdges(t,i,s.Onext,n.Rprev,m,!0),!0):(_t.edgeSign(l,t.event,h)>=0&&(e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),_t.edgeSign(c,t.event,h)<=0&&(i.dirty=r.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,n),n.Org.s=h.s,n.Org.t=h.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,o,l,a,c),e.regionAbove(i).dirty=i.dirty=r.dirty=!0,!1)},e.walkDirtyRegions=function(t,i){for(var r=e.regionBelow(i),n,s;;){for(;r.dirty;)i=r,r=e.regionBelow(r);if(!i.dirty&&(r=i,i=e.regionAbove(i),i===null||!i.dirty))return;if(i.dirty=!1,n=i.eUp,s=r.eUp,n.Dst!==s.Dst&&e.checkForLeftSplice(t,i)&&(r.fixUpperEdge?(e.deleteRegion(t,r),t.mesh.delete(s),r=e.regionBelow(i),s=r.eUp):i.fixUpperEdge&&(e.deleteRegion(t,i),t.mesh.delete(n),i=e.regionAbove(r),n=i.eUp)),n.Org!==s.Org)if(n.Dst!==s.Dst&&!i.fixUpperEdge&&!r.fixUpperEdge&&(n.Dst===t.event||s.Dst===t.event)){if(e.checkForIntersect(t,i))return}else e.checkForRightSplice(t,i);n.Org===s.Org&&n.Dst===s.Dst&&(e.addWinding(s,n),e.deleteRegion(t,i),t.mesh.delete(n),i=e.regionAbove(r))}},e.connectRightVertex=function(t,i,r){var n,s=r.Onext,o=e.regionBelow(i),a=i.eUp,l=o.eUp,c=!1;if(a.Dst!==l.Dst&&e.checkForIntersect(t,i),_t.vertEq(a.Org,t.event)&&(t.mesh.splice(s.Oprev,a),i=e.topLeftRegion(t,i),s=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),o),c=!0),_t.vertEq(l.Org,t.event)&&(t.mesh.splice(r,l.Oprev),r=e.finishLeftRegions(t,o,null),c=!0),c){e.addRightEdges(t,i,r.Onext,s,s,!0);return}_t.vertLeq(l.Org,a.Org)?n=l.Oprev:n=a,n=t.mesh.connect(r.Lprev,n),e.addRightEdges(t,i,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,i)},e.connectLeftDegenerate=function(t,i,r){var n,s,o,a,l;if(n=i.eUp,_t.vertEq(n.Org,r)){Dt(!1),e.spliceMergeVertices(t,n,r.anEdge);return}if(!_t.vertEq(n.Dst,r)){t.mesh.splitEdge(n.Sym),i.fixUpperEdge&&(t.mesh.delete(n.Onext),i.fixUpperEdge=!1),t.mesh.splice(r.anEdge,n),e.sweepEvent(t,r);return}Dt(!1),i=e.topRightRegion(i),l=e.regionBelow(i),o=l.eUp.Sym,s=a=o.Onext,l.fixUpperEdge&&(Dt(s!==o),e.deleteRegion(t,l),t.mesh.delete(o),o=s.Oprev),t.mesh.splice(r.anEdge,o),_t.edgeGoesLeft(s)||(s=null),e.addRightEdges(t,i,o.Onext,a,s,!0)},e.connectLeftVertex=function(t,i){var r,n,s,o,a,l,c=new Kw;if(c.eUp=i.anEdge.Sym,r=t.dict.search(c).key,n=e.regionBelow(r),!!n){if(o=r.eUp,a=n.eUp,_t.edgeSign(o.Dst,i,o.Org)===0){e.connectLeftDegenerate(t,r,i);return}if(s=_t.vertLeq(a.Dst,o.Dst)?r:n,r.inside||s.fixUpperEdge){if(s===r)l=t.mesh.connect(i.anEdge.Sym,o.Lnext);else{var d=t.mesh.connect(a.Dnext,i.anEdge);l=d.Sym}s.fixUpperEdge?e.fixUpperEdge(t,s,l):e.computeWinding(t,e.addRegionBelow(t,r,l)),e.sweepEvent(t,i)}else e.addRightEdges(t,r,i.anEdge,i.anEdge,null,!0)}},e.sweepEvent=function(t,i){t.event=i,e.debugEvent(t);for(var r=i.anEdge;r.activeRegion===null;)if(r=r.Onext,r===i.anEdge){e.connectLeftVertex(t,i);return}var n=e.topLeftRegion(t,r.activeRegion);Dt(n!==null);var s=e.regionBelow(n),o=s.eUp,a=e.finishLeftRegions(t,s,null);a.Onext===o?e.connectRightVertex(t,n,a):e.addRightEdges(t,n,a.Onext,o,o,!0)},e.addSentinel=function(t,i,r,n){var s=new Kw,o=t.mesh.makeEdge();o.Org.s=r,o.Org.t=n,o.Dst.s=i,o.Dst.t=n,t.event=o.Dst,s.eUp=o,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=t.dict.insert(s)},e.initEdgeDict=function(t){t.dict=new Hie(t,e.edgeLeq);var i=t.bmax[0]-t.bmin[0],r=t.bmax[1]-t.bmin[1],n=t.bmin[0]-i,s=t.bmax[0]+i,o=t.bmin[1]-r,a=t.bmax[1]+r;e.addSentinel(t,n,s,o),e.addSentinel(t,n,s,a)},e.doneEdgeDict=function(t){for(var i,r=0;(i=t.dict.min().key)!==null;)i.sentinel||(Dt(i.fixUpperEdge),Dt(++r===1)),Dt(i.windingNumber===0),e.deleteRegion(t,i)},e.removeDegenerateEdges=function(t){var i,r,n,s=t.mesh.eHead;for(i=s.next;i!==s;i=r)r=i.next,n=i.Lnext,_t.vertEq(i.Org,i.Dst)&&i.Lnext.Lnext!==i&&(e.spliceMergeVertices(t,n,i),t.mesh.delete(i),i=n,n=i.Lnext),n.Lnext===i&&(n!==i&&((n===r||n===r.Sym)&&(r=r.next),t.mesh.delete(n)),(i===r||i===r.Sym)&&(r=r.next),t.mesh.delete(i))},e.initPriorityQ=function(t){var i,r,n,s=0;for(n=t.mesh.vHead,r=n.next;r!==n;r=r.next)s++;for(s+=8,i=t.pq=new jie(s,_t.vertLeq),n=t.mesh.vHead,r=n.next;r!==n;r=r.next)r.pqHandle=i.insert(r);return r!==n?!1:(i.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,i){var r,n,s;for(r=i.fHead.next;r!==i.fHead;r=n)n=r.next,s=r.anEdge,Dt(s.Lnext!==s),s.Lnext.Lnext===s&&(e.addWinding(s.Onext,s),t.mesh.delete(s));return!0},e.computeInterior=function(t,i){i===void 0&&(i=!0);var r,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(r=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!_t.vertEq(n,r));)n=t.pq.extractMin(),e.spliceMergeVertices(t,r.anEdge,n.anEdge);e.sweepEvent(t,r)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(i&&t.mesh.check(),!0):!1},e}(),Vie=function(){function e(){this.mesh=new lD,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Bi.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]},e.prototype.normalize_=function(t){var i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!i)throw"Zero-size vector!";i=Math.sqrt(i),t[0]/=i,t[1]/=i,t[2]/=i},e.prototype.longAxis_=function(t){var i=0;return Math.abs(t[1])>Math.abs(t[0])&&(i=1),Math.abs(t[2])>Math.abs(t[i])&&(i=2),i},e.prototype.computeNormal_=function(t){var i,r,n,s,o,a,l=[0,0,0],c=[0,0,0],d=[0,0,0],u=[0,0,0],h=[0,0,0],f=[null,null,null],m=[null,null,null],v=this.mesh.vHead;i=v.next;for(var g=0;g<3;++g)s=i.coords[g],c[g]=s,m[g]=i,l[g]=s,f[g]=i;for(i=v.next;i!==v;i=i.next)for(var p=0;p<3;++p)s=i.coords[p],s<c[p]&&(c[p]=s,m[p]=i),s>l[p]&&(l[p]=s,f[p]=i);var x=0;if(l[1]-c[1]>l[0]-c[0]&&(x=1),l[2]-c[2]>l[x]-c[x]&&(x=2),c[x]>=l[x]){t[0]=0,t[1]=0,t[2]=1;return}for(a=0,r=m[x],n=f[x],d[0]=r.coords[0]-n.coords[0],d[1]=r.coords[1]-n.coords[1],d[2]=r.coords[2]-n.coords[2],i=v.next;i!==v;i=i.next)u[0]=i.coords[0]-n.coords[0],u[1]=i.coords[1]-n.coords[1],u[2]=i.coords[2]-n.coords[2],h[0]=d[1]*u[2]-d[2]*u[1],h[1]=d[2]*u[0]-d[0]*u[2],h[2]=d[0]*u[1]-d[1]*u[0],o=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],o>a&&(a=o,t[0]=h[0],t[1]=h[1],t[2]=h[2]);a<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(d)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,i,r=this.mesh.vHead,n,s=0,o=t.next;o!==t;o=o.next)if(n=o.anEdge,!(n.winding<=0))do s+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==o.anEdge);if(s<0){for(i=r.next;i!==r;i=i.next)i.t=-i.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,i=[0,0,0],r,n,s=!1;i[0]=this.normal[0],i[1]=this.normal[1],i[2]=this.normal[2],!i[0]&&!i[1]&&!i[2]&&(this.computeNormal_(i),s=!0),r=this.sUnit,n=this.tUnit;var o=this.longAxis_(i);r[o]=0,r[(o+1)%3]=1,r[(o+2)%3]=0,n[o]=0,n[(o+1)%3]=0,n[(o+2)%3]=i[o]>0?1:-1;for(var a=t.next;a!==t;a=a.next)a.s=this.dot_(a.coords,r),a.t=this.dot_(a.coords,n);s&&this.checkOrientation_();for(var l=!0,c=t.next;c!==t;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},e.prototype.addWinding_=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,i){var r,n;if(r=i.anEdge,!(r.Lnext!==r&&r.Lnext.Lnext!==r))throw"Mono region invalid";for(;_t.vertLeq(r.Dst,r.Org);r=r.Lprev);for(;_t.vertLeq(r.Org,r.Dst);r=r.Lnext);n=r.Lprev;for(var s=void 0;r.Lnext!==n;)if(_t.vertLeq(r.Dst,n.Org)){for(;n.Lnext!==r&&(_t.edgeGoesLeft(n.Lnext)||_t.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)s=t.connect(n.Lnext,n),n=s.Sym;n=n.Lprev}else{for(;n.Lnext!==r&&(_t.edgeGoesRight(r.Lprev)||_t.edgeSign(r.Dst,r.Org,r.Lprev.Org)>=0);)s=t.connect(r,r.Lprev),r=s.Sym;r=r.Lnext}if(n.Lnext===r)throw"Mono region invalid";for(;n.Lnext.Lnext!==r;)s=t.connect(n.Lnext,n),n=s.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)if(i=r.next,r.inside&&!this.tessellateMonoRegion_(t,r))return!1;return!0},e.prototype.discardExterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)i=r.next,r.inside||t.zapFace(r)},e.prototype.setWindingNumber_=function(t,i,r){for(var n,s=t.eHead.next;s!==t.eHead;s=n)n=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?i:-i:r?t.delete(s):s.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,i,r,n){var s,o=0,a=0,l;r>3&&t.mergeConvexFaces(r);for(var c=t.vHead.next;c!==t.vHead;c=c.next)c.n=-1;for(var d=t.fHead.next;d!==t.fHead;d=d.next)if(d.n=-1,!!d.inside){s=d.anEdge,l=0;do{var c=s.Org;c.n===-1&&(c.n=a,a++),l++,s=s.Lnext}while(s!==d.anEdge);if(l>r)throw"Face vertex greater that support polygon";d.n=o,++o}this.elementCount=o,i===Ir.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*r,this.vertexCount=a,this.vertices=[],this.vertices.length=a*n,this.vertexIndices=[],this.vertexIndices.length=a;for(var c=t.vHead.next;c!==t.vHead;c=c.next)if(c.n!==-1){var u=c.n*n;this.vertices[u+0]=c.coords[0],this.vertices[u+1]=c.coords[1],n>2&&(this.vertices[u+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var h=0,d=t.fHead.next;d!==t.fHead;d=d.next)if(d.inside){s=d.anEdge,l=0;do{var c=s.Org;this.elements[h++]=c.n,l++,s=s.Lnext}while(s!==d.anEdge);for(var f=l;f<r;++f)this.elements[h++]=-1;if(i===Ir.CONNECTED_POLYGONS){s=d.anEdge;do this.elements[h++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==d.anEdge);for(var m=l;m<r;++m)this.elements[h++]=-1}}},e.prototype.outputContours_=function(t,i){var r,n,s=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=t.fHead.next;a!==t.fHead;a=a.next)if(a.inside){n=r=a.anEdge;do this.vertexCount++,r=r.Lnext;while(r!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*i,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,d=0;s=0;for(var a=t.fHead.next;a!==t.fHead;a=a.next)if(a.inside){o=0,n=r=a.anEdge;do this.vertices[l++]=r.Org.coords[0],this.vertices[l++]=r.Org.coords[1],i>2&&(this.vertices[l++]=r.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(r):r.Org.idx,o++,r=r.Lnext;while(r!==n);this.elements[d++]=s,this.elements[d++]=o,s+=o}},e.prototype.addContour=function(t,i){this.mesh===null&&(this.mesh=new lD),t<2&&(t=2),t>3&&(t=3);for(var r=null,n=0;n<i.length;n+=t)r===null?(r=this.mesh.makeEdge(),this.mesh.splice(r,r.Sym)):(this.mesh.splitEdge(r),r=r.Lnext),r.Org.coords[0]=i[n+0],r.Org.coords[1]=i[n+1],t>2?r.Org.coords[2]=i[n+2]:r.Org.coords[2]=0,r.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(r),r.winding=1,r.Sym.winding=-1},e.prototype.tesselate=function(t,i,r,n,s,o){if(t===void 0&&(t=Bi.ODD),i===void 0&&(i=Ir.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),Gie.computeInterior(this,o);var a=this.mesh;return i===Ir.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),i===Ir.BOUNDARY_CONTOURS?this.outputContours_(a,n):this.outputPolymesh_(a,i,r,n),!0},e}();function ap(e){var t=e.windingRule,i=t===void 0?Bi.ODD:t,r=e.elementType,n=r===void 0?Ir.POLYGONS:r,s=e.polySize,o=s===void 0?3:s,a=e.vertexSize,l=a===void 0?2:a,c=e.normal,d=c===void 0?[0,0,1]:c,u=e.contours,h=u===void 0?[]:u,f=e.strict,m=f===void 0?!0:f,v=e.debug,g=v===void 0?!1:v;if(!h&&m)throw new Error("Contours can't be empty");if(h){var p=new Vie;e.edgeCreateCallback&&(p.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(p.vertexIdCallback=e.vertexIdCallback);for(var x=0;x<h.length;x++)p.addContour(l||2,h[x]);return p.tesselate(i,n,o,l,d,m),{vertices:p.vertices,vertexIndices:p.vertexIndices,vertexCount:p.vertexCount,elements:p.elements,elementCount:p.elementCount,mesh:g?p.mesh:void 0}}}Bi.ODD;Bi.NONZERO;Bi.POSITIVE;Bi.NEGATIVE;Bi.ABS_GEQ_TWO;Ir.POLYGONS;Ir.CONNECTED_POLYGONS;Ir.BOUNDARY_CONTOURS;var ek=class extends It{constructor(e,t=12,i={}){super(),this.type="ShapeGeometry",this.windingRule=Bi.ODD,this.elementType=Ir.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:Bi.ODD,elementType:Ir.POLYGONS,polySize:3,vertexSize:2,strict:!0},i);let r=this._shape.extractShapePointsToFlatArray([],this._curveSegments),n=this._shape.shapeHoles.map(h=>h.extractShapePointsToFlatArray([],this._curveSegments)),s,o=!0,a=!0,l,c;for(let h=0,f=r.length/2;h<f;h++){let m=h*2,v=r[m+0],g=r[m+1];if(l!==void 0&&v!==l&&(o=!1),c!==void 0&&g!==c&&(a=!1),l=v,c=g,!o&&!a)break}!o&&!a&&(s=ap({contours:[r,...n],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict}));let d=(s==null?void 0:s.vertexCount)??1,u=(s==null?void 0:s.elementCount)??1;if(this._positionAttribute=new Gt(new Float32Array(d*3),3),this._normalAttribute=new Gt(new Float32Array(d*3),3),this._uvAttribute=new Gt(new Float32Array(d*2),2),this._indexAttribute=new Gt(new Uint32Array(u*3),1),s){let h=1/0,f=-1/0,m=1/0,v=-1/0;for(let x=0,b=d;x<b;x++){let S=x*2,E=s.vertices[S+0],y=s.vertices[S+1];E<h&&(h=E),E>f&&(f=E),y<m&&(m=y),y>v&&(v=y)}let g=f-h,p=v-m;for(let x=0,b=d;x<b;x++){let S=x*2,E=s.vertices[S+0],y=s.vertices[S+1],C=(E-h)/g,A=(y-m)/p;this._positionAttribute.setXYZ(x,E,y,0),this._normalAttribute.setXYZ(x,0,0,1),this._uvAttribute.setXY(x,C,A)}for(let x=0,b=u;x<b;x++){let S=x*3,E=s.elements[S+0],y=s.elements[S+1],C=s.elements[S+2];this._indexAttribute.setX(S+0,E),this._indexAttribute.setX(S+1,y),this._indexAttribute.setX(S+2,C)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((s==null?void 0:s.elementCount)??1)*3)}clone(){let e=new ek(this._shape,this._curveSegments);return e.userData=aA(this.userData),e}},B_=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let i=e*B_.eSize;this.buffer=new ArrayBuffer(i);let r=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*r,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*r,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*r,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let i=e*B_.eSize,r=new ArrayBuffer(i),n=Float32Array.BYTES_PER_ELEMENT,s=0,o=new Float32Array(r,s*n,3*e);s+=3*e;let a=new Float32Array(r,s*n,3*e);s+=3*e;let l=new Float32Array(r,s*n,2*e);o.set(this.positions.slice(0,this.size*3)),a.set(this.normals.slice(0,this.size*3)),l.set(this.uvs.slice(0,this.size*2)),this.buffer=r,this.positions=o,this.normals=a,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let r=this.capacity;for(;t>r;)r*=2;this.realloc(r)}let i=this.size;return this.size=t,i}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},tk=B_;tk.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var Zw=(e,t)=>([i,r])=>(r<i&&(r+=t),(e>=i?e:e+t)<=r),ik=class extends It{constructor(e,t,i=0,r=12,n=3,s=Bi.ODD){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._bevel=i,this._curveSegments=r,this._bevelSegmentsInput=n,i<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(i,t/2-1e-12),this._bevelSegments=Math.floor(n));let o=this._shape.extractShapePointsToFlatArray([],r),a=this._shape.shapeHoles.map(y=>{let C=y.extractShapePointsToFlatArray([],r),A=[];for(let D=C.length-1;D>=1;D-=2){let I=C[D-1],R=C[D-0];A.push(I,R)}return A}),l=ap({windingRule:s,elementType:Ir.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]}),c=ap({windingRule:Bi.ODD,elementType:Ir.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...a]});if(!l)throw new Error("error generating geometry");let d=l.elementCount;if(c){l.elementCount+=c.elementCount;for(let y=0;y<c.elements.length;y++){let C=c.elements[y],A=y%2===0?l.vertexCount:0;l.elements.push(C+A)}for(let y=0;y<c.vertexIndices.length;y++){let C=c.vertexIndices[y],A=l.vertexCount;l.vertexIndices.push(C+A)}for(let y=0;y<c.vertices.length;y++){let C=c.vertices[y];l.vertices.push(C)}}let u=1/0,h=-1/0,f=1/0,m=-1/0;for(let y=0,C=l.vertexCount;y<C;y++){let A=y*2,D=l.vertices[A+0],I=l.vertices[A+1];D<u&&(u=D),D>h&&(h=D),I<f&&(f=I),I>m&&(m=I)}this._minX=u,this._minY=f,this._width=h-u,this._height=m-f;let v=l.vertexCount*2*(2+this._bevelSegments);this._buffer=new tk(v);let g=[],p=[];for(let y=l.elementCount-1;y>=0;y--){let C=y>=d,A=y*2,D=l.elements[A+0],I=l.elements[A+1],R=D+I,B={start:D,count:I,normals:[],continuous:[],concave:[]},G=D,j=R-1,ee=D+1,Q=this._shape.roundedCurves.length;do{let Y=G-D,K=l.vertices[j*2+0],Z=l.vertices[j*2+1],V=l.vertices[G*2+0],fe=l.vertices[G*2+1],ae=l.vertices[ee*2+0],ne=l.vertices[ee*2+1],we=V-K,me=fe-Z,ue=Math.sqrt(we*we+me*me);we/=ue,me/=ue;let xe=V-ae,Le=fe-ne,Re=Math.sqrt(xe*xe+Le*Le);xe/=Re,Le/=Re,B.normals[Y*2+0]=-Le,B.normals[Y*2+1]=xe,B.concave[Y]=we*Le-me*xe>0;let Oe=l.vertexIndices[G];if(Array.isArray(Oe))B.continuous[Y]=!1;else{let[We,He]=this._shape.getCurveIndexFromVertexId(Oe-1,!0);if(He>0&&He<1)B.continuous[Y]=!0;else{let ye=He===1?We+1:We-1;ye=(ye+Q)%Q;let Qe=He===1?0:1,rt=this._shape.roundedCurves[We].getTangent(He),Je=this._shape.roundedCurves[ye].getTangent(Qe);B.continuous[Y]=rt.dot(Je)>.95}}C&&(B.normals[Y*2+0]*=-1,B.normals[Y*2+1]*=-1),[j,G,ee]=[G,ee,ee+1],ee>=R&&(ee-=I)}while(ee!==D+1);let re=[];re.push({bevelI:0,angle:0,size:0,boundary:{vertices:l.vertices.slice(D*2,R*2),vertexCount:I,vertexIndices:new Array(I).fill(!0).map((Y,K)=>[K,K]),elements:[0,I],elementCount:1,mesh:null},reverseMap:[],insetPoints:l.vertices.slice(D*2,R*2)});for(let Y=1;Y<=this._bevelSegments;Y++){let K=Y/this._bevelSegments*Math.PI/2,Z=(1-Math.cos(K))*this._bevelSize,V=[],fe=[],ae=0;for(let we=0;we<I;we++){let me=we*2,ue=(we-1+I)%I*2,xe=l.vertices[B.start*2+me+0],Le=l.vertices[B.start*2+me+1],Re=-B.normals[ue+0]*Z,Oe=-B.normals[ue+1]*Z,We=-B.normals[me+0]*Z,He=-B.normals[me+1]*Z;if(B.concave[we]||!B.concave[we]&&C){let ye=Math.atan2(Oe,Re),Qe=Math.atan2(He,We);Qe>ye&&(Qe-=Math.PI*2);let rt=Qe-ye;if(B.continuous[we]||C){let Je=ye+rt/2,Bt=Math.cos(Je)*Z,lt=Math.sin(Je)*Z;V[2*ae+0]=xe+Bt*(C?-1:1),V[2*ae+1]=Le+lt*(C?-1:1),fe[ae]=we,ae++}else{let Je=Math.max(1,Math.floor(r/4*Math.abs(rt)/Math.PI));for(let Bt=0;Bt<=Je;Bt++){let lt=ye+rt*(Bt/Je),J=Math.cos(lt)*Z,q=Math.sin(lt)*Z;V[2*ae+0]=xe+J,V[2*ae+1]=Le+q,fe[ae]=we,ae++}}}else V[2*ae+0]=xe+Re,V[2*ae+1]=Le+Oe,fe[ae]=we,ae++,V[2*ae+0]=xe,V[2*ae+1]=Le,fe[ae]=we,ae++,V[2*ae+0]=xe+We,V[2*ae+1]=Le+He,fe[ae]=we,ae++}let ne=ap({windingRule:Bi.POSITIVE,elementType:Ir.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[V],edgeCreateCallback:we=>{let me=we.Org.idx,ue=fe[me],xe=fe[(me+1)%fe.length];we.idx=[ue,xe],we.Sym.idx=[xe,ue]},vertexIdCallback:we=>{let me=we.Lprev.idx;return[me?me[1]:0,we.idx[0]]}});if(!ne)throw console.log("Error"),new Error(`error generating bevel geometry for ${Y}'th loop`);if(!ne.vertexCount)break;for(let we=0;we<ne.vertexIndices.length;we++){let[me,ue]=ne.vertexIndices[we];if(me===ue)continue;let xe=ue;ue<me&&(xe+=I);for(let Le=me;Le<xe;Le++){let Re=Le%I,Oe=(Le+1)%I;if(!B.continuous[Re]||!B.continuous[Oe]){ne.vertexIndices[we]=[me,Re],ne.vertexIndices.splice(we+1,0,[Oe,ue]),ne.vertices.splice((we+1)*2,0,ne.vertices[we*2],ne.vertices[we*2+1]);break}}}re.push({bevelI:Y,angle:K,size:Z,boundary:ne,reverseMap:fe,insetPoints:V})}let z=(Y,K,Z)=>{let V=0,fe=Y.boundary.vertexIndices.length;for(;V<fe&&Z(Y.boundary.vertexIndices[K]);)K=(K+1)%fe,V++;return V},X=g.length;for(let Y=1;Y<re.length;Y++){let K=re[Y-1],Z=re[Y],V=K.boundary.vertexIndices.length,fe=Z.boundary.vertexIndices.length;if(!V||!fe)break;let ae=B.concave.length,ne=0,we=Zw(ne,I);for(;!K.boundary.vertexIndices.filter(we).length||!Z.boundary.vertexIndices.filter(we).length;)ne++,we=Zw(ne,I);let me=K.boundary.vertexIndices.findIndex(we),ue=Z.boundary.vertexIndices.findIndex(we);do me=(me+1)%V;while(we(K.boundary.vertexIndices[me]));do ue=(ue+1)%fe;while(we(Z.boundary.vertexIndices[ue]));ne=(ne+1)%I;let xe=ne,Le=this.buildBevelVert(B,K,(me-1+V)%V),Re=this.buildBevelVert(B,Z,(ue-1+fe)%fe),Oe=Le,We=Re,He,ye,Qe=!1;do{we=Zw(ne,I);let rt=z(K,me,we),Je=z(Z,ue,we),Bt=Qe;if(Qe=!1,rt&&!Je){for(let lt=0;lt<rt;lt++)He=this.buildBevelVert(B,K,(me+lt)%V,lt/(rt-1)),g.push(Oe.topN,He.topP,We.topN),g.push(He.bottomP,Oe.bottomN,We.bottomN),Oe=He;Qe=!0}else if(!rt&&Je)for(let lt=0;lt<Je;lt++)ye=this.buildBevelVert(B,Z,(ue+lt)%fe,lt/(Je-1)),g.push(We.topN,Oe.topP,ye.topP),g.push(Oe.bottomP,We.bottomN,ye.bottomP),We=ye;else if(rt&&Je)if(He=this.buildBevelVert(B,K,me,0),ye=this.buildBevelVert(B,Z,ue,0),Bt?(g.push(Oe.topN,ye.topP,We.topN),g.push(Oe.topN,He.topP,ye.topP),g.push(ye.bottomP,Oe.bottomN,We.bottomN),g.push(ye.bottomP,He.bottomP,Oe.bottomN)):(g.push(We.topN,Oe.topN,He.topP),g.push(We.topN,He.topP,ye.topP),g.push(He.bottomP,Oe.bottomN,We.bottomN),g.push(He.bottomP,We.bottomN,ye.bottomP)),Oe=He,We=ye,rt===Je)for(let lt=1;lt<rt;lt++)He=this.buildBevelVert(B,K,(me+lt)%V,lt/(rt-1)),ye=this.buildBevelVert(B,Z,(ue+lt)%fe,lt/(Je-1)),g.push(Oe.topN,He.topP,We.topN),g.push(We.topN,He.topP,ye.topP),g.push(He.bottomP,Oe.bottomN,We.bottomN),g.push(He.bottomP,We.bottomN,ye.bottomP),Oe=He,We=ye;else if(rt>Je){let lt=rt/Je,J=0;for(let q=1;q<rt;q++)He=this.buildBevelVert(B,K,(me+q)%V,q/(rt-1)),g.push(Oe.topN,He.topP,We.topN),g.push(He.bottomP,Oe.bottomN,We.bottomN),Oe=He,q>(J+1)*lt&&(J++,ye=this.buildBevelVert(B,Z,(ue+J)%fe,J/(Je-1)),g.push(We.topN,He.topP,ye.topP),g.push(He.bottomP,We.bottomN,ye.bottomP),We=ye)}else{let lt=Je/rt,J=0;for(let q=1;q<Je;q++)ye=this.buildBevelVert(B,Z,(ue+q)%fe,q/(Je-1)),g.push(We.topN,He.topP,ye.topP),g.push(He.bottomP,We.bottomN,ye.bottomP),We=ye,q>(J+1)*lt&&(J++,He=this.buildBevelVert(B,K,(me+J)%V,J/(rt-1)),g.push(Oe.topN,He.topP,We.topN),g.push(He.bottomP,Oe.bottomN,We.bottomN),Oe=He)}me=(me+rt)%V,ue=(ue+Je)%fe,ne=(ne+1)%ae}while(ne!==xe)}{let Y=re[0];for(let K=0,Z=Y.boundary.vertexCount;K<Z;K++){let V=this.buildBevelVert(B,Y,K),fe=this.buildBevelVert(B,Y,(K+1)%Z);g.push(fe.topP,V.topN,V.bottomN),g.push(fe.topP,V.bottomN,fe.bottomP)}}if(C){let Y=[];for(let K=g.length-1;K>=X+2;K-=3){let Z=g[K-2],V=g[K-1],fe=g[K-0];Y.push(fe,V,Z)}g.splice(X,g.length-X,...Y)}if(C){let Y=[];for(let K=re[re.length-1].boundary.vertices.length-1;K>=1;K-=2){let Z=re[re.length-1].boundary.vertices[K-1],V=re[re.length-1].boundary.vertices[K-0];Y.push(Z,V)}p.push(Y)}if(!C){let Y=re[re.length-1],K=ap({windingRule:re.length>1?Bi.POSITIVE:Bi.ODD,elementType:Ir.POLYGONS,vertexSize:2,strict:!0,contours:[Y.insetPoints,...p]});if(!K)throw new Error("Error generating geometry for surface");a.length===0&&Object.assign(this,{capStartIndex:g.length});for(let Z=0;Z<K.elementCount*3;Z+=3){let V=this.buildSurfaceVert(K,K.elements[Z+0]),fe=this.buildSurfaceVert(K,K.elements[Z+1]),ae=this.buildSurfaceVert(K,K.elements[Z+2]);g.push(V.top,fe.top,ae.top),g.push(ae.bottom,fe.bottom,V.bottom)}}this.vertexCache={}}this._buffer.shrink();let x=new Gt(Uint32Array.from(g),1),b=new Gt(this._buffer.positions,3),S=new Gt(this._buffer.normals,3),E=new Gt(this._buffer.uvs,2);b.needsUpdate=!0,S.needsUpdate=!0,E.needsUpdate=!0,x.needsUpdate=!0,this.setAttribute("position",b),this.setAttribute("normal",S),this.setAttribute("uv",E),this.setIndex(x)}buildSurfaceVert(e,t){let i=t.toString();if(i in this.vertexCache)return this.vertexCache[i];let r=e.vertices[t*2+0],n=e.vertices[t*2+1],s=(r-this._minX)/this._width,o=(n-this._minY)/this._height,a=this._buffer.get(2),l=a*3,c=a*2,d={top:a+0,bottom:a+1};return this._buffer.positions[l+0]=r,this._buffer.positions[l+1]=n,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[c+0]=s,this._buffer.uvs[c+1]=o,this._buffer.positions[l+3]=r,this._buffer.positions[l+4]=n,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[c+2]=s,this._buffer.uvs[c+3]=o,this.vertexCache[i]=d,d}buildBevelVert(e,t,i,r=1){let n=`${t.bevelI}:${i}`;if(n in this.vertexCache)return this.vertexCache[n];let[s,o]=t.boundary.vertexIndices[i],a,l,c,d;s!==o?(l=s,a=o,d=!1,c=e.continuous[l]&&e.continuous[a]):(a=s,l=(a-1+e.count)%e.count,d=e.concave[a]&&t.bevelI>0,c=e.continuous[a]||d);let u=Math.cos(t.angle),h=Math.sin(t.angle),f=i*2,m=a*2,v=l*2,g=t.boundary.vertices[f+0],p=t.boundary.vertices[f+1],x=(1-h)*this._bevelSize,b=(g-this._minX)/this._width,S=(p-this._minY)/this._height,E=e.normals[m+0],y=e.normals[m+1],C=e.normals[v+0],A=e.normals[v+1];if(d){let G=C-E,j=A-y;E=E+G*(1-r),y=y+j*(1-r);let ee=Math.sqrt(E*E+y*y);E/=ee,y/=ee}let D=this._buffer.get(c?2:4),I=D*3,R=D*2,B={i,fi:a,topP:D+0,topN:D+0,bottomP:D+1,bottomN:D+1};return this._buffer.positions[I+0]=g,this._buffer.positions[I+1]=p,this._buffer.positions[I+2]=this._depth-x,this._buffer.normals[I+0]=E*u,this._buffer.normals[I+1]=y*u,this._buffer.normals[I+2]=h,this._buffer.uvs[R+0]=b,this._buffer.uvs[R+1]=S,this._buffer.positions[I+3]=g,this._buffer.positions[I+4]=p,this._buffer.positions[I+5]=x,this._buffer.normals[I+3]=E*u,this._buffer.normals[I+4]=y*u,this._buffer.normals[I+5]=-h,this._buffer.uvs[R+2]=S,this._buffer.uvs[R+3]=b,c||(D+=2,I+=6,R+=4,B.topP=D+0,B.bottomP=D+1,this._buffer.positions[I+0]=g,this._buffer.positions[I+1]=p,this._buffer.positions[I+2]=this._depth-x,this._buffer.normals[I+0]=C*u,this._buffer.normals[I+1]=A*u,this._buffer.normals[I+2]=h,this._buffer.uvs[R+0]=b,this._buffer.uvs[R+1]=S,this._buffer.positions[I+3]=g,this._buffer.positions[I+4]=p,this._buffer.positions[I+5]=x,this._buffer.normals[I+3]=C*u,this._buffer.normals[I+4]=A*u,this._buffer.normals[I+5]=-h,this._buffer.uvs[R+2]=S,this._buffer.uvs[R+3]=b),this.vertexCache[n]=B,B}clone(){let e=new ik(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=aA(this.userData),e}},Bu=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var c,d;let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Bi.ODD},e.parameters),r=Math.abs(i.width),n=Math.abs(i.height??i.width),s=Math.abs(i.depth??0),o=e.shape??(t==null?void 0:t.shape),a=(o==null?void 0:o.roundness)??i.roundness;o!==void 0&&(o instanceof Zi?(o.width!==r||o.height!==n)&&o.applySize(r,n):o=new Zi(r,n).fromJSON(o),((c=e.parameters)==null?void 0:c.roundness)!==void 0&&((d=e.parameters)==null?void 0:d.roundness)>0&&o.update());let l=o??new Zi(r,n);return{parameters:Object.assign(i,{width:r,height:n,depth:s,roundness:a}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:i,extrudeBevelSegments:r,subdivisions:n,roundness:s,windingRule:o}=e.parameters;e.shape.roundness=s;let a;return t<=0?a=new ek(e.shape,n,{windingRule:o}):a=new ik(e.shape,t,i,n,r,o),Object.assign(a,{userData:{...e,type:"VectorGeometry"}})}},rk=Math.PI*2,Wie=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Zi?e.shape:new Zi,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,spikes:r,angle:n,innerRadius:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=e.parameters,c=e.shape,d=t*.5,u=i*.5,h=qie(c,d,u,n*Math.PI/180,r,s);c.isClosed=!0,c.update();let f=Bu.create({shape:c,parameters:{subdivisions:h,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(f,{userData:{...e,type:"EllipseGeometry"}})}};function qie(e,t,i,r,n,s){if(r>=rk)return n>30||n%4===0?(Yie(e,t,i,s),Math.round(n/4)):hD(e,r,n,t,i,s);r=Math.max(r,.001);let o={x:0,y:i},a=r+Math.PI*.5,l={x:Math.cos(a)*t,y:Math.sin(a)*i},c=Uie({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:t,ry:i,largeArcFlag:r>Math.PI,sweepFlag:!0});return n>30||n%c.length===0?Xie(e,o.x,o.y,c,n,t,i,s):hD(e,r,n,t,i,s)}function Xie(e,t,i,r,n,s,o,a){let l=Math.round(n/r.length);e.addPoint(ch(t,i));for(let c=0,d=r.length;c<d;c++){let u=r[c],h=e.points[c],f=ch(u.x,u.y);h.controls[1].position.set(u.x1,u.y1),f.controls[0].position.set(u.x2,u.y2),e.addPoint(f)}return a>0?nk(e,s,o,a):e.addPoint(ch(0,0)),l}function hD(e,t,i,r,n,s){let o=-t/i;for(let a=0;a<=i;a++){let l=o*a,c=Math.sin(l)*r,d=Math.cos(l)*n;e.addPoint(ch(c,d))}return t<rk?s>0?nk(e,r,n,s):e.addPoint(ch(0,0)):(e.removePoint(e.points[e.points.length-1]),s>0&&sk(e,r,n,s)),1}function Yie(e,t,i,r=0,n=0,s=0){let o=.5522847498,a=t*o,l=i*o;e.addPoint(yv(n-t,s,n-t,s-l,n-t,s+l)),e.addPoint(yv(n,s+i,n-a,s+i,n+a,s+i)),e.addPoint(yv(n+t,s,n+t,s+l,n+t,s-l)),e.addPoint(yv(n,s-i,n+a,s-i,n-a,s-i)),r>0&&sk(e,t,i,r)}function ch(e,t){return new lh(Jt.generateUUID(),new de(e,t))}function yv(e,t,i,r,n,s){let o=ch(e,t);return o.controls[0].position.set(i,r),o.controls[1].position.set(n,s),o}function nk(e,t,i,r){ok(e,t,i,r).forEach(n=>e.addPoint(n))}function sk(e,t,i,r){let n=ok(e,t,i,r),s=new Zi;n.forEach(o=>s.addPoint(o)),s.isClosed=!0,e.shapeHoles.push(s)}function ok(e,t,i,r){let n=r*t/100,s=n*(Math.abs(i)/Math.abs(t)),o=new de(n/t,s/i),a=e.points.map(l=>{let c=l.clone();return c.uuid=Jt.generateUUID(),c}).reverse();return a.forEach(l=>{l.position.multiply(o);let c=l.controls[0].position.clone().multiply(o),d=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(d),l.controls[1].position.copy(c)}),a}var Qie=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),r=Math.abs(i.width),n=Math.abs(i.height??r),s=Math.abs(i.depth??r),o=Math.abs(Math.min(r,s))/2;return{parameters:Object.assign(i,{width:r,height:n,depth:s,radius:o,segments:Math.round(i.segments),pathSegments:Math.round(i.pathSegments),cornerSegments:Math.round(i.cornerSegments)})}}static build(e){let{width:t,height:i,depth:r,radius:n,revolutions:s,segments:o,pathRadius:a,pathType:l,pathSegments:c,cornerRadius:d,cornerSegments:u}=e.parameters,h=new EA(!1,t,i,r,n,s,o,a,l,c,d,u);return Object.assign(h,{userData:{...e,type:"HelixGeometry"}})}},EA=class extends It{constructor(e=!0,t=1,i=1,r=1,n=1,s=1,o=1,a=1,l=1,c=1,d=1,u=1,h=!1){super();let f=e&&s===1;f&&(u=0),d>100&&(d=100);let m=()=>new N,v=new N,g=m(),p=m(),x=m(),b,S,E,y,C,A,D,I,R=m(),B=m(),G=m(),j=m(),ee=m(),Q=m(),re=m(),z=m(),X=i-2*a+.001,Y=X/s,K=Math.ceil(o*s),Z=K+1,V=X/K,fe=-X/2,ae=c+1,ne=2*Math.PI/c,we=Math.PI/2/u,me=.01,ue=Math.min((1-d/100)*a,a-me),xe=a-ue,Le=0,Re=2,Oe=u*Re+Re,We=ae*Oe/Re,He=We+ae*Z,ye=ae*(Z+Oe),[Qe,rt,Je]=[3,3,2].map(Be=>Array(ye*Be).fill(0)),Bt=[],lt=n-a;function J(Be,Ke){let ce=Math.PI/2;A=Ke*V,I=2*Math.PI*(A%Y)/Y+ce,A+=fe,D=Math.sin(I)*lt,C=Math.cos(I)*lt,e?Be.set(C,D,A):Be.set(C,A,D)}J(v,-1e-10),J(g,0),R.copy(v),J(v,1);let q=v.distanceTo(g),Se=f?0:xe+ue,je=q*K+2*Se,qe=ue,ot=je-Se;for(let Be=0;Be<=K;Be++){J(p,Be),z.subVectors(p,R).normalize(),R.copy(p),Q.copy(p).setComponent(+e+1,0).normalize(),re.crossVectors(z,Q).normalize();let Ke=Be===0,ce=Be===K,tt=Ke?3*Math.PI/2:we,et=Ke?qe:ot,ft=Ke?ae:He,$e=Ke?0:ye-ae,Mt=z.clone().multiplyScalar(Ke?-xe:xe).add(p),Ze=z.clone().multiplyScalar(Ke?-1:1).normalize();for(let vt=0;vt<ae;vt++){let Vt=vt*ne;if(B.addVectors(v.copy(Q).multiplyScalar(a*Math.cos(Vt)),g.copy(re).multiplyScalar(a*Math.sin(Vt))),G.copy(B).normalize(),Ke||ce){f||(Le=$e+vt,[0,1,2].forEach(kt=>{Qe[Le*3+kt]=Mt.getComponent(kt),rt[Le*3+kt]=Ze.getComponent(kt)}),Je[Le*2]=+ce,Je[Le*2+1]=vt/c),g.copy(G).multiplyScalar(ue),x.addVectors(p,g);for(let kt=0;kt<u;kt++){let pi=kt*we+tt;j.addVectors(v.copy(z).multiplyScalar(xe*Math.sin(pi)),g.copy(G).multiplyScalar(xe*Math.cos(pi))),ee.copy(j).normalize(),g.addVectors(x,j),j.normalize(),Le=ft+kt*ae+vt,[0,1,2].forEach(Us=>{Qe[Le*3+Us]=g.getComponent(Us),rt[Le*3+Us]=ee.getComponent(Us)});let Fr=+Ke+Math.sin(pi);Je[Le*2]=(et+xe*Fr)/je,Je[Le*2+1]=vt/c}}g.addVectors(p,B),Le=We+Be*ae+vt,[0,1,2].forEach(kt=>{Qe[Le*3+kt]=g.getComponent(kt),rt[Le*3+kt]=G.getComponent(kt)}),Je[Le*2]=(Se+Be*q)/je,Je[Le*2+1]=vt/c}}let wt=Z+2*u+Re,[Pe,pt]=[+f,wt-1];h&&(pt-=1);for(let Be=Pe;Be<=pt-1;Be++){let Ke=f&&Be===pt-1;for(let ce=0;ce<ae-1;ce++)b=Be*ae+ce,S=b+1,E=(Ke?ce:b)+ae,y=(Ke?ce+1:S)+ae,Be===0?Bt.push(S,y,E):Be===wt-2?Bt.push(b,S,E):Bt.push(b,S,E,S,y,E)}this.setIndex(Bt),this.setAttribute("position",new ut(Qe,3)),this.setAttribute("normal",new ut(rt,3)),this.setAttribute("uv",new ut(Je,2))}},Kie=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:n,corner:s,cornerSides:o}=e.parameters,a=n===0&&s!==0?new ak(t*.5,s,o):new _N(t*.5,n);return a.scale(1,i/t,r/t),Object.assign(a,{userData:{...e,type:"IcosahedronGeometry"}})}},ak=class extends bA{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o="IcosahedronGeometry";super(n,s,o,e,t,i),this.type=o}static fromJSON(e){return new ak(e.radius,e.corner,e.cornerSides)}},Zie=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r;(((r=e.parameters)==null?void 0:r.points)??[]).forEach(n=>{Array.isArray(n)&&(n.x=n[0],n.y=n[1])});let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{points:t,segments:i,verticalSegments:r}=e.parameters,n=new $0;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let s=new gN(n.extractPoints(r).shape,i);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...e,type:"LatheGeometry"}})}},Mo=new at,$w=new Di,xv=new N,Py=class extends kn{constructor(){super(),this.uuid=Jt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new pn().getNormalMatrix(e);for(let i=0,r=this.vertices.length;i<r;i++)this.vertices[i].applyMatrix4(e);for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i];n.normal.applyMatrix3(t).normalize();for(let s=0,o=n.vertexNormals.length;s<o;s++)n.vertexNormals[s].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Mo.makeRotationX(e),this.applyMatrix4(Mo),this}rotateY(e){return Mo.makeRotationY(e),this.applyMatrix4(Mo),this}rotateZ(e){return Mo.makeRotationZ(e),this.applyMatrix4(Mo),this}translate(e,t,i){return Mo.makeTranslation(e,t,i),this.applyMatrix4(Mo),this}scale(e,t,i){return Mo.makeScale(e,t,i),this.applyMatrix4(Mo),this}lookAt(e){return $w.lookAt(e),$w.updateMatrix(),this.applyMatrix4($w.matrix),this}fromBufferGeometry(e){let t=this,i=e.index!==null?e.index:void 0,r=e.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=r.position,s=r.normal,o=r.color,a=r.uv,l=r.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<n.count;u++)t.vertices.push(new N().fromBufferAttribute(n,u)),o!==void 0&&t.colors.push(new Lt().fromBufferAttribute(o,u));function c(u,h,f,m){let v=o===void 0?[]:[t.colors[u].clone(),t.colors[h].clone(),t.colors[f].clone()],g=s===void 0?[]:[new N().fromBufferAttribute(s,u),new N().fromBufferAttribute(s,h),new N().fromBufferAttribute(s,f)],p=new k_(u,h,f,g,v,m);t.faces.push(p),a!==void 0&&t.faceVertexUvs[0].push([new de().fromBufferAttribute(a,u),new de().fromBufferAttribute(a,h),new de().fromBufferAttribute(a,f)]),l!==void 0&&t.faceVertexUvs[1].push([new de().fromBufferAttribute(l,u),new de().fromBufferAttribute(l,h),new de().fromBufferAttribute(l,f)])}let d=e.groups;if(d.length>0)for(let u=0;u<d.length;u++){let h=d[u],f=h.start,m=h.count;for(let v=f,g=f+m;v<g;v+=3)i!==void 0?c(i.getX(v),i.getX(v+1),i.getX(v+2),h.materialIndex):c(v,v+1,v+2,h.materialIndex)}else if(i!==void 0)for(let u=0;u<i.count;u+=3)c(i.getX(u),i.getX(u+1),i.getX(u+2));else for(let u=0;u<n.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xv).negate(),this.translate(xv.x,xv.y,xv.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,i=t===0?1:1/t,r=new at;return r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix4(r),this}computeFaceNormals(){let e=new N,t=new N;for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i],s=this.vertices[n.a],o=this.vertices[n.b],a=this.vertices[n.c];e.subVectors(a,o),t.subVectors(s,o),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let i=0,r=this.vertices.length;i<r;i++)t[i]=new N;if(e){let i=new N,r=new N;for(let n=0,s=this.faces.length;n<s;n++){let o=this.faces[n],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];i.subVectors(c,l),r.subVectors(a,l),i.cross(r),t[o.a].add(i),t[o.b].add(i),t[o.c].add(i)}}else{this.computeFaceNormals();for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let i=0,r=this.vertices.length;i<r;i++)t[i].normalize();for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i],s=n.vertexNormals;s.length===3?(s[0].copy(t[n.a]),s[1].copy(t[n.b]),s[2].copy(t[n.c])):(s[0]=t[n.a].clone(),s[1]=t[n.b].clone(),s[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let i=this.faces[e],r=i.vertexNormals;r.length===3?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);for(let n=0,s=r.vertexNormals.length;n<s;n++)r.__originalVertexNormals[n]?r.__originalVertexNormals[n].copy(r.vertexNormals[n]):r.__originalVertexNormals[n]=r.vertexNormals[n].clone()}let e=new Py;e.faces=this.faces;for(let t=0,i=this.morphTargets.length;t<i;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){let l=new N,c={a:new N,b:new N,c:new N};n.push(l),s.push(c)}}let r=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,s=this.faces.length;n<s;n++){let o=this.faces[n],a=r.faceNormals[n],l=r.vertexNormals[n];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fr),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ks),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,i=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let r,n=this.vertices.length,s=this.vertices,o=e.vertices,a=this.faces,l=e.faces,c=this.colors,d=e.colors;t!==void 0&&(r=new pn().getNormalMatrix(t));for(let u=0,h=o.length;u<h;u++){let f=o[u].clone();t!==void 0&&f.applyMatrix4(t),s.push(f)}for(let u=0,h=d.length;u<h;u++)c.push(d[u].clone());for(let u=0,h=l.length;u<h;u++){let f=l[u],m,v,g=f.vertexNormals,p=f.vertexColors,x=new k_(f.a+n,f.b+n,f.c+n);x.normal.copy(f.normal),r!==void 0&&x.normal.applyMatrix3(r).normalize();for(let b=0,S=g.length;b<S;b++)m=g[b].clone(),r!==void 0&&m.applyMatrix3(r).normalize(),x.vertexNormals.push(m);x.color.copy(f.color);for(let b=0,S=p.length;b<S;b++)v=p[b],x.vertexColors.push(v.clone());x.materialIndex=f.materialIndex+i,a.push(x)}for(let u=0,h=e.faceVertexUvs.length;u<h;u++){let f=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let m=0,v=f.length;m<v;m++){let g=f[m],p=[];for(let x=0,b=g.length;x<b;x++)p.push(g[x].clone());this.faceVertexUvs[u].push(p)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},i=[],r=[],n=Math.pow(10,e);for(let a=0,l=this.vertices.length;a<l;a++){let c=this.vertices[a],d=Math.round(c.x*n)+"_"+Math.round(c.y*n)+"_"+Math.round(c.z*n);t[d]===void 0?(t[d]=a,i.push(this.vertices[a]),r[a]=i.length-1):r[a]=r[t[d]]}let s=[];for(let a=0,l=this.faces.length;a<l;a++){let c=this.faces[a];c.a=r[c.a],c.b=r[c.b],c.c=r[c.c];let d=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(d[u]===d[(u+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){let l=s[a];this.faces.splice(l,1);for(let c=0,d=this.faceVertexUvs.length;c<d;c++)this.faceVertexUvs[c].splice(l,1)}let o=this.vertices.length-i.length;return this.vertices=i,o}setFromPoints(e){this.vertices=[];for(let t=0,i=e.length;t<i;t++){let r=e[t];this.vertices.push(new N(r.x,r.y,r.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let a=0;a<t;a++)e[a]._id=a;function i(a,l){return a.materialIndex-l.materialIndex}e.sort(i);let r=this.faceVertexUvs[0],n=this.faceVertexUvs[1],s,o;r&&r.length===t&&(s=[]),n&&n.length===t&&(o=[]);for(let a=0;a<t;a++){let l=e[a]._id;s&&s.push(r[l]),o&&o.push(n[l])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let m in f)f[m]!==void 0&&(e[m]=f[m]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let m=this.vertices[f];t.push(m.x,m.y,m.z)}let i=[],r=[],n={},s=[],o={},a=[],l={};for(let f=0;f<this.faces.length;f++){let m=this.faces[f],v=!0,g=!1,p=this.faceVertexUvs[0][f]!==void 0,x=m.normal.length()>0,b=m.vertexNormals.length>0,S=m.color.r!==1||m.color.g!==1||m.color.b!==1,E=m.vertexColors.length>0,y=0;if(y=c(y,0,0),y=c(y,1,v),y=c(y,2,g),y=c(y,3,p),y=c(y,4,x),y=c(y,5,b),y=c(y,6,S),y=c(y,7,E),i.push(y),i.push(m.a,m.b,m.c),i.push(m.materialIndex),p){let C=this.faceVertexUvs[0][f];i.push(h(C[0]),h(C[1]),h(C[2]))}if(x&&i.push(d(m.normal)),b){let C=m.vertexNormals;i.push(d(C[0]),d(C[1]),d(C[2]))}if(S&&i.push(u(m.color)),E){let C=m.vertexColors;i.push(u(C[0]),u(C[1]),u(C[2]))}}function c(f,m,v){return v?f|1<<m:f&~(1<<m)}function d(f){let m=f.x.toString()+f.y.toString()+f.z.toString();return n[m]!==void 0||(n[m]=r.length/3,r.push(f.x,f.y,f.z)),n[m]}function u(f){let m=f.r.toString()+f.g.toString()+f.b.toString();return o[m]!==void 0||(o[m]=s.length,s.push(f.getHex())),o[m]}function h(f){let m=f.x.toString()+f.y.toString();return l[m]!==void 0||(l[m]=a.length/2,a.push(f.x,f.y)),l[m]}return e.data={},e.data.vertices=t,e.data.normals=r,s.length>0&&(e.data.colors=s),a.length>0&&(e.data.uvs=[a]),e.data.faces=i,e}clone(){return new Py().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let u=0,h=t.length;u<h;u++)this.vertices.push(t[u].clone());let i=e.colors;for(let u=0,h=i.length;u<h;u++)this.colors.push(i[u].clone());let r=e.faces;for(let u=0,h=r.length;u<h;u++)this.faces.push(r[u].clone());for(let u=0,h=e.faceVertexUvs.length;u<h;u++){let f=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let m=0,v=f.length;m<v;m++){let g=f[m],p=[];for(let x=0,b=g.length;x<b;x++){let S=g[x];p.push(S.clone())}this.faceVertexUvs[u].push(p)}}let n=e.morphTargets;for(let u=0,h=n.length;u<h;u++){let f={};if(f.name=n[u].name,n[u].vertices!==void 0){f.vertices=[];for(let m=0,v=n[u].vertices.length;m<v;m++)f.vertices.push(n[u].vertices[m].clone())}if(n[u].normals!==void 0){f.normals=[];for(let m=0,v=n[u].normals.length;m<v;m++)f.normals.push(n[u].normals[m].clone())}this.morphTargets.push(f)}let s=e.morphNormals;for(let u=0,h=s.length;u<h;u++){let f={};if(s[u].vertexNormals!==void 0){f.vertexNormals=[];for(let m=0,v=s[u].vertexNormals.length;m<v;m++){let g=s[u].vertexNormals[m],p={};p.a=g.a.clone(),p.b=g.b.clone(),p.c=g.c.clone(),f.vertexNormals.push(p)}}if(s[u].faceNormals!==void 0){f.faceNormals=[];for(let m=0,v=s[u].faceNormals.length;m<v;m++)f.faceNormals.push(s[u].faceNormals[m].clone())}this.morphNormals.push(f)}let o=e.skinWeights;for(let u=0,h=o.length;u<h;u++)this.skinWeights.push(o[u].clone());let a=e.skinIndices;for(let u=0,h=a.length;u<h;u++)this.skinIndices.push(a[u].clone());let l=e.lineDistances;for(let u=0,h=l.length;u<h;u++)this.lineDistances.push(l[u]);let c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());let d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new $ie().fromGeometry(this),t=new It,i=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",new Gt(i,3).copyVector3sArray(e.vertices)),e.normals.length>0){let r=new Float32Array(e.normals.length*3);t.setAttribute("normal",new Gt(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){let r=new Float32Array(e.colors.length*3);t.setAttribute("color",new Gt(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){let r=new Float32Array(e.uvs.length*2);t.setAttribute("uv",new Gt(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){let r=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",new Gt(r,2).copyVector2sArray(e.uvs2))}t.groups=e.groups;for(let r in e.morphTargets){let n=[],s=e.morphTargets[r];for(let o=0,a=s.length;o<a;o++){let l=s[o],c=new ut(l.data.length*3,3);c.name=l.name,n.push(c.copyVector3sArray(l.data))}t.morphAttributes[r]=n}if(e.skinIndices.length>0){let r=new ut(e.skinIndices.length*4,4);t.setAttribute("skinIndex",r.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){let r=new ut(e.skinWeights.length*4,4);t.setAttribute("skinWeight",r.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new It,i=e.geometry;if(e.isPoints||e.isLine){let r=new ut(i.vertices.length*3,3),n=new ut(i.colors.length*3,3);if(t.setAttribute("position",r.copyVector3sArray(i.vertices)),t.setAttribute("color",n.copyColorsArray(i.colors)),i.lineDistances&&i.lineDistances.length===i.vertices.length){let s=new ut(i.lineDistances.length,1);t.setAttribute("lineDistance",s.copyArray(i.lineDistances))}i.boundingSphere!==null&&(t.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(t.boundingBox=i.boundingBox.clone())}else e.isMesh&&(t=i.toBufferGeometry());return t}};Py.prototype.isGeometry=!0;var $ie=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],i,r,n,s=e.faces;for(r=0;r<s.length;r++){let o=s[r];o.materialIndex!==n&&(n=o.materialIndex,i!==void 0&&(i.count=r*3-i.start,t.push(i)),i={start:r*3,materialIndex:n})}i!==void 0&&(i.count=r*3-i.start,t.push(i)),this.groups=t}fromGeometry(e){let t=e.faces,i=e.vertices,r=e.faceVertexUvs,n=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,o=e.morphTargets,a=o.length,l;if(a>0){l=[];for(let g=0;g<a;g++)l[g]={name:o[g].name,data:[]};this.morphTargets.position=l}let c=e.morphNormals,d=c.length,u;if(d>0){u=[];for(let g=0;g<d;g++)u[g]={name:c[g].name,data:[]};this.morphTargets.normal=u}let h=e.skinIndices,f=e.skinWeights,m=h.length===i.length,v=f.length===i.length;i.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){let p=t[g];this.vertices.push(i[p.a],i[p.b],i[p.c]);let x=p.vertexNormals;if(x.length===3)this.normals.push(x[0],x[1],x[2]);else{let S=p.normal;this.normals.push(S,S,S)}let b=p.vertexColors;if(b.length===3)this.colors.push(b[0],b[1],b[2]);else{let S=p.color;this.colors.push(S,S,S)}if(n===!0){let S=r[0][g];S!==void 0?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new de,new de,new de))}if(s===!0){let S=r[1][g];S!==void 0?this.uvs2.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new de,new de,new de))}for(let S=0;S<a;S++){let E=o[S].vertices;l[S].data.push(E[p.a],E[p.b],E[p.c])}for(let S=0;S<d;S++){let E=c[S].vertexNormals[g];u[S].data.push(E.a,E.b,E.c)}m&&this.skinIndices.push(h[p.a],h[p.b],h[p.c]),v&&this.skinWeights.push(f[p.a],f[p.b],f[p.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},k_=class{constructor(e,t,i,r,n,s=0){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new N,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new Lt,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},Jie=["a","b","c"];function ere(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function Jw(e,t,i){let r=Math.min(e,t),n=Math.max(e,t),s=r+"_"+n;return i.get(s)}function eb(e,t,i,r,n,s){let o=Math.min(e,t),a=Math.max(e,t),l=o+"_"+a,c;if(r.has(l))c=r.get(l);else{let d=i[o],u=i[a];c={a:d,b:u,newEdge:null,faces:[]},r.set(l,c)}c.faces.push(n),s[e].edges.push(c),s[t].edges.push(c)}function tre(e,t,i,r){let n,s,o;for(n=0,s=e.length;n<s;n++)i[n]={edges:[]};for(n=0,s=t.length;n<s;n++)o=t[n],eb(o.a,o.b,e,r,o,i),eb(o.b,o.c,e,r,o,i),eb(o.c,o.a,e,r,o,i)}function wv(e,t,i,r,n){e.push(new k_(t,i,r,void 0,void 0,n))}function pd(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function bv(e,t,i,r){e.push([t.clone(),i.clone(),r.clone()])}var ire=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof It?e=new Py().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new N,i,r,n,s,o,a=e.vertices,l=e.faces,c=e.faceVertexUvs[0],d=c!==void 0&&c.length>0,u=[],h=new Map;tre(a,l,u,h);let f=[],m,v,g,p,x,b,S;for(let we of Array.from(h.keys())){for(v=h.get(we),g=new N,x=3/8,b=1/8,S=v.faces.length,S!=2&&(x=.5,b=0,S!=1),g.addVectors(v.a,v.b).multiplyScalar(x),t.set(0,0,0),s=0;s<S;s++){for(p=v.faces[s],o=0;o<3&&(m=a[ere(p,Jie[o])],!(m!==v.a&&m!==v.b));o++);m&&t.add(m)}t.multiplyScalar(b),g.add(t),v.newEdge=f.length,f.push(g)}let E,y,C,A,D,I,R,B=[];for(r=0,n=a.length;r<n;r++){for(I=a[r],D=u[r].edges,i=D.length,i==3?E=3/16:i>3&&(E=3/(8*i)),y=1-i*Number(E),C=E,i<=2&&(i==2?(y=3/4,C=1/8):i==1||i==0),R=I.clone().multiplyScalar(y),t.set(0,0,0),s=0;s<i;s++)A=D[s],m=A.a!==I?A.a:A.b,t.add(m);t.multiplyScalar(Number(C)),R.add(t),B.push(R)}let G=B.concat(f),j=B.length,ee,Q,re,z=[],X=[],Y,K,Z,V,fe=new de,ae=new de,ne=new de;for(r=0,n=l.length;r<n;r++)p=l[r],ee=Number(Jw(p.a,p.b,h).newEdge)+j,Q=Number(Jw(p.b,p.c,h).newEdge)+j,re=Number(Jw(p.c,p.a,h).newEdge)+j,wv(z,ee,Q,re,p.materialIndex),wv(z,p.a,ee,re,p.materialIndex),wv(z,p.b,Q,ee,p.materialIndex),wv(z,p.c,re,Q,p.materialIndex),d&&(Y=c[r],K=Y[0],Z=Y[1],V=Y[2],fe.set(pd(K.x,Z.x),pd(K.y,Z.y)),ae.set(pd(Z.x,V.x),pd(Z.y,V.y)),ne.set(pd(K.x,V.x),pd(K.y,V.y)),bv(X,fe,ae,ne),bv(X,K,fe,ne),bv(X,Z,ae,fe),bv(X,V,ne,ae));e.vertices=G,e.faces=z,d&&(e.faceVertexUvs[0]=X)}},mr=new N,rre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=e.geometry??(t==null?void 0:t.geometry)??new It().copy(new ia(100,100,100)),r;t===void 0?(i.computeBoundingBox(),i.boundingBox.getSize(mr),r={width:mr.x,height:mr.y,depth:mr.z,subdivisions:0}):r=t.parameters;let n={...r,...e.parameters};return{parameters:{width:Math.abs(n.width),height:Math.abs(n.height),depth:Math.abs(n.depth),subdivisions:Math.abs(n.subdivisions)},geometry:i}}static build(e){let{width:t,height:i,depth:r,subdivisions:n}=e.parameters,s=e.geometry??new It().copy(new ia(100,100,100)),o=s.userData.parameters;o===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(mr)):mr.set(o.width,o.height,o.depth),(t!==mr.x||i!==mr.y||r!==mr.z)&&s.scale(mr.x===0?1:t/mr.x,mr.y===0?1:i/mr.y,mr.z===0?1:r/mr.z);let a=s.originalGeometry;return n>0?(a===void 0||(o==null?void 0:o.subdivisions)!==n)&&(a===void 0&&(a=s),s=new ire(n).modify(a).toBufferGeometry()):(a!==void 0&&(s=a),a=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()),a!==void 0&&Object.assign(s,{originalGeometry:a}),delete e.geometry,Object.assign(s,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,i){new CN(i).load(e,r=>{let n=this.normalizeInputs({geometry:r});r.boundingBox.getSize(mr);let s=100/mr.x;Object.assign(n.parameters,{width:100,height:mr.y*s,depth:mr.z*s}),t(this.build(n))})}},nre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Zi?e.shape:new Zi,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,spikes:r,cornerRadius:n,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}=e.parameters,l=e.shape,c=t*.5,d=i*.5,u=0,h=0,f=2*Math.PI/r;for(let v=0;v<r;v++){let g=f*v,p=u+Math.sin(g)*c,x=h+Math.cos(g)*d;l.addPoint(l.createPoint(p,x))}l.isClosed=!0;for(let v=0,g=l.points.length;v<g;v++)l.points[v].roundness=n;l.roundness=n,l.update();let m=Bu.create({shape:l,parameters:{roundness:n,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(m,{userData:{...e,type:"PolygonGeometry"}})}},sre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,radialSegments:n,heightSegments:s,openEnded:o,cornerRadius:a,cornerSegments:l}=e.parameters,c=new are(t*.5,i,n,s,o,a,l);return c.scale(1,1,r/t),Object.assign(c,{userData:{...e,type:"PyramidGeometry"}})}};function zf(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function tb(e,t,i,r,n,s){let o=t.clone().sub(e),a=i.clone().sub(e),l=o.angleTo(a);if(o.normalize(),a.normalize(),r===n){let c=o.add(a).normalize();s.copy(e).addScaledVector(c,r/Math.sin(l/2))}else{let c=o.angleTo(a);s.copy(e),s.addScaledVector(o,n/Math.sin(c)),s.addScaledVector(a,r/Math.sin(c))}}function ore(e,t,i){let r=e.clone().sub(t),n=i.clone().sub(t);return r.projectOnVector(n),r.add(t)}var are=class extends It{constructor(e=.5,t=1,i=4,r=1,n=!1,s=0,o=4){super(),i=Math.floor(Math.max(3,i)),r=Math.floor(r),o=Math.floor(o);let a=[],l=[],c=[],d=[],u=0,h=t/2,f=Math.PI/i,m=e*Math.cos(Math.PI/i),v=2*Math.PI/i,g=(i-2)*Math.PI/i,p=Math.PI-g,x=new N(0,-h,0),b=new N(0,h,0),S=new de(e,-h),E=new de(m,-h),y=new de(0,b.y).sub(E),C=new de(0,b.y).sub(S),A=new de(y.y,-y.x).normalize(),D=new de(C.y,-C.x).normalize(),I=e*Math.cos(Math.PI/i)*Math.tan((Math.PI-y.angle())/2)-1e-8;s=Math.min(s,I);let R;{let re=new N(A.x,A.y,0),z=new N(Math.cos(v)*re.x,re.y,Math.sin(v)*re.x);R=re.angleTo(z)}let B=s/Math.tan((Math.PI-y.angle())/2),G=s/Math.tan((Math.PI-R)/2),j=new N;if(!n){l.push(x.x,x.y,x.z),c.push(0,-1,0),d.push(0,0);let re=u++,z=[],X=S.clone(),Y=B/Math.cos(Math.PI/i);X.x-=Y;for(let K=0;K<i;K++){let Z=K/i*Math.PI*2+f,V=new de(Math.sin(Z),Math.cos(Z));zf(X,V,j),l.push(j.x,j.y,j.z),c.push(0,-1,0),d.push(0,0),z.push(u++)}for(let K=0;K<z.length;K++)a.push(z[K],re,z[(K+1)%z.length])}{let re=new N,z=new N,X=new N,Y=new N,K=new N,Z=new N;for(let V=0;V<i;V++){let fe=V/i*Math.PI*2+f,ae=(V+.5)/i*Math.PI*2+f,ne=(V+1)/i*Math.PI*2+f,we=new de(Math.sin(fe),Math.cos(fe)),me=new de(Math.sin(ae),Math.cos(ae)),ue=new de(Math.sin(ne),Math.cos(ne));zf(S,we,z),zf(S,ue,X),zf(A,me,re),tb(b,z,X,G,G,Y),l.push(Y.x,Y.y,Y.z),tb(z,b,X,G,B,K),l.push(K.x,K.y,K.z),tb(X,z,b,B,G,Z),l.push(Z.x,Z.y,Z.z),c.push(re.x,re.y,re.z),c.push(re.x,re.y,re.z),c.push(re.x,re.y,re.z),d.push(0,0),d.push(0,0),d.push(0,0);let xe=u++,Le=u++,Re=u++;if(a.push(xe,Le,Re),s>0){{let He=z.clone().add(X).multiplyScalar(.5),ye=b.clone().sub(He).normalize(),Qe=x.clone().sub(He).normalize().add(ye).normalize().multiplyScalar(-1),rt=Z.clone().sub(K);ee(He,rt,Qe,y.angle())}let Oe,We;{let He=new N;zf(D,ue,He);let ye=Z.clone().add(Y).multiplyScalar(.5);ye=ore(ye,X,b);let Qe=Z.clone().sub(Y);[Oe,We]=ee(ye,Qe,He,R,Y.y)}{let He=Oe,ye=He.clone().setY(0).normalize(),Qe=new N(0,-1,0),rt=ye.clone().cross(Qe);Q(He,ye,Qe,rt)}{let He=y.angle(),ye=Math.PI-He,Qe=b.clone();Qe.y-=s/Math.sin(He-Math.PI/2);let rt=new N,Je=[];for(let lt=0;lt<o;lt++){let J=[],q=Math.PI/2-ye*lt/o,Se=Math.cos(q),je=Math.sin(q),qe=ae;for(let ot=0;ot<=lt;ot++){let wt=Math.cos(qe),Pe=Math.sin(qe);re.x=Se*Pe,re.y=je,re.z=Se*wt,rt.copy(Qe).addScaledVector(re,s),l.push(rt.x,rt.y,rt.z),c.push(re.x,re.y,re.z),d.push(0,0),J.push(u++),qe+=Math.PI*2/lt/i}Je.push(J)}We.reverse(),Je.push(We);let Bt=Je.length-1;for(let lt=0;lt<Bt;lt++){let J=Je[lt],q=Je[lt+1],Se=J.length-1;a.push(q[1],J[0],q[0]);for(let je=1;je<=Se;je++)a.push(J[je],J[je-1],q[je]),a.push(q[je+1],J[je],q[je])}}}}}this.setIndex(a),this.setAttribute("position",new ut(l,3)),this.setAttribute("normal",new ut(c,3)),this.setAttribute("uv",new ut(d,2));function ee(re,z,X,Y,K){let Z=-Y/2,V=(Math.PI-Y)/2,fe=z.clone().normalize().cross(X);re.addScaledVector(X,-s/Math.sin(V));let ae=new N,ne=new N,we=1,me=u,ue=[];for(let xe=0;xe<=o;xe++){let Le=Z+xe/o*Y;ne.set(0,0,0),ne.addScaledVector(fe,Math.sin(Le)),ne.addScaledVector(X,Math.cos(Le));for(let Re=0;Re<=we;Re++){let Oe=Re/we-.5;if(ae.copy(re),ae.addScaledVector(z,Oe),ae.addScaledVector(ne,s),K!=null){let We=Math.max(0,ae.y-K);ae.addScaledVector(z,-We/z.y)}l.push(ae.x,ae.y,ae.z),c.push(ne.x,ne.y,ne.z),d.push(0,0),Re===0&&ue.push(u),u++}}for(let xe=0;xe<o;xe++)for(let Le=0;Le<we;Le++){let Re=me+Le+(we+1)*xe,Oe=Re+(we+1),We=Oe+1,He=Re+1;a.push(Re,Oe,He),a.push(Oe,We,He)}return[re.clone().addScaledVector(z,.5),ue]}function Q(re,z,X,Y){let K=Math.PI/2,Z=C.angle()-K,V=[],fe=new N,ae=new N;for(let we=0;we<=o;we++){let me=[],ue=we/o;for(let xe=0;xe<=we;xe++){let Le=((we?xe/we:0)-.5)*p,Re=Math.cos(Le),Oe=Math.sin(Le),We=Math.atan(Math.tan(Z)*Re),He=(K+We)*ue,ye=Math.cos(He),Qe=Math.sin(He);fe.set(0,0,0),fe.addScaledVector(z,Qe*Re),fe.addScaledVector(X,ye),fe.addScaledVector(Y,Qe*Oe),ae.copy(re).addScaledVector(fe,s),l.push(ae.x,ae.y,ae.z),c.push(fe.x,fe.y,fe.z),d.push(0,0),me.push(u++)}V.push(me)}let ne=V.length-1;for(let we=0;we<ne;we++){let me=V[we],ue=V[we+1],xe=me.length-1;a.push(me[0],ue[1],ue[0]);for(let Le=1;Le<=xe;Le++)a.push(me[Le-1],me[Le],ue[Le]),a.push(me[Le],ue[Le+1],ue[Le])}}}},lre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),r=Object.assign((t==null?void 0:t.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Zi?e.shape:new Zi,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)}),ui:r}}static build(e){let t=e.shape,{width:i,height:r,cornerRadius:n,cornerType:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=e.parameters,c={x:i*.5,y:r*.5},d={x:-c.x,y:-c.y},u={x:c.x,y:c.y};function h(S,E,y){return E>i&&y>r?Math.min(S*i/E,S*r/y):E>i?S*i/E:y>r?S*r/y:S}let f=[];f[0]=n[0]===0?0:h(n[0],n[0]+n[3],n[0]+n[1]),f[1]=n[1]===0?0:h(n[1],n[1]+n[2],n[1]+n[0]),f[2]=n[2]===0?0:h(n[2],n[2]+n[1],n[2]+n[3]),f[3]=n[3]===0?0:h(n[3],n[3]+n[0],n[3]+n[2]);let m=d.x,v=u.x,g=u.y,p=d.y;t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(v,g)),t.addPoint(t.createPoint(v,p)),t.addPoint(t.createPoint(m,p)),t.isClosed=!0;let x=!0;for(let S=0,E=t.points.length;S<E;S++)t.points[S].roundness=f[S],S>0&&f[S]!==f[S-1]&&(x=!1);x&&(t.roundness=f[0]),t.useCubicForRoundedCorners=s!==1,t.update();let b=Bu.create({shape:t,parameters:{depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(b,{userData:{...e,type:"RectangleGeometry"}})}},cre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t=100,height:i=t,depth:r=t,widthSegments:n=64,heightSegments:s=64,phiStart:o,phiLength:a,thetaStart:l,thetaLength:c}=e.parameters,d=new U2(.5*t,n,s,o,a,l,c);return d.scale(1,i/t,r/t),Object.assign(d,{userData:{...e,type:"SphereGeometry"}})}},ure=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:0})}}static build(e){let{width:t=100,height:i=t,widthSegments:r=8,heightSegments:n=8}=e.parameters,s=new m1(t,i,r,n);return s.scale(1,1,1),Object.assign(s,{userData:{...e,type:"PlaneGeometry"}})}},dre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,angle:n,cornerRadius:s,cornerSegments:o}=e.parameters,a=new hre(t,i,r,n,s,o);return Object.assign(a,{userData:{...e,type:"BackdropGeometry"}})}},hre=class extends It{constructor(e=1,t=1,i=1,r=90,n=10,s=24){super(),this.type="BackdropGeometry";let o=[],a=[],l=[],c=.001;n==0&&(s=1),s=Math.max(1,Math.floor(s)),n=Math.min(n,100),r=Math.min(180-c,r),r*=Math.PI/180;let d=[],u=Math.PI/2,h=(we=0,me=0,ue=0)=>new N(we,me,ue),f=h(),m=h(),[v,g,p]=[t/2,e/2,i/2],x=-g,b=+g,[S,E,y]=[h(x,-v,+p),h(x,-v,-p),h(x,+v,-p)],C=(we,me=!1)=>Math.sin(we-Math.PI/(1+ +me)),A=(we,me=!1)=>Math.cos(we-Math.PI/(1+ +me));y.y=Math.sin(r)*t-v;let D=Math.cos(r)*t-p,I=S.z-c;r<=u?(y.z=Math.min(D,I),y.z==I&&(y.y-=(D-I)/Math.tan(u-r))):E.z=Math.min(E.z-D-p,S.z-c),f.subVectors(S,E),m.subVectors(y,E);let R=Math.min(f.length(),m.length())*n/100,B=R*Math.tan(r/2),G=R/Math.cos(r/2),j=f.clone().normalize().add(m.normalize()).setLength(G).add(E);f.set(0,C(r,!0),A(r,!0)),d.push([y,f.clone()]);let ee=(Math.PI-r)/s;for(let we=0;we<=s;we++){let me=u+r+we*ee;f.set(0,Math.sin(me)*B,Math.cos(me)*B),f.add(j),m.set(0,C(me),A(me)),d.push([f.clone(),m.clone()])}d.push([S,h(0,1,0)]);let Q=Math.sin(ee/2)*B*2,re=d.length-1,z=d[0][0].distanceTo(d[1][0]),X=d[re-1][0].distanceTo(d[re][0]),Y=z+Q*s+X;d[0].push(1);for(let we=0;we<=s;we++)d[we+1].push(1-(z+we*Q)/Y);d[re].push(0);let[K,Z,V]=d[0],fe,ae,ne;for(let we=1;we<d.length;we++)[fe,ae,ne]=d[we],o.push(x,K.y,K.z,x,fe.y,fe.z,b,K.y,K.z,b,K.y,K.z,x,fe.y,fe.z,b,fe.y,fe.z),a.push(0,Z.y,Z.z,0,ae.y,ae.z,0,Z.y,Z.z,0,Z.y,Z.z,0,ae.y,ae.z,0,ae.y,ae.z),l.push(0,V,0,ne,1,V,1,V,0,ne,1,ne),[K,Z,V]=[fe,ae,ne];this.setAttribute("position",new ut(o,3)),this.setAttribute("normal",new ut(a,3)),this.setAttribute("uv",new ut(l,2))}},fre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Zi?e.shape:new Zi,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,innerRadiusPercent:r,spikes:n,cornerRadius:s,angle:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,d=e.shape,u=t*.5,h=i*.5,f=0,m=0,v=o*Math.PI/360/n,g=Math.PI/2*3*-1,p=u*r/100,x=h*r/100;if(n===3&&r===50){v=2*Math.PI/n;for(let S=0;S<n;S++){let E=v*S,y=f+Math.sin(E)*u,C=m+Math.cos(E)*h;d.addPoint(d.createPoint(y,C))}}else for(let S=0;S<n;S++){let E=f+Math.cos(g)*u,y=m+Math.sin(g)*h;d.addPoint(d.createPoint(E,y)),g+=v,E=f+Math.cos(g)*p,y=m+Math.sin(g)*x,d.addPoint(d.createPoint(E,y)),g+=v}d.isClosed=!0;for(let S=0,E=d.points.length;S<E;S++)d.points[S].roundness=s;d.roundness=s,d.update();let b=Bu.create({shape:d,parameters:{roundness:s,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(b,{userData:{...e,type:"StarGeometry"}})}},pre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i}=e.parameters,r=new m1(t,i);return Object.assign(r,{userData:{...e,type:"TextFrameGeometry"}})}},mre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},e.parameters),r=Math.abs(i.width),n=Math.abs(i.height??i.width),s=Math.round(Math.abs(i.depth??i.width*.25));return{parameters:Object.assign(i,{width:r,height:n,depth:s})}}static build(e){let{width:t,height:i,depth:r,radialSegments:n,tubularSegments:s,arc:o,cornerRadius:a,cornerSegments:l}=e.parameters,c=gre(t,i,r,t*.5,o,s,0,0,n,a,l);return c.scale(1,i/t,1),Object.assign(c,{userData:{...e,type:"TorusGeometry"}})}};function gre(e,t,i,r,n,s,o,a,l,c,d){return[t,i]=[i,t],o=t/2,n/=2*Math.PI,n==1&&(c=0),new EA(!0,e,t,i,r,n,s,o,a,l,c,d)}var vre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),tube:i.tube??i.width*.125})}}static build(e){let{width:t,tube:i,tubularSegments:r,radialSegments:n,p:s,q:o}=e.parameters,a=t*.5;a!==i&&(a-=i);let l=new EN(a,i,r,n,s,o);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},yre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Zi?e.shape:new Zi,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width*(i.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t=100,height:i,cornerRadius:r,depth:n,extrudeBevelSize:s,extrudeBevelSegments:o,isRect:a}=e.parameters,l=e.shape,c=t*.5,d=i*.5;a?(l.addPoint(l.createPoint(-c,d)),l.addPoint(l.createPoint(c,-d)),l.addPoint(l.createPoint(-c,-d))):(l.addPoint(l.createPoint(0,d)),l.addPoint(l.createPoint(c,-d)),l.addPoint(l.createPoint(-c,-d))),l.isClosed=!0;for(let h=0,f=l.points.length;h<f;h++)l.points[h].roundness=r;l.roundness=r,l.update();let u=Bu.create({shape:l,parameters:{roundness:r,depth:n,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(u,{userData:{...e,type:"TriangleGeometry"}})}};function xre(){let e=new It;return e.setAttribute("position",new Gt(new Float32Array([]),3)),e.setIndex(new Gt(new Uint16Array([]),1)),e}var wre=12,bre=1,lk=class extends It{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],this.userData={parameters:e,type:"TextGeometry"};let i=t.getFont(e.font);i!=null&&i.isLoaded?(this.font=i,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let i=t.getFont(e);i&&(this.font=i,await i.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:i,height:r,depth:n,extrudeBevelSize:s,extrudeBevelSegments:o,text:a,textTransform:l}=e,c=l===2?a.toUpperCase():l===3?a.toLowerCase():a,d=Sre(e,t,c),{shapes:u,charWidths:h,charCoords:f}=t.generateShapes(d,e),m=i*.5,v=r*.5,g=u.map(b=>new Zi().fromShape(b));this.vectorShapes=g;let p=g.map(b=>Bu.create({shape:b,parameters:{depth:n,extrudeBevelSegments:o,extrudeBevelSize:s,windingRule:n<=0?Bi.NONZERO:Bi.ODD,subdivisions:this.isLowResolution&&n>0?bre:wre}})),x=p.length?Gd(p):xre();x.translate(-m,v,0),this.dispose(),this.wrappedText=d,this.charCoords=f,this.charWidths=h,this.deleteAttribute("extrudeNormal"),Object.entries(x.attributes).forEach(([b,S])=>{this.setAttribute(b,S)}),this.setIndex(x.index),this.computeBoundingSphere()}clone(){let e=qh(new It,lk.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,i])=>{this.setAttribute(t,i)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){return this.userData.parameters.text??""}};function Sre(e,t,i){i=i??e.text;let r=[""],n="";for(let s of i)n+=s,s===" "||s===`
`?(r[r.length-1]+=n,n="",s===`
`&&r.push("")):t.getTextWidth(r[r.length-1]+n,e)>e.width&&(r[r.length-1].length&&r.push(""),t.getTextWidth(r[r.length-1]+n,e)>e.width&&(n.length===1?(r[r.length-1]+=n,n=""):(r[r.length-1]+=n.slice(0,-1),n=n[n.length-1],r.push(""))));return r[r.length-1]+=n,r}var ck,AA=new Promise(e=>{ck=e}),fD=!1;async function _re(){if(fD)return;let e="https://unpkg.com/@splinetool/modelling-wasm@0.9.222/build",[t,i]=await Promise.all([f1(()=>import("./process-92a1d41a.js"),[]),fetch(`${e}/process.wasm`).then(s=>s.arrayBuffer())]),r=t.default,n=await r({wasmBinary:i});ck(n),fD=!0}function Dy(e,t,i){let r={parameters:e,type:e.type};if(e.type==="VectorGeometry"){let s=Zi.createFromState(e.shape,e.width,e.height);r.shape=s}else if(e.type==="NonParametricGeometry")e.data.groups&&e.data.groups.forEach(s=>s.materialIndex=Math.max(s.materialIndex??0,0)),r.geometry=new CN().parse(e);else{if(e.type==="SubdivGeometry")return new hn(e,i);if(e.type==="TextGeometry")return new lk(e,t)}let n;try{n=xD(r)}catch(s){console.error(s)}if(!n){let s=Zi.createFromState(my.defaultData(),100,100);r.shape=s,n=xD(r)}return n}var Ere=new at;function z_(e,t,i,r){let n=e.position.array,s=e.normal.array,o=Ere.makeScale(t,i,r).invert().elements,a,l,c;for(var d=0,u=n.length;d<u;d+=3)n[d]*=t,n[d+1]*=i,n[d+2]*=r,a=s[d],l=s[d+1],c=s[d+2],s[d]=o[0]*a+o[4]*l+o[8]*c,s[d+1]=o[1]*a+o[5]*l+o[9]*c,s[d+2]=o[2]*a+o[6]*l+o[10]*c;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var Sv=new fr,md=new N,At;AA.then(e=>{At=e});var pD=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),mD=new Uint32Array([0,1,2,3]),gD=new Uint8Array([4]),hn=class extends It{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let i=this.data.scaleBaked,r=mu.div(t,i);this.subdividedGeometry&&z_(this.subdividedGeometry.attributes,...r),this.originalGeometry&&z_(this.originalGeometry.attributes,...r),this.data=e;let n=this.userData.parameters;this.userData.parameters={width:n.width*r[0],height:n.height*r[1],depth:n.depth*r[2]},this.originalGeometry.boundingSphere.center.multiply(md.fromArray(r));let s=md.set(n.width,n.height,n.depth).length();this.originalGeometry.boundingSphere.radius=s/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,i;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:i}=hn.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new ia(100,100,100),i=0}this.subdivPointer=i,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let r=this.subdividedGeometry??this.originalGeometry;Object.assign(this,r),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(hn.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new ks,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;Sv.setFromBufferAttribute(t),Sv.getCenter(i),e.boundingSphere.radius=i.distanceTo(Sv.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Sv.getSize(md);let r={width:md.x,height:md.y,depth:md.z};return this.userData.parameters=r,r}static build(e,t,i,r){let n,s,o,a=(e==null?void 0:e.phongAngle)??35;i===!1&&(a=-1),t&&(At.free_bvh(t),At.free_subdivision_surface(t));try{n=hn.allocate(e,r)}catch(l){console.error(l,e),n=hn.allocate({positionWASM:pD,indexWASM:mD,verticesPerFaceWASM:gD},r)}if(At.set_destination_refinement_level(n,0),s=hn.buildLevel(n,!0,a),e.subdivisions>0)try{At.set_destination_refinement_level(n,e.subdivisions),o=hn.buildLevel(n,!1,a)}catch{try{At.set_destination_refinement_level(n,e.subdivisions-1),o=hn.buildLevel(n,!1,a)}catch{o=null}}else o=null;return{subdivPointer:n,originalGeometry:s,subdividedGeometry:o}}static primitiveToQuads(e,t,i){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let r;if(e.type==="TorusGeometry"&&e.arc===Math.PI*2){let{width:c,height:d,depth:u,arc:h,tubularSegments:f,radialSegments:m}=e;r=new EA(!0,c,u,d,c*.5,h/(2*Math.PI),f,u/2,0,m,0,0,!0)}else r=e.shape!==void 0?t.geometry:Dy(e,i,!1);let n,s,o,a;({positions:n,triIndices:a}=CA(r.getAttribute("position"),r.getIndex()));let l;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let c=e.radialSegments*e.heightSegments*3*2,d=c+e.radialSegments*3;l=[c,d]}return{indices:s,verticesPerFace:o}=uk(n,a,r,l),{positions:n,indices:s,verticesPerFace:o}}static allocate(e,t){var b;let i,r,n,s=[],o=[];e.positionWASM&&e.positionWASM.length>0?(i=e.positionWASM,r=e.indexWASM,n=e.verticesPerFaceWASM):(i=pD,r=mD,n=gD);let a=i.length,l=r.length,c=n.length,d=i.length+s.length+o.length,u=r.length+n.length,h=d*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,f=d*Float32Array.BYTES_PER_ELEMENT,m=At._malloc(h),v=new Float32Array(At.HEAPF32.buffer,m,d),g=new Uint32Array(At.HEAPU32.buffer,m+f,u);v.set(i,0),v.set(s,i.length),v.set(o,i.length+s.length),g.set(r,0),g.set(n,r.length);let p;(b=e==null?void 0:e.scaleBaked)!=null&&b.some(S=>S!==1)&&(p=new at().makeScale(...e.scaleBaked)),t&&(p?p.premultiply(t):p=t);let x=p?At.alloc_subdivision_surface2(m,a,m+f,l,m+f+r.length*Uint32Array.BYTES_PER_ELEMENT,c,p.elements):At.alloc_subdivision_surface(m,a,m+f,l,m+f+r.length*Uint32Array.BYTES_PER_ELEMENT,c);return At._free(m),x}static buildLevel(e,t,i,r,n){let s=n?At.get_mesh_data2(e,t?At.Level.CONTROL:At.Level.REFINED,i,n.elements):At.get_mesh_data(e,t?At.Level.CONTROL:At.Level.REFINED,i),o=8,a=At.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(4,4+4),c=0,d=At.HEAPU32[a[c]>>2],u=At.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let h=At.HEAPU32[a[c]>>2],f=At.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let m=At.HEAPU32[a[c]>>2],v=At.HEAPU32.subarray(m>>2,(m>>2)+l[c]);c++;let g=At.HEAPU32[a[c]>>2],p=At.HEAPU32.subarray(g>>2,(g>>2)+l[c]);if(c++,r===void 0){let x=new It;if(x.setIndex(new _p(p,1)),x.setAttribute("position",new ut(u,3)),x.setAttribute("normal",new ut(f,3)),t){x.setAttribute("faceMap",new _p(v,1));let b=new Float32Array(f.length/3*4).fill(0);x.setAttribute("color",new Gt(b,4))}return At.free_mesh_data(s),x.userData.type="SubdivGeometry",x}r.getAttribute("position").copyArray(u),r.getAttribute("normal").copyArray(f),r.attributes.position.needsUpdate=!0,r.attributes.normal.needsUpdate=!0,At.free_mesh_data(s)}static freeSubdivPointer(e){At.free_bvh(e),At.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,i){let r=At.get_wireframe_data_for_base_level(e),n=4,s=At.HEAPU32.subarray(r>>2,(r>>2)+n),o=s.subarray(2,2+2),a=0,l=At.HEAPU32[s[a]>>2],c=At.HEAPF32.subarray(l>>2,(l>>2)+o[a]);a++;let d=At.HEAPU32[s[a]>>2],u=At.HEAPU32.subarray(d>>2,(d>>2)+o[a]);if(t===void 0){let h=new It;h.setAttribute("position",new ut(c,3));let f=new Float32Array(c.length);for(let m=0,v=c.length;m<v;)f[m++]=i.r,f[m++]=i.g,f[m++]=i.b;return h.setAttribute("color",new Gt(f,3)),h.setIndex(new _p(u,1)),At.free_wireframe_data_for_base_level(r),h}t.getAttribute("position").copyArray(c),t.attributes.position.needsUpdate=!0,At.free_wireframe_data_for_base_level(r)}static updateCollabMesh(e,t,i){let r=t===0;r||At.set_destination_refinement_level(e,t);let n=i?At.get_topological_data2(e,r?At.Level.CONTROL:At.Level.REFINED,i.elements):At.get_topological_data(e,r?At.Level.CONTROL:At.Level.REFINED),s=6,o=At.HEAPU32.subarray(n>>2,(n>>2)+s),a=o.subarray(3,3+3),l=0,c=At.HEAPU32[o[l]>>2],d=new Float32Array(At.HEAPF32.subarray(c>>2,(c>>2)+a[l]));l++;let u=At.HEAPU32[o[l]>>2],h=new Uint32Array(At.HEAPU32.subarray(u>>2,(u>>2)+a[l]));l++;let f=At.HEAPU32[o[l]>>2],m=new Uint8Array(At.HEAPU32.subarray(f>>2,(f>>2)+a[l]));return At.free_topological_data(n),{positions:d,indices:h,verticesPerFace:m}}},vD=["getX","getY","getZ"];function CA(e,t){let i={},r=t?t.count:e.count,n=0,s=[],o=[],a=1e4;for(let c=0;c<r;c++){let d=t?t.getX(c):c,u="";for(let h=0;h<3;h++)u+=`${~~(e[vD[h]](d)*a)},`;if(u in i)s.push(i[u]);else{for(let h=0;h<3;h++)o.push(e[vD[h]](d));i[u]=n,s.push(n),n++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:o,triIndices:l}}var _v=new N,ib=new N,rb=new N,nb=new N;function uk(e,t,i,r){let n=[],s=[];if(i.userData.shape!==void 0&&i.userData.parameters.depth===0&&i.userData.shape.shapeHoles.length===0){let o=i.userData.shape.extractShapePointsToFlatArray([]),a=i.userData.parameters.spikes;if(i.userData.type==="EllipseGeometry"&&a<=24&&a%4===0&&i.userData.parameters.angle>=360){let d=o.length/2/a;o=o.filter((u,h)=>Math.floor(h/2)%d===0)}let l=0;for(let d=0;d<o.length;d+=2)l+=(o[d]-o[(d===0?o.length:d)-2])*(o[d+1]+o[(d===0?o.length:d)-1]);e.length=0;let c=0;if(l<0)for(let d=0;d<o.length;d+=2)e.push(o[d],o[d+1],0),n.push(c++);else for(let d=o.length-2;d>=0;d-=2)e.push(o[d],o[d+1],0),n.push(c++);return s.push(c),{indices:n,verticesPerFace:s}}for(let o=0,a=i.capStartIndex??t.length;o<a;)if(t[o+1]===t[o+3]&&t[o+2]===t[o+5]||t[o+0]===t[o+3]&&t[o+2]===t[o+4]){_v.set(e[t[o]*3],e[t[o]*3+1],e[t[o]*3+2]),ib.set(e[t[o+1]*3],e[t[o+1]*3+1],e[t[o+1]*3+2]),rb.set(e[t[o+4]*3],e[t[o+4]*3+1],e[t[o+4]*3+2]),nb.set(e[t[o+5]*3],e[t[o+5]*3+1],e[t[o+5]*3+2]),ib.sub(_v).normalize(),rb.sub(_v).normalize(),nb.sub(_v).normalize();let l=ib.cross(rb).dot(nb);Math.abs(l)>.005||r&&r.some((c,d)=>d%2===1?!1:o>=r[d]&&o<r[d+1])?(n.push(t[o],t[o+1],t[o+2]),s.push(3),o+=3):(n.push(t[o],t[o+1],t[o+4],t[o+5]),s.push(4),o+=6)}else n.push(t[o],t[o+1],t[o+2]),s.push(3),o+=3;if(i.capStartIndex!==void 0){let o=[],a=[],l=0,c=new Float32Array([i.userData.parameters.depth])[0];for(let d=0,u=0;d<e.length;d+=3,u++)e[d+2]===0&&(o.push(u),l++),e[d+2]===c&&a.push(u);if(i.userData.parameters.extrudeBevelSize===0){let d=a[0];a[0]=a[1],a[1]=d}o.reverse(),n.push(...o,...a),s.push(l,l)}return{indices:n,verticesPerFace:s}}var Dl={};rH(Dl,{calcBoolean:()=>Pre,calcBooleanTopological:()=>Mre,freeMeshSet:()=>Lre,getMeshSet:()=>Dre,transformMeshSet:()=>Ore});var dk,Are=new Promise(e=>{dk=e}),yD=!1;async function Cre(){if(yD)return;let e="https://unpkg.com/@splinetool/boolean-wasm@0.9.222/build",[t,i]=await Promise.all([f1(()=>import("./boolean-9d58d081.js"),[]),fetch(`${e}/boolean.wasm`).then(s=>s.arrayBuffer())]),r=t.default,n=await r({wasmBinary:i});dk(n),yD=!0}var $t,uh;Are.then(e=>$t=e);function Tre(e,t,i){let r,{positions:n,triIndices:s}=CA(e.getAttribute("position"),e.getIndex()),o;if(t&&i){let{indices:a,verticesPerFace:l}=uk(n,s,e);o=l.length,r=[];for(let c=0,d=0;c<o;c++){r.push(l[c]);for(let u=0;u<l[c];u++)r.push(a[d++])}}else{let a=s.length;r=Array(a+a/3),o=0;for(let l=0,c=0;c<r.length;)r[c++]=3,o++,r[c++]=s[l++],r[c++]=s[l++],r[c++]=s[l++]}return{positions:n,faceIndices:r,nFaces:o}}function hk(e){let t=e.length,i=t*Uint32Array.BYTES_PER_ELEMENT,r=t*Float32Array.BYTES_PER_ELEMENT,n=Number.isInteger(e[0])?i:r,s=$t._malloc(n);return(Number.isInteger(e[0])?new Uint32Array($t.HEAPU32.buffer,s,t):new Float32Array($t.HEAPF32.buffer,s,t)).set(e,0),s}function fk(e){switch(e){case 0:return $t.OP.UNION;case 1:return $t.OP.INTERSECTION;case 2:return $t.OP.A_MINUS_B;case 3:return $t.OP.B_MINUS_A;case 4:return $t.OP.SYMMETRIC_DIFFERENCE;case 5:return $t.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function Mre(e,t){uh===void 0&&(uh=$t.init_csg());let i=hk(e),r=$t.csg_calc_topological(uh,i,e.length,fk(t));$t._free(i);let n=6,s=$t.HEAPU32.subarray(r>>2,(r>>2)+n),o=s.subarray(3,3+3),a=0,l=$t.HEAPU32[s[a]>>2],c=new Float32Array($t.HEAPF32.subarray(l>>2,(l>>2)+o[a]));a++;let d=$t.HEAPU32[s[a]>>2],u=new Uint32Array($t.HEAPU32.subarray(d>>2,(d>>2)+o[a]));a++;let h=$t.HEAPU32[s[a]>>2],f=new Uint8Array($t.HEAPU32.subarray(h>>2,(h>>2)+o[a]));return $t.free_mesh_data(r),{positions:c,indices:u,verticesPerFace:f}}function Pre(e,t,i,r){uh===void 0&&(uh=$t.init_csg());let n=hk(e),s=$t.csg_calc(uh,n,e.length,r,fk(t));$t._free(n);let o=5,a=$t.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(2,2+3),c=0,d=$t.HEAPU32[a[c]>>2],u=$t.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let h=$t.HEAPU32[a[c]>>2],f=$t.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let m=l[c];i.setAttribute("position",new ut(u,3)),i.setAttribute("normal",new ut(f,3));let v=$t.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return i.boundingSphere===null&&(i.boundingSphere=new ks),i.boundingSphere.center.set(v[0],v[1],v[2]),i.boundingSphere.radius=(v[3]**2+v[4]**2+v[5]**2)**.5,i.userData.parameters={width:v[3]*2,height:v[4]*2,depth:v[5]*2},$t.free_mesh_data(s),m}function Dre(e,t,i){if($t===void 0)return-1;let r,n,s;if(t&&e.userData.positions!==void 0){let v=e.userData;s=v.verticesPerFace.length,r=v.positions,n=Array(v.verticesPerFace.reduce((g,p)=>g+p,0)+s);for(let g=0,p=0,x=0;g<v.verticesPerFace.length;g++){n[x++]=v.verticesPerFace[g];for(let b=0;b<v.verticesPerFace[g];b++)n[x++]=v.indices[p++]}}else({positions:r,faceIndices:n,nFaces:s}=Tre(e,t,i));let o=r.length,a=n.length,l=r.length,c=n.length,d=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,h=$t._malloc(d),f=new Float32Array($t.HEAPF32.buffer,h,l),m=new Uint32Array($t.HEAPU32.buffer,h+u,c);return f.set(r,0),m.set(n,0),$t.get_csg_mesh(h,o,h+u,a,s)}function Ore(e,t){$t.transform_csg_mesh(e,t.elements)}function Lre(e){$t.free_csg_mesh(e)}var Ire={ConeGeometry:pie,CubeGeometry:mie,CylinderGeometry:fie,DodecahedronGeometry:vie,EllipseGeometry:Wie,HelixGeometry:Qie,IcosahedronGeometry:Kie,LatheGeometry:Zie,NonParametricGeometry:rre,PolygonGeometry:nre,PyramidGeometry:sre,RectangleGeometry:lre,SphereGeometry:cre,PlaneGeometry:ure,BackdropGeometry:dre,StarGeometry:fre,TextFrameGeometry:pre,TorusGeometry:mre,TorusKnotGeometry:vre,TriangleGeometry:yre,VectorGeometry:Bu},xD=e=>Ire[e.type].create(e);function Ff(e){return e!==null&&"booleanOp"in e}var pk=class extends YB($n){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new at}updateVisible(){super.updateVisible(),this.visible=!Ff(this.parent)&&this.visible,Ff(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Dl.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Ff(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof pk&&(e.freeBooleanPointer(),Ff(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e){let t=super.updateTransformState(e);return t&&Ff(this.parent)&&this.invalidateDownstreamBooleanData(!0),t}},Ev=new fr;function mk(e,t=0,i=e.count,r,n){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,d=-1/0;for(let u=t;u<i;u++){let h=e.getX(u),f=e.getY(u),m=e.getZ(u);h<s&&(s=h),f<o&&(o=f),m<a&&(a=m),h>l&&(l=h),f>c&&(c=f),m>d&&(d=m)}Ev.min.set(s,o,a),Ev.max.set(l,c,d),Ev.getCenter(r),Ev.getSize(n).multiplyScalar(.5)}var Rre=new It,Nre=new Rm,as=class extends pk{constructor(e,t){super(Rre,Nre),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?mk(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},wD=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Sc=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=Jt.generateUUID(),this.type=e,this.name=""}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,i){return i=i??{},this.analyze(e,i),this.flow(e,t,i)}flow(e,t,i){i=i??{},e.addFlow(i.slot,i.cache,i.context);let r={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),r}build(e,t,i){t=t??this.getType(e,t);let r=e.getNodeData(i??this);return e.analyzing&&this.appendDepsNode(e,r,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,i)}updateFrame(e){}generateReadonly(e,t,i,r,n,s){return""}generate(e,t,i,r,n){return""}parse(e,t,i,r){}appendDepsNode(e,t,i){t.deps=(t.deps||0)+1;let r=e.getTypeLength(i);(r>(t.outputMax||0)||this.getType(e,i))&&(t.outputMax=r,t.output=i)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getHash(){let e="{",t,i;for(t in this)i=this[t],i instanceof Sc&&(e+='"'+t+'":'+i.getHash()+",");if(this.hashProperties)for(let r=0;r<this.hashProperties.length;r++)t=this.hashProperties[r],i=this[t],e+='"'+t+'":"'+String(i)+'",';return e+='"id":"'+this.uuid+'"}',e}},Bre=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,i){i=i!==void 0?i:!0,this.keywords[e]={callback:t,cache:i}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},Pn=new Bre,Ai=class extends Sc{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,i,r){if(t=t??this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=Jt.generateUUID()),i=e.getUUID(i??this.getUUID(),!n);let s=e.getNodeData(i),o=s.output||this.getType(e);if(e.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,s,t),this.generate(e,t,i)):super.build(e,t,i);if(n)return s.name=s.name||super.build(e,t,i),s.name;if(!this.getLabel()&&(!this.getShared(e,o)||e.context.ignoreCache||s.deps===1))return super.build(e,t,i);i=this.getUUID(!1);let a=this.getTemp(e,i);if(a)return e.format(a,o,t);{a=super.generate(e,t,i,s.output,r);let l=this.generate(e,o,i);return e.addNodeCode(a+" = "+l+";"),e.format(a,o,t)}}return super.build(e,t,i)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let i=e.getVars()[t];return i?i.name:void 0}generate(e,t,i,r,n){return this.getShared(e,t)||console.error("TempNode is not shared"),i=i??this.uuid,e.getTempVar(i,r??this.getType(e),n,this.getLabel()).name}},us=class extends Ai{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,i,r,n,s){i=e.getUUID(i??this.getUUID()),r=r??this.getType(e);let o=e.getNodeData(i);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,i,r,n,s):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(r,this,n,s,this.getLabel())),e.format(o.vertex.name,r,t)):(o.fragment||(o.fragment=e.createFragmentUniform(r,this,n,s,this.getLabel())),e.format(o.fragment.name,r,t))}},Ss=class extends us{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof de?e:new de(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,i,r,n,s){return e.format("vec2("+this.value.x+", "+this.value.y+")",r,t)}},xs=class extends us{constructor(e=0,t,i){super("v3"),this.nodeType="Vector3",this.value=e instanceof N?e:new N(e,t,i)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,i,r,n,s){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,t)}},ss=class extends Lt{constructor(e,t,i,r){super(e,t,i),this.isColorA=!0,this.a=r}setRGBA(e,t,i,r){super.setRGB(e,t,i),this.a=r}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Zc=class extends us{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof ss?e:new ss(e.r,e.g,e.b,e.a)}generateReadonly(e,t,i,r,n,s){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,t)}},kre=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,bD=/[a-z_0-9]+/gi,xt=class extends Ai{constructor(e,t,i,r,n){super(n),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,i,r)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,i,r,n){let s,o=0,a=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)e.include(this.includes[c],this);for(let c in this.extensions)e.extensions[c]=!0;let l=[];for(;s=bD.exec(this.src);)l.push(s);for(let c=0;c<l.length;c++){let d=l[c],u=d[0],h=this.isMethod?!this.getInputByName(u):!0,f=u;if(this.keywords[u]||this.useKeywords&&h&&Pn.containsKeyword(u)){let m=this.keywords[u];if(!m){let v=Pn.getKeywordData(u);v.cache&&(m=e.keywords[u]),m=m||Pn.getKeyword(u,e),v.cache&&(e.keywords[u]=m)}f=m.build(e)}u!==f&&a[d.index+o-1]!=="."&&(a=a.substring(0,d.index+o)+f+a.substring(d.index+u.length+o),o+=f.length-u.length),this.getIncludeByName(f)===void 0&&Pn.contains(f)&&e.include(Pn.get(f))}return t==="source"?a:this.isMethod?(this.isInterface||e.include(this,void 0,a),this.name):e.format("( "+a+" )",this.getType(e),t)}parse(e,t,i,r){if(this.src=e||"",this.includes=t??[],this.extensions=i??{},this.keywords=r??{},this.isMethod){let n=kre.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let s=n[3].match(bD);if(s){let o=0;for(;o<s.length;){let a=s[o++],l;a==="in"||a==="out"||a==="inout"?l=s[o++]:(l=a,a="");let c=s[o++];this.inputs.push({name:c,type:l,qualifier:a})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},zre=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,gk=class extends Ai{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||gk.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,i,r,n){this.src=e||"";let s,o,a="",l=zre.exec(e);this.useDefine=n??this.src.charAt(0)==="#",l&&l.length>1?(o=l[1],s=l[2],a=l[3]):(s=this.src,o="f"),this.name=s,this.type=o,this.value=a}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,i,r,n){return e.format(this.name,this.getType(e),t)}},bi=gk;bi.PI="PI",bi.PI2="PI2",bi.RECIPROCAL_PI="RECIPROCAL_PI",bi.RECIPROCAL_PI2="RECIPROCAL_PI2",bi.LOG2="LOG2",bi.EPSILON="EPSILON";var Fre=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),Ure=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),vk=class extends Ai{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,i,r,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=Fre.exec(e);if(t){let i=t[2],r;for(;r=Ure.exec(i);)this.inputs.push({type:r[1],name:r[2]});this.name=t[1]}else this.name="";this.type=this.name}},TA=class extends Ai{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let i=this.index>0?this.index+1:"",r=e.isShader("vertex")?"uv"+i:"vUv"+i;return e.format(r,this.getType(e),t)}};Pn.addKeyword("uv",function(){return new TA});Pn.addKeyword("uv2",function(){return new TA(1)});var Ed=class extends Ai{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??Ed.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case ta:return["Linear"];case Yt:return["sRGB"];default:return[]}}generate(e,t){var o;let i=this.input.build(e,"v4"),r=this.getType(e),n=Ed.Nodes[this.method],s=e.include(n);if(s===Ed.LINEAR_TO_LINEAR)return e.format(i,r,t);if(((o=n.inputs)==null?void 0:o.length)===2){let a=this.factor.build(e,"f");return e.format(s+"( "+i+", "+a+" )",r,t)}else return e.format(s+"( "+i+" )",r,t)}fromEncoding(e){let t=Ed.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=Ed.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},Wo=Ed;Wo.Nodes={LinearToLinear:new xt(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new xt(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new xt(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Wo.LINEAR_TO_LINEAR="LinearToLinear",Wo.SRGB_TO_LINEAR="sRGBToLinear",Wo.LINEAR_TO_SRGB="LinearTosRGB";var Ni=class extends xt{constructor(e="",t,i,r,n){super(e,n,r,i,t),this.nodeType="Expression"}},Wl=class extends us{constructor(e=new tn,t,i,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new TA,this.bias=i,this.project=r!==void 0?r:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let i=this.getTexture(e,t),r=this.uv.build(e,this.project?"v4":"v2"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s,o;this.project?s="texture2DProj":s=n?"tex2DBias":"tex2D",n?o=s+"( "+i+", "+r+", "+n+" )":o=s+"( "+i+", "+r+" )";let a={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace??new Wo(new Ni("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,l),e.removeContext(),e.format(o,l,t)}},ht=class extends us{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,i,r,n,s){return e.format(this.value+(this.value%1?"":".0"),r,t)}},SD=class extends Ai{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,i,r,n){r=this.getType(e);let s=this.value,o=s.build(e,t)+"( ",a=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let c=s.inputs[l],d=this.inputs[l]||this.inputs[c.name];a.push(d.build(e,e.getTypeByFormat(c.type)))}o+=a.join(", ")+" )"}return e.format(o,r,t)}},yk=class extends Ai{constructor(e,t,i=yk.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=i}getType(e){let t=this.a.getType(e),i=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(i)>e.getTypeLength(t)?i:t}generate(e,t){let i=this.getType(e);this.type=i;let r=this.a.build(e,i),n=this.b.build(e,i);return e.format("( "+r+" "+this.op+" "+n+" )",i,t)}},qo=yk;qo.ADD="+",qo.SUB="-",qo.MUL="*",qo.DIV="/";var wi=class extends Ai{constructor(e,t=wi.ABS,i,r){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:r=t,typeof i!="string"?this.c=i:r=i,this.method=r,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case wi.MIX:case wi.CLAMP:case wi.REFRACT:case wi.SMOOTHSTEP:case wi.FACEFORWARD:return 3;case wi.MIN:case wi.MAX:case wi.MOD:case wi.STEP:case wi.REFLECT:case wi.DISTANCE:case wi.DOT:case wi.CROSS:case wi.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),i=this.b?e.getTypeLength(this.b.getType(e)):0,r=this.c?e.getTypeLength(this.c.getType(e)):0;return t>i&&t>r?this.a.getType(e):i>r?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case wi.LENGTH:case wi.DISTANCE:case wi.DOT:return"f";case wi.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let i,r,n,s=this.a?e.getTypeLength(this.a.getType(e)):0,o=this.b?e.getTypeLength(this.b.getType(e)):0,a=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),c=this.getType(e);switch(this.type=c,this.method){case wi.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case wi.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case wi.CROSS:i=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case wi.STEP:i=this.a.build(e,s===1?"f":l),r=this.b.build(e,l);break;case wi.MIN:case wi.MAX:case wi.MOD:i=this.a.build(e,l),r=this.b.build(e,o===1?"f":l);break;case wi.REFRACT:i=this.a.build(e,l),r=this.b.build(e,l),n=this.c.build(e,"f");break;case wi.MIX:i=this.a.build(e,l),r=this.b.build(e,l),n=this.c.build(e,a===1?"f":l);break;default:i=this.a.build(e,l),this.b&&(r=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let d=[];d.push(i),r&&d.push(r),n&&d.push(n);let u=this.getNumInputs(e);if(d.length!==u)throw Error(`Arguments not match used in "${this.method}". Require ${u}, currently ${d.length}.`);return e.format(this.method+"( "+d.join(", ")+" )",c,t)}},Ut=wi;Ut.RAD="radians",Ut.DEG="degrees",Ut.EXP="exp",Ut.EXP2="exp2",Ut.LOG="log",Ut.LOG2="log2",Ut.SQRT="sqrt",Ut.INV_SQRT="inversesqrt",Ut.FLOOR="floor",Ut.CEIL="ceil",Ut.NORMALIZE="normalize",Ut.FRACT="fract",Ut.SATURATE="saturate",Ut.SIN="sin",Ut.COS="cos",Ut.TAN="tan",Ut.ASIN="asin",Ut.ACOS="acos",Ut.ARCTAN="atan",Ut.ABS="abs",Ut.SIGN="sign",Ut.LENGTH="length",Ut.NEGATE="negate",Ut.INVERT="invert",Ut.MIN="min",Ut.MAX="max",Ut.MOD="mod",Ut.STEP="step",Ut.REFLECT="reflect",Ut.DISTANCE="distance",Ut.DOT="dot",Ut.CROSS="cross",Ut.POW="pow",Ut.MIX="mix",Ut.CLAMP="clamp",Ut.REFRACT="refract",Ut.SMOOTHSTEP="smoothstep",Ut.FACEFORWARD="faceforward";var lp=class extends Ai{constructor(e,t,i){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=i}bilinearCubeUV(e,t,i,r){let n=new SD(lp.Nodes.bilinearCubeUV,[t,i,r]);this.colorSpaceTL=this.colorSpaceTL??new Wo(new Ni("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(n.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Wo(new Ni("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(n.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Wo(new Ni("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(n.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Wo(new Ni("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(n.build(e)+".br");let s={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(s),this.colorSpaceTLExp=new Ni(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Ni(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Ni(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Ni(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let o=new Ni("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return o.keywords.cubeUV_TL=this.colorSpaceTLExp,o.keywords.cubeUV_TR=this.colorSpaceTRExp,o.keywords.cubeUV_BL=this.colorSpaceBLExp,o.keywords.cubeUV_BR=this.colorSpaceBRExp,o.keywords.cubeUV=n,o}generate(e,t){if(e.isShader("fragment")){let i=this.uv,r=this.bias||e.context.roughness,n=new SD(lp.Nodes.roughnessToMip,[r]),s=new Ut(n,lp.Nodes.m0,lp.Nodes.cubeUV_maxMipLevel,Ut.CLAMP),o=new Ut(s,Ut.FLOOR),a=new Ut(s,Ut.FRACT),l=this.bilinearCubeUV(e,this.value,i,o),c=this.bilinearCubeUV(e,this.value,i,new qo(o,new ht(1).setReadonly(!0),qo.ADD)),d=new Ut(l,c,a,Ut.MIX);return e.format(d.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},F_=lp;F_.Nodes=function(){let e=new vk(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new bi("float cubeUV_maxMipLevel 8.0",!0),i=new bi("float cubeUV_minMipLevel 4.0",!0),r=new bi("float cubeUV_maxTileSize 256.0",!0),n=new bi("float cubeUV_minTileSize 16.0",!0),s=new xt(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let o=new xt(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let a=new xt(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,s,o,t,i,r,n]);a.useKeywords=!1;let l=new bi("float r0 1.0",!0),c=new bi("float v0 0.339",!0),d=new bi("float m0 -2.0",!0),u=new bi("float r1 0.8",!0),h=new bi("float v1 0.276",!0),f=new bi("float m1 -1.0",!0),m=new bi("float r4 0.4",!0),v=new bi("float v4 0.046",!0),g=new bi("float m4 2.0",!0),p=new bi("float r5 0.305",!0),x=new bi("float v5 0.016",!0),b=new bi("float m5 3.0",!0),S=new bi("float r6 0.21",!0),E=new bi("float v6 0.0038",!0),y=new bi("float m6 4.0",!0),C=[l,c,d,u,h,f,m,v,g,p,x,b,S,E,y],A=new xt(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,C);return{bilinearCubeUV:a,roughnessToMip:A,m0:d,cubeUV_maxMipLevel:t}}();var Ad=class extends Ai{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??Ad.VIEW}getShared(){return this.scope===Ad.WORLD}build(e,t,i,r){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,i,r):super.build(e,t,i)}generate(e,t,i,r,n){let s;switch(this.scope){case Ad.VIEW:e.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case Ad.LOCAL:e.isShader("vertex")?s="objectNormal":(e.requires.normal=!0,s="vObjectNormal");break;case Ad.WORLD:e.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,s="vWNormal");break}return e.format(s,this.getType(e),t)}},On=Ad;On.LOCAL="local",On.WORLD="world",On.VIEW="view",On.NORMAL="normal";Pn.addKeyword("viewNormal",function(){return new On(On.VIEW)});Pn.addKeyword("localNormal",function(){return new On(On.NORMAL)});Pn.addKeyword("worldNormal",function(){return new On(On.WORLD)});var Pa=class extends Ai{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??Pa.LOCAL}getType(){switch(this.scope){case Pa.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Pa.LOCAL:case Pa.WORLD:return!1}return!0}generate(e,t,i,r,n){let s;switch(this.scope){case Pa.LOCAL:e.isShader("vertex")?s="transformed":(e.requires.position=!0,s="vPosition");break;case Pa.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,s="vWPosition";break;case Pa.VIEW:s=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Pa.PROJECTION:s=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(s,this.getType(),t)}},ho=Pa;ho.LOCAL="local",ho.WORLD="world",ho.VIEW="view",ho.PROJECTION="projection";Pn.addKeyword("position",function(){return new ho});Pn.addKeyword("worldPosition",function(){return new ho(ho.WORLD)});Pn.addKeyword("viewPosition",function(){return new ho(ho.VIEW)});var Io=class extends Ai{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??Io.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case Io.SPHERE:return"v2"}return this.type}generate(e,t){let i=this.getUnique(e);if(e.isShader("fragment")){let r;switch(this.scope){case Io.VECTOR:{let n=new On(On.VIEW),s=e.context.roughness,o=n.build(e,"v3"),a=new ho(ho.VIEW).build(e,"v3"),l=s?s.build(e,"f"):void 0,c=`reflect( -normalize( ${a} ), ${o} )`;l&&(c=`normalize( mix( ${c}, ${o}, ${l} * ${l} ) )`);let d=`inverseTransformDirection( ${c}, viewMatrix )`;i?(e.addNodeCode(`vec3 reflectVec = ${d};`),r="reflectVec"):r=d;break}case Io.CUBE:{let n=new Io(Io.VECTOR).build(e,"v3"),s="vec3( -"+n+".x, "+n+".yz )";i?(e.addNodeCode(`vec3 reflectCubeVec = ${s};`),r="reflectCubeVec"):r=s;break}case Io.SPHERE:{let n="normalize( ( viewMatrix * vec4( "+new Io(Io.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";i?(e.addNodeCode(`vec2 reflectSphereVec = ${n};`),r="reflectSphereVec"):r=n;break}}return e.format(r,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},dh=Io;dh.CUBE="cube",dh.SPHERE="sphere",dh.VECTOR="vector";var jre=class extends Ai{constructor(e=new Wl,t,i){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new F_(this.value,t??new dh(dh.VECTOR),i),this.irradianceNode=new F_(this.value,new On(On.WORLD),new ht(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},Hre=class extends us{constructor(e=new L2,t,i){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new dh,this.bias=i}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l;if(t==="samplerCube")return this.getTexture(e,t);let i=this.getTexture(e,t),r=(l=this.uv)==null?void 0:l.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s;n?s="texCubeBias( "+i+", "+r+", "+n+" )":s="texCube( "+i+", "+r+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},a=this.getType(e);return e.addContext(o),this.colorSpace=this.colorSpace??new Wo(new Ni("",a)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,a),e.removeContext(),e.format(s,a,t)}},_D=["x","y","z","w"],Gre=["float","vec2","vec3","vec4"],Vre={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},Wre={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},qre=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function e(t,i){return t.deps.length-i.deps.length}return function(t,i){let r=this.getIncludes(t,i);if(!r)return"";let n="";r=r.sort(e);for(let s=0;s<r.length;s++)r[s].src&&(n+=r[s].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(let i=0;i<this.requires.uv.length;i++)if(this.requires.uv[i]){let r=i>0?i+1:"";this.addVaryCode("varying vec2 vUv"+r+";"),i>0&&this.addVertexParsCode("attribute vec2 uv"+r+";"),this.addVertexFinalCode("vUv"+r+" = uv"+r+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,i){return this.addSlot(e).addCache(t).addContext(i)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,i,r="varying",n="V",s=""){let o=this.getVars(r),a=o[e];if(!a){let l=o.length;a={name:i||"node"+n+l+(s?"_"+s:""),type:t},o.push(a),o[e]=a}return a}getTempVar(e,t,i,r){return this.getVar(e,t,i,this.shader,"T",r)}getAttribute(e,t){if(!this.attributes[e]){let i=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(i.name+" = "+e+";"),this.attributes[e]={varying:i,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let i="";for(let r=0,n=e.length;r<n;++r){let s=e[r],o=s.type,a=s.name,l=s.size,c=this.getFormatByType(o);if(c===void 0)throw new Error("Node pars "+c+" not found.");c.includes("[]")?i+=t+" "+c.substring(0,c.length-2)+" "+a+`[${l}];
`:i+=t+" "+c+" "+a+`;
`}return i}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof Sc?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,i,r,n,s){if(t.includes("[]")){let o=this.inputs.arrayUniforms,a=o.list.length,l=new wD({type:t,size:i.size,name:r||"nodeUA"+a+(s?"_"+s:""),node:i,needsUpdate:n});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}else{let o=this.inputs.uniforms,a=o.list.length,l=new wD({type:t,name:r||"nodeU"+a+(s?"_"+s:""),node:i,needsUpdate:n});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,i,r,n){return this.createUniform("vertex",e,t,i,r,n)}createFragmentUniform(e,t,i,r,n){return this.createUniform("fragment",e,t,i,r,n)}include(e,t,i){var s;let r;if(e=typeof e=="string"?Pn.get(e):e,this.context.include===!1)return e.name;e instanceof xt?r=this.includes.functions:e instanceof bi?r=this.includes.consts:e instanceof vk&&(r=this.includes.structs);let n=r[this.shader]=r[this.shader]||[];if(e){let o=n[e.name];if(o||(o=n[e.name]={node:e,deps:[]},n.push(o),o.src=e.build(this,"source")),e instanceof xt&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(s=e.includes)==null?void 0:s.length)){let a=0;do this.include(e.includes[a++],t);while(a<e.includes.length)}return i&&(o.src=i),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return Gre[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i!=null&&i.isNode)return i}}resolve(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i!==void 0){if(i.isNode)return i;if(i.isTexture)switch(i.mapping){case _u:case Eu:return new Hre(i);case Om:return new jre(new Wl(i));default:return new Wl(i)}else{if(i.isVector2)return new Ss(i);if(i.isVector3)return new xs(i);if(i.isVector4)return new Zc(i)}}}}format(e,t,i){switch(this.colorToVector(i+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return Vre[e]||e}getFormatByType(e){return Wre[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return _D[e]}getIndexByElement(e){return _D.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=ta,t===ta&&this.context.gamma&&(t=Yt),t}},$i=class extends us{constructor(e=0,t,i,r){super("c"),this.nodeType="Color",this.value=e instanceof ss?e:new ss(e||0,t,i,r)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,i,r,n,s){i=e.getUUID(i??this.getUUID()),r=r??this.getType(e);let o=e.getNodeData(i),a=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return a?this.generateReadonly(e,t,i,r,n,s):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(r,this,n,s,this.getLabel())),e.format(o.vertex.name,r,t)):(o.fragment||(o.fragment=e.createFragmentUniform(r,this,n,s,this.getLabel())),e.format(o.fragment.name,r,t))}generateReadonly(e,t,i,r,n,s){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",r,t)}},_i=class extends us{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,i,r,n,s){return e.format(this.value.toString(),r,t)}},xk=class extends Sc{constructor(){super("basic"),this.nodeType="Basic",this.color=new $i(5855577),this.shadingAlpha=new ht(1),this.shadingBlend=new _i(0)}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(kh.merge([it.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{this.color===void 0&&(this.color=new $i(5855577)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let i=this.color.flow(e,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=r!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let s=["#include <normal_fragment_begin>",i.code];r&&s.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),n?s.push(n.code,`vec3 outgoingLight = ${i.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${n.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${i.result};`),r?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${r.result} );`):s.push("gl_FragColor = vec4("+i.result+", 1.0 );"),s.push("#include <fog_fragment>","#include <dithering_fragment>"),t=s.join(`
`)}return t}},Wc=class extends us{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},zi={normalRenderTarget:new Wl,normalRenderTargetDepth:new Wl,transmissionRenderTarget:new Wl,transmissionSize:new Ss(2048,2048),transmissionRenderTargetDepth:new Wl,pixelRatioNode:new ht(1),resolution:new Ss,penumbraSize:new Wc(5,.5)};for(let e of Object.values(zi))e.isRenderGlobal=!0;var Xre=class extends Sc{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new $i(5855577),this.emissive=new $i(0),this.emissiveIntensity=new ht(1),this.shadingAlpha=new ht(1),this.shadingBlend=new _i(0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(kh.merge([it.fog,it.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:zi.penumbraSize}),this.color===void 0&&(this.color=new $i(5855577)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];c.push(i.code,"vec3 diffuseColor = "+i.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),r&&c.push(r.code,"reflectedLight.directDiffuse += "+r.result+" * "+n.result+";"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},Yre=class extends Sc{constructor(){super("phong"),this.nodeType="Phong",this.color=new $i(5855577),this.specular=new $i(1118481),this.shininess=new ht(30),this.shadingAlpha=new ht(1),this.shadingBlend=new _i(0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(kh.merge([it.fog,it.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:zi.penumbraSize}),this.color===void 0&&(this.color=new $i(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];c.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",r.code,"	vec3 specular = "+r.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},Qre=class extends Sc{constructor(){super("standard"),this.nodeType="Standard",this.color=new $i(5855577),this.roughness=new ht(.3),this.metalness=new ht(0),this.reflectivity=new ht(.5),this.shadingAlpha=new ht(1),this.shadingBlend=new _i(0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(kh.merge([it.fog,it.lights])),it.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:zi.penumbraSize});let i={gamma:!0};this.color===void 0&&(this.color=new $i(5855577)),this.color.analyze(e,{slot:"color",context:i}),this.roughness.analyze(e),this.metalness.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let r=this.color.flow(e,"c",{slot:"color",context:i}),n=this.roughness.flow(e,"f"),s=this.metalness.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let u=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];u.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",n.code,"	float roughnessFactor = "+n.result+";",s.code,"	float metalnessFactor = "+s.result+";"),c&&u.push(c.code,"#ifdef ALPHATEST","	if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),u.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),u.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?u.push(d.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+d.result+" ) ), diffuseColor, metalnessFactor );"):u.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),u.push("#include <lights_fragment_begin>"),u.push("#include <lights_fragment_end>"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},Kre=class extends Sc{constructor(){super("toon"),this.nodeType="Toon",this.color=new $i(5855577),this.specular=new $i(1118481),this.shininess=new ht(30),this.shadingAlpha=new ht(1),this.shadingBlend=new _i(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(kh.merge([it.fog,it.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:zi.penumbraSize}),this.color===void 0&&(this.color=new $i(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];c.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	vec3 specular = "+r.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},Uf=class extends us{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,i,r){return e.format(this.value?"true":"false",r,t)}},wk=class extends us{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new pn}generateReadonly(e,t,i,r,n,s){return e.format("mat3("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},qc=class extends us{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof Qt?new Array(e).fill(t):new Array(e).fill(new Qt(0))}},MA=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e))(MA||{}),Ms=function(){let e=new xt(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new xt(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new bi("float F3 0.3333333"),t.keywords.G3=new bi("float G3 0.1666667");let i=new xt(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[t]),r=new xt("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),n=new xt("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new xt(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[r,n]),o=new xt("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),a=new xt("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new xt(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[a]),c=new xt(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);c.keywords.NUM_OCTAVES=new bi(`int NUM_OCTAVES ${5}`);let d=new xt("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),u=new xt(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[r,n,d]);return{simplex:t,simplexFractal:i,simplexAshima:s,fbm:c,perlin:u}}(),bk=class extends Ai{constructor(e,t,i,r,n,s,o,a,l,c,d,u){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=i,this.fA=r,this.fB=n,this.distortion=s,this.colorA=o,this.colorB=a,this.colorC=l,this.colorD=c,this.alpha=d,this.noiseType=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,i,r,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let s=Object.values(MA)[this.noiseType.value],o=new xt(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {
                vec3 st = position / size;
				st /= scale;
				vec3 q = vec3(${s}(st),
							  ${s}(st + vec3(1.0)),
							  ${s}(st + vec3(1.0)));
				vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
							  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
							  ${s}(st * q));
				float f = ${s}(st + r);
				vec4 color;
				color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
				color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
				color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));

                float lalpha = alpha * color.a;
                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return clamp(color, 0.0, 1.0).rgb;
			}`,[Ms.simplex,Ms.simplexFractal,Ms.simplexAshima,Ms.fbm,Ms.perlin]),a=e.include(o),l=[];return l.push(this.scale.build(e,"f")),l.push(this.size.build(e,"v3")),l.push(this.move.build(e,"f")),l.push(this.fA.build(e,"v2")),l.push(this.fB.build(e,"v2")),l.push(this.distortion.build(e,"v2")),l.push(this.colorA.build(e,"v4")),l.push(this.colorB.build(e,"v4")),l.push(this.colorC.build(e,"v4")),l.push(this.colorD.build(e,"v4")),l.push(this.alpha.build(e,"f")),l.push(this.calpha),e.format(a+"("+l.join(",")+")",this.getType(e),t)}};bk.numOctaves=5;var Sk=class extends Ai{constructor(e,t,i,r,n,s,o){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=i,this.intensity=r,this.factor=n,this.alpha=s,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(Sk.Nodes.fresnel),r=[];return r.push(this.color.build(e,"c")),r.push(this.bias.build(e,"f")),r.push(this.scale.build(e,"f")),r.push(this.intensity.build(e,"f")),r.push(this.factor.build(e,"f")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},_k=Sk;_k.Nodes=function(){return{fresnel:new xt(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {
				float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

				float lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;
				calpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;
				return color;
			}`)}}();var Ek=class extends Ai{constructor(e,t,i,r,n,s,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=i,this.noiseStrength=r,this.noiseScale=n,this.offset=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(Ek.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(e,"f")),r.push(this.movement.build(e,"f")),r.push(this.wavelengths.build(e,"v3")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.offset.build(e,"v3")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Ak=Ek;Ak.Nodes=function(){let e=new xt(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[Ms.simplex]);return{rainbow:new xt(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {
                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);
                 float lalpha = alpha * rainbowContribution;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

                 return res;
             }`,[e])}}();var Ck=class extends Ai{constructor(e,t,i,r,n,s,o,a,l,c,d,u,h,f,m,v){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=i,this.contourWidth=r,this.contourThreshold=n,this.outlineThreshold=s,this.contourFrequency=o,this.outlineSmoothing=a,this.contourDirection=l,this.positionalLines=c,this.compensation=d,this.resolution=u,this.normalMap=h,this.depthMap=f,this.pixelRatio=m,this.alpha=v,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.firstTime){let i=this.outlineWidth.build(e,"f"),r=this.resolution.build(e,"v2"),n=this.compensation.build(e,"b"),s=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable(r,"uniform vec2"),e.addVertexParsVariable(n,"uniform bool"),e.addVertexParsVariable(s,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float");let o=`g${this.uuid.toString().replace(/-/g,"")}`;e.addVertexFinalCode(`
                vID = randomColor.r;
                if (${n}) {
                    vec4 ${o}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${o}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    vec2 ${o}_offset = normalize(${o}_clipNormal.xy) / ${r} * (${i} / 2.0) * ${o}_clipPosition.w * 2.0 * ${s};
                    ${o}_clipPosition.xy += ${o}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${o}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(Ck.Nodes.outline),r=[];return r.push(this.outlineColor.build(e,"c")),r.push(this.contourColor.build(e,"c")),r.push(this.outlineWidth.build(e,"f")),r.push(this.contourWidth.build(e,"f")),r.push(this.contourThreshold.build(e,"f")),r.push(this.outlineThreshold.build(e,"f")),r.push(this.contourFrequency.build(e,"f")),r.push(this.outlineSmoothing.build(e,"f")),r.push(this.contourDirection.build(e,"v3")),r.push(this.positionalLines.build(e,"b")),r.push(this.resolution.build(e,"v2")),r.push(this.normalMap.getTexture(e,"t")),r.push(this.depthMap.getTexture(e,"t")),r.push(this.pixelRatio.build(e,"f")),r.push(this.compensation.build(e,"b")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},Tk=Ck;Tk.Nodes=function(){let e=new xt(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 texelSize = (vec2(1.0) / resolution) * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -texelSize.x, -texelSize.y);
	uvSamples[1] = uv + vec2(0.0, -texelSize.y);
	uvSamples[2] = uv + vec2(  texelSize.x, -texelSize.y);
	uvSamples[3] = uv + vec2( -texelSize.x, 0.0);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  texelSize.x, 0.0);
	uvSamples[6] = uv + vec2( -texelSize.x, texelSize.y);
	uvSamples[7] = uv + vec2(0.0, texelSize.y);
	uvSamples[8] = uv + vec2(  texelSize.x, texelSize.y);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec4 sobel_edge_h = normalSamples[2] + (2.0*normalSamples[5]) + normalSamples[8] - (normalSamples[0] + (2.0*normalSamples[3]) + normalSamples[6]);
  	vec4 sobel_edge_v = normalSamples[0] + (2.0*normalSamples[1]) + normalSamples[2] - (normalSamples[6] + (2.0*normalSamples[7]) + normalSamples[8]);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new xt(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return result;
             }`,[e])}}();var Mk=class extends Ai{constructor(e,t,i,r,n,s,o,a){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=i,this.transmissionSamplerSize=r,this.transmissionSamplerMap=n,this.transmissionDepthMap=s,this.aspectRatio=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",30),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let i=e.include(Mk.Nodes.transmission),r=[];return r.push(this.thickness.build(e,"f")),r.push(this.ior.build(e,"f")),r.push(this.roughness.build(e,"f")),r.push(this.transmissionSamplerSize.build(e,"v2")),r.push(this.transmissionSamplerMap.getTexture(e,"t")),r.push(this.transmissionDepthMap.getTexture(e,"t")),r.push(this.aspectRatio.build(e,"v2")),r.push("normal"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Pk=Mk;Pk.Nodes=function(){let e=new xt(`
            float gaussian(vec2 i) {
                const float sigma = float(NUM_SAMPLES) * .25;
                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );
            }`),t=new xt(`
            vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

                const int LOD = 2;
                const int sLOD = 4; // tile size = 2^LOD

                vec3 O = vec3(0);
                float a = 0.0;
                const int s = NUM_SAMPLES/sLOD;
                for ( int i = 0; i < s*s; i++ ) {
                    int modulo = (i)-((i)/(s))*(s);
                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;
                    vec2 uv = U + (scale * aspectRatio) * d;
                    // What is the depth of the opaque object we're trying to sample
                    float opaqueDepth = unpackRGBAToDepth(texture2D(dm, uv));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    float gaussian = gaussian(d);
		            #ifdef TEXTURE_LOD_EXT
                    O += gaussian * texture2DLodEXT( sp, uv, lod).rgb;
                    #else
                    O += gaussian * textureLod( sp, uv, lod).rgb;
                    #endif
                    a += gaussian;
                }
                return O / a;
            }`,[e]),i=new xt(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new xt(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),n=new xt(`
vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[r,t]),s=new xt(`
vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    }`,[n,i]);return{transmission:new xt(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                float lalpha = alpha;

                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return transmission;
            }`,[s])}}();var cp=class extends Ai{constructor(e,t,i,r,n,s,o,a,l,c,d){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=i,this.far=r,this.isVector=n,this.isWorldSpace=s,this.origin=o,this.direction=a,this.colors=l,this.steps=c,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let i=`g${this.uuid.toString().replace(/-/g,"")}`,r=new xt(`vec3 ${i}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${i}_MAX_COLORS], float steps[${i}_MAX_COLORS], float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${i}_IS_VECTOR
                   #ifdef ${i}_LINEAR
                       #ifdef ${i}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${i}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${i}_SMOOTH
				for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a;
               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
               return color.rgb;
			}`,[cp.Nodes.vectorLinearWorldSpaceDepth,cp.Nodes.vectorLinearObjectSpaceDepth,cp.Nodes.vectorSphericalObjectSpaceDepth,cp.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${i}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${i}_SMOOTH`),this.isVector.value>.5&&e.define(`${i}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${i}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${i}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let n=e.include(r),s=[];return s.push(this.near.build(e,"f")),s.push(this.far.build(e,"f")),s.push(this.origin.build(e,"v3")),s.push(this.direction.build(e,"v3")),s.push(this.colors.build(e,"v4[]")),s.push(this.steps.build(e,"f[]")),s.push(this.alpha.build(e,"f")),s.push(this.calpha),e.format(n+"("+s.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Dk=cp;Dk.Nodes=function(){let e=new xt(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new xt(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),i=new xt(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),r=new xt(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:i,vectorSphericalObjectSpaceDepth:r}}();var ED=class extends Ai{constructor(e,t,i,r){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=i,this.mode=r}generate(e,t){if(e.isShader("fragment")){let i=[];return i.push(this.a.build(e,"c")),i.push(this.b.build(e,"c")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),e.format("spe_blend("+i.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},U_=(e=>(e.NOISE="noise",e.MAP="map",e))(U_||{}),Ok=class extends Ai{constructor(e,t,i,r,n){super("v3"),this.displacementTypeIndex=new _i(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(U_)[this.displacementTypeIndex.value]==="map"&&(this.mat=new wk(this.movementOrTexture.value.matrix)),this.cropOrOffset=i,this.scale=r,this.noiseFunctionIndex=n}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let i,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(U_)[this.displacementTypeIndex.value]){case"map":{i=e.include(Ok.Nodes.map),r.push(this.movementOrTexture.getTexture(e,"t")),r.push("uv"),r.push(this.cropOrOffset.build(e,"f")),this.mat&&r.push(this.mat.build(e,"mat3"));break}case"noise":{let n=Object.values(MA)[this.noiseFunctionIndex.value],s=new xt(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),o=new xt(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {
							return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
						}`,[Ms.simplex,Ms.simplexFractal,Ms.simplexAshima,Ms.fbm,Ms.perlin]),a=new xt(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,s]);i=e.include(a),r.push(this.scale.build(e,"f")),r.push(this.cropOrOffset.build(e,"v3")),r.push(this.movementOrTexture.build(e,"f"));break}}return r.push(this.intensity.build(e,"f")),r.push("displaced_normal"),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Lk=Ok;Lk.Nodes=function(){let e=new xt(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new xt(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new xt(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var Ik=class extends Ai{constructor(e,t,i,r,n,s,o,a){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=i,this.steps=r,this.offset=n,this.morph=s,this.angle=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(Ik.Nodes.gradient),r=[];return r.push(this.gradientType.build(e,"i")),r.push(this.smooth.build(e,"b")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.offset.build(e,"v2")),r.push(this.morph.build(e,"v2")),r.push(this.angle.build(e,"f")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Rk=Ik;Rk.Nodes=function(){return{gradient:new xt(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return color.xyz;
			}`)}}();var f0=class extends Ai{constructor(e,t,i,r,n,s,o,a,l,c){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=e,this.textureSize=t,this.crop=i,this.projection=r,this.axis=n,this.side=s,this.size=o,this.mat=a,this.alpha=l,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let i=`g${this.uuid.toString().replace(/-/g,"")}`,r;switch(this.projection.value){case 3:r=e.include(f0.Nodes.cylindrical);break;case 2:r=e.include(f0.Nodes.spherical);break;case 1:let s=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],o=new xt(`
		vec3 ${i}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (${i}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${s}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);r=e.include(o);break;default:r=e.include(f0.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){e.addVertexParsCode(`varying vec2 ${i}_vCustomUv;`),e.addFragmentParsCode(`varying vec2 ${i}_vCustomUv;`);let s=["zy","xz","xy"][this.axis.value];e.addVertexFinalCode(`${i}_vCustomUv = (1. + (transformed.${s})) / 2.;`)}e.addFragmentVariable(this.calpha,"float");let n=[];return n.push(this.texture.generate(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+n.join(",")+")",this.getType(e),t)}},Nk=f0;Nk.Nodes=function(){let e=new xt(`
vec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),t=new xt(`
vec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),i=new xt(`vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);return{cylindrical:e,spherical:t,uv:i}}();var Bk=class extends Ai{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t}generate(e,t){if(e.isShader("fragment")){let i=e.include(Bk.Nodes.customNormal),r=[];return r.push(this.cnormal.build(e,"v3")),r.push("normal"),r.push(this.alpha.build(e,"f")),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},kk=Bk;kk.Nodes=function(){return{customNormal:new xt(`vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return normal;
			}`)}}();function es(e,t){return t.color(e)}function Zre(e,t){switch(e.type){case"fresnel":return ene(e,t);case"gradient":return tne(e);case"depth":return ine(e);case"normal":return rne(e);case"noise":return nne(e,t);case"rainbow":return sne(e);case"toon":return one(e,t);case"outline":return ane(e,t);case"transmission":return lne(e);case"color":return Jre(e,t)}}function $re(e){return{type:e.type}}function la(e){let{alpha:t,mode:i}=e;return{...$re(e),alpha:t,mode:i}}function Jre(e,t){return{...la(e),color:es(e.color,t)}}function ene(e,t){let{bias:i,scale:r,intensity:n,factor:s,color:o}=e;return{...la(e),color:es(o,t),bias:i,scale:r,intensity:n,factor:s}}function tne(e){let{gradientType:t,smooth:i,colors:r,steps:n,angle:s,offset:o,morph:a}=e;return{...la(e),gradientType:t,smooth:i,colors:r.map(l=>new Qt(l[0],l[1],l[2],l[3])),num:r.length,steps:n,offset:new de(...o),morph:new de(...a),angle:s}}function ine(e){let{gradientType:t,near:i,far:r,isVector:n,isWorldSpace:s,origin:o,direction:a,colors:l,steps:c,smooth:d}=e;return{...la(e),gradientType:t,near:i,far:r,isVector:n,isWorldSpace:s,origin:new N(...o),direction:a?new N(...a):new N(1,0,0),colors:l.map(u=>u!==void 0?new Qt(u[0],u[1],u[2],u[3]):new Qt(0,0,0,0)),steps:c.slice(0,l.length),smooth:d}}function rne(e){let{cnormal:t}=e;return{...la(e),cnormal:new N(t[0],t[1],t[2])}}function nne(e,t){return{...la(e),scale:e.scale,move:e.move,fA:new de(...e.fA),fB:new de(...e.fB),size:new N(...e.size),distortion:new de(...e.distortion),colorA:es(e.colorA,t),colorB:es(e.colorB,t),colorC:es(e.colorC,t),colorD:es(e.colorD,t),noiseType:e.noiseType}}function sne(e){return{...la(e),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new N(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new N(...e.offset)}}function one(e,t){return{...la(e),positioning:e.positioning,colors:e.colors.map(i=>new Qt(i[0],i[1],i[2],i[3])),num:e.colors.length,steps:e.steps,source:new N(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:es(e.shadowColor,t),offset:new N(...e.offset)}}function ane(e,t){return{...la(e),outlineColor:es(e.outlineColor,t),contourColor:es(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new N(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function lne(e,t){return{...la(e),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}var Oy=class extends ss{},cne=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),i=this.cache.get(e);return i===void 0?(i={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,i)):(i.time=t,i.prev.next=i.next,i.next.prev=i.prev),i.prev=this.tail.prev,i.next=this.tail,this.tail.prev.next=i,this.tail.prev=i,this.scheduleCleanup(),i.data}},une=class extends cne{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},sb;function dne(e){return typeof e=="string"?e:(sb||(sb=new une),sb.load(e))}var hne=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},fne=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},zk=class extends hne{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isVideo=e.type=="video",this.updateSrc(e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;let r=[1e3,1001,1002];for(let n of r){let s=this[n];s&&(s.image=this.img,s.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var i=new FileReader;i.readAsDataURL(new Blob([e],{type:"video/mp4"}));let r;await new Promise(n=>{i.onloadend=s=>{var o;r=(o=s.target)==null?void 0:o.result,n(null)}}),this.img.src=r}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=dne(e),this.img.onload=t}getTexture(e){let t=this[e];if(t)return t;{let i;return this.isVideo?i=new f9(this.img,void 0,e,e):i=new tn(this.img,void 0,e,e),this.loaded&&(i.needsUpdate=!0),this[e]=i,i}}disposeTextures(){var e,t,i;(e=this[1e3])==null||e.dispose(),this[1e3]=void 0,(t=this[1001])==null||t.dispose(),this[1001]=void 0,(i=this[1002])==null||i.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},au=class extends zk{},PA=class extends us{},Fk={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"]},Uk={depth:["colors"]};function pne(e,t,i){var s,o;let r=Fk[e.type],n=Uk[e.type];if(n!==void 0){let a=e.color;if(n.includes(t)){let l=(o=(s=a[t])==null?void 0:s.value)==null?void 0:o.length;if(l!==void 0&&l!==i.length)return!0}}return r!==void 0?r.includes(t):!1}function jk(e,t,i){let r=i.uniforms[`f${i.id}_texture`];if(!r)return!1;let n=!1,s=e;if("image"in s){let o=s.image,a=t.image(o),l=r;l.image instanceof au||l.image.deref(),l.image=a}if("video"in s){let o=s.video,a=t.video(o),l=r;l.image instanceof au||l.image.deref(),l.image=a}if("wrapping"in s){let o=r;o.wrap=s.wrapping}if("repeat"in s||"offset"in s){let o="mat",a=i.uniforms[`f${i.id}_${o}`];"repeat"in s&&(a.repeat=s.repeat),"offset"in s&&(a.offset=s.offset),a.updateMatrix()}return n}function mne(e,t,i,r){let n=!1;for(let[s,o]of Object.entries(e)){if(!s||o===void 0)continue;if(Xk(s,i,r)){s==="visible"&&i.type==="light"&&(n=!0);continue}i.visible=r.visible;let a=i.uniforms[`f${i.id}_${s}`];if(a&&!(a instanceof PA))switch(n=n||pne(i,s,o),a.constructor){case $i:if(typeof o=="string"){let l=t.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof Oy?a.value=new ss(l.r,l.g,l.b,l.a):a.setRGBA(l);break}case Zc:if(typeof o=="string"){let l=t.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof Oy?a.value=new ss(l.r,l.g,l.b,l.a):a.value.setRGBA(l.r,l.g,l.b,l.a);break}case Ss:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]);break}case xs:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]),a.value.setZ(l[2]);break}case Wl:{jk(o,t,i);break}case qc:{a.value=o.map(l=>new Qt(...l));break}default:{a.value=o;break}}}return n}var Hk=class extends Ai{constructor(e,t,i){super("v3"),this.nodeType="Matcap",this.texture=e,this.alpha=t,this.mode=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(Hk.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let r=[];return r.push(this.texture.generate(e,"t")),r.push("normal"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Gk=Hk;Gk.Nodes=function(){return{matcap:new xt(`vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {
                vec3 viewDir = normalize( vViewPosition );
                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
                vec3 y = cross( viewDir, x );
                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
                vec4 matcapColor = texture2D( matcapTex, uv );

                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;
                
                return matcapColor.rgb;
            }
            `)}}();var j_=class extends PA{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},gne=class extends PA{constructor(e){super("v3"),this.image=e,this._value=new N}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},Vk=class extends Ai{constructor(e,t,i,r,n,s,o,a,l,c){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=i,this.source=r,this.isWorldSpace=n,this.noiseStrength=s,this.noiseScale=o,this.shadowColor=a,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let i=e.include(Vk.Nodes.toon),r=[];return r.push(this.positioning.build(e,"i")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.source.build(e,"v3")),r.push(this.isWorldSpace.build(e,"b")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.shadowColor.build(e,"v4")),r.push(this.offset.build(e,"v3")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Wk=Vk;Wk.Nodes=function(){let e=new xt(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new xt(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),i=new xt(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),r=new xt(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),n=new xt(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[r]);return{toon:new xt(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[Ms.simplex,e,i,n])}}();function AD(e,t,i){e.setUvTransform(i[0],i[1],t[0],t[1],0,0,0)}var vne=class extends wk{constructor(e,t){super(new pn),this.repeat=e,this.offset=t,AD(this.value,e,t)}updateMatrix(){AD(this.value,this.repeat,this.offset)}},vu=class{constructor(e,t,i,r){this.id=e,this.uuid=t,this.data=i,this.uniforms={};for(let n in r)this.uniforms[`f${this.id}_${n}`]=r[n];for(let n in i)Xk(n,this,i)}get type(){return this.data.type}static create(e,t,i,r){if(i.type==="light")return Wd.createLigherLayer(e,t,i,r);if(i.type==="texture"||i.type==="video"){let n=i.type==="texture"?r.image(i.texture.image):r.video(i.texture.video),s=new j_(n,i.texture.wrapping),o=new gne(n),a=new vne(i.texture.repeat,i.texture.offset),l=new ht(i.crop?1:0),c=new _i(i.projection??0),d=new _i(["x","y","z"].indexOf(i.axis)??0),u=new _i(i.side??0),h=new Ss(i.size?new de(i.size[0],i.size[1]):new de(100,100)),f=new ht(i.alpha??1),m=new _i(i.mode??0),v=new Nk(s,o,l,c,d,u,h,a,f,m),g=new Ni(v.calpha,"f");return new Lr(e,t,i,{texture:s,textureSize:o,crop:l,projection:c,axis:d,side:u,size:h,mat:a,alpha:f,mode:m},v,m,g)}else if(i.type==="matcap"){let n=r.image(i.texture.image),s=new j_(n,i.texture.wrapping),o=new ht(i.alpha??1),a=new _i(i.mode??0),l=new Gk(s,o,a),c=new Ni(l.calpha,"f");return new Lr(e,t,i,{texture:s,alpha:o,mode:a},l,a,c)}else if(i.type==="displace")if(i.displacementType==="noise"){let n=new xs(new N(...i.offset)),s=new ht(i.scale??10),o=new ht(i.intensity??8),a=new ht(i.movement??1),l=new _i(i.noiseType??0),c=new Lk(o,a,n,s,l);return new qk(e,t,i,{offset:n,scale:s,intensity:o,movement:a,noiseType:l},c)}else throw new Error;else return wne(e,t,i,r)}updateByOp(e,t,i){var n;let r=e;if(r.path[0]===void 0){if(r.type===0)return"type"in r.props||"category"in r.props?((n=i.scene)==null||n.markNeedsUpdateRendererDirty(),!0):mne(r.props,i.shared,this,t)}else if(r.path[0]==="texture")return"texture"in t||"video"in t?jk(r.props,i.shared,this):!0;return!1}dispose(){if(yne(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof au||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let i=`f${this.id}_${e}`;this.hasValueByKey(i)&&t!==void 0&&(this.uniforms[i].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let i=this.getName(t);i&&e.push(i)}return e}},Lr=class extends vu{constructor(e,t,i,r,n,s,o){super(e,t,i,r),this.params=r,this.color=n,this.mode=s,this.alpha=o}},qk=class extends vu{constructor(e,t,i,r,n){super(e,t,i,r),this.position=n}},Wd=class extends vu{constructor(e,t,i,r,n){super(e,t,i,n),this.node=r}static createLigherLayer(e,t,i,r){let n,s=new ht(i.alpha),o=new _i(i.mode),a;if(!i.visible)n=new xk,a={};else if(i.category==="lambert"){n=new Xre;let l=new $i(r.color(i.emissive)??0);a={emissive:l},n.emissive=l}else if(i.category==="toon"){n=new Kre;let l=new ht(i.shininess??30),c=new $i(r.color(i.specular)??1118481);a={shininess:l,specular:c},n.shininess=l,n.specular=c}else if(i.category==="physical"){n=new Qre;let l=new ht(i.roughness??.3),c=new ht(i.metalness??0),d=new ht(i.reflectivity??.5);a={roughness:l,metalness:c,reflectivity:d},n.roughness=l,n.metalness=c,n.reflectivity=d}else{n=new Yre;let l=new ht(i.shininess??30),c=new $i(i.specular!==void 0?r.color(i.specular)??1118481:1118481);a={shininess:l,specular:c},n.shininess=l,n.specular=c}return n.alpha=new ht(1),n.shadingAlpha=s,n.shadingBlend=o,a.alpha=n.shadingAlpha,a.mode=n.shadingBlend,new Wd(e,t,i,n,a)}get category(){return this.node.category}};function yne(e){let t=e instanceof vu?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function xne(e,t,i,r){switch(e.type){case"color":{let n=new $i(r.color??5855577),s=new ht(r.alpha??1),o=new Ni("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new _i(r.mode??0);return n.alpha=s,new Lr(t,i,e,{color:n,alpha:s,mode:a},n,a,o)}case"fresnel":{let n=new $i(r.color??16777215),s=new ht(r.bias??.1),o=new ht(r.scale??1),a=new ht(r.intensity??2),l=new ht(r.factor??1),c=new ht(r.alpha??1),d=new _i(r.mode??0),u=new _k(n,s,o,a,l,c,d),h=new Ni(u.calpha,"f");return new Lr(t,i,e,{color:n,bias:s,scale:o,intensity:a,factor:l,alpha:c,mode:d},u,d,h)}case"rainbow":{let n=new ht(r.filmThickness??30),s=new ht(r.movement??0),o=new xs(r.wavelengths??new N(0,0,0)),a=new ht(r.noiseStrength??0),l=new ht(r.noiseScale??1),c=new xs(r.offset??new N(0,0,0)),d=new ht(r.alpha??1),u=new Ak(n,s,o,a,l,c,d),h=new Ni(u.calpha,"f"),f=new _i(r.mode??0);return new Lr(t,i,e,{filmThickness:n,movement:s,wavelengths:o,noiseStrength:a,noiseScale:l,offset:c,alpha:d,mode:f},u,f,h)}case"transmission":{let n=new ht(r.thickness??10),s=new ht(r.ior??1.5),o=new ht(r.roughness??.5),a=zi.transmissionSize,l=zi.transmissionRenderTarget,c=zi.transmissionRenderTargetDepth,d=window.innerWidth,u=window.innerHeight,h=d>=u?new Ss(u/d,1):new Ss(1,d/u),f=new ht(r.alpha??1),m=new Pk(n,s,o,a,l,c,h,f),v=new Ni(m.calpha,"f"),g=new _i(r.mode??0);return new Lr(t,i,e,{thickness:n,ior:s,roughness:o,aspectRatio:h,alpha:f,mode:g},m,g,v)}case"toon":{let n=new _i(r.positioning??0),s;r.colors?s=new qc(r.colors.length,r.colors):(s=new qc(10,new Qt(0,0,0,1)),s.value[1]=new Qt(1,1,1,1));let o;r.steps?o=new Wc(r.steps.length,r.steps):(o=new Wc(10,1),o.value[0]=0);let a=new xs(r.source??new N(0,0,0)),l=new Uf(r.isWorldSpace??!0),c=new ht(r.noiseStrength??0),d=new ht(r.noiseScale??1),u=new Zc(r.shadowColor),h=new xs(r.offset??new N(0,0,0)),f=new ht(r.alpha??1),m=new Wk(n,s,o,a,l,c,d,u,h,f),v=new Ni(m.calpha,"f"),g=new _i(r.mode??0);return new Lr(t,i,e,{positioning:n,colors:s,steps:o,source:a,isWorldSpace:l,noiseStrength:c,noiseScale:d,shadowColor:u,offset:h,alpha:f,mode:g},m,g,v)}case"outline":{let n=new $i(r.outlineColor??16777215),s=new $i(r.contourColor??16777215),o=new ht(r.outlineWidth??.1),a=new ht(r.contourWidth??.1),l=new ht(r.outlineThreshold??.1),c=new ht(r.contourThreshold??.1),d=new ht(r.outlineSmoothing??.1),u=new ht(r.contourFrequency??.1),h=new xs(r.contourDirection??new N(0,1,0)),f=new Uf(r.positionalLines??!1),m=new Uf(r.compensation??!0),v=zi.normalRenderTarget,g=zi.normalRenderTargetDepth,p=zi.pixelRatioNode,x=zi.resolution,b=new ht(r.alpha??1),S=new Tk(n,s,o,a,l,c,d,u,h,f,m,x,v,g,p,b),E=new Ni(S.calpha,"f"),y=new _i(r.mode??0);return new Lr(t,i,e,{outlineColor:n,contourColor:s,outlineWidth:o,contourWidth:a,outlineThreshold:l,contourThreshold:c,outlineSmoothing:d,contourFrequency:u,contourDirection:h,positionalLines:f,compensation:m,alpha:b,mode:y},S,y,E)}case"depth":{let n=new _i(r.gradientType??0),s=new Uf(r.smooth??!1),o=new ht(r.near??50),a=new ht(r.far??200),l=new ht(r.isVector??1),c=new ht(r.isWorldSpace??0),d=new xs(r.origin??new N),u=new xs(r.direction??new N),h;r.colors?h=new qc(r.colors.length,r.colors):(h=new qc(2,new Qt(0,0,0,1)),h.value[1]=new Qt(1,1,1,1));let f;r.steps?f=new Wc(r.steps.length,r.steps):(f=new Wc(2,1),f.value[0]=0);let m=new ht(r.alpha??1),v=new _i(r.mode??0),g=new Dk(n,s,o,a,l,c,d,u,h,f,m),p=new Ni(g.calpha,"f");return new Lr(t,i,e,{gradientType:n,smooth:s,near:o,far:a,isVector:l,isWorldSpace:c,origin:d,direction:u,colors:h,steps:f,alpha:m,mode:v},g,v,p)}case"noise":{let n=new ht(r.scale??1),s=new xs(r.size??new N(100,100,100)),o=new ht(r.move??1),a=new Ss(r.fA??new de(1.7,9.2)),l=new Ss(r.fB??new de(8.3,2.8)),c=new Ss(r.distortion??new de(1,1)),d=new Zc(r.colorA),u=new Zc(r.colorB),h=new Zc(r.colorC),f=new Zc(r.colorD),m=new ht(r.alpha??1),v=new _i(r.mode??0),g=new _i(r.noiseType??0),p=new bk(n,s,o,a,l,c,d,u,h,f,m,g),x=new Ni(p.calpha,"f");return new Lr(t,i,e,{scale:n,size:s,move:o,fA:a,fB:l,distortion:c,colorA:d,colorB:u,colorC:h,colorD:f,alpha:m,mode:v,noiseType:g},p,v,x)}case"normal":{let n=new xs(r.cnormal??new N(1,1,1)),s=new ht(r.alpha??1),o=new _i(r.mode??0),a=new kk(n,s),l=new Ni("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return l.keywords.alpha=s,new Lr(t,i,e,{cnormal:n,alpha:s,mode:o},a,o,l)}case"gradient":{let n=new _i(r.gradientType??0),s=new Uf(r.smooth??!1),o;r.colors?o=new qc(r.colors.length,r.colors):(o=new qc(10,new Qt(0,0,0,1)),o.value[1]=new Qt(1,1,1,1));let a;r.steps?a=new Wc(r.steps.length,r.steps):(a=new Wc(10,1),a.value[0]=0);let l=new Ss(r.offset??new de(0,0)),c=new Ss(r.morph??new de(0,0)),d=new ht(r.angle??0),u=new ht(r.alpha??1),h=new _i(r.mode??0),f=new Rk(n,s,o,a,l,c,d,u),m=new Ni(f.calpha,"f");return new Lr(t,i,e,{gradientType:n,smooth:s,colors:o,steps:a,offset:l,morph:c,angle:d,alpha:u,mode:h},f,h,m)}default:{let n=new $i(1,0,0,1),s=new ht(1),o=new Ni("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new _i(0);return n.alpha=s,new Lr(t,i,e,{color:n,alpha:s,mode:a},n,a,o)}}}function wne(e,t,i,r){let n=Zre(i,r);return xne(i,e,t,n)}function Xk(e,t,i){if(i.type==="displace"&&(e==="intensity"||e==="visible")){let r=t.uniforms[`f${t.id}_intensity`];return r?(r.value=i.intensity*(i.visible?1:0),r):void 0}if(i.type!=="displace"&&(e==="alpha"||e==="visible")){let r=t.uniforms[`f${t.id}_alpha`];if(!r)return;if(r.value=i.alpha*(i.visible?1:0),i.type==="outline"&&e==="visible"){let n=t.uniforms[`f${t.id}_compensation`];n&&(n.value=i.compensation&&i.visible)}return r}}function H_(e,t){let i=0;for(let r of e.layers)if(r.data.type!=="displace"&&"alpha"in r.data&&r.data.type!=="light"&&r.data.type!=="fresnel"&&r.data.type!=="texture"&&r.data.type!=="matcap"&&r.data.type!=="rainbow"&&r.data.type!=="outline"){let n=r.data.visible?r.data.alpha:0;if(n==1&&r.data.type=="depth"||r.data.type=="gradient"){for(let s of r.data.colors)if(s[3]<1){n=s[3];break}}else if(n==1&&r.data.type=="noise"){let s=t.color(r.data.colorA).a,o=t.color(r.data.colorB).a,a=t.color(r.data.colorC).a,l=t.color(r.data.colorD).a,c=Math.min(s,Math.min(o,Math.min(a,l)));c<1&&(n=c)}i+=(1-i)*n}return i<1}var gc=class extends _r{constructor(){super(void 0),this.flatShading=!1,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},bne=class extends gc{constructor(e,t,i,r){super(),this.flatShading=e,this.side=t,this.wireframe=i,this.root=r}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}getFlavor(e,t,i){return this.root.getFlavor(e,t,i)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,i){this.root.updateByOp(e,t,i)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},Yk=class extends gc{constructor(e,t){super(),this.data=e,this.layerIdGen=0,this.flavors=[],this.type="NodeMaterial",this.updaters=[],this.reset0(e,t)}get nodeMaterial(){return this}getFlavor(e,t,i){let r=i?6:(e?3:0)+t;if(r===0)return this;this.flavors===void 0&&(this.flavors=[]),r-=1;let n=this.flavors[r];return n===void 0&&(n=new bne(e,t,i,this),this.flavors[r]=n,n.flatShading=e,n.side=t,n.updateAfterBuild()),n}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}reset(e,t){this.data!==e&&this.reset0(e,t)}reset0(e,t){this.data=e;let i=e.layers??ns.defaultTwoLayerData("phong").layers;this.layers=i.map(r=>vu.create(this.layerIdGen++,r.id,r.data,t.shared)),this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(),this.transparent=H_(e,t.shared)}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(e=>e instanceof Wd),this.lightLayer===void 0&&(this.lightLayer=new Wd(0,"",{...Cs.defaultData("light","phong"),visible:!1},new xk,{})),this.dispose(),this.needsUpdate=!0,this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(e,t,i){var r,n,s;if(this.data=t,this.transparent=H_(t,i.shared),e.path[0]==="layers"){this.data=t;let o=i.shared,a=e.path[1];if(a===void 0){if(this.layers.reverse(),e.type===4){let l=vu.create(this.layerIdGen++,e.id,e.data,i.shared);this.layers.splice(e.localIndex,0,l),(r=i.scene)==null||r.markNeedsUpdateRendererDirty()}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose(),(n=i.scene)==null||n.markNeedsUpdateRendererDirty();else if(e.type===6){let l=this.layers.findIndex(d=>d.uuid===e.id),c=this.layers[l];this.layers.splice(l,1),this.layers.splice(e.localIndex,0,c),(s=i.scene)==null||s.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate()}else{let l=this.layers.find(c=>c.uuid===a);if(l){let c=t.layers.data(a);if(l.updateByOp({...e,path:e.path.slice(2)},c,i)){let d=vu.create(this.layerIdGen++,a,c,o);this.layers.splice(this.layers.findIndex(u=>u.uuid===a),1,d),this.onUpdate()}}}}else this.reset(t,i)}blendColors(){let e=this.layers.findIndex(i=>i instanceof Lr),t=this.layers.findIndex(i=>i instanceof Wd);if(e!==-1&&e<t){let i=this.layers[e].color;for(let r=e+1;r<t;++r){let n=this.layers[r];n instanceof Lr&&(i=new ED(i,n.color,n.alpha,n.mode))}this.fragment.color=i}else this.fragment.color=void 0}blendAfterColors(){let e=new Ni("outgoingLight","f"),t=this.layers.findIndex(i=>i instanceof Wd);if(this.layers.length>t+1){for(let i=t+1;i<this.layers.length;++i){let r=this.layers[i];r instanceof Lr&&(e=new ED(e,r.color,r.alpha,r.mode))}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof qk);if(e.length>0){let t=e[0].position;for(let i=1;i<e.length;++i)e[i]&&(t=new qo(t,e[i].position,qo.ADD),t=new qo(t,new ht(.5).setReadonly(!0),qo.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let i=(r,n,s)=>Math.min(Math.max(r,n),s);for(let r of this.layers)if(r.type==="displace"){let n=i(r.uniforms[`f${r.id}_intensity`].value,e,t);r.uniforms[`f${r.id}_intensity`].value=n}}computeCacheKey(){let e="[";for(let{data:t}of this.data.layers)if(t.type==="light")e+=`"${t.visible?t.category.toUpperCase():"Basic"}"`;else{let i=(Fk[t.type]??[]).map(s=>t[s]),r=(Uk[t.type]??[]).map(s=>{var o;return((o=t[s])==null?void 0:o.length)??0}),n=[...i,...r];n.length?e+=`["${t.type}", "${n.join('","')}"],`:e+=`"${t.type}",`}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new qre;this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof Lr){let t=e.params.texture;if(t instanceof j_&&!t.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(gc.prototype,{properties:{get:function(){return this.fragment.properties}}});var G_=class extends Yk{},Sne=p1(oH()),CD=new Map;function _ne(e){if(typeof e=="string")return e;let t=CD.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},CD.set(e,t)),t.url}var up=class{constructor({src:e,volume:t,delay:i,loop:r}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let n;typeof e=="string"?n={src:e}:n={src:_ne(e),format:"wav"},this.sound=new Sne.Howl(n),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),i!==void 0&&(this.delay=i),r!==void 0&&(this.loop=r)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,i){this.sound.on(e,t,i)}off(e,t,i){this.sound.off(e,t,i)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},Ene=class{constructor(){this.type="ShapePath",this.color=new Lt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Z0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var i;return(i=this.currentPath)==null||i.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){var n;return(n=this.currentPath)==null||n.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,n,s){var o;return(o=this.currentPath)==null||o.bezierCurveTo(e,t,i,r,n,s),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function i(f,m,v,g){let p=f.x,x=m.x,b=v.x,S=g.x,E=f.y,y=m.y,C=v.y,A=g.y,D=(S-b)*(E-C)-(A-C)*(p-b),I=(x-p)*(E-C)-(y-E)*(p-b),R=(A-C)*(x-p)-(S-b)*(y-E),B=D/R,G=I/R;if(R===0&&D!==0||B<=0||B>=1||G<0||G>1)return null;if(D===0&&R===0){for(let j=0;j<2;j++)if(r(j===0?v:g,f,m),t.loc===e.ORIGIN){let ee=j===0?v:g;return{x:ee.x,y:ee.y,t:t.t}}else if(t.loc===e.BETWEEN){let ee=+(p+t.t*(x-p)).toPrecision(10),Q=+(E+t.t*(y-E)).toPrecision(10);return{x:ee,y:Q,t:t.t}}return null}else{for(let Q=0;Q<2;Q++)if(r(Q===0?v:g,f,m),t.loc===e.ORIGIN){let re=Q===0?v:g;return{x:re.x,y:re.y,t:t.t}}let j=+(p+B*(x-p)).toPrecision(10),ee=+(E+B*(y-E)).toPrecision(10);return{x:j,y:ee,t:B}}}function r(f,m,v){let g=v.x-m.x,p=v.y-m.y,x=f.x-m.x,b=f.y-m.y,S=g*b-x*p;if(f.x===m.x&&f.y===m.y){t.loc=e.ORIGIN,t.t=0;return}if(f.x===v.x&&f.y===v.y){t.loc=e.DESTINATION,t.t=1;return}if(S<-Number.EPSILON){t.loc=e.LEFT;return}if(S>Number.EPSILON){t.loc=e.RIGHT;return}if(g*x<0||p*b<0){t.loc=e.BEHIND;return}if(Math.sqrt(g*g+p*p)<Math.sqrt(x*x+b*b)){t.loc=e.BEYOND;return}let E;g!==0?E=x/g:E=b/p,t.loc=e.BETWEEN,t.t=E}function n(f,m){let v=[],g=[];for(let p=1;p<f.length;p++){let x=f[p-1],b=f[p];for(let S=1;S<m.length;S++){let E=m[S-1],y=m[S],C=i(x,b,E,y);C!==null&&v.find(A=>A.t<=C.t+Number.EPSILON&&A.t>=C.t-Number.EPSILON)===void 0&&(v.push(C),g.push(new de(C.x,C.y)))}}return g}function s(f,m,v){let g=new de;m.getCenter(g);let p=[];return v.forEach(x=>{x.boundingBox.containsPoint(g)&&n(f,x.points).forEach(b=>{p.push({identifier:x.identifier,isCW:x.isCW,point:b})})}),p.sort((x,b)=>x.point.x-b.point.x),p}function o(f,m,v,g,p){(p==null||p==="")&&(p="nonzero");let x=new de;f.boundingBox.getCenter(x);let b=[new de(v,x.y),new de(g,x.y)],S=s(b,f.boundingBox,m);S.sort((I,R)=>I.point.x-R.point.x);let E=[],y=[];S.forEach(I=>{I.identifier===f.identifier?E.push(I):y.push(I)});let C=E[0].point.x,A=[],D=0;for(;D<y.length&&y[D].point.x<C;)A.length>0&&A[A.length-1]===y[D].identifier?A.pop():A.push(y[D].identifier),D++;if(A.push(f.identifier),p==="evenodd"){let I=A.length%2===0,R=A[A.length-2];return{identifier:f.identifier,isHole:I,for:R}}else if(p==="nonzero"){let I=!0,R=null,B=null;for(let G=0;G<A.length;G++){let j=A[G];m[j]&&(I?(B=m[j].isCW,I=!1,R=j):B!==m[j].isCW&&(B=m[j].isCW,I=!0))}return{identifier:f.identifier,isHole:I,for:R}}else console.warn('fill-rule: "'+p+'" is currently not implemented.')}let a=0,l=999999999,c=-999999999,d=[];this.subPaths.forEach(f=>{let m=f.getPoints(),v=-999999999,g=999999999,p=-999999999,x=999999999;for(let b=0;b<m.length;b++){let S=m[b];S.y>v&&(v=S.y),S.y<g&&(g=S.y),S.x>p&&(p=S.x),S.x<x&&(x=S.x)}c<=p&&(c=p+1),l>=x&&(l=x-1),m.length&&d.push({curves:f.curves,points:m,isCW:SN.isClockWise(m),identifier:a++,boundingBox:new tq(new de(x,g),new de(p,v))})});let u=d.map(f=>{var m;return o(f,d,l,c,(m=this.userData)==null?void 0:m.style.fillRule)}),h=[];return d.forEach(f=>{let m=u[f.identifier];if(m&&!m.isHole){let v=new $0;v.curves=f.curves,u.filter(g=>(g==null?void 0:g.isHole)&&g.for===f.identifier).forEach(g=>{if(g){let p=d[g.identifier],x=new Z0;x.curves=p.curves,v.holes.push(x)}}),h.push(v)}}),h}},Qk,TD=new Promise(e=>{Qk=e}),MD=!1;async function Ane(){if(MD)return;let e=await f1(()=>import("./opentype-b9a672c1.js"),[]);Qk(e),MD=!0}var Cne=class{async load(e,t,i=()=>{}){let{load:r}=await TD;r(e,(n,s)=>{n||!s?i(n??"Something went wrong"):t(s)})}async parse(e){let{parse:t,Bidi:i}=await TD;try{let r=t(e),n=new i,s=o=>r.charToGlyphIndex(o.char);return n.registerModifier("glyphIndex",null,s),n.applyFeatures(r,r.defaultRenderOptions.features),{font:r,bidi:n}}catch(r){console.error(r)}}};async function Tne(e){return await(await fetch(e)).arrayBuffer()}var Mne=new Cne;async function PD(e){let t,i,r=!1;if(e.url?(t=await Tne(e.url),i=e.url,r=e.url.startsWith("/")):e.data&&(t=e.data.buffer),t){let n=await Mne.parse(t);if(n)return{font:n.font,url:i,intercepted:r,arr:t,bidi:n.bidi}}}function Pne(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var Dne=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=PD(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=PD(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,i){if(!this._bidi)return[];let r=this._bidi;r.getTextGlyphs(t);let n=r.tokenizer.tokens,s=[],o=0,a=i.length===n.length;for(let l=0;l<i.length;l++){let c=i[l].index,d=String.fromCharCode(i[l].unicode),u=n[o];if(Pne(c,u)||a)s.push({char:d,index:c,replacements:[u.state.glyphIndex],replacementChars:[u.char]}),o++;else{let h=u.char,f="",m=[u.state.glyphIndex],v=[],g=!1;for(;!g;)o++,f=t.charAt(o),h+=f,m.push(e.charToGlyphIndex(f)),v=e.stringToGlyphs(h),v.length===1&&v[0].index===c&&(g=!0),o>t.length&&(g=!0);s.push({char:d,index:c,replacements:m,replacementChars:Array.from(h)}),o++}}return s}generateShapes(e,t){if(!this._isLoaded)return;let i=this.font,r=t.fontSize/this.unitsPerEm,n=t.fontSize*t.lineHeight,s=e.map(p=>this.getTextWidth(p,t)),o=t.width,a=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?a:0,c=this.computeSpaceWidthForLine(e,0,t),d=this.getLineInitialOffsetX(s[0],o,t.horizontalAlign,e[0],a),u=this.getLineInitialOffsetY(n,e.length,t.height,r,t.verticalAlign),h=[],f=e.map(p=>[]),m=e.map(p=>[]),v;for(let p=0;p<e.length;p++){let x=e[p],b={features:{liga:!0}},S=[];try{S=i.stringToGlyphs(x,b)}catch(y){console.warn(y)}d=this.getLineInitialOffsetX(s[p],o,t.horizontalAlign,x,a);let E=[];try{E=this.reverseLigaturesTable(i,x,S)}catch(y){console.warn(y)}c=this.computeSpaceWidthForLine(e,p,t);for(let y=0;y<S.length;y++){let C=S[y],A=C.index===0?`
`:C.unicode?String.fromCharCode(C.unicode):void 0,D=E[y],I=0,R=0;y===0&&t.horizontalAlign===2&&C.leftSideBearing!==void 0&&(R=-C.leftSideBearing*r),v&&(I=i.getKerningValue(C,v)*r),d+=R+I;let B=0;if(A===`
`)B=l;else if(A===" ")B=c;else{let G=this.createPath(C,r,d,u,t);G&&(B=G.offsetX-(I+R),h.push(G.path))}if(D.replacements.length===1)m[p].push([d,u]),f[p].push(B);else{let G=D.replacements.map(re=>(i.glyphs.get(re).advanceWidth??0)*r),j=G.reduce((re,z)=>re+=z,0),ee=G.map(re=>re/j),Q=d;for(let re=0;re<ee.length;re++){let z=B*ee[re];m[p].push([Q,u]),f[p].push(z),Q+=z}}d+=B,v=C}u-=n}let g=[];for(let p=0,x=h.length;p<x;p++)g.push(...h[p].toShapes());return{shapes:g,charWidths:f,lineWidths:s,charCoords:m}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,i,r,n){return(i===3||i===2)&&r.indexOf(`
`)>=0&&(e-=n),i===3?t*.5-e*.5:i===2?t-e:0}getLineInitialOffsetY(e,t,i,r,n){let s=t*e,o=Math.abs(this.ascender-this.descender)*r,a=e-o,l=-this.ascender*r-a/2;return n===3?-(i-s-l):n===2?-(i*.5-s*.5-l):l}createPath(e,t,i,r,n){var l;let s=e.getPath(i,-r,n.fontSize,{kerning:!1,letterSpacing:n.letterSpacing});if(!s){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let o=new Ene,a=(e.advanceWidth??1)*t;if(e)for(let c of s.commands){let d=(l=o.currentPath)==null?void 0:l.currentPoint;if(!(d&&c.type!=="Z"&&d.x===c.x&&-d.y===c.y))switch(c.type){case"M":o.moveTo(c.x,-c.y);break;case"L":o.lineTo(c.x,-c.y);break;case"Q":o.quadraticCurveTo(c.x1,-c.y1,c.x,-c.y);break;case"C":o.bezierCurveTo(c.x1,-c.y1,c.x2,-c.y2,c.x,-c.y);break}}return o.subPaths.forEach(c=>{let d=One(c.curves);d!==void 0&&c.currentPoint.distanceTo(d)>0&&c.lineTo(d.x,d.y)}),{offsetX:a+n.fontSize*n.letterSpacing,path:o}}getCharWidth(e,t){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,i){let r=this.getCharWidth(" ",i),n=e[t];if(n){let s=this.countSpaces(n.trimEnd());if(i.horizontalAlign===4&&t<e.length-1&&s){let o=i.width,a=this.getTextWidth(n,i);return(o-(a-s*r))/s}}return r}countSpaces(e){return(e.match(/ /g)||[]).length}};function One(e){if(e.length){let t=e[0];if(t instanceof mo)return t.v1;if(t instanceof co||t instanceof fc)return t.v0}}var Lne=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t){let i=this.objects.get(e);return i===void 0?(i=this.createObject(e,t),this.objects.set(e,i)):i.isShared=!0,i}mutateIfUnique(e,t){let i=this.objects.get(e);if(i&&i.isShared!==!0)return this.objects.delete(e),this.objects.set(t,i),i}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let i=this.objects.get(e);t===i&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},DD=class extends Lne{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t){let i=Dy(e,t,this.flatShading);return i.computeBoundingSphere(),i}},Ine={find(e){},markNeedsUpdateRendererDirty:function(){},markGeometryCacheDirty:function(){},addPendingExpandCloner:function(e){},addPendingUpdateCloner(e){}},Rne=class extends fne{constructor(e){super(),this.shared=e}create(e){return new zk(e,this.shared)}},L1=class{constructor(e,t={}){if(this.geometryCache=new DD(!0),this.geometryCache2=new DD(!1),this.imageHolderCache=new Rne(this),this.thisContext={scene:Ine,shared:this},this.deletedMaterial=new G_(ns.defaultTwoLayerData("phong"),this.thisContext),this.deletedImage=new au(M_.emptyImage,this),this.deletedVideo=new au(py.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.penumbraSize=[],this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[i,r]of Object.entries(t.images))this.addImage(i,r);if(t.videos)for(let[i,r]of Object.entries(t.videos))this.addVideo(i,r);if(t.audios)for(let[i,r]of Object.entries(t.audios))this.addAudio(i,r.data);this.reset(e)}setRequestRender(e){this._requestRender=e}reset(e){for(let[t,i]of Object.entries(e.images))this.addImage(t,i);for(let[t,i]of Object.entries(e.videos))this.addVideo(t,i);for(let[t,i]of Object.entries(e.colors))this.addColor(t,i);for(let[t,i]of Object.entries(e.materials))this.addMaterial(t,new G_(i,this.thisContext));for(let[t,i]of Object.entries(e.audios))this.addAudio(t,i.data);for(let[t,i]of Object.entries(e.fonts))this.addFont(t,i);this.penumbraSize=e.penumbraSize}addMaterial(e,t){t.uuid=e,this.materials[e]=t}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):new Yk(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new au(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new au(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new Oy(t.r,t.g,t.b,t.a):this.colors[e]=new Oy(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let i=this.colors[e];return this.colors[e].r=t.r??i.r,this.colors[e].g=t.g??i.g,this.colors[e].b=t.b??i.b,this.colors[e].a=t.a??i.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if(typeof e=="string"){let i=this.getColor(e);i?t=i:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new ss(0,0,0,0))}else return"a"in e?new ss(e.r,e.g,e.b,e.a):new ss(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof up)return t;{let i=new up({src:t});return this.audios[e]=i,i}}deleteAudio(e){let t=this.audios[e];t&&(t instanceof up&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new Dne(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof up&&e.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}};new L1(Ay.emptyData());var I1=class extends as{updateByPatchedOp(e,t,i){if(super.updateByPatchedOp(e,t,i),Oee(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[r,n]of Object.entries(e.props)){let s=i.shared.material(n);this.material[Number(r)]=s}else if(nu(e.path,["material"])&&this.material instanceof gc)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(Jn.drop(e,1),t.material,i);else if(nu(e.path,["materials","*"])&&Array.isArray(this.material)){let r=e.path[1];if("materials"in t&&r<this.material.length){let n=t.materials[r];typeof n!="string"&&this.material[r].updateByOp(Jn.drop(e,2),n,i)}}}updateState(e,t){var r,n,s,o,a;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let i=this.dataPatched;if(((r=e.geometry)==null?void 0:r.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe),(n=t.scene)==null||n.markNeedsUpdateRendererDirty()),((s=e.geometry)==null?void 0:s.type)==="NonParametricGeometry"&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(l=>t.shared.material(l).getFlavor(i.flatShading,i.side,i.wireframe)),(o=t.scene)==null||o.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe)],(a=t.scene)==null||a.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let l=0;l<this.material.length;l++)this.material[l]=this.material[l].getFlavor(i.flatShading,i.side,i.wireframe);else this.material=this.material.getFlavor(i.flatShading,i.side,i.wireframe)}disposeMaterial(){this.material&&FB(this.material).forEach(e=>{e instanceof gc&&(e instanceof G_||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},vo=class extends I1{constructor(e,t,i){super(e,t),this.data=t,this.localGeometry=void 0}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof It&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof L1){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return gy.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return gy.is2DParametricMesh(this.geometry.userData.type)}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),nu(e.path,["geometry"])&&this.updateByPatchedOpGeometry(Jn.drop(e,1),t.geometry,i)}removeInteractionGeometry(){var e;(e=this.localGeometry)==null||e.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var r;this.invalidateDownstreamBooleanData();let i=this.data.geometry.type;if(i==="NonParametricGeometry"||i==="SubdivGeometry"){let n=e;if(this.localGeometry===void 0){let c={...this.data.geometry,...n};this.localGeometry=Dy(c,t,this.data.flatShading)}let s,o,a;n.scaleBaked?[s,o,a]=n.scaleBaked:{width:s,height:o,depth:a}=n;let l=this.localGeometry.userData;l.sxPrev!==void 0&&z_(this.localGeometry.attributes,s/l.sxPrev,o/l.syPrev,a/l.szPrev),l.sxPrev=s,l.syPrev=o,l.szPrev=a}else{let n={...this.data.geometry,...e};(r=this.localGeometry)==null||r.dispose(),this.localGeometry=Dy(n,t,this.data.flatShading)}}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e)}updateByPatchedOpGeometry(e,t,i){var n;let r=!1;e.type===0&&e.path.length===0&&lA(["scaleBaked"],Object.keys(e.props))&&this.geometryCreateDeleyed instanceof hn&&this.chooseGeoemtryCache(i.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(r=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(i)),r||((n=i.scene)==null||n.markGeometryCacheDirty(),this.createGeometryDelayed(i)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t),super.updateState(e,t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let i=this.geometry.userData.parameters;this.is2DType?e.set(0,0,i.depth*.5):e.setScalar(0),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}};function Nne(e){var s,o;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,i=e.geometry.attributes.position.array,r=e.geometry.attributes.normal.array,n=new Float32Array(i.length);for(let a=0;a<i.length;a+=3){let l=`${i[a]}_${i[a+1]}_${i[a+2]}`,c=new N(r[a],r[a+1],r[a+2]);t.has(l)?(s=t.get(l))==null||s.normals.push(c):t.set(l,{normals:[c],result:new N})}t.forEach((a,l)=>{for(let c of a.normals)a.result.add(c);a.result.divideScalar(a.normals.length)});for(let a=0;a<i.length;a+=3){let l=`${i[a]}_${i[a+1]}_${i[a+2]}`,c=(o=t.get(l))==null?void 0:o.result;c&&(n[a]=c.x,n[a+1]=c.y,n[a+2]=c.z)}e.geometry.setAttribute("extrudeNormal",new ut(n,3))}function Bne(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=new N;for(let n=0;n<t.length;n+=3)r.set(t[n],t[n+1],t[n+2]).normalize(),i[n]=r.x,i[n+1]=r.y,i[n+2]=r.z;e.geometry.setAttribute("extrudeNormal",new ut(i,3))}function DA(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof gc)||e.material.getLayersOfType("outline").length===0)return;e instanceof vo&&e.is2DAndNoDepth?Bne(e):Nne(e)}function OA(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=parseInt(e.uuid.replace(/\D/g,"")),n=[Jt.seededRandom(r),Jt.seededRandom(r+1e4),Jt.seededRandom(r+2e4)];for(let s=0;s<t.length;s++)i[s]=n[s%3];e.geometry.setAttribute("randomColor",new Gt(i,3))}AA.then(e=>{});var Po=new fr,jf=new N;function kne(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var gm=class extends vo{constructor(e,t,i){super(e,t,i),this.data=t,this.hiddenMatrixOld=new at,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let i=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var s,o,a;if(this.skipReactionUpdate===!0)return;let t=(s=this.localGeometry)==null?void 0:s.uuid,{originalGeometry:i,subdividedGeometry:r,subdivPointer:n}=hn.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=n,i!==void 0&&((o=this.originalGeometry)==null||o.dispose(),this.originalGeometry=i),r!==void 0&&((a=this.subdividedGeometry)==null||a.dispose(),this.subdividedGeometry=r??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,DA(this),OA(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let i=this.material;this.material=i.getFlavor(!1,i.side,i.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){hn.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&hn.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=hn.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=hn.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let i=this.localGeometry;this.localGeometry=this.originalGeometryNew,as.prototype.raycast.call(this,e,t),this.localGeometry=i}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new ks,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;Po.setFromBufferAttribute(t),Po.getCenter(i),e.boundingSphere.radius=i.distanceTo(Po.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Po.getSize(jf),this.hasNonUniformScale&&jf.divide(this.scale);let r={width:jf.x,height:jf.y,depth:jf.z};return this.geometry.userData.parameters=r,r}updateBoundingSphere(e){let t=this.originalGeometry;Po.min.set(e[0],e[2],e[4]),Po.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Po.min.applyMatrix4(this.shearScaleInv),Po.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new ks);let i=t.boundingSphere.center;Po.getCenter(i),t.boundingSphere.radius=i.distanceTo(Po.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(hn.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,i){super.updateByPatchedOpGeometry(e,t,i),this.localGeometry&&this.createGeometryByControls(t)}},OD=-1,zne=1,Fne={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},Une={polygon_center:0,edge:1,vertex:2},Av=(e,t)=>(i,r)=>!t||i===0||e===0?0:e*r/100,jt=(e,t)=>{let i=Math.abs(t),r=i*-1;return(e-OD)*(i-r)/(zne-OD)+r};function jne(e){let t=[],i={};for(var r=0,n=e.length;r<n;r++){var s=JSON.stringify(e[r].pos.map(o=>Math.round(o*1e4)/1e4));i[s]||(t.push(e[r]),i[s]=!0)}return t}var Hne=new N,Cv=new N,Gne=new N,Vne=new N;function hh(e,t){let i=Gne.fromArray(e),r=Vne.fromArray(t);Cv.copy(r).sub(i);let n=Cv.length();return Cv.normalize().multiplyScalar(n*.5),Hne.copy(i).add(Cv).toArray()}var Ts=new Tn,Tv=new N,Ly=new N,$c=new N;function Wne(e){let t=[];for(let i=0;i<=e.index.count;i++)if(Tv.fromArray(e.index.array,i*3),Ts.setFromAttributeAndIndices(e.attributes.position,Tv.x,Tv.y,Tv.z),Ts.getNormal(Ly),Ts.getMidpoint($c),!(isNaN($c.x)||isNaN($c.y)||isNaN($c.z))){let{a:r,b:n,c:s}=Ts,o=r.toArray(),a=n.toArray(),l=s.toArray(),c=r.distanceTo(n),d=n.distanceTo(s),u=s.distanceTo(r),h=hh(o,a),f=hh(a,l),m=hh(l,o),v=[c,d,u],g=Math.max(...v),p=v.filter(S=>Math.round(S)===Math.round(g)).length>1,x=[],b=Ts.getMidpoint($c).toArray();g===c&&!p&&(x=[f,m,m],b=h),g===d&&!p&&(x=[h,m,m],b=f),g===u&&!p&&(x=[h,f,f],b=m),p&&(x=[h,f,m]),t.push({vertices:[o,a,l],faceCenters:x,midpoint:b,norm:Ts.getNormal(Ly).toArray()})}return t}function qne(e){let t=[],{position:i}=e.attributes;for(let r=0;r<i.count;r++){Ts.setFromAttributeAndIndices(i,r*3,r*3+1,r*3+2),Ts.getNormal(Ly),Ts.getMidpoint($c);let n=Ts.a.toArray(),s=Ts.b.toArray(),o=Ts.c.toArray();t.push({vertices:[n,s,o],faceCenters:[hh(n,s),hh(s,o),hh(o,n)],midpoint:$c.toArray(),norm:Ly.toArray()})}return t}var Xne=4,Yne=.5,ob=e=>.5*(1-Math.cos(e*Math.PI)),Qne=class{constructor(){this.perlin=new Array(4095+1)}noise(e,t=0,i=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let g=0;g<4095+1;g++)this.perlin[g]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),i<0&&(i=-i);let r=Math.floor(e),n=Math.floor(t),s=Math.floor(i),o=e-r,a=t-n,l=i-s,c,d,u=0,h=.5,f,m,v;for(let g=0;g<Xne;g++){let p=r+(n<<4)+(s<<8);c=ob(o),d=ob(a),f=this.perlin[p&4095],f+=c*(this.perlin[p+1&4095]-f),m=this.perlin[p+16&4095],m+=c*(this.perlin[p+16+1&4095]-m),f+=d*(m-f),p+=256,m=this.perlin[p&4095],m+=c*(this.perlin[p+1&4095]-m),v=this.perlin[p+16&4095],v+=c*(this.perlin[p+16+1&4095]-v),m+=d*(v-m),f+=ob(l)*(m-f),u+=f*h,h*=Yne,r<<=1,o*=2,n<<=1,a*=2,s<<=1,l*=2,o>=1&&(r++,o--),a>=1&&(n++,a--),l>=1&&(s++,l--)}return u}noiseSeed(e){let t=(()=>{let i,r;return{setSeed(n){r=i=(n??Math.random()*4294967296)>>>0},getSeed(){return i},rand(){return r=(1664525*r+1013904223)%4294967296,r/4294967296}}})();t.setSeed(e),this.perlin=new Array(4095+1);for(let i=0;i<4095+1;i++)this.perlin[i]=t.rand()}},Kne=Qne,LD=new N,ID=new at,RD=new Bh;function ND(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="TextGeometry"&&(t=!0)}),t}var Kk=class extends vo{constructor(e,t,i){super(e,t,i),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t;let e=this.dataPatched;return((t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:i}=this;if(!isNaN(e.ray.origin.x)&&(ID.copy(i).invert(),RD.copy(e.ray).applyMatrix4(ID),RD.intersectBox(this.singleBBox,LD))){let r=LD.applyMatrix4(i),n=e.ray.origin.distanceTo(r);t.push({distance:n,point:r.clone(),object:this})}}},an=1e-4,Do,Zk,$k,Jk,BD=new N,kD=new N;AA.then(e=>{Do=e,Zk=[Do.get_face_center,Do.get_edge_midpoint,Do.get_vertex_position],$k=[Do.get_face_normal,Do.get_edge_normal,Do.get_vertex_normal],Jk=[Do.face_count,Do.edge_count,Do.vertex_count]});var Zne=new at,$ne=new at,Sl=new N,zc=new N,Hf=new N,ab=new N,Jne=new N,ese=new N,Ca=new Kne,Iy=class extends wA(Di){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof ou&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof ou&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?this.parameters.grid.count[0]*this.parameters.grid.count[1]*this.parameters.grid.count[2]:this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(t=0),this.parameters.type==="toObject"&&this.objectForSample){for(let r=0,n=this.children.length;r<n;++r)this.remove(this.children[0]);let i=this.children;if(i.length===t)return;if(i.length<t)for(let r=0,n=t-i.length;r<n;++r){let s=new ou(this.object);s.expand(),this.add(s)}else for(let r=0,n=i.length-t;r<n;++r)this.remove(i[r])}else{if(this.children.length===t)return;if(this.children.length<t)for(let i=0,r=t-this.children.length;i<r;++i){let n=new ou(this.object);n.expand(),this.add(n)}else for(let i=0,r=this.children.length-t;i<r;++i)this.remove(this.children[0])}}_updateRadial(e){let t=e.radial,i=t.start*Jt.DEG2RAD,r=t.end*Jt.DEG2RAD,n=i-r,s=new Kr(t.rotation[0],t.rotation[1],t.rotation[2]),o;switch(t.axis){case"z":o=new N(0,0,1);break;case"y":o=new N(0,1,0);break;default:case"x":o=new N(1,0,0);break}let a=e.randomnessObject??Gl.defaultData([1,1,1]).randomnessObject,l=a.noiseType==="perlin";Ca.noiseSeed(a.seed);let c=qw((0,Rf.default)(a.seed)),d=Av(a.strength,this.parameters.randomness);for(let[u,h]of this.children.entries()){let f=u*(a.freqScale/10)+a.movement,m=l?Ca.noise(f):c(f,f);h.scale.x=t.scale[0]+d(u,jt(m,a.scale[0]))||an,h.scale.y=t.scale[1]+d(u,jt(m,a.scale[1]))||an,h.scale.z=t.scale[2]+d(u,jt(m,a.scale[2]))||an,h.position.setScalar(0);let v=n/e.count*u-i;switch(t.axis){case"x":h.rotation.set(0,v,0);break;case"y":h.rotation.set(0,0,v);break;case"z":h.rotation.set(v,0,0);break}h.translateOnAxis(o,t.radius),h.position.x+=t.position[0]+d(u,jt(m,a.position[0])),h.position.y+=t.position[1]+d(u,jt(m,a.position[1])),h.position.z+=t.position[2]+d(u,jt(m,a.position[2]));let g=d(u,jt(m,a.rotation[0])),p=d(u,jt(m,a.rotation[1])),x=d(u,jt(m,a.rotation[2]));t.alignment===!0?(h.rotation.x+=s.x+g,h.rotation.y+=s.y+p,h.rotation.z+=s.z+x):h.rotation.set(s.x+g,s.y+p,s.z+x)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,i=new Kr(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??Gl.defaultData([1,1,1]).randomnessObject,n=r.noiseType==="perlin";Ca.noiseSeed(r.seed);let s=qw((0,Rf.default)(r.seed)),o=Av(r.strength,this.parameters.randomness);for(let[a,l]of this.children.entries()){let c=a*(r.freqScale/10)+r.movement,d=n?Ca.noise(c):s(c,c),u=o(a,jt(d,r.rotation[0])),h=o(a,jt(d,r.rotation[1])),f=o(a,jt(d,r.rotation[2]));l.scale.x=1+(t.scale[0]-1)*a+o(a,jt(d,r.scale[0]))||an,l.scale.y=1+(t.scale[1]-1)*a+o(a,jt(d,r.scale[1]))||an,l.scale.z=1+(t.scale[2]-1)*a+o(a,jt(d,r.scale[2]))||an,l.rotation.x=i.x*a+u,l.rotation.y=i.y*a+h,l.rotation.z=i.z*a+f,l.position.x=t.position[0]*a+o(a,jt(d,r.position[0])),l.position.y=t.position[1]*a+o(a,jt(d,r.position[1])),l.position.z=t.position[2]*a+o(a,jt(d,r.position[2]))}}_updateGrid(e){let t=0,i=e.grid,r=e.randomnessObject??Gl.defaultData([1,1,1]).randomnessObject,n=Av(r.strength,this.parameters.randomness),s=r.noiseType==="perlin";Ca.noiseSeed(r.seed);let o=rie((0,Rf.default)(r.seed));if(i.useCenter===!0){let a={x:i.count[0]%2===0?2:1,y:i.count[1]%2===0?2:1,z:i.count[2]%2===0?2:1},l=new N(i.size[0]*(i.count[0]-a.x)*.5,i.size[1]*(i.count[1]-a.y)*.5,i.size[2]*(i.count[2]-a.z)*.5);for(let c=0;c<i.count[0];c++)for(let d=0;d<i.count[1];d++)for(let u=0;u<i.count[2];u++){let h=[(c+1)*(r.freqScale/10)+r.movement,(d+1)*(r.freqScale/10)+r.movement,(u+1)*(r.freqScale/10)+r.movement],f=s?Ca.noise(...h):o(...h),m=this.children[t++];m.scale.x=1+n(t,jt(f,r.scale[0]))||an,m.scale.y=1+n(t,jt(f,r.scale[1]))||an,m.scale.z=1+n(t,jt(f,r.scale[2]))||an;let v=n(t,jt(f,r.rotation[0])),g=n(t,jt(f,r.rotation[1])),p=n(t,jt(f,r.rotation[2]));m.rotation.set(v,g,p),m.position.x=i.size[0]*c-l.x+n(t,jt(f,r.position[0])),m.position.y=i.size[1]*d-l.y+n(t,jt(f,r.position[1])),m.position.z=i.size[2]*u-l.z+n(t,jt(f,r.position[2]))}}else for(let a=0;a<i.count[0];a++)for(let l=0;l<i.count[1];l++)for(let c=0;c<i.count[2];c++){let d=[(a+1)*(r.freqScale/10)+r.movement,(l+1)*(r.freqScale/10)+r.movement,(c+1)*(r.freqScale/10)+r.movement],u=s?Ca.noise(...d):o(...d),h=this.children[t++];h.scale.x=1+n(t,jt(u,r.scale[0]))||an,h.scale.y=1+n(t,jt(u,r.scale[1]))||an,h.scale.z=1+n(t,jt(u,r.scale[2]))||an;let f=n(t,jt(u,r.rotation[0])),m=n(t,jt(u,r.rotation[1])),v=n(t,jt(u,r.rotation[2]));h.rotation.set(f,m,v),h.position.x=i.size[0]*a+n(t,jt(u,r.position[0])),h.position.y=-i.size[1]*l+n(t,jt(u,r.position[1])),h.position.z=-i.size[2]*c+n(t,jt(u,r.position[2]))}}_updateToObject(e){var v;if(e.type!=="toObject")throw new Error;let{toObject:t}=e,i=new Kr(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??Gl.defaultData([1,1,1]).randomnessObject,n=r.noiseType==="perlin";Ca.noiseSeed(r.seed);let s=qw((0,Rf.default)(r.seed)),o=Av(r.strength,this.parameters.randomness);if(!t.object){for(let[,g]of this.children.entries())g.position.set(0,0,0),g.scale.setScalar(1),g.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof Kk)if(!((v=this.objectForSample.font)!=null&&v.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.object.parent===this.objectForSample){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let a=this.getSubdivData(),l=[],c=g=>{let p=g.length,x=g.map(E=>E[0]).reduce((E,y)=>E+y,0),b=g.map(E=>E[1]).reduce((E,y)=>E+y,0),S=g.map(E=>E[2]).reduce((E,y)=>E+y,0);return[x/p,b/p,S/p]},d=g=>Math.round(g*1e6)/1e6;a.forEach(g=>{let p=a.filter(x=>d(g.pos[0])===d(x.pos[0])&&d(g.pos[1])===d(x.pos[1])&&d(g.pos[2])===d(x.pos[2]));p.length>1?l.push({pos:g.pos,norm:c(p.map(x=>x.norm))}):l.push(g)});let u=jne(l);if(a.length>0){let g=Math.round(u.length*t.count/100);this._updateCount(g)}this.objectForSample.updateMatrixWorld();let h=new nie(this.objectForSample).build(),f=Fne[t.axis],m=this.children;h.setRandomGenerator((0,Rf.default)(this.object.uuid+t.seed));for(let[g,p]of m.entries()){let x=g*(r.freqScale/10)+r.movement,b=n?Ca.noise(x):s(x,x),S=o(g,jt(b,r.rotation[0])),E=o(g,jt(b,r.rotation[1])),y=o(g,jt(b,r.rotation[2]));t.spreadType==="random"?h.sample(Hf,ab):(u.length&&(Hf.fromArray(u[g].pos),ab.fromArray(u[g].norm)),this.objectForSample instanceof gm&&Hf.applyMatrix4(Zne.copy(this.objectForSample.matrixWorld).invert())),Hf.applyMatrix4(this.object.hiddenMatrix.clone().invert()),p.position.copy(Hf),Sl.fromArray(f);let C=t.align==="normal"?ab:this.object.getWorldDirection(ese),A=zc.fromArray(t.position);zc.x+=zc.x+o(g,jt(b,r.position[0])),zc.y+=zc.y+o(g,jt(b,r.position[1])),zc.z+=zc.z+o(g,jt(b,r.position[2]));let D=Math.acos(C.dot(Sl)),I=Jne.crossVectors(Sl,C).normalize(),R=$ne.makeRotationAxis(I,D),B=C.clone().cross(this.object.up).normalize(),G=B.clone().cross(C).normalize(),j=new at().makeBasis(B,C,G),ee=new N(Sl.y,Sl.z,Sl.x).normalize(),Q=ee.clone().cross(Sl).normalize(),re=new at().makeBasis(ee,Sl,Q).invert(),z=new at().multiplyMatrices(j,re);p.rotation.setFromRotationMatrix(z),A.applyMatrix4(R),p.position.add(A),p.rotation.x=p.rotation.x+i.x+S,p.rotation.y=p.rotation.y+i.y+E,p.rotation.z=p.rotation.z+i.z+y,p.scale.setScalar(1),p.scale.x=p.scale.x+t.scale[0]+o(g,jt(b,r.scale[0]))||an,p.scale.y=p.scale.y+t.scale[1]+o(g,jt(b,r.scale[1]))||an,p.scale.z=p.scale.z+t.scale[2]+o(g,jt(b,r.scale[2]))||an,p.scale.multiply(this.object.scale),p.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof gm){let t=this.objectForSample,i=Une[e],r=Jk[i],n=Zk[i],s=$k[i],o=[],a=r(t.subdivPointerNew);for(let l=0;l<=a-1;l++){let c=n(t.subdivPointerNew,l),d=s(t.subdivPointerNew,l);BD.fromArray(c).applyMatrix4(t.matrixWorld),kD.fromArray(d),o.push({pos:BD.toArray(),norm:kD.toArray()})}return o}else return(this.objectForSample.geometry.index?Wne(this.objectForSample.geometry):qne(this.objectForSample.geometry)).map((t,i)=>e==="polygon_center"?{pos:t.midpoint,norm:t.norm}:e==="vertex"?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:e==="edge"?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[]).flat()}updateState(e,t){var i;if(this.parameters=aA(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(i=this.object.parent)==null||i.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let r=t.find(this.parameters.toObject.object);r instanceof as?this.objectForSample=r:this.objectForSample=void 0,this.matrix=new at,this.hiddenMatrix=new at,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,r&&r.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},Fm=e=>{var t;return t=class extends e{},t.geometryHelper=new ia(30,30,30),t},Mv=new Bh,lb=new ks,zD=new at,Um=(e,t,i,r,n=!1)=>{let s=t,o=e.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),lb.copy(s.boundingSphere),lb.applyMatrix4(o),i.ray.intersectsSphere(lb)===!1||(zD.copy(o).invert(),Mv.copy(i.ray).applyMatrix4(zD),s.boundingBox!==null&&Mv.intersectsBox(s.boundingBox)===!1))return;let a,l,c,d,u=s.index,h=s.attributes.position,f=s.drawRange,m,v;if(n===!1){let p=Math.max(0,f.start),x=Math.min(u.count,f.start+f.count);for(m=p,v=x;m<v;m+=3)if(l=u.getX(m),c=u.getX(m+1),d=u.getX(m+2),a=g(e,i,Mv,h,l,c,d),a){a.faceIndex=Math.floor(m/3),r.push(a);return}}else{let p=s.attributes.position,x=new N,b=new N,S=new N,E=new N,y=2,C=1/((e.scale.x+e.scale.y+e.scale.z)/3),A=C*C,D=Math.max(0,f.start),I=Math.min(p.count,f.start+f.count);for(let R=D,B=I-1;R<B;R+=y){if(x.fromBufferAttribute(p,R),b.fromBufferAttribute(p,R+1),Mv.distanceSqToSegment(x,b,E,S)>A)continue;E.applyMatrix4(e.matrixWorld);let G=i.ray.origin.distanceTo(E);G<i.near||G>i.far||r.push({distance:G,point:S.clone().applyMatrix4(e.matrixWorld),object:e})}}function g(p,x,b,S,E,y,C){let A=new N,D=new N,I=new N,R=new N,B=new N;if(A.fromBufferAttribute(S,E),D.fromBufferAttribute(S,y),I.fromBufferAttribute(S,C),b.intersectTriangle(A,D,I,!1,R)===null)return null;B.copy(R),B.applyMatrix4(p.matrixWorld);let G=x.ray.origin.distanceTo(B);return G<x.near||G>x.far?null:{faceIndex:1,distance:G,point:B.clone(),object:p}}},Pv=new N,gs=new zh,tse=class extends Nm{constructor(e){let t=new It,i=new bc({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],n=[],s={},o=new Lt(15711266),a=new Lt(15711266),l=new Lt(2857471);c("n1","n2",o),c("n2","n4",o),c("n4","n3",o),c("n3","n1",o),c("f1","f2",o),c("f2","f4",o),c("f4","f3",o),c("f3","f1",o),c("n1","f1",o),c("n2","f2",o),c("n3","f3",o),c("n4","f4",o),c("p","n1",a),c("p","n2",a),c("p","n3",a),c("p","n4",a),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l);function c(u,h,f){d(u,f),d(h,f)}function d(u,h){r.push(0,0,0),n.push(h.r,h.g,h.b),s[u]===void 0&&(s[u]=[]),s[u].push(r.length/3-1)}t.setAttribute("position",new ut(r,3)),t.setAttribute("color",new ut(n,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap;gs.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let i=1,r=1,n=.8;eo("n1",t,e,gs,-i,-r,n),eo("n2",t,e,gs,i,-r,n),eo("n3",t,e,gs,-i,r,n),eo("n4",t,e,gs,i,r,n);let s=n;eo("f1",t,e,gs,-i,-r,s),eo("f2",t,e,gs,i,-r,s),eo("f3",t,e,gs,-i,r,s),eo("f4",t,e,gs,i,r,s);let o=s,a=.5;eo("u1",t,e,gs,i*.7*a,r*1.1,o),eo("u2",t,e,gs,-i*.7*a,r*1.1,o),eo("u3",t,e,gs,0,r*(1.1+.9*a),o),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function eo(e,t,i,r,n,s,o){Pv.set(n,s,o).unproject(r);let a=t[e];if(a!==void 0){let l=i.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],Pv.x,Pv.y,Pv.z)}}var ise=class extends Fm(tse){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){Um(this.object,this.geometry,e,t,!0)}},V_;(e=>e.is=t=>"objectHelper"in t)(V_||(V_={}));var R1=(e,t)=>class extends YB(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(i,r){this.objectHelper.raycast(i,r)}showGizmos(){for(let i in this.gizmos){let r=this.gizmos[i];r instanceof ey&&(r.visible=!0)}}updateEntityBoxSize(i,r){this.objectHelper.visible&&this.geometryHelper instanceof ia?(i.setScalar(0),r.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(i,r)}hideGizmos(){for(let i in this.gizmos){let r=this.gizmos[i];r instanceof ey&&(r.visible=!1)}}},cb=790,gd=new N,ub=new N,Ka=class extends R1(zh,ise){constructor(e="",t={...vy.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=dm.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.super_Entity(e,t),this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let i=this.width,r=this.height;if(t.orthographic.autoZoom){let n=t.orthographic.autoZoomFrustumSize??cb,s=i/r,o=i>r?s:1,a=i>r?1:s;this.orthoCamera=new Q0(-n*.5*o,n*.5*o,n*.5*(1/a),-n*.5*(1/a),-5e4,1e4)}else this.orthoCamera=new Q0(i*-.5,i*.5,r*.5,r*-.5,-5e4,1e4);this.perspCamera=new Qr(45,i/r,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e){super.lookAt(e),this.getWorldPosition(gd),this.targetOffset=gd.distanceTo(e)}getTarget(e=new N){return this.getWorldDirection(ub),this.getWorldPosition(gd),ub.multiplyScalar(this.targetOffset),e.copy(gd).add(ub),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(gd),gd.distanceTo(e)}updateUp(){let e=this.getWorldQuaternion(new hi),t=new N(0,0,1).applyQuaternion(e),i=new N().copy(Di.DefaultUp);this.isUpVectorFlipped&&i.negate(),i.applyQuaternion(e);let r=new N().copy(Di.DefaultUp).projectOnPlane(t),n=new N().crossVectors(r,i).dot(t)>=0?1:-1;this.angleOffsetFromUp=r.angleTo(i)*n}updateTransformState(e){let t=super.updateTransformState(e);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),t}getViewFrontToObject(e){let t=e.getWorldPosition(new N),i=e.getWorldDirection(new N).multiplyScalar(this.targetOffset);return{position:t.clone().add(i),target:t}}getViewToObject(e){let t=e.getWorldPosition(new N),i=this.getWorldDirection(new N).multiplyScalar(this.targetOffset);return{position:t.clone().sub(i),target:t}}setViewplaneSize(e,t){if(this.aspect=e/t,this.data.type==="OrthographicCamera"&&this.data.orthographic.autoZoom){let i=this.data.orthographic.autoZoomFrustumSize??cb,r=e>t?this.aspect:1,n=e>t?1:this.aspect;this.left=-i*.5*r,this.right=i*.5*r,this.top=i*.5*(1/n),this.bottom=-i*.5*(1/n)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,i,r,n,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,i,r,n,s):this.orthoCamera.setViewOffset(e,t,i,r,n,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom,autoZoom:!0,autoZoomFrustumSize:cb},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return l_(t,e)}updateCameraSubtype(e,t){let i=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(i,t.zoom),t.near!==void 0&&this.setNear(i,t.near),t.fov!==void 0&&i==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e){this.updateCameraState(e)}updateCameraState(e){this.updateState_Entity(e,{}),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},FD=new at;function UD(e){let t=!1;return e.scene.objects.traverse((i,r)=>{var n;((n=r.geometry)==null?void 0:n.type)==="BooleanGeometry"&&(t=!0)}),t}var Dh=class extends I1{constructor(e,t,i){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new It,this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var r;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let n=0;n<this.children.length;n++){let s=this.children[n];s instanceof Dh&&s.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let n=0;n<this.children.length;n++){let s=this.children[n];if(s instanceof as&&s.dataPatched.visible===!0&&((r=s.geometry.attributes.position)==null?void 0:r.count)>0&&s.geometry.drawRange.count>0){if(s.booleanMeshSetAddress===-1){if((s.geometry.index??s.geometry.getAttribute("position")).count/3<15e5&&(s.booleanMeshSetAddress=Dl.getMeshSet(s.geometry,e===!0,t)),s.booleanMeshSetAddress===-1)return;Dl.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1}else s instanceof Dh&&s.needsTransformForDownstream===!0?(Dl.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.needsTransformForDownstream=!1):s.booleanWasTransformed===!0&&(FD.multiplyMatrices(s.matrix,s.booleanMatrixInvOld),Dl.transformMeshSet(s.booleanMeshSetAddress,FD),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1);this.meshSetAddresses.push(s.booleanMeshSetAddress)}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new MG([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return Dl.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let i=this.geometry;i.dispose(),this.geometry=new It,this.geometry.userData=i.userData,this.geometry.boundingSphere=i.boundingSphere;try{this.booleanMeshSetAddress=Dl.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(n){this.booleanMeshSetAddress=0,console.error(n)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,DA(this),OA(this)}dispose(){super.dispose(),this.geometry.dispose()}},W_;(e=>{function t(i){return sr.is(i)&&i instanceof Bm}e.is=t})(W_||(W_={}));var LA=(e,t)=>class extends R1(e,t){updateState_Light(i,r){this.updateState_Entity(i,r),i.color!==void 0&&(this.color=r.shared.color(i.color)),i.intensity!==void 0&&(this.intensity=i.intensity),i.depth!==void 0&&(this.shadow.camera.far=i.depth,this.shadow.needsUpdate=!0),i.shadows!==void 0&&(this.castShadow=i.shadows)}},Ba=e=>e instanceof as,ql=e=>e!==null&&e instanceof Dh,rse=e=>e instanceof Ka,nse=e=>W_.is(e),sse=e=>V_.is(e),IA=class extends Fm(sq){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}raycast(e,t){Um(this.object,IA.geometryHelper,e,t)}update(){}},q_=class extends R1(Ud,IA){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},e4=class extends Fm(nq){constructor(e,t=15,i=10066329){super(e,t,i),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){Um(this.object,e4.geometryHelper,e,t)}},t4=class extends Fm(rq){constructor(e,t=15,i=6710886){super(e,t,i),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){Um(this.object,t4.geometryHelper,e,t)}},X_=class extends Fm(iq){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){Um(this.object,X_.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=X_._vector,t=this.object.distance?this.object.distance:1e3,i=t*Math.tan(this.object.angle);this.cone.scale.set(i,i,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let r=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,s=this.cone.material.length;n<s;n++)this.cone.material[n].color.set(r);else this.cone.material.color.set(r)}}},i4=X_;i4._vector=new N;function ose(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var ase=class extends LA(Z9,e4){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.top=1250,r.bottom=-1250,r.right=1250,r.left=-1250,r.near=-1e4,r.far=2500;let n=new J0(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof J0&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let i=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&ose(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),i&&this.update()}},lse=class extends LA(Q9,t4){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=90,r.aspect=1,r.near=100,r.far=2500;let n=new N(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),s=new N(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z),o=new fr(n,s),a=new ey(o,new Lt(16755200));a.visible=!1,this.gizmos.shadowmap=a,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof ey){let i=this.shadow.camera,r=new N(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),n=new N(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z);t.box.set(r,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},jD=new N,HD=new N,GD=new hi,cse=class extends LA(X9,i4){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=Jt.RAD2DEG*2*this.angle,r.aspect=1,r.near=100,r.far=2500;let n=new J0(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof J0&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),HD.setFromMatrixPosition(this.matrixWorld),GD.setFromRotationMatrix(this.matrixWorld),jD.copy(this.up).applyQuaternion(GD).negate().multiplyScalar(this.distance),this.target.position.copy(HD).add(jD),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},use=class extends vo{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}constructor(e,t,i){super(e,t,i)}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?mk(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},fh=class extends R1(Ud,IA){constructor(e,t,i){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,i)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let i=t.scene.data.objects.get(e.component);if(i){let r,n;for(let s of Mh.rootOverrideProps)e[s]===void 0?(r===void 0&&(r={...e}),r[s]=i.data[s]):(n===void 0&&(n={}),n[s]=e[s]);return this.overrideData=n,r??e}return e}updateByOp(e,t,i,r){let n;if(this.isInstanceRoot&&!r&&(t=this.transformAssignData(t,i),e.type===0&&e.path.length===0&&this.component))for(let s of Mh.rootOverrideProps)s in e.props&&e.props[s]===void 0&&(n===void 0&&(n={...e,props:{...e.props}}),n.props[s]=this.component.data[s]);super.updateByOp(n??e,t,i,r)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){this.component=e.scene.find(t.component)??null;let i=!1;if(this.component!==this.oldComponent){if(this.oldComponent){let r=0;for(let n of this.children)if(sr.is(n))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),RA(n),r+=1;else break;this.children.splice(0,r)}i=!0}this.component&&r4(e,[this.uuid],t.overrides,this,this.component,this.component,0,i),this.oldComponent=this.component}}};function RA(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let i of e.children)sr.is(i)&&RA(i)}}function VD(e,t,i,r){return e.component===t&&lA(e.identity,r)?e.overrideData===i?2:1:0}function r4(e,t,i,r,n,s,o,a){if(o>50)return!1;if(r.component!==n){if(r.component){let c=r.component.instances.indexOf(r);c>=0&&r.component.instances.splice(c,1)}n.instances.push(r),r.component=n}n instanceof fh&&n.isInstanceRoot&&n.expandInstanceChildren(e);let l=0;for(let c of n.children)if(sr.is(c)){let d=[...t,...typeof c.identity=="string"?[c.identity]:c.identity],u=yy.resolve(i,d,1),h=null,f;if(!a){let m=r.children[l];if(h=sr.is(m)?m:null,h!==null){let v=VD(h,c,u,d);f=v>=1?h.stateSelection:void 0,v!==2&&(h=null)}if(h===null&&(h=e.scene.findInstance(d)??null,h!==null)){let v=VD(h,c,u,d);if(f=v>=1?h.stateSelection:void 0,v!==2)h=null;else{let g=h.parent.children.indexOf(h);h.parent.children.splice(g,1),r.children.splice(l,0,h),h.parent===r?g<=l&&console.error("not possible"):(h.parent=r,h.matrixWorldNeedsUpdate=!0,h.resetBBoxNeedsUpdate(),h.updateVisible(),e.pendingDeletes.delete(h))}}}if(h===null){let m=u?pu.apply(c.data,u):c.data;Cu.is(m.type)&&(m={...m,type:"Empty"}),h=Vl.createEntity(d,m,e),h.overrideData=u,r.add(h),r.children.splice(r.children.length-1,1),r.children.splice(l,0,h),h.updateState(h.data,e),f&&h.changeSelectedState(f,e),e.scene.registerInstanceAndSetUuid(h)}l+=1,r4(e,t,i,h,c,s,o+1,a)}if(!a){let c=l;for(;;){let d=r.children[l];if(sr.is(d))e.pendingDeletes.add(d);else break;l+=1}r.children.splice(c,l-c)}return!0}function dse(e,t,i){let r;return t.geometry.type==="TextGeometry"?new Kk(e,t,i):(t.geometry.type==="SubdivGeometry"?r=new gm(e,t,i):t.geometry.type==="VectorGeometry"?r=new use(e,t,i):t.geometry.type==="BooleanGeometry"?r=new Dh(e,t,i):r=new vo(e,t,i),r)}function NA(e,t,i){return t.type==="Mesh"?dse(e,t,i):t.type==="Empty"?new q_(e,t):t.type==="PointLight"?new lse(e,t,i):t.type==="SpotLight"?new cse(e,t,i):t.type==="DirectionalLight"?new ase(e,t,i):t.type==="Component"||t.type==="Instance"?new fh(e,t,i):Cu.is(t.type)?new Ka(e,t):(console.error(t),new q_(e,t))}Vl.createEntity=NA;function hse(e,t,i){let r=NA(e.identity,t,i),n=e.children,s=e.parent,o=e.component,a=e.instances,l=e.overrideData,c=e.uuid,d=e.stateSelection;e.dispose();for(let u of Object.keys(e))delete e[u];Object.setPrototypeOf(e,Object.getPrototypeOf(r));for(let u of Object.keys(r))e[u]=r[u];e.children=[...e.children,...n],e.parent=s,e.component=o,e.instances=a,e.uuid=c,e.overrideData=l,e.updateState(e.data,i),d&&e.changeSelectedState(d,i),e.resetBBoxNeedsUpdate()}Vl.changeEntityProptotype=hse;Vl.Cloner=Iy;function fse(e,t,i,r){e.updateByOp(t,i,r,!1)}function WD(e,t){let i=!1,r=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return n.length>0&&(e.layers.set(8),r.length>0&&e.layers.enable(3),i=!0,OA(e),DA(e)),r.length===0&&n.length===0&&e.layers.set(0),i}function qD(e,t){if(!t.layers)return!1;let i=!1,r=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return r.length>0&&(e.layers.set(3),n.length>0&&e.layers.enable(8),i=!0),r.length===0&&n.length===0&&e.layers.set(0),i}function pse(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof I1)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)WD(i,i.material[r])&&(t=!0);else WD(i,i.material)&&(t=!0)}),t}function mse(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof I1)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)qD(i,i.material[r])&&(t=!0);else qD(i,i.material)&&(t=!0)}),t}var gse=new MN,vse=new at,yse=new Bh;function xse(e,t,i){let r=e.cloner;if(r)for(let n of r.children){let s=vse.copy(n.matrixWorld).invert(),o=yse.copy(t.ray).applyMatrix4(s),a=e.matrixWorld;o.applyMatrix4(a);let l=gse;l.set(o.origin,o.direction),l.near=t.near,l.far=t.far,l.intersectObject(e,!1).length>0&&i.push({object:e})}}var wse=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

vec2 vogelDiskSample(int sample_index, int sample_count, float angle)
{
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sample_index) + 0.5f) / sqrt(float(sample_count));
  float theta = float(sample_index) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// NOTE: For now we aren't using this screen-space noise. But we should enable
// it again once we do some sort of temporal AA. Then we could potentially lower
// the number of samples needed and still get a pretty smooth result.
// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos)
{
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, ${5} - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

vec4 shadowmod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 shadowperm(vec4 x){return shadowmod289(((x * 34.0) + 1.0) * x);}
float shadowNoise(vec3 p){
            vec3 a = floor(p);
            vec3 d = p - a;
            d = d * d * (3.0 - 2.0 * d);
            vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
            vec4 k1 = shadowperm(b.xyxy);
            vec4 k2 = shadowperm(k1.xyxy + b.zzww);
            vec4 c = k2 + a.zzzz;
            vec4 k3 = shadowperm(c);
            vec4 k4 = shadowperm(c + 1.0);
            vec4 o1 = fract(k3 * (1.0 / 41.0));
            vec4 o2 = fract(k4 * (1.0 / 41.0));
            vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
            vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
            return o4.y * d.y + o4.x * (1.0 - d.y);
        }

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;
    float temporalOffset = shadowNoise(floor(vWPosition * 10.));

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    //float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        float temporalOffset = shadowNoise(floor(vWPosition * 10.));
        float temporalAngle  = temporalOffset * PI2;


        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,bse=Xt.lights_fragment_begin,Sse=Xt.shadowmask_pars_fragment,XD=!1,_se=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},Ese=(e="medium")=>{if(XD)return;XD=!0;let t=_se(e);Xt.shadowmap_pars_fragment=wse(t);let i=bse.slice();i=i.replace("getShadow( spotShadowMap[ i ]",`getShadow( UNROLLED_LOOP_INDEX + ${3}, spotShadowMap[ i ]`),i=i.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),Xt.lights_fragment_begin=i;let r=Sse.slice();r=r.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),Xt.shadowmask_pars_fragment=r},Ase=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,Cse=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,db=new _r({vertexShader:Ase,fragmentShader:Cse,uniforms:{depthContrast:{value:1}}}),Y_=new Rm;Y_.wireframe=!0;var YD=new N,n4=class extends fu{constructor(e,t){super(),this.data=e,this.backupFog=new pN(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.bgColor=new ss(1,1,1,1),this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.needsRecomputeInstances=!1,this.ambientLight=new W9(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=e.postprocessing,this.init(e,t),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=mse(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=pse(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),i=this.entityIdentityToEntity[t];i&&(e.uuid=i.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let i=[],r=t;for(;r!==this;){let n=r;r=r.parent;let s=r.children.indexOf(n);i.splice(0,0,s)}return{entity:t,sortKey:i}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push(r)}return t.sort((i,r)=>Jee(i.sortKey,r.sortKey)),t.map(i=>i.entity)}nonExistOrDescendantOf(e,t){let i=this.find(e);if(i===void 0)return!0;for(;i;){if(i.uuid===t)return!0;i=i.parent}return!1}find(e){if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner()}updateTreeByOp(e,t){var i;if(e.path.length===0&&e.type===7){let r=e.parent===null?this:this.find(e.parent);if(r===void 0)throw new Error("unexpected");let n=this.createObject(e.id,e.data,e.children,r,e.localIndex,t);n.updateVisible(),n.resetBBoxNeedsUpdate(),Ba(n)&&ql(n.parent)&&(n.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(r),this.markNeedsRecomputeInstancesForChildren(n),this.markToExpandCloner(n)}else if(e.path.length===0&&e.type===8){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");this.markToExpandCloner(r),r.resetBBoxNeedsUpdate(),this.unregisterObject(r);let n=r.parent;this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(r),r.parent.remove(r),ql(r.parent)&&(r.parent.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),Ba(r)&&(r.freeBooleanPointer(),n instanceof Dh&&n.invalidateDownstreamBooleanData().recomputeBoolean()),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r)}else if(e.path.length===0&&e.type===9){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(r);let n=r.parent;this.markNeedsRecomputeInstancesForAncessors(n),(i=r.cloner)==null||i.resetOnMove(),this.markToExpandCloner(r);let s=e.parent===null?this:this.find(e.parent);if(s===void 0)throw new Error("unexpected");s.add(r),this.markNeedsRecomputeInstancesForAncessors(s),this.markToExpandCloner(r),r.invalidateClonerTransform(r),r.updateVisible(),r.resetBBoxNeedsUpdate();let o=e.localIndex;s.children.splice(o,0,s.children.pop()),Ba(r)&&(r.invalidateUpstreamBooleanData(),ql(r.parent)?r.parent.invalidateDownstreamBooleanData().recomputeBoolean():n instanceof Dh&&n.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}updateEntityByOp(e,t,i,r){if(t.type===0&&(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),t.path.includes("overrides")&&"states"in t.props)){let{states:s,rest:o}=t.props;t={...t,props:o},this.markNeedsRecomputeInstances()}let n=this.find(e);if(n)try{fse(n,t,i,{scene:this,shared:r}),n instanceof vo&&n.updateGeometryGroupsIfNeeded()}catch(s){console.error(s)}}get enableFog(){return this.fog!==null}set enableFog(e){this.fog=e===!0?this.backupFog:null}init(e,t){if(this.createChildrenObjects(e.objects,this,t),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(es(e.backgroundColor,t)),this.updateFog(e.fog,t),this.updateAmbientLight(e.environment.ambientLight,t),this.activeCamera=this.personalCamera,e.publish.playCamera!==null){let i=this.find(e.publish.playCamera);i instanceof Ka&&this.switchActiveCamera(i)}this.expandInstances(t,!0),this.traverseEntity(i=>{ql(i)&&i.recomputeBoolean()}),this.doPendingExpandCloner()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){sr.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{sr.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,i,r,n,s,o){e&&e!==r.uuid&&r.find(e)&&n.forInstancesRec(a=>{a.isInstanceRoot||(a.data=cy(a.data,l=>{let c=l.events.data(o.id),d=a.goUp(s);if(d){let u=[...FB(d.identity),e].join("-"),h=this.entityIdentityToEntity[u];if(h){let f=h.uuid;$o.zoom(c,t)[i]=f}else console.warn("cannot find instance")}}).data)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof fh&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,i)=>{t.data.events.forEach(r=>{r.data.type==="GameControl"?t.forInstancesRec(n=>{n.isInstanceRoot||(n.data=cy(n.data,s=>{s.events.delete(r.id)}).data)}):r.data.type==="Conditional"?(r.data.condition.type==="Distance"?(this.relativeizeInner(r.data.condition.fromObject,["condition"],"fromObject",e,t,i,r),this.relativeizeInner(r.data.condition.toObject,["condition"],"toObject",e,t,i,r)):r.data.condition.type==="State"?this.relativeizeInner(r.data.condition.object,["condition"],"object",e,t,i,r):r.data.condition.type==="Comparison"&&(r.data.condition.lOperand.type==="Property"&&this.relativeizeInner(r.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,i,r),r.data.condition.rOperand.type==="Property"&&this.relativeizeInner(r.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,i,r)),r.data.inActions.forEach(n=>{n.data.type==="Transition"&&this.relativeizeInner(n.data.object,["inActions",n.id],"object",e,t,i,r)}),r.data.outActions.forEach(n=>{n.data.type==="Transition"&&this.relativeizeInner(n.data.object,["outActions",n.id],"object",e,t,i,r)})):"actions"in r.data&&r.data.actions.forEach(n=>{n.data.type==="Transition"&&this.relativeizeInner(n.data.object,["actions",n.id],"object",e,t,i,r)})})}),!0})}expandInstances(e,t){let i=new Set;this.traverseEntity(r=>{if(r instanceof fh&&r.isInstanceRoot)return r.expandInstanceChildren({scene:this,shared:e,pendingDeletes:i}),t||r.resetBBoxNeedsUpdate(),!0});for(let r of i)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),RA(r)}recomputeInstances(e){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(t=>{t instanceof fh&&t.isInstanceRoot&&(t.component=void 0)}),this.expandInstances(e,!1))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let i=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[i]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[i]),t.dispose()})}clearScene(){for(let e of this.children)Kn(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}createPersonalCamera(){let e=new Ka(n4.PERSONAL_CAMERA_ID,{...vy.defaultData,name:"Personal Camera"});return e.objectHelper.visible=!1,this.registerObjectCreatedInLegacy(e),e}raycast(e){let t=[],i=r=>{for(let n of r.children)Kn(n)&&!n.raycastLock&&n.visible&&((Ba(n)||sse(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),xse(n,e,t)),i(n))};return i(this),t}forEachEntity(e){for(let t of this.children)Kn(t)&&e(t)}traverseEntity(e){for(let t of this.children)Kn(t)&&t.traverseEntity(e)}traverseObject(e){for(let t of this.children)My.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)Kn(t)&&t.visible&&t.traverseVisibleEntity(e)}updateFog(e,t){this.enableFog=e.enabled,this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=es(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}dispose(){this.clearScene()}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=es(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.groundColor!==void 0&&(this.ambientLight.groundColor=es(e.groundColor,t)),e.enabled!==void 0&&(this.ambientLight.visible=e.enabled)}switchActiveCamera(e){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}createChildrenObjects(e,t,i){let r=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,r,i),r+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,i,r,n,s){let o={scene:this,shared:s},a=NA(e,t,o);return a&&(this.entityByUuid[e]=a,r.add(a),r.children.splice(n,0,r.children.pop()),i.length>0&&(a.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(i,a,s)),a.updateState(t,o),a instanceof vo&&a.updateGeometryGroupsIfNeeded(),a.updateVisible(),a.cloner&&this.toExpandCloner.add(a)),a}getCenter(e){let t=[];for(let r=0,n=e.length;r<n;++r){let{id:s,recursive:o}=e[r],a=this.find(s),l=o?a.recursiveBBox:a.singleBBox;t.push(...l.vertices)}let i=new fr;return i.setFromPoints(t),i.getCenter(YD),YD}copyMatrixWorld(e,t){if(e===null){t.identity();return}let i=this.find(e);i?t.copy(i.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var r;if(e===null){t.identity();return}let i=(r=this.find(e))==null?void 0:r.parent;i?t.copy(i.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof as)if(Array.isArray(t.material))for(let i=0;i<t.material.length;i++)t.material[i]instanceof gc&&e(t.material[i]);else t.material instanceof gc&&e(t.material)})}updateCanvasSize(e,t){this.activeCamera.setViewplaneSize(e,t);let i,r;e>=t?(i=t/e,r=1):(i=1,r=e/t),this.traverseMaterial(n=>{n.getLayersOfType("transmission").forEach(s=>{s.uniforms[`f${s.id}_aspectRatio`].value.x=i,s.uniforms[`f${s.id}_aspectRatio`].value.y=r})})}},N1=n4;N1.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var p0=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)},Tse=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return Pse(Math.atan2(r,i))},Mse=(e,t,i)=>{let r={x:0,y:0};return i=Q_(i),r.x=e.x-t*Math.cos(i),r.y=e.y-t*Math.sin(i),r},Q_=e=>e*(Math.PI/180),Pse=e=>e*(180/Math.PI),Dse=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,hb=new Map,QD=e=>{hb.has(e)&&clearTimeout(hb.get(e)),hb.set(e,setTimeout(e,100))},Ry=(e,t,i)=>{let r=t.split(/[ ,]+/g),n;for(let s=0;s<r.length;s+=1)n=r[s],e.addEventListener?e.addEventListener(n,i,!1):e.attachEvent&&e.attachEvent(n,i)},KD=(e,t,i)=>{let r=t.split(/[ ,]+/g),n;for(let s=0;s<r.length;s+=1)n=r[s],e.removeEventListener?e.removeEventListener(n,i):e.detachEvent&&e.detachEvent(n,i)},s4=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),ZD=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},K_=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},BA=(e,t,i)=>{let r=o4(e);for(let n in r)if(r.hasOwnProperty(n))if(typeof t=="string")r[n]=t+" "+i;else{let s="";for(let o=0,a=t.length;o<a;o+=1)s+=t[o]+" "+i+", ";r[n]=s.slice(0,-2)}return r},Ose=(e,t)=>{let i=o4(e);for(let r in i)i.hasOwnProperty(r)&&(i[r]=t);return i},o4=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(i){t[i+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},fb=(e,t)=>{for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},Lse=(e,t)=>{let i={};for(let r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)?i[r]=t[r]:e.hasOwnProperty(r)&&(i[r]=e[r]);return i},Z_=(e,t)=>{if(e.length)for(let i=0,r=e.length;i<r;i+=1)t(e[i]);else t(e)},Ise=(e,t,i)=>({x:Math.min(Math.max(e.x,t.x-i),t.x+i),y:Math.min(Math.max(e.y,t.y-i),t.y+i)});typeof window<"u"&&(a4="ontouchstart"in window,l4=!!window.PointerEvent,c4=!!window.MSPointerEvent);var a4,l4,c4,Gf={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},qd,vm={};l4?qd=Gf.pointer:c4?qd=Gf.MSPointer:a4?(qd=Gf.touch,vm=Gf.mouse):qd=Gf.mouse;function ku(){}ku.prototype.on=function(e,t){var i=this,r=e.split(/[ ,]+/g),n;i._handlers_=i._handlers_||{};for(var s=0;s<r.length;s+=1)n=r[s],i._handlers_[n]=i._handlers_[n]||[],i._handlers_[n].push(t);return i};ku.prototype.off=function(e,t){var i=this;return i._handlers_=i._handlers_||{},e===void 0?i._handlers_={}:t===void 0?i._handlers_[e]=null:i._handlers_[e]&&i._handlers_[e].indexOf(t)>=0&&i._handlers_[e].splice(i._handlers_[e].indexOf(t),1),i};ku.prototype.trigger=function(e,t){var i=this,r=e.split(/[ ,]+/g),n;i._handlers_=i._handlers_||{};for(var s=0;s<r.length;s+=1)n=r[s],i._handlers_[n]&&i._handlers_[n].length&&i._handlers_[n].forEach(function(o){o.call(i,{type:n,target:i},t)})};ku.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=Lse(t.options,e))};ku.prototype.bindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[t]=function(){typeof i["on"+t]=="function"?i["on"+t].apply(i,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},Ry(e,qd[t],i._domHandlers_[t]),vm[t]&&Ry(e,vm[t],i._domHandlers_[t]),i};ku.prototype.unbindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},KD(e,qd[t],i._domHandlers_[t]),vm[t]&&KD(e,vm[t],i._domHandlers_[t]),delete i._domHandlers_[t],this};var kA=ku;function Er(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Er.id,Er.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Er.prototype=new kA;Er.constructor=Er;Er.id=0;Er.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Er.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=Ose("borderRadius","50%"),i=BA("transition","opacity",e),r={};return r.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},r.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},r.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},fb(r.el,i),this.options.shape==="circle"&&fb(r.back,t),fb(r.front,t),this.applyStyles(r),this};Er.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var i in e[t])this.ui[t].style[i]=e[t][i];return this};Er.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Er.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Er.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Er.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};Er.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var i=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=i,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let i=t.options.restJoystick,r={};r.x=i===!0||i.x!==!1?0:t.instance.frontPosition.x,r.y=i===!0||i.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,r)}return t};Er.prototype.setPosition=function(e,t){var i=this;i.frontPosition={x:t.x,y:t.y};var r=i.options.fadeTime+"ms",n={};n.front=BA("transition",["top","left"],r);var s={front:{}};s.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(n),i.applyStyles(s),i.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(i),i.restCallback()},i.options.fadeTime)};Er.prototype.restCallback=function(){var e=this,t={};t.front=BA("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};Er.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Er.prototype.computeDirection=function(e){var t=e.angle.radian,i=Math.PI/4,r=Math.PI/2,n,s,o;if(t>i&&t<i*3&&!e.lockX?n="up":t>-i&&t<=i&&!e.lockY?n="left":t>-i*3&&t<=-i&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(t>-r&&t<r?s="left":s="right"),e.lockX||(t>0?o="up":o="down"),e.force>this.options.threshold){var a={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(a[l]=this.direction[l]);var c={};this.direction={x:s,y:o,angle:n},e.direction=this.direction;for(l in a)a[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return e;(!c.x||!c.y)&&this.trigger("plain",e),c.x||this.trigger("plain:"+s,e),c.y||this.trigger("plain:"+o,e),c.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e};var Rse=Er;function ur(e,t){var i=this;i.nipples=[],i.idles=[],i.actives=[],i.ids=[],i.pressureIntervals={},i.manager=e,i.id=ur.id,ur.id+=1,i.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},i.config(t),(i.options.mode==="static"||i.options.mode==="semi")&&(i.options.multitouch=!1),i.options.multitouch||(i.options.maxNumberOfNipples=1);let r=getComputedStyle(i.options.zone.parentElement);return r&&r.display==="flex"&&(i.parentIsFlex=!0),i.updateBox(),i.prepareNipples(),i.bindings(),i.begin(),i.nipples}ur.prototype=new kA;ur.constructor=ur;ur.id=0;ur.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(i){if(i===void 0)return t[0];for(var r=0,n=t.length;r<n;r+=1)if(t[r].identifier===i)return t[r];return!1}};ur.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};ur.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var i=e.createNipple(t.position,e.manager.getIdentifier());i.add(),e.idles.push(i)}};ur.prototype.createNipple=function(e,t){var i=this,r=i.manager.scroll,n={},s=i.options,o={x:i.parentIsFlex?r.x:r.x+i.box.left,y:i.parentIsFlex?r.y:r.y+i.box.top};if(e.x&&e.y)n={x:e.x-o.x,y:e.y-o.y};else if(e.top||e.right||e.bottom||e.left){var a=document.createElement("DIV");a.style.display="hidden",a.style.top=e.top,a.style.right=e.right,a.style.bottom=e.bottom,a.style.left=e.left,a.style.position="absolute",s.zone.appendChild(a);var l=a.getBoundingClientRect();s.zone.removeChild(a),n=e,e={x:l.left+r.x,y:l.top+r.y}}var c=new Rse(i,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:t,position:e,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(K_(c.ui.el,n),K_(c.ui.front,c.frontPosition)),i.nipples.push(c),i.trigger("added "+c.identifier+":added",c),i.manager.trigger("added "+c.identifier+":added",c),i.bindNipple(c),c};ur.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};ur.prototype.bindNipple=function(e){var t=this,i,r=function(n,s){i=n.type+" "+s.id+":"+n.type,t.trigger(i,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};ur.prototype.pressureFn=function(e,t,i){var r=this,n=0;clearInterval(r.pressureIntervals[i]),r.pressureIntervals[i]=setInterval(function(){var s=e.force||e.pressure||e.webkitForce||0;s!==n&&(t.trigger("pressure",s),r.trigger("pressure "+t.identifier+":pressure",s),n=s)}.bind(r),100)};ur.prototype.onstart=function(e){var t=this,i=t.options,r=e;e=s4(e),t.updateBox();var n=function(s){t.actives.length<i.maxNumberOfNipples?t.processOnStart(s):r.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(o){if(Object.values(r.touches).findIndex(function(l){return l.identifier===o})<0){var a=[e[0]];a.identifier=o,t.processOnEnd(a)}}),t.actives.length<i.maxNumberOfNipples&&t.processOnStart(s))};return Z_(e,n),t.manager.bindDocument(),!1};ur.prototype.processOnStart=function(e){var t=this,i=t.options,r,n=t.manager.getIdentifier(e),s=e.force||e.pressure||e.webkitForce||0,o={x:e.pageX,y:e.pageY},a=t.getOrCreate(n,o);a.identifier!==n&&t.manager.removeIdentifier(a.identifier),a.identifier=n;var l=function(d){d.trigger("start",d),t.trigger("start "+d.id+":start",d),d.show(),s>0&&t.pressureFn(e,d,d.identifier),t.processOnMove(e)};if((r=t.idles.indexOf(a))>=0&&t.idles.splice(r,1),t.actives.push(a),t.ids.push(a.identifier),i.mode!=="semi")l(a);else{var c=p0(o,a.position);if(c<=i.catchDistance)l(a);else{a.destroy(),t.processOnStart(e);return}}return a};ur.prototype.getOrCreate=function(e,t){var i=this,r=i.options,n;return/(semi|static)/.test(r.mode)?(n=i.idles[0],n?(i.idles.splice(0,1),n):r.mode==="semi"?i.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(n=i.createNipple(t,e),n)};ur.prototype.processOnMove=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),n=t.nipples.get(r),s=t.manager.scroll;if(!Dse(e)){this.processOnEnd(e);return}if(!n){console.error("Found zombie joystick with ID "+r),t.manager.removeIdentifier(r);return}if(i.dynamicPage){var o=n.el.getBoundingClientRect();n.position={x:s.x+o.left,y:s.y+o.top}}n.identifier=r;var a=n.options.size/2,l={x:e.pageX,y:e.pageY};i.lockX&&(l.y=n.position.y),i.lockY&&(l.x=n.position.x);var c=p0(l,n.position),d=Tse(l,n.position),u=Q_(d),h=c/a,f={distance:c,position:l},m,v;if(n.options.shape==="circle"?(m=Math.min(c,a),v=Mse(n.position,m,d)):(v=Ise(l,n.position,a),m=p0(v,n.position)),i.follow){if(c>a){let b=l.x-v.x,S=l.y-v.y;n.position.x+=b,n.position.y+=S,n.el.style.top=n.position.y-(t.box.top+s.y)+"px",n.el.style.left=n.position.x-(t.box.left+s.x)+"px",c=p0(l,n.position)}}else l=v,c=m;var g=l.x-n.position.x,p=l.y-n.position.y;n.frontPosition={x:g,y:p},i.dataOnly||K_(n.ui.front,n.frontPosition);var x={identifier:n.identifier,position:l,force:h,pressure:e.force||e.pressure||e.webkitForce||0,distance:c,angle:{radian:u,degree:d},vector:{x:g/a,y:-p/a},raw:f,instance:n,lockX:i.lockX,lockY:i.lockY};x=n.computeDirection(x),x.angle={radian:Q_(180-d),degree:180-d},n.trigger("move",x),t.trigger("move "+n.id+":move",x)};ur.prototype.processOnEnd=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),n=t.nipples.get(r),s=t.manager.removeIdentifier(n.identifier);!n||(i.dataOnly||n.hide(function(){i.mode==="dynamic"&&(n.trigger("removed",n),t.trigger("removed "+n.id+":removed",n),t.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(t.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),t.trigger("end "+n.id+":end",n),t.ids.indexOf(n.identifier)>=0&&t.ids.splice(t.ids.indexOf(n.identifier),1),t.actives.indexOf(n)>=0&&t.actives.splice(t.actives.indexOf(n),1),/(semi|static)/.test(i.mode)?t.idles.push(n):t.nipples.indexOf(n)>=0&&t.nipples.splice(t.nipples.indexOf(n),1),t.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(t.manager.ids[s.id]=s.identifier))};ur.prototype.onDestroyed=function(e,t){var i=this;i.nipples.indexOf(t)>=0&&i.nipples.splice(i.nipples.indexOf(t),1),i.actives.indexOf(t)>=0&&i.actives.splice(i.actives.indexOf(t),1),i.idles.indexOf(t)>=0&&i.idles.splice(i.idles.indexOf(t),1),i.ids.indexOf(t.identifier)>=0&&i.ids.splice(i.ids.indexOf(t.identifier),1),i.manager.removeIdentifier(t.identifier),i.manager.unbindDocument()};ur.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(i){i.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var Nse=ur;function Pr(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=ZD(),t.config(e),t.prepareCollections();var i=function(){var n;t.collections.forEach(function(s){s.forEach(function(o){n=o.el.getBoundingClientRect(),o.position={x:t.scroll.x+n.left,y:t.scroll.y+n.top}})})};if(typeof window>"u")return t.collections;Ry(window,"resize",function(){QD(i)});var r=function(){t.scroll=ZD()};return Ry(window,"scroll",function(){QD(r)}),t.collections}Pr.prototype=new kA;Pr.constructor=Pr;Pr.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var i;return e.collections.every(function(r){return i=r.get(t),!i}),i}};Pr.prototype.create=function(e){return this.createCollection(e)};Pr.prototype.createCollection=function(e){var t=this,i=new Nse(t,e);return t.bindCollection(i),t.collections.push(i),i};Pr.prototype.bindCollection=function(e){var t=this,i,r=function(n,s){i=n.type+" "+s.id+":"+n.type,t.trigger(i,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};Pr.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};Pr.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};Pr.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};Pr.prototype.removeIdentifier=function(e){var t={};for(var i in this.ids)if(this.ids[i]===e){t.id=i,t.identifier=this.ids[i],delete this.ids[i];break}return t};Pr.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};Pr.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};Pr.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};Pr.prototype.onAny=function(e,t){var i=this,r,n="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=s4(t);var s=function(a,l,c){c.ids.indexOf(l)>=0&&(c[n](a),a._found_=!0)},o=function(a){r=i.getIdentifier(a),Z_(i.collections,s.bind(null,a,r)),a._found_||i.removeIdentifier(r)};return Z_(t,o),!1};Pr.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};Pr.prototype.onDestroyed=function(e,t){var i=this;if(i.collections.indexOf(t)<0)return!1;i.collections.splice(i.collections.indexOf(t),1)};var Bse=Pr,$D=new Bse,kse={create:function(e){return $D.create(e)},factory:$D},zse=p1(qR());function vd(e,t){let i=new It;if(!e.getAttribute("position"))return i.setAttribute("position",new ut([],3)),i.setIndex([]),i;let{positions:r,triIndices:n}=CA(e.getAttribute("position"),e.getIndex());return i.setAttribute("position",new ut(r,3)),i.setIndex(n),t&&i.applyMatrix4(t),i}var Fse=new at,Use=new at,Oo=[[0,0,0],[0,0,0],[0,0,0]];function u4(e){let t=e.elements;Oo[0][0]=t[0],Oo[0][1]=t[4],Oo[0][2]=t[8],Oo[1][0]=t[1],Oo[1][1]=t[5],Oo[1][2]=t[9],Oo[2][0]=t[2],Oo[2][1]=t[6],Oo[2][2]=t[10];let{u:i,v:r}=(0,zse.SVD)(Oo),n=Fse.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),s=Use.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1);return n.multiply(s.transpose())}var jse=class extends MN{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,i=[]){return e.forEach(r=>{r.visible&&this.intersectObject(r,t,i)}),i}createRaycastLineHelper(){let e=new bc({color:65280,linewidth:10}),t=new N(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),i=new N(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),r=this.camera.far-this.camera.near,n=new N().addVectors(t,i.multiplyScalar(r)),s=new It;return s.setFromPoints([t,n]),new K0(s,e)}},d4=e=>e instanceof q_||e instanceof fh;function Hse(e,t){return e.distance-t.distance}function h4(e,t,i){if(!(!Kn(t)||!t.visible||t.raycastLock)){Ba(t)&&t.raycast(e,i);for(let r of t.children)h4(e,r,i)}}function $_(e,t,i){if(!i.some(n=>Ny(e,n)!==void 0))return[];let r=[];return t.children.forEach(n=>h4(e,n,r)),r.sort(Hse),r}function J_(e){let t=[];if(e.length){let i=e[0].object;Kn(i)&&t.push(i);let r=i.parent;for(;r;)d4(r)&&t.push(r),r=r.parent}return t}function Ny(e,t){if(Ba(t)){if(!t.raycastLock&&t.visible){let i=[];return t.raycast(e,i),i.length?i[0]:void 0}}else if(d4(t))return f4(e,t)}function f4(e,t){if(!(!Kn(t)||!t.visible||t.raycastLock)){if(Ba(t)){let i=[];if(t.raycast(e,i),i.length)return i[0]}for(let i of t.children){let r=f4(e,i);if(r)return r}}}function Gse(e,t,i){return{x:(e-(i.left+window.scrollX))/i.width*2-1,y:-((t-(i.top+window.scrollY))/i.height)*2+1}}var Vse=class{constructor(e,t,i,r,n,s){this.isExport=s,this.raycaster=new jse,this.raycasterNeedsUpdate=!0,this.stopRaycast=!1,this.sharedAssets=new L1(Ay.emptyData()),this.scene=new N1({...T_.defaultData},this.sharedAssets),this.camera=new Ka,this.renderer=e,this.domElement=e.domElement,this.stopRaycast=n,this.sharedAssets=r,this.scene=t,this.camera=i}updateRaycaster(e){if(!this.raycasterNeedsUpdate)return;this.raycasterNeedsUpdate=!1;let{pageX:t,pageY:i}=e.touches!==void 0&&e.touches.length>0?e.touches[0]:e,r=this.domElement.getBoundingClientRect();this.raycaster.setFromCamera(Gse(t,i,r),this.camera)}},p4=(e=>(e[e.keydown=0]="keydown",e[e.keyup=1]="keyup",e[e.pointerdown=2]="pointerdown",e[e.pointerup=3]="pointerup",e[e.pointermove=4]="pointermove",e[e.wheel=5]="wheel",e))(p4||{}),_c=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},m4=new Map,Mp=new Map,Xd=class{constructor(e,t,i,r){this.data=t;let{audio:n,volume:s,delay:o,loop:a}=t;if(!n)throw new Error("Missing property");let l=typeof n=="string"?r.getAudio(n).src:n.data;this.audioPlayer=new up({src:l,volume:s,delay:o,loop:a}),Mp.has(i.uuid)?Mp.get(i.uuid).push(this):Mp.set(i.uuid,[this]),m4.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},eE=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=m4.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=Mp.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>i.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(i=>i.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...Mp.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(i=>{i.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(i=>{i.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Yd=class{constructor(e,t,i,r){if(this.data=t,t.interaction==="play")this.interaction=new Xd(e,t,i,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new eE(t);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof Xd?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof Xd?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){this.interaction instanceof Xd&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}};function Wse(e,t){let i=e.material.layers.find(r=>r.uuid===t);return i.color.texture.image.img instanceof HTMLVideoElement?i.color.texture.image.img:void 0}var g4=new Map,Pp=new Map,Dp=class{constructor(e,t,i){this.data=t,this.delay=0,this.status="stopped";let{layerId:r,loop:n,volume:s,delay:o}=t;if(this.object=i,r===void 0)throw new Error("Missing property");let a=Wse(i,r);if(a)this.videoElement=a,this.videoElement.loop=n===1/0,this.videoElement.autoplay=!0,s!==void 0&&(this.videoElement.volume=s);else throw new Error("Missing property");o!==void 0&&(this.delay=o),Pp.has(i.uuid)?Pp.get(i.uuid).push(this):Pp.set(i.uuid,[this]),g4.set(e,this),this.pause()}mute(){this.videoElement.muted=!0}unMute(){this.videoElement.muted=!1}play(e){let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{this.videoElement.play(),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){this.videoElement.pause(),this.status="paused"}stop(){this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay()}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){this.stop(),this.videoElement.muted=!0}},tE=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=g4.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=Pp.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>i[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(i=>i[this.data.interaction]()))}pauseAllVideos(){let e=[...Pp.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(i=>{i[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(i=>{i[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},By=class{constructor(e,t,i){if(this.data=t,t.interaction==="play")this.interaction=new Dp(e,t,i);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new tE(t);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof Dp?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof Dp?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},qse="text/plain",Xse="us-ascii",JD=(e,t)=>t.some(i=>i instanceof RegExp?i.test(e):i===e),Yse=(e,{stripHash:t})=>{let i=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!i)throw new Error(`Invalid URL: ${e}`);let{type:r,data:n,hash:s}=i.groups,o=r.split(";");s=t?"":s;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let l=(o.shift()||"").toLowerCase(),c=[...o.map(d=>{let[u,h=""]=d.split("=").map(f=>f.trim());return u==="charset"&&(h=h.toLowerCase(),h===Xse)?"":`${u}${h?`=${h}`:""}`}).filter(Boolean)];return a&&c.push("base64"),(c.length>0||l&&l!==qse)&&c.unshift(l),`data:${c.join(";")},${a?n.trim():n}${s?`#${s}`:""}`};function Qse(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return Yse(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let i=e.startsWith("//");!i&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&r.protocol==="https:"&&(r.protocol="http:"),t.forceHttps&&r.protocol==="http:"&&(r.protocol="https:"),t.stripAuthentication&&(r.username="",r.password=""),t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){let s=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,o=0,a="";for(;;){let c=s.exec(r.pathname);if(!c)break;let d=c[0],u=c.index,h=r.pathname.slice(o,u);a+=h.replace(/\/{2,}/g,"/"),a+=d,o=u+d.length}let l=r.pathname.slice(o,r.pathname.length);a+=l.replace(/\/{2,}/g,"/"),r.pathname=a}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let s=r.pathname.split("/"),o=s[s.length-1];JD(o,t.removeDirectoryIndex)&&(s=s.slice(0,-1),r.pathname=s.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let s of[...r.searchParams.keys()])JD(s,t.removeQueryParameters)&&r.searchParams.delete(s);if(t.removeQueryParameters===!0&&(r.search=""),t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,""));let n=e;return e=r.toString(),!t.removeSingleSlash&&r.pathname==="/"&&!n.endsWith("/")&&r.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||r.pathname==="/")&&r.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),i&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var Kse=class{constructor({url:e,context:t},i){if(this.managers=i,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:Qse(e,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=t??"tab"}dispatch(){var e;C_?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.managers.controlsManager.orbitControls)==null||e.onPointerUp(Ht[0]),ete())}},Zse=class{constructor(e,t,i,r){this.scene=t,this.sharedAssets=i,this.sceneData=e,this.managers=r}dispatch(){var e,t,i;R4(this.sceneData,this.scene,this.sharedAssets,!0),(e=this.managers.eventManager)==null||e.reset(),(t=this.managers.controlsManager.orbitControls)==null||t.reset(),(i=this.managers.controlsManager)==null||i.gameControls.forEach(r=>r.reset(!0))}},v4={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},zA={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},$se=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ky={CSS:{},springs:{}};function Xo(e,t,i){return Math.min(Math.max(e,t),i)}function Op(e,t){return e.indexOf(t)>-1}function pb(e,t){return e.apply(null,t)}var Ot={arr:function(e){return Array.isArray(e)},obj:function(e){return Op(Object.prototype.toString.call(e),"Object")},pth:function(e){return Ot.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||Ot.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return Ot.hex(e)||Ot.rgb(e)||Ot.hsl(e)},key:function(e){return!v4.hasOwnProperty(e)&&!zA.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function y4(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(i){return parseFloat(i)}):[]}function x4(e,t){var i=y4(e),r=Xo(Ot.und(i[0])?1:i[0],.1,100),n=Xo(Ot.und(i[1])?100:i[1],.1,100),s=Xo(Ot.und(i[2])?10:i[2],.1,100),o=Xo(Ot.und(i[3])?0:i[3],.1,100),a=Math.sqrt(n/r),l=s/(2*Math.sqrt(n*r)),c=l<1?a*Math.sqrt(1-l*l):0,d=1,u=l<1?(l*a+-o)/c:-o+a;function h(m){var v=t?t*m/1e3:m;return l<1?v=Math.exp(-v*l*a)*(d*Math.cos(c*v)+u*Math.sin(c*v)):v=(d+u*v)*Math.exp(-v*a),m===0||m===1?m:1-v}function f(){var m=ky.springs[e];if(m)return m;for(var v=1/6,g=0,p=0;;)if(g+=v,h(g)===1){if(p++,p>=16)break}else p=0;var x=g*v*1e3;return ky.springs[e]=x,x}return t?h:f}function Jse(e){return e===void 0&&(e=10),function(t){return Math.ceil(Xo(t,1e-6,1)*e)*(1/e)}}var eoe=function(){var e=11,t=1/(e-1);function i(d,u){return 1-3*u+3*d}function r(d,u){return 3*u-6*d}function n(d){return 3*d}function s(d,u,h){return((i(u,h)*d+r(u,h))*d+n(u))*d}function o(d,u,h){return 3*i(u,h)*d*d+2*r(u,h)*d+n(u)}function a(d,u,h,f,m){var v,g,p=0;do g=u+(h-u)/2,v=s(g,f,m)-d,v>0?h=g:u=g;while(Math.abs(v)>1e-7&&++p<10);return g}function l(d,u,h,f){for(var m=0;m<4;++m){var v=o(u,h,f);if(v===0)return u;var g=s(u,h,f)-d;u-=g/v}return u}function c(d,u,h,f){if(!(0<=d&&d<=1&&0<=h&&h<=1))return;var m=new Float32Array(e);if(d!==u||h!==f)for(var v=0;v<e;++v)m[v]=s(v*t,d,h);function g(p){for(var x=0,b=1,S=e-1;b!==S&&m[b]<=p;++b)x+=t;--b;var E=(p-m[b])/(m[b+1]-m[b]),y=x+E*t,C=o(y,d,h);return C>=.001?l(p,y,d,h):C===0?y:a(p,x,x+t,d,h)}return function(p){return d===u&&h===f||p===0||p===1?p:s(g(p),u,f)}}return c}(),w4=function(){var e={linear:function(){return function(r){return r}}},t={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var n,s=4;r<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-r,2)}},Elastic:function(r,n){r===void 0&&(r=1),n===void 0&&(n=.5);var s=Xo(r,1,10),o=Xo(n,.1,2);return function(a){return a===0||a===1?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},i=["Quad","Cubic","Quart","Quint","Expo"];return i.forEach(function(r,n){t[r]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(r){var n=t[r];e["easeIn"+r]=n,e["easeOut"+r]=function(s,o){return function(a){return 1-n(s,o)(1-a)}},e["easeInOut"+r]=function(s,o){return function(a){return a<.5?n(s,o)(a*2)/2:1-n(s,o)(a*-2+2)/2}}}),e}();function FA(e,t){if(Ot.fnc(e))return e;var i=e.split("(")[0],r=w4[i],n=y4(e);switch(i){case"spring":return x4(e,t);case"cubicBezier":return pb(eoe,n);case"steps":return pb(Jse,n);default:return pb(r,n)}}function b4(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function B1(e,t){for(var i=e.length,r=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<i;s++)if(s in e){var o=e[s];t.call(r,o,s,e)&&n.push(o)}return n}function k1(e){return e.reduce(function(t,i){return t.concat(Ot.arr(i)?k1(i):i)},[])}function eO(e){return Ot.arr(e)?e:(Ot.str(e)&&(e=b4(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function UA(e,t){return e.some(function(i){return i===t})}function jA(e){var t={};for(var i in e)t[i]=e[i];return t}function iE(e,t){var i=jA(e);for(var r in e)i[r]=t.hasOwnProperty(r)?t[r]:e[r];return i}function z1(e,t){var i=jA(e);for(var r in t)i[r]=Ot.und(e[r])?t[r]:e[r];return i}function toe(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function ioe(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=e.replace(t,function(a,l,c,d){return l+l+c+c+d+d}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),n=parseInt(r[1],16),s=parseInt(r[2],16),o=parseInt(r[3],16);return"rgba("+n+","+s+","+o+",1)"}function roe(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(t[1],10)/360,r=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function o(h,f,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?h+(f-h)*6*m:m<1/2?f:m<2/3?h+(f-h)*(2/3-m)*6:h}var a,l,c;if(r==0)a=l=c=n;else{var d=n<.5?n*(1+r):n+r-n*r,u=2*n-d;a=o(u,d,i+1/3),l=o(u,d,i),c=o(u,d,i-1/3)}return"rgba("+a*255+","+l*255+","+c*255+","+s+")"}function noe(e){if(Ot.rgb(e))return toe(e);if(Ot.hex(e))return ioe(e);if(Ot.hsl(e))return roe(e)}function ja(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function soe(e){if(Op(e,"translate")||e==="perspective")return"px";if(Op(e,"rotate")||Op(e,"skew"))return"deg"}function rE(e,t){return Ot.fnc(e)?e(t.target,t.id,t.total):e}function Yo(e,t){return e.getAttribute(t)}function HA(e,t,i){var r=ja(t);if(UA([i,"deg","rad","turn"],r))return t;var n=ky.CSS[t+i];if(!Ot.und(n))return n;var s=100,o=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=s+i;var l=s/o.offsetWidth;a.removeChild(o);var c=l*parseFloat(t);return ky.CSS[t+i]=c,c}function S4(e,t,i){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return i?HA(e,n,i):n}}function GA(e,t){if(Ot.dom(e)&&!Ot.inp(e)&&(Yo(e,t)||Ot.svg(e)&&e[t]))return"attribute";if(Ot.dom(e)&&UA($se,t))return"transform";if(Ot.dom(e)&&t!=="transform"&&S4(e,t))return"css";if(e[t]!=null)return"object"}function _4(e){if(Ot.dom(e)){for(var t=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map,n;n=i.exec(t);)r.set(n[1],n[2]);return r}}function ooe(e,t,i,r){var n=Op(t,"scale")?1:0+soe(t),s=_4(e).get(t)||n;return i&&(i.transforms.list.set(t,s),i.transforms.last=t),r?HA(e,s,r):s}function VA(e,t,i,r){switch(GA(e,t)){case"transform":return ooe(e,t,r,i);case"css":return S4(e,t,i);case"attribute":return Yo(e,t);default:return e[t]||0}}function WA(e,t){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var r=ja(e)||0,n=parseFloat(t),s=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return n+s+r;case"-":return n-s+r;case"*":return n*s+r}}function E4(e,t){if(Ot.col(e))return noe(e);if(/\s/g.test(e))return e;var i=ja(e),r=i?e.substr(0,e.length-i.length):e;return t?r+t:r}function qA(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function aoe(e){return Math.PI*2*Yo(e,"r")}function loe(e){return Yo(e,"width")*2+Yo(e,"height")*2}function coe(e){return qA({x:Yo(e,"x1"),y:Yo(e,"y1")},{x:Yo(e,"x2"),y:Yo(e,"y2")})}function A4(e){for(var t=e.points,i=0,r,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(i+=qA(r,s)),r=s}return i}function uoe(e){var t=e.points;return A4(e)+qA(t.getItem(t.numberOfItems-1),t.getItem(0))}function C4(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return aoe(e);case"rect":return loe(e);case"line":return coe(e);case"polyline":return A4(e);case"polygon":return uoe(e)}}function doe(e){var t=C4(e);return e.setAttribute("stroke-dasharray",t),t}function hoe(e){for(var t=e.parentNode;Ot.svg(t)&&Ot.svg(t.parentNode);)t=t.parentNode;return t}function T4(e,t){var i=t||{},r=i.el||hoe(e),n=r.getBoundingClientRect(),s=Yo(r,"viewBox"),o=n.width,a=n.height,l=i.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:a/l[3]}}function foe(e,t){var i=Ot.str(e)?b4(e)[0]:e,r=t||100;return function(n){return{property:n,el:i,svg:T4(i),totalLength:C4(i)*(r/100)}}}function poe(e,t){function i(a){a===void 0&&(a=0);var l=t+a>=1?t+a:0;return e.el.getPointAtLength(l)}var r=T4(e.el,e.svg),n=i(),s=i(-1),o=i(1);switch(e.property){case"x":return(n.x-r.x)*r.w;case"y":return(n.y-r.y)*r.h;case"angle":return Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI}}function tO(e,t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=E4(Ot.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(i)?r.match(i).map(Number):[0],strings:Ot.str(e)||t?r.split(i):[]}}function M4(e){var t=e?k1(Ot.arr(e)?e.map(eO):eO(e)):[];return B1(t,function(i,r,n){return n.indexOf(i)===r})}function P4(e){var t=M4(e);return t.map(function(i,r){return{target:i,id:r,total:t.length,transforms:{list:_4(i)}}})}function moe(e,t){var i=jA(t);if(/^spring/.test(i.easing)&&(i.duration=x4(i.easing)),Ot.arr(e)){var r=e.length,n=r===2&&!Ot.obj(e[0]);n?e={value:e}:Ot.fnc(t.duration)||(i.duration=t.duration/r)}var s=Ot.arr(e)?e:[e];return s.map(function(o,a){var l=Ot.obj(o)&&!Ot.pth(o)?o:{value:o};return Ot.und(l.delay)&&(l.delay=a?0:t.delay),Ot.und(l.endDelay)&&(l.endDelay=a===s.length-1?t.endDelay:0),l}).map(function(o){return z1(o,i)})}function goe(e){for(var t=B1(k1(e.map(function(s){return Object.keys(s)})),function(s){return Ot.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),i={},r=function(s){var o=t[s];i[o]=e.map(function(a){var l={};for(var c in a)Ot.key(c)?c==o&&(l.value=a[c]):l[c]=a[c];return l})},n=0;n<t.length;n++)r(n);return i}function voe(e,t){var i=[],r=t.keyframes;r&&(t=z1(goe(r),t));for(var n in t)Ot.key(n)&&i.push({name:n,tweens:moe(t[n],e)});return i}function yoe(e,t){var i={};for(var r in e){var n=rE(e[r],t);Ot.arr(n)&&(n=n.map(function(s){return rE(s,t)}),n.length===1&&(n=n[0])),i[r]=n}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function xoe(e,t){var i;return e.tweens.map(function(r){var n=yoe(r,t),s=n.value,o=Ot.arr(s)?s[1]:s,a=ja(o),l=VA(t.target,e.name,a,t),c=i?i.to.original:l,d=Ot.arr(s)?s[0]:c,u=ja(d)||ja(l),h=a||u;return Ot.und(o)&&(o=c),n.from=tO(d,h),n.to=tO(WA(o,d),h),n.start=i?i.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=FA(n.easing,n.duration),n.isPath=Ot.pth(s),n.isColor=Ot.col(n.from.original),n.isColor&&(n.round=1),i=n,n})}var D4={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,r,n){if(r.list.set(t,i),t===r.last||n){var s="";r.list.forEach(function(o,a){s+=a+"("+o+") "}),e.style.transform=s}}};function O4(e,t){var i=P4(e);i.forEach(function(r){for(var n in t){var s=rE(t[n],r),o=r.target,a=ja(s),l=VA(o,n,a,r),c=a||ja(l),d=WA(E4(s,c),l),u=GA(o,n);D4[u](o,n,d,r.transforms,!0)}})}function woe(e,t){var i=GA(e.target,t.name);if(i){var r=xoe(t,e),n=r[r.length-1];return{type:i,property:t.name,animatable:e,tweens:r,duration:n.end,delay:r[0].delay,endDelay:n.endDelay}}}function boe(e,t){return B1(k1(e.map(function(i){return t.map(function(r){return woe(i,r)})})),function(i){return!Ot.und(i)})}function L4(e,t){var i=e.length,r=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=i?Math.max.apply(Math,e.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return r(s)+o+a+s.duration*(s.loop??1)})):t.duration,n.delay=i?Math.min.apply(Math,e.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return r(s)+o+a+s.delay})):t.delay,n.endDelay=i?n.duration-Math.max.apply(Math,e.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return r(s)+o+a+s.duration*(s.loop??1)-s.endDelay})):t.endDelay,n}var iO=0;function Soe(e){var t=iE(v4,e),i=iE(zA,e),r=voe(i,e),n=P4(e.targets),s=boe(n,r),o=L4(s,i),a=iO;return iO++,z1(t,{id:a,children:[],animatables:n,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay,startOnceDelay:i.startOnceDelay,pingPongDelayCorrection:i.pingPongDelayCorrection})}var Is=[],rO=[],m0,_oe=function(){function e(){m0=requestAnimationFrame(t)}function t(i){var r=Is.length;if(r){for(var n=0;n<r;){var s=Is[n];s.paused?(Is.splice(n,1),r-=1):(s.tick(i),n++)}e()}else m0=cancelAnimationFrame(m0)}return e}();function Eoe(){document.hidden?(Is.forEach(function(e){return e.pause()}),rO=Is.slice(0),cr.running=Is=[]):rO.forEach(function(e){return e.play()})}typeof document<"u"&&document.addEventListener("visibilitychange",Eoe);function cr(e){e===void 0&&(e={});var t=0,i=0,r=0,n,s=0,o=null;function a(x){var b=window.Promise&&new Promise(function(S){return o=S});return x.finished=b,b}var l=Soe(e);a(l);function c(){var x=l.direction;x!=="alternate"&&(l.direction=x!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,n.forEach(function(b){return b.reversed=l.reversed})}function d(x){return l.reversed?l.duration-x:x}function u(){t=0,i=d(l.currentTime)*(1/cr.speed)}function h(x,b){b&&(l.reversed?b.seek(b.duration*b.loop-(x-b.timelineOffset-b.pingPongDelayCorrection)):b.seek(x-b.timelineOffset-b.startOnceDelay-b.pingPongDelayCorrection))}function f(x){if(l.reversed)for(var b=s;b--;)h(x,n[b]);else for(var S=0;S<s;S++)h(x,n[S])}function m(x){var b=0,S=l.animations,E=S.length;for(l.reversePlayback===!0&&l.rewind===!1&&(x=l.duration+l.delay-l.endDelay-x);b<E;){var y=S[b],C=y.animatable,A=y.tweens,D=A.length-1,I=A[D];D&&(I=B1(A,function(ne){return x<ne.end})[0]||I);for(var R=Xo(x-I.start-I.delay,0,I.duration)/I.duration,B=isNaN(R)?1:I.easing(R),G=I.to.strings,j=I.round,ee=[],Q=I.to.numbers.length,re=void 0,z=0;z<Q;z++){var X=void 0;if(l.reversePlayback===!0&&l.rewind===!1)var K=I.to.numbers[z],Y=I.from.numbers[z]||0;else var Y=I.to.numbers[z],K=I.from.numbers[z]||0;I.isPath?X=poe(I.value,B*Y):X=K+B*(Y-K),j&&(I.isColor&&z>2||(X=Math.round(X*j)/j)),ee.push(X)}var Z=G.length;if(!Z)re=ee[0];else{re=G[0];for(var V=0;V<Z;V++){G[V];var fe=G[V+1],ae=ee[V];isNaN(ae)||(fe?re+=ae+fe:re+=ae+" ")}}D4[y.type](C.target,y.property,re,C.transforms),y.currentValue=re,b++}}function v(x){l[x]&&!l.passThrough&&l[x](l)}function g(){l.remaining&&l.remaining!==!0&&l.remaining--}function p(x){var b=l.duration,S=l.delay,E=b-l.endDelay,y=d(x);if(l.progress=Xo(y/b*100,0,100),l.reversePlayback=y<l.currentTime,s&&f(y),!l.began&&l.currentTime>=0&&(l.began=!0,v("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,v("loopBegin")),(l.reversed||y>=0)&&y<=S&&l.currentTime!==0&&(m(0),v("change")),(y>=E&&l.currentTime!==b||!b)&&(m(b),v("change")),y>S&&y<E?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,v("changeBegin")),m(y),v("change")):l.changeBegan?(l.changeCompleted=!0,l.changeBegan=!1,v("change"),s&&v("timelineChangeComplete")):l.began&&y>E&&v("changeComplete"),l.currentTime=Xo(y,0,b),l.began&&v("update"),x>=b)if(i=0,g(),!l.remaining)l.paused=!0,l.completed||(l.completed=!0,v("loopComplete"),v("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)));else{s?t+=l.duration/cr.speed:t+=l.duration;for(let C of n)C.setStartTime(0),C.remaining=C.loop;v("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&c()}}return l.reset=function(){var x=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=x==="reverse",l.remaining=l.loop,n=l.children,s=n.length;for(var b=s;b--;)l.children[b].reset();(l.reversed&&l.loop!==!0||x==="alternate"&&l.loop===1)&&l.remaining++,m(l.reversed?l.duration:0)},l.setStartTime=function(x){t=x},l.set=function(x,b){return O4(x,b),l},l.tick=function(x){r=x,t||(t=r),p((r+(i-t))*cr.speed)},l.seek=function(x){p(x-t)},l.pause=function(){l.paused=!0,u()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,Is.push(l),u(),m0||_oe())},l.reverse=function(){c(),l.completed=!l.reversed,u()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function nO(e,t){for(var i=t.length;i--;)UA(e,t[i].animatable.target)&&t.splice(i,1)}function Aoe(e){for(var t=M4(e),i=Is.length;i--;){var r=Is[i],n=r.animations,s=r.children;nO(t,n);for(var o=s.length;o--;){var a=s[o],l=a.animations;nO(t,l),!l.length&&!a.children.length&&s.splice(o,1)}!n.length&&!s.length&&r.pause()}}function Coe(e,t){t===void 0&&(t={});var i=t.direction||"normal",r=t.easing?FA(t.easing):null,n=t.grid,s=t.axis,o=t.from||0,a=o==="first",l=o==="center",c=o==="last",d=Ot.arr(e),u=parseFloat(d?e[0]:e),h=d?parseFloat(e[1]):0,f=ja(d?e[1]:e)||0,m=t.start||0+(d?u:0),v=[],g=0;return function(p,x,b){if(a&&(o=0),l&&(o=(b-1)/2),c&&(o=b-1),!v.length){for(var S=0;S<b;S++){if(!n)v.push(Math.abs(o-S));else{var E=l?(n[0]-1)/2:o%n[0],y=l?(n[1]-1)/2:Math.floor(o/n[0]),C=S%n[0],A=Math.floor(S/n[0]),D=E-C,I=y-A,R=Math.sqrt(D*D+I*I);s==="x"&&(R=-D),s==="y"&&(R=-I),v.push(R)}g=Math.max.apply(Math,v)}r&&(v=v.map(function(G){return r(G/g)*g})),i==="reverse"&&(v=v.map(function(G){return s?G<0?G*-1:-G:Math.abs(g-G)}))}var B=d?(h-u)/g:u;return m+B*(Math.round(v[x]*100)/100)+f}}function Toe(e){e===void 0&&(e={});var t=cr(e);return t.duration=0,t.add=function(i,r){var n=Is.indexOf(t),s=t.children;n>-1&&Is.splice(n,1);function o(h){h.passThrough=!0}for(var a=0;a<s.length;a++)o(s[a]);var l=z1(i,iE(zA,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.timelineOffset=Ot.und(r)?c:WA(r,c),o(t);var d=cr(l);o(d),s.push(d);var u=L4(s,e);return t.delay=u.delay,t.endDelay=u.endDelay,t.duration=u.duration,d.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}cr.version="3.2.0";cr.speed=1;cr.running=Is;cr.remove=Aoe;cr.get=VA;cr.set=O4;cr.convertPx=HA;cr.path=foe;cr.setDashoffset=doe;cr.stagger=Coe;cr.timeline=Toe;cr.easing=FA;cr.penner=w4;cr.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var Moe=cr,sO=new N,oO=new N,aO=new hi;function Poe(e,t,i,r){if(r===0)return i.copy(e);if(r===1)return i.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return i.copy(e);let s=1-n*n;if(s<=Number.EPSILON){let d=1-r;return i.w=d*e.w+r*t.w,i.x=d*e.x+r*t.x,i.y=d*e.y+r*t.y,i.z=d*e.z+r*t.z,i.normalize(),i}let o=Math.sqrt(s),a=Math.atan2(o,n),l=Math.sin((1-r)*a)/o,c=Math.sin(r*a)/o;return i.w=e.w*l+t.w*c,i.x=e.x*l+t.x*c,i.y=e.y*l+t.y*c,i.z=e.z*l+t.z*c,i}function jm(e,t,i,r,n){let s=i[e]?i[e]:void 0,o=r[e];if(o==null)return;let a=s??t[e],l=o;if(a!==l)return{update:c=>{let d=Jt.lerp(a,l,c);n?t[e]=Math.trunc(d):t[e]=d},start:()=>{t[e]=a},end:()=>{t[e]=l}}}function I4(e,t,i,r,n){let s=i[e]?i[e]:void 0,o=r[e];if(!o)return;let a=t[e],l=[...s??a],c=[...o];if(!(l.length!==c.length||lA(l,c)))return{update:d=>{l.forEach((u,h)=>{let f=Jt.lerp(u,c[h],d);t[e][h]=n?Math.trunc(f):f})},start:()=>{Object.assign(t[e],l)},end:()=>{Object.assign(t[e],c)}}}function lO(e,t,i,r){let n=i[e]?i[e]:void 0,s=r[e];if(!s)return;let o=t[e],a=n?new N().fromArray(n):o.clone(),l=new N().fromArray(s);if(!a.equals(l))return{update:c=>{o.lerpVectors(a,l,c)},start:()=>{o.copy(a)},end:()=>{o.copy(l)}}}function Doe(e,t,i,r){let n=i[e]?i[e]:void 0,s=r[e];if(!s)return;let o=t[e],a=n?new at().fromArray(n):o.clone(),l=new N,c=new hi,d=new N;a.decompose(l,c,d);let u=new at().fromArray(s),h=new N,f=new hi,m=new N;if(u.decompose(h,f,m),!a.equals(u))return{update:v=>{aO.slerpQuaternions(c,f,v),sO.lerpVectors(l,h,v),oO.lerpVectors(d,m,v),o.compose(sO,aO,oO)},start:()=>{o.compose(l,c,d)},end:()=>{o.compose(h,f,m)}}}function Ooe(e,t,i,r,n){let s=i[e]?i[e]:void 0,o=r[e];if(!o)return;let a=t[e],l=s?typeof s=="string"?n.getColor(s).clone():new Lt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?n.getColor(o).clone():new Lt().setRGB(o.r,o.g,o.b);if(l.equals(c))return;let d=a.clone();return t[e]=d,{update:u=>{d.lerpColors(l,c,u)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}function Loe(e,t,i){var o,a,l,c;let r=[],n=e.cameraType==="OrthographicCamera"?(o=t.orthographic)==null?void 0:o.zoom:(a=t.perspective)==null?void 0:a.zoom,s=e.cameraType==="OrthographicCamera"?(l=i.orthographic)==null?void 0:l.zoom:(c=i.perspective)==null?void 0:c.zoom;if(s!==void 0){let d=n??e.zoom,u=s;d!==u&&r.push({update:h=>{e.zoom=Jt.lerp(d,u,h),e.updateProjectionMatrix()},start:()=>{e.zoom=d,e.updateProjectionMatrix()},end:()=>{e.zoom=u,e.updateProjectionMatrix()}})}if(i.targetOffset!==void 0){let d=jm("targetOffset",e,t,i);d&&r.push(d)}return r}function Ioe(e,t,i,r){let n=[];if(!("geometry"in i))return n;let s="geometry"in t?t.geometry:{},o=i.geometry;if(e instanceof gm){let f=s.scaleBaked??e.data.geometry.scaleBaked,m=o.scaleBaked??e.data.geometry.scaleBaked;return mu.isEqual(f,m)||n.push({update:v=>{e.updateGeometryInteractions({scaleBaked:[Jt.lerp(f[0],m[0],v),Jt.lerp(f[1],m[1],v),Jt.lerp(f[2],m[2],v)]},r),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({scaleBaked:f},r),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({scaleBaked:m},r),e.invalidateDownstreamBooleanData()}}),n}let{width:a,height:l,depth:c}=s,{width:d,height:u,depth:h}=o;if(d!==void 0||u!==void 0||h!==void 0){let{width:f,height:m,depth:v}=e.geometry.userData.parameters,g=a??f,p=l??m,x=c??v,b=d??f,S=u??m,E=h??v;(g!==b||p!==S||x!==E)&&n.push({update:y=>{e.updateGeometryInteractions({width:Jt.lerp(g,b,y),height:Jt.lerp(p,S,y),depth:Jt.lerp(x,E,y)},r),e.updateGeometryGroupsIfNeeded(),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({width:g,height:p,depth:x},r),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({width:b,height:S,depth:E},r),e.invalidateDownstreamBooleanData()}})}return n}function Roe(e,t,i,r){let n=[];if(i.intensity!==void 0){let s=jm("intensity",e,t,i);s&&n.push(s)}if(i.color!==void 0){let s=Ooe("color",e,t,i,r);s&&n.push(s)}return n}function Noe(e,t,i,r){let n=[];if(Array.isArray(e.material)){if(!("materials"in i&&i.materials))return n;let s="materials"in t&&t.materials?t.materials:[],o=i.materials;e.material.forEach((a,l)=>{if(!o[l])return;let c=s[l]??{},d=o[l];typeof c=="string"||typeof d=="string"||n.push(...cO(a,c,d,r))})}else{if(!("material"in i&&i.material))return n;let s="material"in t&&t.material?t.material:{},o=i.material;if(typeof s=="string"||typeof o=="string")return n;n.push(...cO(e.material,s,o,r))}return n}function cO(e,t,i,r){var s;let n=[];e.transparent=H_(i,r);for(let o of e.layers){let a=(s=t.layers)==null?void 0:s.data(o.uuid),l=i.layers.data(o.uuid);if(!l||!(o.visible??!0)||!(l.visible??!0))continue;let c=o.getNames().filter(d=>!zB.some(u=>d.includes(u)));for(let d of c)try{let u=o.getValue(d),h;if(d==="colors")h=Hoe(o,a,l,d);else if(Array.isArray(u))d==="steps"&&(h=joe(o,a,l,d));else if(typeof u=="number")h=Boe(o,a,l,d);else{if(typeof u=="boolean")continue;u instanceof de?h=koe(o,a,l,d):u instanceof N?h=zoe(o,a,l,d):u instanceof ss?h=Uoe(o,a,l,d,r):u instanceof Lt?h=Foe(o,a,l,d,r):"isTexture"in u&&(h=Goe(o,a,l,d))}h&&(Array.isArray(h)?n.push(...h):n.push(h))}catch(u){console.error(`lerpMaterial: unexpected material layer for ${d}`,u)}}return n}function Boe(e,t,i,r){if(!e.hasValue(r)||!(r in i))return;let n=t?t[r]:e.getValue(r),s=i[r];if(n!==s)return{update:o=>{e.setValue(r,Jt.lerp(n,s,o))},start:()=>{e.setValue(r,n)},end:()=>{e.setValue(r,s)}}}function koe(e,t,i,r){if(!e.hasValue(r)||!(r in i))return;let n=e.getValue(r),s=t?new de().fromArray(t[r]):n.clone(),o=new de().fromArray(i[r]);if(!s.equals(o))return{update:a=>{n.lerpVectors(s,o,a)},start:()=>{n.copy(s)},end:()=>{n.copy(o)}}}function zoe(e,t,i,r){if(!e.hasValue(r)||!(r in i))return;let n=e.getValue(r),s=t?new N().fromArray(t[r]):n.clone(),o=new N().fromArray(i[r]);if(!s.equals(o))return{update:a=>{n.lerpVectors(s,o,a)},start:()=>{n.copy(s)},end:()=>{n.copy(o)}}}function Foe(e,t,i,r,n){if(!e.hasValue(r)||!(r in i))return;let s=t?t[r]:void 0,o=i[r],a=e.getValue(r),l=s?typeof s=="string"?n.getColor(s).clone():new Lt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?n.getColor(o).clone():new Lt().setRGB(o.r,o.g,o.b);if(l.equals(c))return;let d=a.clone();return e.setValue(r,d),{update:u=>{d.lerpColors(l,c,u)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}function Uoe(e,t,i,r,n){if(!e.hasValue(r)||!(r in i))return;let s=t?t[r]:void 0,o=i[r],a=e.getValue(r),l=s?typeof s=="string"?n.getColor(s).clone():new Lt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?n.getColor(o).clone():new ss(o.r,o.g,o.b,o.a);if(l.equals(c))return;let d=a.clone();return e.setValue(r,d),{update:u=>{d.lerpColors(l,c,u)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}function joe(e,t,i,r="steps"){if(!e.hasValue(r)||!(r in i))return;let n=[],s=e.getValue(r),o=t?t[r]:s,a=i[r];for(let l=0;l<s.length;++l){let c=o[l],d=a[l];c!==d&&n.push({update:u=>{s[l]=Jt.lerp(c,d,u)},start:()=>{s[l]=c},end:()=>{s[l]=d}})}return n.length?n:void 0}function Hoe(e,t,i,r="colors"){if(!e.hasValue(r)||!(r in i))return;let n=[],s=e.getValue(r),o=t?t[r]:s.map(l=>l.toArray()),a=i[r];for(let l=0;l<s.length;++l){let c=[...o[l]],d=[...a[l]];fy.isEqual(c,d)||n.push({update:u=>{s[l].fromArray(fy.lerp(c,d,u))},start:()=>{s[l].fromArray(c)},end:()=>{s[l].fromArray(d)}})}return n.length?n:void 0}function Goe(e,t,i,r="texture"){if(!e.hasValue(r)||!(r in i))return;let n=e.getNode("mat");if(!n)return;let s=t?t[r]:n,o=i[r],a=[...s.repeat],l=[...s.offset],c=[...o.repeat],d=[...o.offset];if(!Hd.isEqual(a,c)||!Hd.isEqual(l,d))return{update:u=>{n.repeat=Hd.lerp(a,c,u),n.offset=Hd.lerp(l,d,u),n.updateMatrix()},start:()=>{n.repeat=[...a],n.offset=[...l],n.updateMatrix()},end:()=>{n.repeat=[...c],n.offset=[...d],n.updateMatrix()}}}var mb=new N,uO=new Kr;function Voe(e,t,i,r){let n=[],s=lO("position",e,t,i);s&&n.push(s);let o=lO("scale",e,t,i);o&&n.push(o);let a=Woe(e,t,i,r);a&&n.push(a);let l=Doe("hiddenMatrix",e,t,i);if(l&&n.push(l),s||o||a||l){let c=()=>{var d;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(d=e.parent)!=null&&d.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),Ba(e)&&ql(e.parent)&&e.invalidateDownstreamBooleanData(!0)};n.push({update:c,start:c,end:c})}return n}function Woe(e,t,i,r){let n=t!=null&&t.rotation?t.rotation:void 0,s=i.rotation;if(!s)return;let o=n?new N().fromArray(n):new N().setFromEuler(e.rotation),a=new N().fromArray(s);if(o.equals(a))return;let l=mb.subVectors(a,o);if(r&&l.toArray().every(c=>Math.abs(c)<2*Math.PI)){let c=new hi().setFromEuler(uO.setFromVector3(o)),d=new hi().setFromEuler(uO.setFromVector3(a));return{update:u=>{Poe(c,d,e.quaternion,u)},start:()=>{e.rotation.setFromVector3(o)},end:()=>{e.rotation.setFromVector3(a)}}}else return{update:c=>{mb.lerpVectors(o,a,c),e.rotation.setFromVector3(mb)},start:()=>{e.rotation.setFromVector3(o)},end:()=>{e.rotation.setFromVector3(a)}}}function Qh(e,t,i,r){if(typeof t[e]=="number")return jm(e,t,i??{},r);if(Array.isArray(t[e]))return I4(e,t,i??{},r)}function qoe(e,t,i){let r=[];if(!("cloner"in i)||!e.cloner)return r;let n=e.cloner,s="cloner"in t?t.cloner:{},o=i.cloner;LB.forEach(h=>{let f;h==="count"?f=jm("count",n.parameters,s,o,!0):f=Qh(h,n.parameters,s??{},o),f&&r.push(f)});let a=Xoe(n,s,o);a!=null&&a.length&&r.push(...a);let l=Yoe(n,s,o);l!=null&&l.length&&r.push(...l);let c=Qoe(n,s,o);c!=null&&c.length&&r.push(...c);let d=Koe(n,s,o);d!=null&&d.length&&r.push(...d);let u=Zoe(n,s,o);return u!=null&&u.length&&r.push(...u),r.length&&r.push({update:()=>{n.update()}}),r}function Xoe(e,t,i){if(e.parameters.type!=="radial")return;let r=t.radial,n=i.radial;if(!n)return;let s=e.parameters.radial,o=[];return IB.forEach(a=>{let l=Qh(a,s,r??{},n);l&&o.push(l)}),o}function Yoe(e,t,i){if(e.parameters.type!=="linear")return;let r=t.linear,n=i.linear;if(!n)return;let s=[],o=e.parameters.linear;return RB.forEach(a=>{let l=Qh(a,o,r??{},n);l&&s.push(l)}),s}function Qoe(e,t,i){if(e.parameters.type!=="grid")return;let r=t.grid,n=i.grid;if(!n)return;let s=[],o=e.parameters.grid;return NB.forEach(a=>{let l;a==="count"?l=I4(a,o,r??{},n,!0):l=Qh(a,o,r??{},n),l&&s.push(l)}),s}function Koe(e,t,i){if(e.parameters.type!=="toObject")return;let r=t.toObject,n=i.toObject;if(!n)return;let s=[],o=e.parameters.toObject;return BB.forEach(a=>{let l;a==="count"?l=jm(a,o,r??{},n,!0):l=Qh(a,o,r??{},n),l&&s.push(l)}),s}function Zoe(e,t,i){if(!e.parameters.randomness)return;let r=t.randomnessObject,n=i.randomnessObject;if(!n)return;let s=[],o=e.parameters.randomnessObject;return kB.forEach(a=>{let l=Qh(a,o,r??{},n);l&&s.push(l)}),s}function dO(e,t,i,r,n){let s=[];return e.data.visible&&s.push(...Voe(e,t,i,n)),e.data.visible&&s.push(...qoe(e,t,i)),Ba(e)?(e instanceof vo&&e.data.visible&&s.push(...Ioe(e,t,i,r)),e.data.visible&&s.push(...Noe(e,t,i,r))):nse(e)?e.data.visible&&s.push(...Roe(e,t,i,r)):rse(e)&&s.push(...Loe(e,t,i)),s.length?{update:o=>{s.forEach(a=>a.update(o))},start:o=>{s.forEach(a=>{var l;return(l=a.start)==null?void 0:l.call(a,o)})},end:o=>{s.forEach(a=>{var l;return(l=a.end)==null?void 0:l.call(a,o)})}}:void 0}var hO=new N;function R4(e,t,i,r=!1){let n=[];t.traverseObject(s=>{var c,d,u,h,f;if(r&&((c=s.rigidBody)==null||c.setTranslation(s.position0,!0),(d=s.rigidBody)==null||d.setRotation(s.rotation0,!0),(u=s.rigidBody)==null||u.setLinvel(hO,!0),(h=s.rigidBody)==null||h.setAngvel(hO,!0)),!sr.is(s))return;let o=s.uuid,a=s.data;if(delete s.states,!a.states)return;let l=!1;n.some(m=>e.objects.isDescendantOf(o,m))?l=!0:((f=a.physics)==null?void 0:f.fusedBody)===!0&&a.physics.rigidBody==="dynamic"&&n.push(o),s.data=a,s.currentState=null,s.reversibleToState=null,s.currentTransitionEvent=null;for(let m of a.states)e.environment.usePhysics===!0&&a.physics&&(a.physics.rigidBody==="dynamic"||l)&&(m.data.position!==void 0||m.data.rotation!==void 0||m.data.hiddenMatrix!==void 0)||(s.states||(s.states={}),s.states[m.id]=su.patch(a,m.data));$oe(t,s,null,i,a.events.find(m=>m.data.type==="Follow"||m.data.type==="LookAt")!==void 0)})}function $oe(e,t,i,r,n=!1){t instanceof vo&&t.removeInteractionGeometry(),t.changeSelectedState(i,{scene:e,shared:r},n),t instanceof vo&&t.updateGeometryGroupsIfNeeded()}function Joe(e){let t;switch(e.easing){case 0:t="cubicBezier( 0, 0, 1, 1 )";break;case 1:t="cubicBezier( .25, .1, .25, 1 )";break;case 2:t="cubicBezier( .42, 0, 1, 1 )";break;case 3:t="cubicBezier( 0, 0, .58, 1 )";break;case 4:t="cubicBezier( .42, 0, .58, 1 )";break;case 5:let{control1:i,control2:r}=e;t=`cubicBezier(
				${i[0]}, ${i[1]}, ${r[0]}, ${r[1]}
			)`;break;case 6:let{mass:n,stiffness:s,damping:o,velocity:a}=e;t=`spring( ${n}, ${s}, ${o}, ${a} )`;break;default:t="linear"}return{duration:e.duration,easing:t}}function N4(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=e.direction==="pingpong-rewind";else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,t.delay!==0&&(t.pingPongDelayCorrection=t.delay)),t}var fO=class{constructor(e,t,i,r,n,s){if(this.object=e,this.data=r,this.sharedAssets=n,this.allowSlerp=s,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let o=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"beginState",state:o})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let o=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"completeState",state:o})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=dO(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let o=g0(this.object,this.object.currentState===i?this.object.prevState:this.object.currentState);if(!o)throw new Error("Missing property");this.from=o}else{let o=g0(this.object,t);if(!o)throw new Error("Missing property");this.from=o}if(i===void 0)throw new Error("Missing property");{let o=g0(this.object,i);if(!o)throw new Error("Missing property");this.to=o}this.useCurrentState=t===void 0||i===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...N4(r),...Joe(r),change:this.onChange},this.callback=dO(this.object,t===void 0?{}:this.from.data,i===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},Qd=class extends kn{constructor(e,t,i){if(super(),this.data=e,this.scene=t,this.sharedAssets=i,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.isTwoState=!1,this.onTimelineChangeComplete=()=>{var n;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((n=this.timeline)==null||n.pause(),this.buildTimeline({isForward:this.toggleIsForward,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let r=t.find(e.object);if(!r)throw new Error("Missing property");if(!r.states)throw new Error("Missing property");if(this.object=r,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.isTwoState=e.tweens.length===2,this.startOnceDelay=e.tweens[0].data.delayDirection==="start-once"?e.tweens[0].data.delay:0,this.init()}get playing(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.actionCurrentState=g0(this.object,this.object.currentState),this.toggleIsForward=!1}buildTimeline({isForward:e=!0,isRebuild:t=!1}={}){var i,r;try{let n=N4(this.data.tweens[0].data),s=n.loop;t&&typeof n.loop=="number"&&n.loop--,(i=this.timeline)==null||i.pause(),this.timeline=Moe.timeline({autoplay:!1,...n,...s===!0||s>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let o=this.tweens.findIndex(a=>a==null?void 0:a.changeBegan);if(this.timelineNeedsRebuild=o!==-1&&(s===!0||s>1),n.pingPongDelayCorrection&&t===!1&&(this.timelineNeedsRebuild=!0),e){let a=o===-1?0:o;o===-1&&((r=this.object.previousAction)!=null&&r.playing)&&this.data.tweens[a].data.state===void 0&&(o=a);for(let l=a;l<this.data.tweens.length-1;l++){let c=this.data.tweens[l],d=this.data.tweens[l+1],u=new fO(this.object,l===o?void 0:c.data.state===void 0?this.actionCurrentState.id:c.data.state,d.data.state===void 0?this.actionCurrentState.id:d.data.state,d.data,this.sharedAssets,this.data.allowSlerp??!1);o!==-1&&l===a&&Object.assign(u.params,{startOnceDelay:0}),this.tweens[l]=u,this.timeline.add(u.params,this.timeline.duration+(l===a?n.delay:0)+(l===a&&!t?n.pingPongDelayCorrection:0))}this.timeline.duration+=n.endDelay}else{let a=o===-1?this.data.tweens.length-1:o+1;for(let l=a;l>0;l--){let c=this.data.tweens[l],d=this.data.tweens[l-1],u=new fO(this.object,l===o+1?void 0:c.data.state===void 0?this.actionCurrentState.id:c.data.state,d.data.state===void 0?this.actionCurrentState.id:d.data.state,c.data,this.sharedAssets,this.data.allowSlerp??!1);o!==-1&&l===a&&Object.assign(u.params,{startOnceDelay:0}),this.tweens[l-1]=u,this.timeline.add(u.params,this.timeline.duration+(l===a?n.endDelay:0))}this.timeline.duration+=n.delay+(t?0:n.pingPongDelayCorrection)}}catch(n){n instanceof Error&&console.error(n.message)}this.object.previousAction=this}play(){if(this.playing)return!1;clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(e){e instanceof Error&&console.error(e.message)}},this.startOnceDelay)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause(),this.seek(0)}seek(e){var t;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration)}toggle(e){var t;clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var i;(i=this.timeline)==null||i.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function g0(e,t){var n;let i,r;if(typeof t=="string"?(i=t,r=(n=e.states)==null?void 0:n[i]):t===null&&(i=null,r=e.data),!(i===void 0||r===void 0))return{id:i,data:r}}function Tu(e,t,i,r,n,s){let o={Audio:[],Video:[],Link:[],Reset:[],Transition:[]};return t.forEach(({id:a,data:l})=>{try{l.type==="Audio"?Df[e.type].includes("Audio")&&o.Audio.push(new Yd(a,l,i,n)):l.type==="Video"?Df[e.type].includes("Video")&&o.Video.push(new By(a,l,i)):l.type==="Link"?Df[e.type].includes("Link")&&o.Link.push(new Kse(l,s)):l.type==="Reset"?Df[e.type].includes("Reset")&&o.Reset.push(new Zse(r.data,r,n,s)):l.type==="Transition"&&Df[e.type].includes("Transition")&&o.Transition.push(new Qd(l,r,n))}catch{}}),o}function Mu(e){Object.values(e).forEach(t=>{t.forEach(i=>{(i instanceof Yd||i instanceof By||i instanceof Qd)&&i.dispose()})})}var XA=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],B4=e=>{var t;return(t=XA.find(([i,r])=>r===e))==null?void 0:t[0]},F1=e=>{var t;return(t=XA.find(([i])=>i===e))==null?void 0:t[1]},eae=(e,t)=>{let i=B4(e);if(i){let r=new CustomEvent(i,{bubbles:!0});return Object.defineProperty(r,"target",{writable:!1,value:t}),r}},tae=class extends _c{constructor(e){super(e),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=i=>{var s;if(!i.eventName||!i.target)return;let r=(s=this.splineEvents[B4(i.eventName)])==null?void 0:s[i.target.uuid];if(!r)return;i.eventName==="Scroll"&&i.deltaY!==void 0&&Object.assign(r,{deltaY:i.deltaY});let{domElement:n}=this.eventContext;n.dispatchEvent(r)};let{scene:t}=this.eventContext;t.traverseEntity(i=>{var r,n;if((r=i.data)!=null&&r.events.length){for(let[s,o]of XA)if(i.data.events.some(a=>a.data.type===o&&!a.data.disabled)){this.objectsPerEvents.has(s)?(n=this.objectsPerEvents.get(s))==null||n.push(i):this.objectsPerEvents.set(s,[i]);let a={id:i.uuid,name:i.name},l=eae(o,a),c=this.splineEvents[s];c?c[i.uuid]=l:this.splineEvents[s]={[i.uuid]:l}}}})}connect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},iae=class{constructor(e,t,i,r,n,s){if(this.id=e,this.data=t,this.object=i,this.entered=!1,this.useToggle=t.toggle,(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=Tu(t,t.actions,i,r,n,s)}disconnect(){Mu(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.useToggle?this.actions.Transition.forEach(e=>{e.toggle()}):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent())):this.actions.Transition.some(e=>e.playing)||this.actions.Transition.forEach(e=>{e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()})}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?this.actions.Transition.forEach(t=>t.reverseFromCurrent()):this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()})}},rae=class extends _c{constructor(e,t,i){super(e),this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.onMouseDown=s=>{Ht.length>1||(this.eventContext.updateRaycaster(s),this.handleMouseEvent("MouseDown"))},this.onMouseUp=s=>{Ht.length>1||(this.eventContext.updateRaycaster(s),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=s=>{Ht.length>1||(this.eventContext.updateRaycaster(s),this.handleMousePressEvent())},this.onMousePressRelease=s=>{Ht.length>1||(this.eventContext.updateRaycaster(s),this.handleMousePressEvent(!0))},this.onKeyDown=s=>{this.heldKeys[s.key]||this.handleKeyEvent(s,"KeyDown"),this.heldKeys[s.key]=!0},this.onKeyUp=s=>{this.handleKeyEvent(s,"KeyUp")},this.onKeyPressDown=s=>{this.heldKeysPress[s.key]||this.handleKeyEvent(s,"KeyPress"),this.heldKeysPress[s.key]=!0},this.onKeyPressUp=s=>{this.handleKeyEvent(s,"KeyPress",!0)},this.releaseHeldKey=s=>{delete this.heldKeys[s.key]},this.releaseHeldKeyPress=s=>{delete this.heldKeysPress[s.key]},this._onUserEvent=({eventName:s,target:o,reverse:a})=>{var c,d,u,h;if(!s||!o)return;let l=F1(s);l&&(l==="MouseDown"||l==="MouseUp"||l==="MousePress"?(o.dispatchEvent({type:"beginEvent",eventName:l}),(d=(c=this.eventsPerObjects[l])==null?void 0:c[o.uuid])==null||d.forEach(f=>{f.dispatchUserEvent(a)})):(l==="KeyDown"||l==="KeyUp"||l==="KeyPress")&&(o.dispatchEvent({type:"beginEvent",eventName:l}),(h=(u=this.eventsPerObjects[l])==null?void 0:u[o.uuid])==null||h.forEach(f=>{f.dispatchUserEvent()})))};let{scene:r,sharedAssets:n}=this.eventContext;r.traverseEntity(s=>{var a,l;if(!((a=s.data)!=null&&a.events.length))return;let o=s.visible?["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"]:["KeyDown","KeyUp","KeyPress"];for(let c of o){let d=this.eventsPerObjects[c];s.data.events.filter(({data:u})=>u.type===c&&u.disabled!==!0).forEach(({id:u,data:h})=>{try{let f=new iae(u,h,s,r,n,{controlsManager:t,eventManager:i});f.actions.Video.length&&(this.hasVideoAction=!0),d[s.uuid]?d[s.uuid].push(f):d[s.uuid]=[f]}catch{}}),(l=d[s.uuid])!=null&&l.length&&this.objectsPerTypes[c].push(s)}})}connect(){var t,i,r,n,s,o;let{domElement:e}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),(t=this.objectsPerTypes.MouseDown)!=null&&t.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown)),(i=this.objectsPerTypes.MouseUp)!=null&&i.length&&(this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),(r=this.objectsPerTypes.MousePress)!=null&&r.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMousePressRelease)),(n=this.objectsPerTypes.KeyDown)!=null&&n.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(s=this.objectsPerTypes.KeyUp)!=null&&s.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(o=this.objectsPerTypes.KeyPress)!=null&&o.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([a,l])=>{l.forEach(c=>{c.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(i=>{i.forEach(r=>{r.disconnect()})})}),Object.entries(this.objectsPerTypes).forEach(([t,i])=>{i.forEach(r=>{r.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){let{stopRaycast:t,raycaster:i,scene:r}=this.eventContext,n=this.objectsPerTypes[e];if(n.length)if(t){let s=$_(i,r,n);J_(s).forEach(o=>{this.eventsPerObjects[e][o.uuid]&&this.handleObjectMouseEventDispatch(o,e)})}else n.forEach(s=>{Ny(i,s)&&this.handleObjectMouseEventDispatch(s,e)})}handleMousePressEvent(e=!1){let t="MousePress",i=this.objectsPerTypes[t],r=[];if(i.length){if(!e){let{stopRaycast:n,raycaster:s,scene:o}=this.eventContext;if(n){let a=$_(s,o,i);r=J_(a)}else i.forEach(a=>{Ny(s,a)&&r.push(a)})}this._prevObjects.length&&this._prevObjects.forEach(n=>{r.includes(n)||this.handleObjectMouseEventDispatchRelease(n,t)}),r.length&&r.forEach(n=>{this.handleObjectMouseEventDispatch(n,t)}),this._prevObjects=r}}handleObjectMouseEventDispatch(e,t){var i,r;e.dispatchEvent({type:"beginEvent",eventName:t}),(r=(i=this.eventsPerObjects[t])==null?void 0:i[e.uuid])==null||r.forEach(n=>{n.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var i,r;e.dispatchEvent({type:"beginEvent",eventName:t}),(r=(i=this.eventsPerObjects[t])==null?void 0:i[e.uuid])==null||r.forEach(n=>{n.dispatchRelease()})}handleKeyEvent(e,t,i=!1){this.objectsPerTypes[t].forEach(r=>{let n=this.eventsPerObjects[t][r.uuid];n.some(({data:s})=>"key"in s&&s.key===e.key)&&r.dispatchEvent({type:"beginEvent",eventName:t}),n.forEach(s=>{"key"in s.data&&s.data.key===e.key&&(i?s.dispatchRelease():s.dispatch())})})}},nae=new N,sae=new N,k4=class{constructor(e,t,i,r){this.actionsIn=Tu(e,e.inActions,t,i,r),this.actionsOut=Tu(e,e.outActions,t,i,r)}disconnect(){Mu(this.actionsIn),Mu(this.actionsOut)}},oae=class extends k4{constructor(e,t,i,r,n){super(t,i,r,n),this.id=e,this.data=t,this.object=i,this.stage="out",this.objects=[],this.onUpdateMatrix=()=>{let l=nae.setFromMatrixPosition(this.objects[0].matrixWorld),c=sae.setFromMatrixPosition(this.objects[1].matrixWorld),d=l.distanceTo(c)<=this.distance?"in":"out";if(this.stage!==d){(this.stage==="in"?this.actionsIn:this.actionsOut).Transition.forEach(h=>h.pause());let u=d==="in"?this.actionsIn:this.actionsOut;u.Audio.forEach(h=>h.dispatchConditional()),u.Video.forEach(h=>h.dispatchConditional()),this.object.currentTransitionEvent=this,u.Transition.forEach(h=>h.play()),this.stage=d}};let{distance:s,fromObject:o,toObject:a}=t.condition;this.distance=s;for(let l of[o,a]){if(!l)throw new Error("Missing property");let c=r.find(l);if(!c)throw new Error("Missing property");this.objects.push(c)}}connect(){this.objects.forEach(e=>{e.addEventListener("updateMatrix",this.onUpdateMatrix)}),this.onUpdateMatrix()}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrix",this.onUpdateMatrix)})}},aae=class extends k4{constructor(e,t,i,r,n){var a;super(t,i,r,n),this.id=e,this.data=t,this.object=i,this.onBegin=({target:l,state:c})=>{this.toState!==c&&(this.actionsOut.Audio.forEach(d=>d.dispatchConditional()),this.actionsOut.Video.forEach(d=>d.dispatchConditional()),this.actionsIn.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(d=>d.play()))},this.onComplete=({target:l,state:c})=>{this.toState===c&&(this.actionsIn.Audio.forEach(d=>d.dispatchConditional()),this.actionsIn.Video.forEach(d=>d.dispatchConditional()),this.actionsOut.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(d=>d.play()))};let{condition:s}=t;if(!s.object)throw new Error("Missing property");let o=r.find(s.object);if(!o)throw new Error("Missing property");if(this.toObject=o,s.state&&!((a=this.toObject.states)!=null&&a[s.state]))throw new Error("Missing property");this.toState=s.state}connect(){(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Transition.length)&&this.toObject.addEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsIn.Transition.length)&&this.toObject.addEventListener("completeState",this.onComplete)}disconnect(){super.disconnect(),(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Transition.length)&&this.toObject.removeEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsIn.Transition.length)&&this.toObject.removeEventListener("completeState",this.onComplete)}},lae=class extends _c{constructor(e){super(e),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{scene:t,sharedAssets:i}=this.eventContext;t.traverseEntity(r=>{var n;if((n=r.data)!=null&&n.events.length){for(let{id:s,data:o}of r.data.events)if(!o.disabled&&o.type==="Conditional")try{let a;o.condition.type==="Comparison"||(o.condition.type==="Distance"?a=new oae(s,o,r,t,i):o.condition.type==="State"&&(a=new aae(s,o,r,t,i))),a&&(this.eventsPerConditions[o.condition.type].push(a),(a.actionsIn.Video.length||a.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},yd=new N,gb=new N,vb=new N,Dv=new N,pO=new As,mO=.01,cae={type:"requestRender"},uae=function(){let e=new N,t=new N;return(i,r,n)=>n>0?(e.subVectors(i,r),e.length()<=n?i:t.copy(r).add(e.normalize().multiplyScalar(n))):r}(),gO=function(){let e=new at;return(t,i)=>{t.position.copy(i),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof as&&ql(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),dae=class{constructor(e,t,i){this.data=e,this.object=t,this.tempPosition=new N,this.started=!1,this.paused=!0,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new N,this.target=e.target?i.find(e.target):void 0,this.maxDelta=e.maxDelta??0,this.dampingFactor=e.dampingFactor?Math.max(e.dampingFactor,1):1,this.plane=e.plane??"custom",this.snapDampingFactor=8,this.currentDampingFactor=this.snapDampingFactor,this.object.getWorldPosition(this.worldPosition0)}},hae=class extends _c{constructor(e){super(e),this.events=[],this.onTargetChangeCallbacks=[],this.onMouseMove=i=>{if(!(Ht.length>1)){this.eventContext.updateRaycaster(i);for(let r of this.events)r.target===void 0&&this.updateSingleEvent(r)}},this.onMouseEnter=i=>{for(let r of this.events)r.target===void 0&&(r.tempPosition.copy(r.object.position),r.snapComplete=!1,r.isReset=!1,r.currentDampingFactor=r.snapDampingFactor)},this.onMouseLeave=i=>{for(let r of this.events)r.target===void 0&&(r.tempPosition.copy(r.object.position),r.snapComplete=!1,(r.data.resetOnPointerLeave??!1)&&(r.isReset=!0,r.currentDampingFactor=r.snapDampingFactor),this.updateSingleEvent(r))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)};let{scene:t}=this.eventContext;t.traverseEntity(i=>{var n,s;let r=(n=i.data)==null?void 0:n.events.find(o=>o.data.type==="Follow"&&!o.data.disabled);r&&(!t.data.environment.usePhysics||((s=i.dataPatched.physics)==null?void 0:s.rigidBody)!=="dynamic")&&this.events.push(new dae(r.data,i,t))})}connect(){if(!this.events.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),fn&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave);for(let t of this.events)if(t.target!==void 0){let i=this.onTargetChange(t);this.onTargetChangeCallbacks.push(i),t.target.addEventListener("requestRender",i)}}disconnect(){if(!this.events.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),fn&&e.removeEventListener("pointerdown",this.onMouseMove),e.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);let t=0;for(let i of this.events)i.started=!1,i.paused=!0,i.target!==void 0&&i.target.removeEventListener("requestRender",this.onTargetChangeCallbacks[t++])}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var o;let{tempPosition:t,object:i,maxDelta:r,plane:n}=e;if(i.getWorldPosition(vb),e.isReset)Dv.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(Dv);else{let{camera:a,raycaster:l}=this.eventContext;if(n==="custom"?(a.getWorldDirection(gb),gb.negate(),yd.copy(gb)):n==="xy"?yd.set(0,0,1):n==="xz"?yd.set(0,1,0):n==="yz"&&yd.set(1,0,0),pO.setFromNormalAndCoplanarPoint(yd,vb),!l.ray.intersectPlane(pO,Dv))return}let s=uae(vb,Dv,r);if(e.currentDampingFactor>1||e.snapComplete===!1){e.started||(e.started=!0,t.copy(s));let a=yd.subVectors(s,t).divideScalar(e.currentDampingFactor);t.add(a),gO(i,t),e.paused=a.length()<mO,e.snapComplete=a.length()<mO*100,e.snapComplete&&(e.currentDampingFactor=e.dampingFactor)}else gO(i,s),e.paused=!0;(o=e.object)==null||o.dispatchEvent({type:"beginEvent",eventName:"Follow"}),i.dispatchEvent(cae)}},Vf=new N,Ov=new N,Fc=new at,Wf=new hi,xd=new hi,Lv=new N,yb=new N,qf=new N,Iv=new As,vO=1e-5,fae={type:"requestRender"},pae={type:"changeRotation"},mae=function(){let e=new at,t=new N,i=new N,r=new N;return(n,s)=>(s==="x"?(t.set(0,0,1),i.set(0,1,0),r.set(-1,0,0)):s==="y"?(t.set(1,0,0),i.set(0,0,1),r.set(0,-1,0)):(t.set(1,0,0),i.set(0,1,0),r.set(0,0,1)),t.applyMatrix4(n),i.applyMatrix4(n),r.applyMatrix4(n),e.makeBasis(t,i,r))}(),yO=function(){let e=new at;return function(t,i){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),i.premultiply(u4(e).invert()),t.rotation.setFromRotationMatrix(i),t.updateMatrix(),t instanceof as&&ql(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),gae=class{constructor(e,t,i){this.data=e,this.object=t,this.paused=!0,this.snapComplete=!1,this.isReset=!1,this.worldQuaternion0=new hi,this.target=e.target?i.find(e.target):void 0,this.dampingFactor=e.dampingFactor?Math.max(e.dampingFactor,1):1,this.distance=e.distance??0,this.tilt=e.tilt??"up",this.axis=e.axis??"z",this.plane=e.plane??"custom",this.snapDampingFactor=8,this.currentDampingFactor=this.dampingFactor,this.object.getWorldQuaternion(this.worldQuaternion0)}},vae=class extends _c{constructor(e){super(e),this.events=[],this.onTargetChangeCallbacks=[],this.onMouseMove=i=>{if(!(Ht.length>1)){this.eventContext.updateRaycaster(i);for(let r of this.events)r.target===void 0&&this.updateSingleEvent(r)}},this.onMouseEnter=i=>{for(let r of this.events)r.target===void 0&&(r.snapComplete=!1,r.isReset=!1,r.currentDampingFactor=r.snapDampingFactor)},this.onMouseLeave=i=>{for(let r of this.events)r.target===void 0&&(r.snapComplete=!1,(r.data.resetOnPointerLeave??!1)&&(r.isReset=!0,r.currentDampingFactor=r.snapDampingFactor),this.updateSingleEvent(r))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)};let{scene:t}=this.eventContext;t.traverseEntity(i=>{var n,s;let r=(n=i.data)==null?void 0:n.events.find(o=>o.data.type==="LookAt"&&!o.data.disabled);r&&(!t.data.environment.usePhysics||((s=i.dataPatched.physics)==null?void 0:s.rigidBody)!=="dynamic")&&this.events.push(new gae(r.data,i,t))})}connect(){if(!this.events.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),fn&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave);for(let t of this.events)if(t.target!==void 0){let i=this.onTargetChange(t);this.onTargetChangeCallbacks.push(i),t.target.addEventListener("requestRender",i)}}disconnect(){if(!this.events.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),fn&&e.removeEventListener("pointerdown",this.onMouseMove),e.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);let t=0;for(let i of this.events)i.paused=!0,i.target!==void 0&&i.target.removeEventListener("requestRender",this.onTargetChangeCallbacks[t++])}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var c;let{target:t,tilt:i,axis:r,distance:n,plane:s,object:o}=e,{camera:a,raycaster:l}=this.eventContext;if(o.getWorldPosition(Lv),!e.isReset){if(e.target)e.target.getWorldPosition(yb);else if(s==="custom"?(a.getWorldDirection(Ov),Ov.negate(),n>0?Iv.set(Ov,-n):Iv.setFromNormalAndCoplanarPoint(Ov,Lv)):(s==="xy"?Vf.set(0,0,1):s==="xz"?Vf.set(0,1,0):s==="yz"&&Vf.set(1,0,0),Iv.setFromNormalAndCoplanarPoint(Vf,Lv)),!l.ray.intersectPlane(Iv,yb))return}e.isReset||(t?i==="up"?qf.set(0,1,0):i==="target"&&qf.copy(t.up).applyMatrix4(Fc.extractRotation(t.matrixWorld)).normalize():s==="custom"?qf.set(0,1,0):qf.copy(Vf)),e.isReset?xd.copy(e.worldQuaternion0):(Fc.lookAt(yb,Lv,qf),Fc.copy(mae(Fc,r)),xd.setFromRotationMatrix(Fc)),e.currentDampingFactor>1||e.snapComplete===!1?(o.updateWorldMatrix(!0,!1),Wf.setFromRotationMatrix(u4(o.matrixWorld)),Wf.slerp(xd,1/e.currentDampingFactor),yO(o,Fc.makeRotationFromQuaternion(Wf)),e.paused=8*(1-Wf.dot(xd))<vO,e.snapComplete=8*(1-Wf.dot(xd))<vO*100,e.snapComplete&&(e.currentDampingFactor=e.dampingFactor)):(yO(o,Fc.makeRotationFromQuaternion(xd)),e.paused=!0),(c=e.object)==null||c.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),o.dispatchEvent(fae),o.dispatchEvent(pae)}},yae=class{constructor(e,t,i,r,n){this.id=e,this.data=t,this.object=i,this.entered=!1,this.actions=Tu(t,t.actions,i,r,n)}disconnect(){Mu(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?this.actions.Transition.forEach(t=>t.reverseFromCurrent()):this.actions.Transition.forEach(t=>t.playFromCurrent())}},xae=class extends _c{constructor(e){super(e),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=r=>{Ht.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onMouseUp=r=>{Ht.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=r=>{Ht.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:r,target:n,reverse:s})=>{var a;if(!r||!n)return;let o=F1(r);o&&o==="MouseHover"&&(n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(a=this.eventsPerObjects[n.uuid])==null||a.forEach(l=>l.dispatchUserEvent(s)))};let{scene:t,sharedAssets:i}=this.eventContext;t.traverseEntity(r=>{var n,s;if(!(!r.visible||!((n=r.data)!=null&&n.events.length))){for(let{id:o,data:a}of r.data.events)if(!a.disabled&&a.type==="MouseHover")try{let l=new yae(o,a,r,t,i);this.eventsPerObjects[r.uuid]?this.eventsPerObjects[r.uuid].push(l):this.eventsPerObjects[r.uuid]=[l]}catch{}(s=this.eventsPerObjects[r.uuid])!=null&&s.length&&this.objects.push(r)}})}connect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),fn&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(t=>{t.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),fn&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(i=>{i.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:i,raycaster:r,scene:n}=this.eventContext;if(i){let s=$_(r,n,this.objects);t=J_(s)}else this.objects.forEach(s=>{Ny(r,s)&&t.push(s)})}this._prevObjects.length&&this._prevObjects.forEach(i=>{var r;t.includes(i)||(i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(r=this.eventsPerObjects[i.uuid])==null||r.forEach(n=>n.dispatchLeave()))}),t.length&&t.forEach(i=>{var r;i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(r=this.eventsPerObjects[i.uuid])==null||r.forEach(n=>n.dispatchEnter())}),this._prevObjects=t}},wae=class{constructor(e,t,i,r,n){this.id=e,this.data=t,this.object=i,this.scrollCounter=0,this.actions=Tu(t,t.actions,i,r,n)}connect(){this.scrollCounter=0}disconnect(){Mu(this.actions)}dispatch(e){this.actions.Transition.forEach(r=>{r.object.currentTransitionEvent!==this&&(r.object.currentTransitionEvent=this,r.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let i=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(r=>r.seek(i))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?this.actions.Transition.forEach(t=>t.reverseFromCurrent()):this.actions.Transition.forEach(t=>{t.playFromCurrent()})}},bae=class extends _c{constructor(e){super(e),this.eventsPerObject=new Map,this.onWheel=r=>{[...this.eventsPerObject.entries()].forEach(([n,s])=>{n.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:r.deltaY}),s.forEach(o=>o.dispatch(r.deltaY))})},this.onUserEvent=({eventName:r,target:n,reverse:s})=>{var a;if(!r||!n)return;let o=F1(r);o&&o==="Scroll"&&(n.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(a=this.eventsPerObject.get(n))==null||a.forEach(l=>{l.dispatchUserEvent(s)}))};let{scene:t,sharedAssets:i}=this.eventContext;t.traverseEntity(r=>{var n,s;if((n=r.data)!=null&&n.events.length)for(let{id:o,data:a}of r.data.events){if(a.disabled||a.type!=="Scroll")continue;let l=new wae(o,a,r,t,i);this.eventsPerObject.has(r)?(s=this.eventsPerObject.get(r))==null||s.push(l):this.eventsPerObject.set(r,[l])}})}connect(){[...this.eventsPerObject.entries()].forEach(([e,t])=>{t.forEach(i=>i.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.eventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel))}disconnect(){window.removeEventListener("wheel",this.onWheel),this.domEventsNeeded.clear(),[...this.eventsPerObject.entries()].forEach(([e,t])=>{t.forEach(i=>i.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},Sae=class{constructor(e,t,i,r,n){this.id=e,this.data=t,this.object=i,this.actions=Tu(t,t.actions,i,r,n)}disconnect(){Mu(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof Xd?t.interaction.audioPlayer.play():t.interaction instanceof eE&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let i=t.interaction.data.triggerAfter??"autoplay";i===e&&(t.interaction instanceof Dp?t.interaction.play(i==="autoplay"):t.interaction instanceof tE&&t.interaction.dispatch())})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?this.actions.Transition.forEach(t=>t.reverseFromCurrent()):this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Audio.forEach(t=>{t.interaction instanceof Xd?t.interaction.audioPlayer.play():t.interaction instanceof eE&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof Dp?t.interaction.play():t.interaction instanceof tE&&t.interaction.dispatch()})}},_ae=class extends _c{constructor(e){super(e),this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(s=>{s.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(s=>{s.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:r,isExport:n}=this.eventContext;(n?document:r).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([s,o])=>{s.dispatchEvent({type:"beginEvent",eventName:"Start"}),o.forEach(a=>{a.dispatchAfter("any")})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(s=>{s.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:r,target:n,reverse:s})=>{var a,l;if(!r||!n)return;let o=F1(r);o&&o==="Start"&&(n.dispatchEvent({type:"beginEvent",eventName:"Start"}),(a=this.eventsPerObject.get(n))==null||a.forEach(c=>{c.dispatchUserEvent(s)}),(l=this.eventsAfterPerObject.get(n))==null||l.forEach(c=>{c.dispatchUserEvent(s)}))};let{scene:t,sharedAssets:i}=this.eventContext;t.traverseEntity(r=>{var n,s,o,a;if((n=r.data)!=null&&n.events.length)for(let{id:l,data:c}of r.data.events){if(c.disabled||c.type!=="Start")continue;let d=new Sae(l,c,r,t,i);d.actions.Transition.length&&(this.eventsPerObject.has(r)?(s=this.eventsPerObject.get(r))==null||s.push(d):this.eventsPerObject.set(r,[d])),d.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(o=this.eventsAfterPerObject.get(r))==null||o.push(d):this.eventsAfterPerObject.set(r,[d])),d.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(a=this.eventsAfterPerObject.get(r))==null||a.push(d):this.eventsAfterPerObject.set(r,[d]))}})}connect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,i=t?document:e;i.addEventListener("pointerdown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),i.addEventListener("pointerdown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.addEventListener("userEvent",this.onUserEvent)}),this.onPlay()}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.dispatchEvent({type:"beginEvent",eventName:"Start"}),t.forEach(i=>i.dispatch()),e.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,i=t?document:e;i.removeEventListener("pointerdown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),i.removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.removeEventListener("userEvent",this.onUserEvent),n.forEach(s=>s.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(i=>i.disconnect())})}},Eae=class{constructor(e,t,i,r,n){this.id=e,this.data=t,this.object=i,this.disabled=!0,this.actions=Tu(t,t.actions,i,r,n),this.target=t.target,this.useToggle=t.toggle}disconnect(){Mu(this.actions)}dispatch(){this.disabled||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?this.actions.Transition.forEach(e=>{e.toggle()}):this.actions.Transition.forEach(e=>{e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}))}},Xi;yee.then(e=>Xi=e);new at;new N(1,1,1);var ln=new N,_l=new hi,Uc=new N,xb=new Kr(0,0,0,"YXZ"),Aae={type:"updateMatrix"},z4={type:"beginEvent",eventName:"Collision"};function Cae(e){if(e.scene.environment.usePhysics)return!0;let t=!1;return e.scene.objects.traverse((i,r)=>{for(let n of r.events)if(n.data.disabled!==!0&&n.data.type==="GameControl"&&n.data.collisionEnabled){t=!0;break}}),t}var xO=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0),wO=e=>e.events.find(t=>t.data.disabled!==!0&&t.data.type==="Follow"),Tae=class{constructor(e,t,i,r,n,s=!1){var g;this.scene=t,this.sharedAssets=n,this.isExport=s,this.orbitControlsNeedsUpdate=!0,this.gameControls=[],this.gameControlStates=[],this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],eventsPerObjects:{},colliderToEntity:{},gamePads:[]},this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.processRigidBody=p=>{if(p.bodyType()!==Xi.RigidBodyType.Dynamic)return;p.isSleeping()||this.nActiveRigidBodies++;let[x,b,S]=this.rigidBodyToMesh.get(p.handle);if(ln.copy(p.translation()).multiplyScalar(this.pixelsPerMeter),_l.copy(p.rotation()),x.matrixWorld.compose(ln,_l,b),x.hasNonUniformScale&&x.matrixWorld.multiply(x.shearScale),x.dispatchEvent(Aae),S){let E=x.cloner;if(E&&E.objectForSample===void 0){E.matrixWorld.copy(x.matrixWorld);for(let y of E.children)y.updateMatrixWorld(!0)}for(let y of x.children)y.updateMatrixWorld(!0)}},this.handleCollisionEvents=(p,x,b)=>{if(b!==!1)if(this.gameControls.some(S=>S.object===this.sharedGameControlGlobals.colliderToEntity[p])){let S=this.sharedGameControlGlobals.colliderToEntity[x],E=this.sharedGameControlGlobals.eventsPerObjects[S.uuid];if(E===void 0)return;for(let y of E)y.data.target==="character"&&this.dispatchCollisionEvent(y,S)}else if(this.gameControls.some(S=>S.object===this.sharedGameControlGlobals.colliderToEntity[x])){let S=this.sharedGameControlGlobals.colliderToEntity[p],E=this.sharedGameControlGlobals.eventsPerObjects[S.uuid];if(E===void 0)return;for(let y of E)y.data.target==="character"&&this.dispatchCollisionEvent(y,S)}else{let S=this.sharedGameControlGlobals.colliderToEntity[p],E=this.sharedGameControlGlobals.eventsPerObjects[S.uuid];if(E!==void 0)for(let A of E)A.data.target==="scene"&&this.dispatchCollisionEvent(A,S);let y=this.sharedGameControlGlobals.colliderToEntity[x],C=this.sharedGameControlGlobals.eventsPerObjects[y==null?void 0:y.uuid];if(C!==void 0)for(let A of C)A.data.target==="scene"&&this.dispatchCollisionEvent(A,y)}},this.onBeginState=()=>{this.orbitControls&&(this.orbitControls.enabled=!1,this.orbitControlsNeedsUpdate=!1)},this.onCompleteState=({target:p})=>{this.orbitControls&&(this.orbitControls.enabled=!0,this.orbitControls.resetTo(p.getTarget(ln),p.position,p.zoom,p.isUpVectorFlipped),p.prevState=null,p.currentState=null,p.reversibleToState=null,p.currentTransitionEvent=null,this.orbitControlsNeedsUpdate=!0)},this.domElement=i.domElement;let o;e.scene.publish.playCamera===null?o=N1.PERSONAL_CAMERA_ID:o=e.scene.publish.playCamera;let a=this.scene.find(o),l=!1,c,d=5,u=8,h=9,f="drag";if(this.usePhysics=e.scene.environment.usePhysics??Xn.defaultData.usePhysics,this.pixelsPerMeter=e.scene.environment.pixelsPerMeter??Xn.defaultData.pixelsPerMeter,(g=e.scene.objects.data(e.scene.publish.gameControlObject))==null||g.events.forEach(p=>{p.data.disabled!==!0&&p.data.type==="GameControl"&&(c=p.data.keyAssignments,d=p.data.joystickPosLoc,u=p.data.joystickRotLoc,h=p.data.jumpTouchButtonLoc,f=p.data.rotByTouch)}),this.scene.traverseEntity(p=>{p.dataPatched.events.forEach(x=>{var S,E;if(x.data.disabled||x.data.type!=="GameControl")return;let b=p;for(;((S=b=b.parent)==null?void 0:S.parent)!==null;)if((E=b.dataPatched.physics)!=null&&E.fusedBody)return;x.data.collisionEnabled&&(this.needsCollisionDetection=!0),this.gameControlStates.push([p,x.data])})}),this.usePhysics&&this.initPhysics(e.scene.environment.gravity??Xn.defaultData.gravity),this.gameControlStates.forEach(([p,x])=>{l=l||x.camera===a.uuid||p.uuid===a.uuid;let b=new F4(p,i.domElement,{...x,keyAssignments:c},e.scene.environment,this.sharedGameControlGlobals,p.uuid!==a.uuid&&x.camera===a.uuid,a,this.scene,n);b.addEventListener("change",r),b.addEventListener("end",r),b.addEventListener("start",r),this.gameControls.push(b),fn&&x.touchControl&&(this.joystickToGameControls[d]!==void 0?this.joystickToGameControls[d].push([b,"pos"]):this.joystickToGameControls[d]=[[b,"pos"]],x.moveMode==="walk"&&(this.joystickToGameControls[h]!==void 0?this.joystickToGameControls[h].push([b,"jmp"]):this.joystickToGameControls[h]=[[b,"jmp"]]),f==="joystick"&&(this.joystickToGameControls[u]!==void 0?this.joystickToGameControls[u].push([b,"rot"]):this.joystickToGameControls[u]=[[b,"rot"]]))}),l===!1){let{enableRotate:p,enablePan:x,enableZoom:b,autoRotate:S,hoverRotatePanMode:E}=e.scene.publish.orbitControls;if(p||x||b||S||E!==0){this.orbitControls=new U4(a,i.domElement,this.isExport),this.orbitControls.addEventListener("change",r),this.orbitControls.addEventListener("end",r),this.orbitControls.addEventListener("start",r),this.orbitControls.fromJSON(e.scene.publish.orbitControls),this.orbitControls.useKeyEvents=!1,this.orbitControls.connect(),this.orbitControls.update();let y=this.orbitControls.object;y.addEventListener("beginState",this.onBeginState),y.addEventListener("completeState",this.onCompleteState)}}let m=i.domElement.width/i.getPixelRatio(),v=i.domElement.height/i.getPixelRatio();this.joystickToGameControls.forEach((p,x)=>{let b=document.body.appendChild(document.createElement("div")),[S,E,y]=(e.scene.publish.joystickSizeAndXYOffset??Ph.defaultData.joystickSizeAndXYOffset)[x],C=(m-5*S)/4+S,A={},D=p.some(G=>G[1]==="jmp"),I=D?0:S;x<10?(x<5?A.top=I/2:A.bottom=I/2,A.left=I/2+x%5*C):x===10?(A.left=I/2,A.top=v/2):(A.right=I/2,A.top=v/2),A.top?A.top-=E[1]:A.bottom+=E[1],A.left?A.left+=E[0]:A.right-=E[0];for(let G in A)A[G]+="px";if(D){let G=b.appendChild(document.createElement("div"));Object.assign(G.style,A,{position:"absolute",width:S+"px",height:S+"px",backgroundColor:`rgba(255,255,255,${y==="show"?.4:0})`,zIndex:"9999",borderRadius:S+"px",border:y==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let j=S/16*16*.4;y==="show"&&(G.innerHTML=`
						<svg width="${j}" height="${S*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),G.addEventListener("pointerdown",()=>{p.forEach(ee=>{ee[0].movementState.jump=1}),r()}),G.addEventListener("touchend",ee=>ee.preventDefault()),this.joysticks[x]=[void 0,b];return}let R={zone:b,mode:"static",position:A,size:S};y==="hide"&&(R.restOpacity=0);let B=kse.create(R);B.on("move",(G,j)=>{p.forEach(ee=>{let Q=ee[0];ee[1]==="pos"?j.force<.2?Q.moveForce=0:(Q.movementState.movePosZ=Math.sin(-j.angle.radian),Q.movementState.movePosX=Math.cos(-j.angle.radian),j.force<.3?Q.moveForce=(j.force-.2)/.1:Q.moveForce=1):j.force<.2?Q.rotForce=0:(Q.movementState.rotPosX=j.vector.y,Q.movementState.rotPosY=-j.vector.x,j.force<.3?Q.rotForce=(j.force-.2)/.1:Q.rotForce=1)}),r()}),B.on("end",(G,j)=>{p.forEach(ee=>{let Q=ee[0];ee[1]==="pos"?(Q.movementState.movePosZ=0,Q.movementState.movePosX=0,Q.moveForce=1):(Q.movementState.rotPosX=0,Q.movementState.rotPosY=0,Q.rotForce=1)})}),this.joysticks[x]=[B,b]}),this.usePhysics===!1&&this.needsCollisionDetection&&this.initBVH(),this.initializationCounter++,window.setTimeout(()=>this.collisionEvents.forEach(p=>p.disabled=!1),80)}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",i=>{"gamepad"in i.data&&"axes"in i.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(i.data.gamepad)})})}initBVH(){let e=[];if(this.scene.traverseObject(t=>{let i;if(t instanceof Iy)return;t instanceof ou?i=t.object:i=t;let r=i.dataPatched;if(!r.visible)return!0;let n=t.geometry;if(xO(r)||wO(r)||i.dataPatched.events.some(s=>s.data.disabled!==!0&&s.data.type==="GameControl")){t.updateMatrixWorldSVD();let s=[];if((n==null?void 0:n.getAttribute("position"))!==void 0&&s.push(vd(n,t.shearScale)),t.traverseObject(this.gatherChildrenGeom(t,s)),t.children.forEach(o=>o.updateMatrixWorld(!0)),s.length>0){let o=Gd(s,!1);t.boundsTree=new kr(o),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(t)}return!0}else n&&e.push(vd(n,t.matrixWorld))}),e.length>0){let t=Gd(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new kr(t)}}addCollider(e,t,i,r,n,s=!0){var l,c;if((r==null?void 0:r.getAttribute("position").count)===0||((l=r==null?void 0:r.getIndex())==null?void 0:l.count)===0)return;let o;n!==void 0?n.collider.type==="sphere"?o=Xi.ColliderDesc.ball(n.collider.radius/this.pixelsPerMeter):n.collider.type==="capsule"?o=Xi.ColliderDesc.capsule((n.collider.height/2-n.collider.radius)/this.pixelsPerMeter,n.collider.radius/this.pixelsPerMeter):o=Xi.ColliderDesc.cuboid(n.collider.width/this.pixelsPerMeter/2,n.collider.height/this.pixelsPerMeter/2,n.collider.depth/this.pixelsPerMeter/2):r&&(i.colliderType==="trimesh"?o=Xi.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array):o=Xi.ColliderDesc.convexMesh(r.getAttribute("position").array,s?r.getIndex().array:void 0)),o.setFrictionCombineRule(Xi.CoefficientCombineRule.Average).setRestitutionCombineRule(Xi.CoefficientCombineRule.Average).setDensity(i.density).setFriction(i.friction).setRestitution(i.restitution);let a=this.sharedGameControlGlobals.rapierWorld.createCollider(o,t);if(this.sharedGameControlGlobals.colliderToEntity[a.handle]=e,n!==void 0){ln.fromArray(n.collider.position).multiply(Uc.setFromMatrixScale(e.matrixWorld)).divideScalar(this.pixelsPerMeter),a.setTranslationWrtParent(ln);let d=new hi().setFromEuler(new Kr().setFromVector3(new N().fromArray(n.collider.rotation)));a.setRotationWrtParent(d),a.setActiveEvents(Xi.ActiveEvents.COLLISION_EVENTS)}else(c=this.sharedGameControlGlobals.eventsPerObjects[e.uuid])!=null&&c.some(d=>d.target==="scene")&&a.setActiveEvents(Xi.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(i,r)=>{if(r===0)return;r===1?e.hasNonUniformScale?i.matrixWorld.multiplyMatrices(e.shearScale,i.hiddenMatrix):i.matrixWorld.copy(e.hiddenMatrix):i.matrixWorld.multiplyMatrices(i.parent.matrixWorld,i.hiddenMatrix),i.matrixWorld.multiply(i.matrix);let n=i.geometry;(n==null?void 0:n.getAttribute("position"))!==void 0&&t.push(vd(n,i.matrixWorld))}}initPhysics(e){this.sharedGameControlGlobals.rapierWorld=new Xi.World(new Xi.Vector3(0,e??-10,0)),this.events=new Xi.EventQueue(!0);let t=[];if(this.scene.traverseObject(o=>{var m;let a;if(o instanceof Iy)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;a=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else o instanceof ou?a=o.object:a=o;let l=a.dataPatched;if(!l.physics||!l.visible)return!0;o.updateMatrixWorldSVD();let c=xO(l),d=wO(l),u,h=!1;for(let v of l.events)if(v.data.disabled!==!0){if(v.data.type==="GameControl")u=v.data;else if(v.data.type==="Collision"){h=!0;let g=new Eae(v.id,v.data,a,this.scene,this.sharedAssets);this.collisionEvents.push(g),this.sharedGameControlGlobals.eventsPerObjects[a.uuid]?this.sharedGameControlGlobals.eventsPerObjects[a.uuid].push(g):this.sharedGameControlGlobals.eventsPerObjects[a.uuid]=[g]}}l.physics.rigidBody==="dynamic"&&l.physics.fusedBody===!1&&(o.matrixWorldFusedFalse=o.matrixWorld.clone());let f=o.geometry;if(l.physics.rigidBody==="dynamic"||c||d||h||u!==void 0){let v=[];if((f==null?void 0:f.getAttribute("position"))!==void 0&&v.push(vd(f,o.shearScale)),l.physics.fusedBody){let g=this.gatherChildrenGeom(o,v);o.traverseObject(g),o.children.forEach(x=>x.updateMatrixWorld(!0));let p=o.cloner;p&&p.objectForSample===void 0&&l.physics.rigidBody==="dynamic"&&(p.traverseObject(g),p.children.forEach(x=>x.updateMatrixWorld(!0)))}if(v.length>0||u!==void 0){let g;u!==void 0?g=Xi.RigidBodyDesc.kinematicPositionBased():l.physics.rigidBody==="dynamic"?(g=Xi.RigidBodyDesc.dynamic(),g.setLinearDamping(l.physics.damping).setAdditionalMass(1e-9).setGravityScale(l.physics.gravityScale).enabledRotations(...l.physics.enabledRotation).enabledTranslations(...l.physics.enabledTranslation)):c||d?(g=Xi.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(o)):g=Xi.RigidBodyDesc.fixed();let p;p=v.length>0?Gd(v):void 0,(o.hasNonUniformScale?o.matrixWorldRigid:o.matrixWorld).decompose(ln,_l,Uc),o.position0=ln.clone().divideScalar(this.pixelsPerMeter),o.rotation0=_l.clone(),ln.divideScalar(this.pixelsPerMeter),g.setTranslation(ln.x,ln.y,ln.z).setRotation(_l),f?p==null||p.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):p==null||p.scale(Uc.x/this.pixelsPerMeter,Uc.y/this.pixelsPerMeter,Uc.z/this.pixelsPerMeter);let x=this.sharedGameControlGlobals.rapierWorld.createRigidBody(g);u===void 0&&l.physics.rigidBody==="dynamic"&&this.rigidBodyToMesh.set(x.handle,[o,Uc.clone(),l.physics.fusedBody]),o.rigidBody=x;let b=!(l.geometry===void 0||l.geometry.type==="SubdivGeometry"||l.geometry.type==="NonParametricGeometry"||l.geometry.type==="BooleanGeometry"||l.geometry.type==="VectorGeometry"||l.geometry.type==="StarGeometry"||l.geometry.type==="RectangleGeometry"||l.geometry.type==="EllipseGeometry"||l.geometry.type==="TriangleGeometry"||l.geometry.type==="TorusGeometry"||l.geometry.type==="HelixGeometry");try{this.addCollider(a,x,l.physics,p,u,b)}catch{try{this.addCollider(a,x,l.physics,p,u,!1)}catch(S){console.error(S)}}}}else f&&t.push(vd(f,o.matrixWorld)),l.physics.fusedBody&&o.traverse(v=>{!v.geometry||v===o||t.push(vd(v.geometry,v.matrixWorld))});if(((m=l.physics)==null?void 0:m.fusedBody)===!0||u)return!0}),t.length===0)return;let i=Gd(t);i.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let r=Xi.RigidBodyDesc.fixed(),n=this.sharedGameControlGlobals.rapierWorld.createRigidBody(r),s=Xi.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array).setFrictionCombineRule(Xi.CoefficientCombineRule.Multiply).setRestitutionCombineRule(Xi.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(s,n)}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}dispose(){var e;if(this.scene.traverse(t=>{let i=t;i.matrixWorldFusedFalse&&(i.matrixWorldFusedFalse=void 0),i.rigidBody&&(i.rigidBody=void 0),i.position0&&(i.position0=void 0),i.rotation0&&(i.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.staticMeshBVH=void 0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.gameControls.forEach(t=>{t.reset(),t.dispose()}),this.gameControls=[],this.joysticks.forEach(([t,i])=>{t==null||t.destroy(),i.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls){let t=this.orbitControls.object;t.removeEventListener("beginState",this.onBeginState),t.removeEventListener("completeState",this.onCompleteState),this.orbitControls.dispose(),this.orbitControls=void 0}for(let t of Object.values(this.sharedGameControlGlobals.eventsPerObjects))t.forEach(i=>i.disconnect());this.sharedGameControlGlobals.eventsPerObjects={},this.scene.updateMatrixWorld(!0)}update(e,t,i){var n;let r=!0;if(this.orbitControls!==void 0&&this.orbitControlsNeedsUpdate&&(r=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2)this.initializationCounter++,r=!1;else if(this.initializationCounter===2)for(let s of this.gameControls)r=!s.update(e,t,i)&&r;if(this.usePhysics){for(let s of this.sharedGameControlGlobals.entitiesWithTransformAnim){(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(ln,_l,Uc),xb.setFromQuaternion(_l);let o=s;o.prevR===void 0?(o.prevR=xb.clone(),o.prevT=ln.clone()):(o.prevR.copy(xb),o.prevT.copy(ln)),s.rigidBody.setNextKinematicTranslation(ln.divideScalar(this.pixelsPerMeter)),s.rigidBody.setNextKinematicRotation(_l)}this.sharedGameControlGlobals.rapierWorld.step(this.events),(n=this.events)==null||n.drainCollisionEvents(this.handleCollisionEvents),r=!this.updatePositions()&&r}return r}dispatchCollisionEvent(e,t){t.dispatchEvent(z4),e.dispatch()}},wb={type:"change"},Mae={type:"lock"},Pae={type:"unlock"};new N;var bO=new N,SO=new N,Dae=new N,cn=new N,Gn=new N,El=new N,bb=new at,_O=new at,Oae=new at;new at;var to=new hi,Ta=new hi,Lo=new Kr(0,0,0,"YXZ"),Lae=new N(1,0,0),io=new N(0,1,0),Iae=new N(0,0,1),EO=new N(1,1,1),Rae=1,Nae=.025,Bae=16e-6,kae=12,zae=20,qr=new Os,vs=new fr,Fae={type:"requestRender"},AO=Math.PI/6,nE=class extends kn{constructor(e,t,i,r,n,s,o,a,l){var m,v;super(),this.object=e,this.domElement=t,this.sharedGameControlGlobals=n,this.cameraFollow=s,this.camera=o,this.scene=a,this.sharedAssets=l,this.enableDamping=!0,this.position0=new N,this.rotation0=new Kr(0,0,0,"XYZ"),this.scale0=new N,this.hiddenMatrix0=new at,this.target0=new N,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.euler0=new Kr(0,0,0,"YXZ"),this.position0Cam=new N,this.quat0Cam=new hi,this.scale0Cam=new N,this.hiddenMatrix0Cam=new at,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Os(new N(0,-40,0),new N(0,40,0)),matrix:new at,position:new N,rotation:new hi},this.euler=new Kr(0,0,0,"YXZ"),this.eulerDelta=new N,this.lastPosition=new N,this.lastCameraQuaternion=new hi,this.lastCameraPosition=new N,this.PI_2=Math.PI/2,this.prevMouse=new de,this.velocityTarget=new N,this.velocity=new N,this.directionXZ=new N,this.rotVelocityStick=new N,this.rotVelocityTarget=new N,this.rotVelocity=new N,this.rotDirection=new N,this.nonColliderRotOffset=new at,this.nonColliderPosOffset=new at,this.firstPointerId=-1,this.rot=new N,this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new at,this.objectToTarget=new N,this.objectToTarget0=new N,this.objectToCamXZ=new N,this.objectToCamXZ0=new N,this.targetToCamera=new N,this.targetToCamera0=new N,this.cameraPolarAxis0=new N,this.targetPos=new N,this.targetQuat=new hi,this.lerpFactorPos=new N().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new hi,this.objXZQuatInv=new hi,this.objXZRotMat=new at,this.isFirstPerson=!1,this.actions={},this.didHit=!1,this.groundVelocity=new N,this.pushedVelocity=new N,this.groundYRotation=0,this.objectRealQuat=new hi,this.colliderWorldQuat=new hi,this.groundNormal=new N,this.groundTilt=new hi,this.groundTiltInv=new hi,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.onPointerDown=g=>{g.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=g.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!fn&&(!by||Sy>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(g.clientX,g.clientY))},this.onPointerUp=g=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),g.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=g=>{if(g.pointerId!==this.firstPointerId)return;let p=g.clientX-this.prevMouse.x,x=g.clientY-this.prevMouse.y;this.prevMouse.set(g.clientX,g.clientY),g.pointerType==="mouse"&&this.rotBy!=="keys"&&(by&&Sy<15.5&&!fn?(this.eulerDelta.y=-p*this.mouseOrbitSensitivity,this.eulerDelta.x=-x*this.mouseOrbitSensitivity):(this.eulerDelta.y=-g.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-g.movementY*this.mouseOrbitSensitivity)),g.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-p*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-x*this.mouseOrbitSensitivity*5),this.dispatchEvent(wb)},this.onPointerlockChange=g=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(Mae),nE.isLocked=!0):(this.dispatchEvent(Pae),nE.isLocked=!1)},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.onKeyDown=g=>{!(g.target instanceof HTMLInputElement)&&(g.code==="ArrowLeft"||g.code==="ArrowUp"||g.code==="ArrowRight"||g.code==="ArrowDown"||g.code==="Space")&&g.preventDefault();for(let p of this.keyAssignments)if(g.key.toUpperCase()===p[1]||g.key===p[1]){this.movementState[p[0]]=1;break}this.dispatchEvent(wb)},this.onKeyUp=g=>{for(let p of this.keyAssignments)if(g.key.toUpperCase()===p[1]||g.key===p[1]||g.code.slice(3,g.code.length).toUpperCase()===p[1]){this.movementState[p[0]]=0;break}},this.copyVRGamePadValues=(g,p)=>{for(let x=2;x<4;x++){let b=g.axes[x];p===0?x===2?this.movementState.movePosX=b:this.movementState.movePosZ=b:(g.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,x===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(b)>=.3&&(this.vrEulerYOffset+=b<0?1:-1),this.movementState.rotPosY=b):this.moveMode==="fly"&&(this.movementState.moveNegY=b))}},e===o&&(this.isFirstPerson=!0),this.position0.copy(this.object.position),this.rotation0.copy(this.object.rotation),this.scale0.copy(this.object.scale),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.rotation.reorder("YXZ"),this.euler0.copy(this.object.rotation);let c=this.object.rotation.y;if(this.objectRealQuat.copy(this.object.quaternion),this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,c,0),this.rot.setFromEuler(this.object.rotation),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){if(this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),(v=(m=this.camera)==null?void 0:m.parent)==null?void 0:v.parent){let S=this.camera.matrix.clone().invert().premultiply(this.camera.matrixWorld),E=S.clone().invert();this.camera.hiddenMatrix.multiply(E),this.camera.matrix.premultiply(S),this.camera.matrixWorld.decompose(this.camera.position,this.camera.quaternion,this.camera.scale)}this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let g=new N(0,0,-1).applyQuaternion(this.camera.quaternion),p=new N().subVectors(this.object.position,this.camera.position);this.objectToCamXZ.copy(p),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let x;if(Math.abs(g.y)<1e-6){p.y=0,g.y=0;let S=p.projectOnVector(g);this.targetToCamera0.copy(S).negate(),x=this.camera.position.clone().add(S)}else{let S=g.multiplyScalar(p.y/g.y);this.targetToCamera0.copy(S).negate(),x=S.clone().add(this.camera.position)}this.objectToTarget0.subVectors(x,this.object.position);let b=new Kr().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-b.x,b.x=0,b.z=0,b.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(b)}if(this.object instanceof Ka&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.connect(),this.rotByTouch=i.rotByTouch??"joystick",this.rotBy=i.rotBy??"keys",this.rotationMode=i.rotationMode??"normal",this.moveMode=i.moveMode??"walk",this.collisionEnabled=i.collisionEnabled,this.speedTranslate=(i.speedTranslate??250)*Rae,this.speedOrbit=(i.speedRotate??100)*Nae,this.mouseOrbitSensitivity=(i.speedRotate??100)*Bae,this.keyAssignments=i.keyAssignments.map(g=>{let p=[g[0],g[1]];return p[1]==="▲"?p[1]="ArrowUp":p[1]==="◀"?p[1]="ArrowLeft":p[1]==="▼"?p[1]="ArrowDown":p[1]==="▶"?p[1]="ArrowRight":p[1]==="⇧"?p[1]="Shift":p[1]==="↵"?p[1]="Enter":p[1]==="Space"?p[1]=" ":p[1]==="⌘"?p[1]="Meta":p[1]==="Ctrl"?p[1]="Control":p[1]==="Esc"&&(p[1]="Escape"),p}),i.rotBy==="mouse"){let g;g=this.keyAssignments.findIndex(p=>p[0]==="rotNegX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(p=>p[0]==="rotPosX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(p=>p[0]==="rotPosY"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(p=>p[0]==="rotNegY"),g!==-1&&(this.keyAssignments[g][1]="")}this.lerpFactorPosStart=1-.02**(1/((i.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((i.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((i.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((i.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((i.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((i.delayRotCamera??.3)*60)),this.gravity=(r.gravity??Xn.defaultData.gravity)*kae,this.pixelsPerMeter=r.pixelsPerMeter??Xn.defaultData.pixelsPerMeter,this.usePhysics=r.usePhysics??Xn.defaultData.usePhysics,this.jumpPower=i.jumpPower*zae,this.resetYPosition=i.resetYPosition,this.alignToGround=i.alignToGround??!1,this.orientMode=i.autoOrientMove?i.orientMode:"none",this.orientWith=i.orientWith??P_.defaultDataThirdPerson.orientWith;let d=r.skinWidthRelative??Xn.defaultData.skinWidthRelative,u=r.stepThreshRelative??Xn.defaultData.stepThreshRelative;this.slopeThresh=(r.slopeThresh??Xn.defaultData.slopeThresh)*Math.PI/180,i.collider.type==="capsule"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=i.collider.height/2-i.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=i.collider.height*d/this.pixelsPerMeter,this.stepThresh=i.collider.height*u/this.pixelsPerMeter):i.collider.type==="sphere"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*i.collider.radius*d/this.pixelsPerMeter,this.stepThresh=2*i.collider.radius*u/this.pixelsPerMeter):(this.offset=i.collider.height*d/this.pixelsPerMeter,this.stepThresh=i.collider.height*u/this.pixelsPerMeter),this.collider.type=i.collider.type;let h=new N().fromArray(i.collider.position),f=new hi().setFromEuler(new Kr().fromArray([...i.collider.rotation,"XYZ"]));this.collider.position.copy(h).multiply(this.object.scale),this.collider.rotation.copy(f),this.collider.matrix.compose(h,f,EO),i.cameraXAxis!==void 0&&(this.cameraXAxis=i.cameraXAxis,this.cameraYAxis=i.cameraYAxis,this.minPolarAngle=i.cameraRotXLimits[0],this.maxPolarAngle=i.cameraRotXLimits[1],this.minAzimuthAngleRel=i.cameraRotYLimits[0],this.maxAzimuthAngleRel=i.cameraRotYLimits[1]),i.gameActions!==void 0&&Object.entries(i.gameActions).forEach(([g,p],x)=>{p.forEach(({id:b,data:S})=>{try{this.actions[g]===void 0&&(this.actions[g]=[]),S.type==="Transition"?this.actions[g].push(new Qd(S,a,l)):S.type==="Audio"?this.actions[g].push(new Yd(b,S,e,l)):S.type==="Video"&&this.actions[g].push(new By(b,S,e))}catch{}})}),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle")}reset(e=!1){if(this.object.rotation.copy(this.rotation0),this.object.position.copy(this.position0),this.object.scale.copy(this.scale0),this.object.hiddenMatrix.copy(this.hiddenMatrix0),e===!0){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.rotation.reorder("YXZ");let t=this.object.rotation.y;this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,t,0),this.rot.setFromEuler(this.object.rotation),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}e===!1&&(this.object instanceof Ka?this.object.matrixAutoUpdate=!0:this.object.updateMatrix()),this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.dispatchEvent(wb)}connect(){this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError)}dispose(){this.disconnect(),Object.values(this.actions).forEach(e=>{e.forEach(t=>{(t instanceof Qd||t instanceof Yd||t instanceof By)&&t.dispose()})})}resetTo(e,t,i){}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].forEach(t=>{t instanceof Qd?t.play():t instanceof Yd&&t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].forEach(t=>{t instanceof Qd?t.stop():t instanceof Yd&&t.dispatchGameControl("stop")}),this.object.traverseEntity(t=>{t.currentState!==null&&t.changeSelectedState(null,{scene:this.scene,shared:this.sharedAssets})})))}update(e,t,i){var a,l,c,d,u;if(this.gravity<0?this.object.position.y<this.resetYPosition:this.object.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let r=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let n=r*60,s=!1;if(this.usePhysics&&this.collisionEnabled){let h=Gn.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/10,1)*(this.gravity>0?1:-1):this.velocity.y)*r,0).divideScalar(this.pixelsPerMeter),f=this.sharedGameControlGlobals.rapierWorld.castShape(cn.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,h,(a=this.object.rigidBody)==null?void 0:a.collider(0).shape,1,8,void 0,void 0,this.object.rigidBody);if(f){this.onObject=!0,this.groundNormal.set(f.normal2.x,f.normal2.y,f.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(s=!0);let m=f.collider._parent;this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let v of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(v.rigidBody===m){(v.hasNonUniformScale?v.matrixWorldRigid:v.matrixWorld).decompose(cn,Ta,Gn),this.groundVelocity.subVectors(cn,v.prevT),this.object.getWorldPosition(Gn).add(this.collider.position).sub(v.position),this.groundYRotation=Lo.setFromQuaternion(Ta).y-v.prevR.y,El.copy(Gn).applyAxisAngle(io,this.groundYRotation),this.groundVelocity.add(El.sub(Gn)).divideScalar(r);break}}else this.onObject=!1}this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.velocityTarget.y+=this.onObject?0:this.gravity*n),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.directionXZ.normalize(),this.movementState.moveNegZ||this.movementState.movePosZ?this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce:this.velocityTarget.z=0,this.movementState.moveNegX||this.movementState.movePosX?this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce:this.velocityTarget.x=0,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**n),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**n),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**n)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("move")));let o=Dae.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let h=Gn.copy(o);h.y=0,o.set(0,o.y,h.length()*-1)}if(Lo.setFromVector3(this.rot),this.moveMode==="walk"&&(Lo.x=0),o.applyEuler(Lo),s&&(Ta.setFromUnitVectors(io,this.groundNormal),o.applyQuaternion(Ta)),i){let h=Lo.set(0,this.vrEulerYOffset*AO,0);i.applyEuler(h),o.x+=i.x,o.z+=i.z,this.nonColliderPosOffset.elements[13]+=i.y*r}if(this.usePhysics===!0){let h=Gn;this.pushedVelocity.set(0,0,0);for(let f of this.sharedGameControlGlobals.entitiesWithTransformAnim){let m=El.setFromMatrixPosition(f.matrixWorld).sub(f.prevT).divideScalar(r).divideScalar(this.pixelsPerMeter),v=f.rigidBody.collider(0).castCollider(m,this.object.rigidBody.collider(0),cn.copy(o).divideScalar(this.pixelsPerMeter),r);if(m.multiplyScalar(this.pixelsPerMeter),v!==null){this.pushedVelocity.copy(m),h.copy(v.normal1).applyQuaternion(f.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let f=h.dot(o);f<0&&o.addScaledVector(h,-f),o.add(this.pushedVelocity)}else o.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(r),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**n):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**n),this.euler.x+=this.rotVelocity.x*r,this.euler.y+=this.rotVelocity.y*r+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*r),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){let h=cn,f=Gn.copy(this.directionXZ);f.x*=-1,this.camera.getWorldDirection(h);let m=El.copy(io).multiplyScalar(h.dot(io));if(h.sub(m),this.orientWith==="camera"?this.rot.y=h.angleTo(f)*(h.cross(f).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera:this.rot.y=this.euler.y+Math.atan2(-this.directionXZ.z,this.directionXZ.x)-Math.PI/2,this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(io,this.euler.y-this.euler0.y);let v=Gn.copy(this.objectToCamXZ).normalize(),g=El.copy(o).multiplyScalar(r);g.y=0;let p=g.sub(cn.copy(v).multiplyScalar(g.dot(v))).cross(v).y;this.euler.y-=Math.atan2(p,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*r+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=Jt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Jt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=Jt.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(Lo.copy(t),Lo.y=0):(Lo.copy(this.euler),Lo.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Lo)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*AO),to.setFromAxisAngle(Lae,this.rot.x),Ta.setFromAxisAngle(io,this.rot.y),Ta.multiply(to),to.setFromAxisAngle(Iae,this.rot.z),Ta.multiply(to),this.object.quaternion.copy(Ta),this.objectRealQuat.multiplyQuaternions(this.object.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let h=Gn.copy(o).multiplyScalar(r/this.pixelsPerMeter),f;this.didHit=!1;let m=new N;for(let v=0;v<5;v++){let g=h.length(),p=El.copy(h).normalize();if(f=this.sharedGameControlGlobals.rapierWorld.castShape(cn.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter).add(m),this.colliderWorldQuat,p,(l=this.object.rigidBody)==null?void 0:l.collider(0).shape,g,8,void 0,void 0,this.object.rigidBody),f!==null){this.didHit=!0;let x=this.sharedGameControlGlobals.colliderToEntity[f.collider.handle];if(x!==this.lastHitObj&&v===0){this.lastHitObj=x;let y=this.sharedGameControlGlobals.eventsPerObjects[x==null?void 0:x.uuid];if(y)for(let C of y)C.data.target==="character"&&(x.dispatchEvent(z4),C.dispatch())}let b=bO.set(f.normal2.x,f.normal2.y,f.normal2.z).applyQuaternion(this.colliderWorldQuat),S=SO.copy(p).multiplyScalar(f.toi).dot(b),E=f.toi;if(E===0&&(this.object.position.y+=this.offset*this.pixelsPerMeter),S>this.offset&&(E=f.toi*(S-this.offset)/S,m.addScaledVector(p,E)),h.copy(p).multiplyScalar(g-E),Math.acos(-b.y)>this.slopeThresh){let y=cn.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter).add(m),C=El.copy(f.witness2).applyQuaternion(this.colliderWorldQuat);C.y=0;let A=y.add(C);A.y+=this.stepThresh;let D=this.sharedGameControlGlobals.rapierWorld.castShape(A,this.colliderWorldQuat,h,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,1,8,void 0,void 0,this.object.rigidBody);D!==null&&D.toi===0&&(b.y=0,b.normalize())}h.addScaledVector(b,-h.dot(b))}else{v===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),m.add(h);break}}this.object.position.addScaledVector(m,this.pixelsPerMeter),(d=this.object.rigidBody)==null||d.setTranslation(cn.copy(this.object.position).divideScalar(this.pixelsPerMeter),!0),(u=this.object.rigidBody)==null||u.setRotation(to.copy(this.object.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let h=this.onObject?1:5,f=o.multiplyScalar(r/h);for(let m=0;m<h;m++)this.object.position.add(f),this.collisionAdjustment(r/h)}else this.object.position.addScaledVector(o,r);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.object.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.updateMatrix(),this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.object.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let h=this.objectToTarget.add(this.object.position),f=this.targetToCamera.add(h);bb.lookAt(f,h,io).setPosition(f),bb.decompose(this.targetPos,this.targetQuat,cn),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**n),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**n),this.camera.updateMatrix(),this.camera.matrixWorldNeedsUpdate=!0,this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Jt.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Jt.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.lastPosition.distanceToSquared(this.object.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.object.position),this.object.dispatchEvent(Fae),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=to.setFromAxisAngle(io,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Jt.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=Jt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=Jt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let i=cn.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&i.applyQuaternion(e);let r=Ta.setFromAxisAngle(i,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(r)}groundTiltAdjustment(e){io.angleTo(e)*180/Math.PI<15||io.angleTo(e)*180/Math.PI>85?to.identity():to.setFromUnitVectors(io,e),this.groundTilt.slerp(to,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var n;let t=SO.set(0,0,0);this.object.updateMatrix();let i=bb.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(cn,to,Gn).compose(cn,to,EO);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(s=>{if(s===this.object||s.isDescendantOf(this.object))return;vs.makeEmpty(),s.updateMatrixWorldSVD();let o=s.matrixWorldRigid,a=_O.copy(o).invert(),l=Oae.copy(_O).multiply(i);qr.copy(this.collider.segment),qr.start.applyMatrix4(l),qr.end.applyMatrix4(l);let c=bO.copy(this.object.position).applyMatrix4(a);vs.expandByPoint(qr.start),vs.expandByPoint(qr.end),vs.min.addScalar(-this.collider.radius),vs.max.addScalar(this.collider.radius),s.boundsTree.shapecast({intersectsBounds:d=>d.intersectsBox(vs),intersectsTriangle:d=>{let u=cn,h=Gn,f=d.closestPointToSegment(qr,u,h);if(f<this.collider.radius){let m=this.collider.radius-f,v=h.sub(u).normalize(),g=El.copy(c);g.addScaledVector(v,m);let p=g.applyMatrix4(o).sub(this.object.position);t.add(p),qr.start.addScaledVector(v,m),qr.end.addScaledVector(v,m)}}})}),vs.makeEmpty(),qr.copy(this.collider.segment),qr.start.applyMatrix4(i),qr.end.applyMatrix4(i),vs.expandByPoint(qr.start),vs.expandByPoint(qr.end),vs.min.addScalar(-this.collider.radius),vs.max.addScalar(this.collider.radius),(n=this.sharedGameControlGlobals.staticMeshBVH)==null||n.shapecast({intersectsBounds:s=>s.intersectsBox(vs),intersectsTriangle:s=>{let o=cn,a=Gn,l=s.closestPointToSegment(qr,o,a);if(l<this.collider.radius){let c=this.collider.radius-l,d=a.sub(o).normalize();this.alignToGround&&this.groundTiltAdjustment(d),t.addScaledVector(d,c),qr.start.addScaledVector(d,c),qr.end.addScaledVector(d,c)}}}),this.onObject=t.y>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let r=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(r),this.object.position.add(t)}},F4=nE;F4.isLocked=!1;var Sb={type:"change"},CO={type:"changeZoom"},Uae={type:"changePan"},Xf={type:"start"},Yf={type:"end",changed:!0},jae={type:"end",changed:!1},_b=new hi,TO=new de,Hae=2*Math.PI,Gae=1e-8,Vae=.01,MO=2,Eb=.125,PO=2,Rv=1,Nv=1,Qf=.1,DO=new N,Bv=new de,U4=class extends kn{constructor(e,t,i=!1){super(),this.object=e,this.domElement=t,this.isExport=i,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,ps.DOLLY_ROTATE,ps.PAN],this.offset=new N,this.eye=new N,this.lastPosition=new N,this.lastQuaternion=new hi,this.current=new de,this.overShoot=new de,this.overRatio=new de,this.spherical=new mP,this.sphericalDelta=new mP,this.panOffset=new N,this.panLeftV=new N,this.panUpV=new N,this.panV=new N,this.rotateStart=new de,this.rotateEnd=new de,this.rotateDelta=new de,this.panStart=new de,this.panEnd=new de,this.panDelta=new de,this.dollyStart=new de,this.dollyEnd=new de,this.dollyDelta=new de,this.rotationRangeFactor=new de,this.panRangeFactor=new de,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.update=()=>{let r=this.object.position;this.offset.copy(r).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(_b.copy(this.object.quaternion).invert()),this.panOffset.applyQuaternion(_b),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(this.object.quaternion),this.panOffset.applyQuaternion(this.object.quaternion)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-Eb),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),r.copy(this.target).add(this.offset);let n=this.spherical.phi%Hae;return this.eye.copy(this.offset).normalize(),this.object.up.copy(Di.DefaultUp).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),n>0&&n>Math.PI||n<0&&n>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0?(this.sphericalDelta.theta*=1-Eb,this.sphericalDelta.phi*=1-Eb):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>Vae||8*(1-this.lastQuaternion.dot(this.object.quaternion))>Gae?(this.dispatchEvent(Sb),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=r=>{this.enabled!==!1&&(r.pointerType==="touch"||r.pointerType==="pen"&&fn?this.onPointerDownTouch(r):this.onPointerDownMouse(r),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(Xf),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),r.stopPropagation(),r.pointerType==="touch"||r.pointerType==="pen"&&fn||this.domElement.setPointerCapture(r.pointerId)))},this.onPointerLeave=r=>{this.resetHoverEffectOnPointerLeave?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,DO.subVectors(this.position0,this.target0),this.spherical.setFromVector3(DO),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=r},this.onPointerEnter=r=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?Bv.set(r.clientX-this.domElement.clientWidth/2,r.clientY-this.domElement.clientHeight/2):Bv.set(r.clientX-this.pointerLeaveEvent.clientX,r.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(Bv).multiplyScalar(Rv*Qf).rotateAround(TO,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(r.clientX,r.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(Bv).multiplyScalar(Nv*Qf),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(r.clientX,r.clientY)),this.update()},this.onPointerMove=r=>{this.enabled!==!1&&(r.pointerType==="touch"||r.pointerType==="pen"&&fn?this.onPointerMoveTouch(r):this.onPointerMoveMouse(r),r.stopPropagation())},this.onPointerUp=r=>{this.isPointerDown=!1,Ht.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),this.hasChange?this.dispatchEvent(Yf):this.dispatchEvent(jae),this.state=-1,r&&(r.stopPropagation(),r.pointerType==="touch"||r.pointerType==="pen"&&fn||this.domElement.releasePointerCapture(r.pointerId))},this.onPointerDownMouse=r=>{let n;switch(this.useKeyEvents?n=this.mouseButtons[r.button]:n=this.mouseButtonsPlay[r.button],n){case 0:if(r.altKey===!0&&!r.shiftKey&&!lv(r)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2;break;case 3:if(lv(r)||r.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}break;case 5:if(lv(r)||r.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=r=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(r);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(r);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(r);break}},this.onPointerDownTouch=r=>{switch(this.touches[Ht.length-1]){case ps.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case ps.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case ps.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case ps.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=r=>{switch(this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(r),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(r),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(r),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(r),this.update();break;default:this.state=-1}},this.dispatchEndDebounced=uB(()=>this.dispatchEvent(Yf),33),this.onMouseWheel=r=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||(this.isExport===!1&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&r.preventDefault(),this.dispatchEvent(Xf),this.handleMouseWheel(r),this.dispatchEndDebounced())},this.onGesture=r=>{if(this.enabled!==!1)if(r.preventDefault(),r.type==="gesturechange"){if(this.enableZoom===!1)return;this.dispatchEvent(Xf),r.scale>this.prevScale?this.dollyIn(this.getZoomScale()):r.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=r.scale,this.update()}else this.dispatchEvent(Yf)},this.onContextMenu=r=>{this.enabled!==!1&&r.preventDefault()},this.onTouchEnd=r=>{r.preventDefault()},this.onKeyDown=r=>{this.enabled!==!1&&(this.key=r.key)},this.onKeyUp=()=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&this.onPointerUp(Ht[0]))},this.onPointerHover=r=>{r.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(r,Qf):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(r,Qf))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset)}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.isUpVectorFlipped=this.isUpVectorFlipped0,this.object.updateProjectionMatrix(),this.dispatchEvent(Sb),this.update(),this.state=-1,this.pointerLeaveEvent=void 0}resetTo(e,t,i,r=!1){this.target.copy(e),this.object.position.copy(t),this.object.zoom=i,this.object.isUpVectorFlipped=r,this.object.updateProjectionMatrix(),this.dispatchEvent(Sb),this.update(),this.state=-1}fromJSON(e){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotatePanMode!==0&&this.domElement.addEventListener("pointermove",this.onPointerHover),Qf=(e.hoverRotatePanStrength/100)**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,MO=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let t=this.object.getTarget().applyQuaternion(_b.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+t.y,this.maxV=e.panVerticalOffset.max+t.y,this.minH=-e.panHorizontalOffset.min+t.x,this.maxH=e.panHorizontalOffset.max+t.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Al(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Al(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Al(this.spherical.theta-e.rotationHorizontalOffset.min),this.maxTheta=Al(this.spherical.theta+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=ps.ROTATE),e.panTouches===1&&(this.touches[0]=ps.PAN),e.orbitTouches===2&&(this.touches[1]=ps.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=ps.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=ps.ROTATE),e.panTouches===3&&(this.touches[2]=ps.PAN),this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),C_||(this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture)),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&(this.domElement.addEventListener("pointerleave",this.onPointerLeave),this.domElement.addEventListener("pointerenter",this.onPointerEnter)),this.pointerLeaveEvent=void 0}dispose(){this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),C_||(this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture)),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,i,r,n,s,o,a){this.overShoot.set(0,0);let l,c,d;e instanceof N?(l=e.x,c=e.y,this.current.set(this.target.x,this.target.y),d=!0):(l=e.theta,c=e.phi,this.current.set(Al(this.spherical.theta),Al(this.spherical.phi)),d=!1),i===0&&(this.current.x+=l,this.current.y+=c),(t===3||t===2)&&(!d&&this.isThetaFlipped?this.current.x>r&&this.current.x<0?this.overShoot.x=r-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>r?this.overShoot.x=r-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x),r===n&&(l=0)),(t===3||t===1)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<o&&(this.overShoot.y=o-this.current.y),s===o&&(c=0)),d||(this.overShoot.x=Al(this.overShoot.x),this.overShoot.y=Al(this.overShoot.y)),i!==0?(this.overRatio.copy(this.overShoot).divide(a),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),i===1&&(this.overRatio.x=OO(Math.abs(this.overRatio.x)),this.overRatio.y=OO(Math.abs(this.overRatio.y))),this.isPointerDown||i===1?i===2&&(this.overRatio.x>.9||this.overRatio.y>.9)?this.isPointerDown=!1:(l*this.overShoot.x<0&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&(c*=1-this.overRatio.y)):i===2&&(!d&&(this.overRatio.x>.002||this.overRatio.y>.002)||d&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(l=this.overShoot.x*.05,c=this.overShoot.y*.05,d?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):d?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),e instanceof N?(e.x=l,e.y=c):(e.theta=l,e.phi=c)}setEnableDampingSpeed(e){this.enableDamping=e,Rv=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*MO}getZoomScale(){return Math.pow(.95,PO)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let i=this.domElement;if(i&&this.object.isPerspectiveCamera){let r=this.object.position;this.panV.copy(r).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/i.clientHeight,this.object.matrix),this.panUp(2*t*n/i.clientHeight,this.object.matrix)}else i&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix));this.dispatchEvent(Uae)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(CO)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(CO)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(Xf),this.dollyOut(e),this.dispatchEvent(Yf)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(Xf),this.dollyIn(e),this.dispatchEvent(Yf)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){by&&Sy<15.5&&!fn?(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)):this.rotateDelta.set(e.movementX,e.movementY),this.rotateDelta.multiplyScalar(Rv*t).rotateAround(TO,-this.object.angleOffsetFromUp);let i=this.domElement;this.rotateLeft(2*Math.PI*this.rotateDelta.x/i.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/i.clientHeight),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){by&&Sy<15.5&&!fn?(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)):this.panDelta.set(e.movementX,e.movementY),this.panDelta.multiplyScalar(Nv*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if($ee===!1&&lv(e)===!1&&Wae(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(Nv),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(Ht.length===2){let e=.5*(Ht[0].pageX+Ht[1].pageX),t=.5*(Ht[0].pageY+Ht[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(Ht[0].pageX,Ht[0].pageY)}handleTouchStartPan(){if(Ht.length===2){let e=.5*(Ht[0].pageX+Ht[1].pageX),t=.5*(Ht[0].pageY+Ht[1].pageY);this.panStart.set(e,t)}else this.panStart.set(Ht[0].pageX,Ht[0].pageY)}handleTouchStartDolly(){let e=Ht[0].pageX-Ht[1].pageX,t=Ht[0].pageY-Ht[1].pageY,i=Math.sqrt(e*e+t*t);this.dollyStart.set(0,i)}handleTouchStartDollyPan(){this.enableZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(Ht.length===2){let i=Fw(e),r=.5*(e.pageX+i.x),n=.5*(e.pageY+i.y);this.rotateEnd.set(r,n)}else{if(e.pointerId!==Ht[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(Rv);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(Ht.length===2){let t=Fw(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this.panEnd.set(i,r)}else{if(e.pointerId!==Ht[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(Nv),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=Fw(e),i=e.pageX-t.x,r=e.pageY-t.y,n=Math.sqrt(i*i+r*r);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,PO)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}};function Al(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function OO(e){return 1-Math.pow(1-e,4)}function Wae(e){return e.wheelDeltaY===0||e.deltaY===0?D1&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:e.deltaMode===0}var Ab=new WeakMap,qae=class extends j2{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){let n=new JS(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,s=>{let o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(s,o).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){let n={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){for(let a in t.attributeTypes){let l=t.attributeTypes[a];l.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[a]=l.name)}let i=JSON.stringify(t);if(Ab.has(e)){let a=Ab.get(e);if(a.key===i)return a.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,n=this.workerNextTaskID++,s=e.byteLength,o=this._getWorker(n,s).then(a=>(r=a,new Promise((l,c)=>{r._callbacks[n]={resolve:l,reject:c},r.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(a=>this._createGeometry(a.geometry));return o.catch(()=>!0).then(()=>{r&&n&&this._releaseTask(r,n)}),Ab.set(e,{key:i,promise:o}),o}_createGeometry(e){let t=new It;e.index&&t.setIndex(new Gt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let r=e.attributes[i],n=r.name,s=r.array,o=r.itemSize;t.setAttribute(n,new Gt(s,o))}return t}_loadLibrary(e,t){let i=new JS(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,n)=>{i.load(e,r,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{let r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);let n=Xae.toString(),s=["/* draco decoder */",r,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(n){let s=n.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,n){return r._taskLoad>n._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}};function Xae(){let e,t;onmessage=function(o){let a=o.data;switch(a.type){case"init":e=a.decoderConfig,t=new Promise(function(d){e.onModuleLoaded=function(u){d({draco:u})},DracoDecoderModule(e)});break;case"decode":let l=a.buffer,c=a.taskConfig;t.then(d=>{let u=d.draco,h=new u.Decoder,f=new u.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let m=i(u,h,f,c),v=m.attributes.map(g=>g.array.buffer);m.index&&v.push(m.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:m},v)}catch(m){console.error(m),self.postMessage({type:"error",id:a.id,error:m.message})}finally{u.destroy(f),u.destroy(h)}});break}};function i(o,a,l,c){let d=c.attributeIDs,u=c.attributeTypes,h,f,m=a.GetEncodedGeometryType(l);if(m===o.TRIANGULAR_MESH)h=new o.Mesh,f=a.DecodeBufferToMesh(l,h);else if(m===o.POINT_CLOUD)h=new o.PointCloud,f=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let v={index:null,attributes:[]};for(let g in d){let p=self[u[g]],x,b;if(c.useUniqueIDs)b=d[g],x=a.GetAttributeByUniqueId(h,b);else{if(b=a.GetAttributeId(h,o[d[g]]),b===-1)continue;x=a.GetAttribute(h,b)}v.attributes.push(n(o,a,h,g,p,x))}return m===o.TRIANGULAR_MESH&&(v.index=r(o,a,h)),o.destroy(h),v}function r(o,a,l){let c=l.num_faces()*3,d=c*4,u=o._malloc(d);a.GetTrianglesUInt32Array(l,d,u);let h=new Uint32Array(o.HEAPF32.buffer,u,c).slice();return o._free(u),{array:h,itemSize:1}}function n(o,a,l,c,d,u){let h=u.num_components(),f=l.num_points()*h,m=f*d.BYTES_PER_ELEMENT,v=s(o,d),g=o._malloc(m);a.GetAttributeDataArrayForAllPoints(l,u,v,m,g);let p=new d(o.HEAPF32.buffer,g,f).slice();return o._free(g),{name:c,array:p,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var Xl;function Yae(){return Xl||(Xl=new qae,Xl.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),Xl.decoderPending}async function Qae(e){if(Xl){let t={attributeIDs:Xl.defaultAttributeIDs,attributeTypes:Xl.defaultAttributeTypes,useUniqueIDs:!1},i;try{i=await Xl.decodeGeometry(new Int8Array(e).buffer,t)}catch(r){console.error(r)}if(i)return{index:i.index?{array:i.index.array}:void 0,attributes:Object.entries(i.attributes).map(([r,n])=>({name:r,itemSize:n.itemSize,array:n.array}))}}return null}async function Kae(e,t){let[i,r]=xB(p_.deserialize(new Uint8Array(e)));Pte(i);let n=[];i.scene.objects.traverse((s,o)=>{o.type==="Mesh"&&o.geometry.type==="NonParametricGeometry"&&o.geometry.data.draco!==void 0&&n.push(o)}),n.length&&await Yae();for(let s of n){let o=await Qae($r(s.geometry.data.draco));if(o){o.index&&(s.geometry.data.index={array:o.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let a={};o.attributes.forEach(({name:l,array:c,itemSize:d})=>{a[l]={array:c,itemSize:d,type:"Float32Array",normalized:!1}}),s.geometry.data.attributes=a,s.geometry.data.draco=void 0}}return t&&t(i),r.result().data}var LO=Object.keys(p4).filter(e=>isNaN(Number(e))),Zae=class{constructor(e,t,i,r,n,s,o,a,l,c){this.preventScroll=n,this.hideCursor=s,this.requestRender=a,this.isEnable=!1,this.onResetRaycaster=()=>{this.eventContext.raycasterNeedsUpdate=!0},this.onTouchMovePreventScroll=d=>{(d.touches.length>1||this.preventScroll)&&d.preventDefault()},this.onMouseWheelPreventScroll=d=>{this.preventScroll&&d.preventDefault()},this.eventContext=new Vse(e,t,i,o,r,c??!1),this.handlers={Spline:new tae(this.eventContext),Conditional:new lae(this.eventContext),Start:new _ae(this.eventContext),Basic:new rae(this.eventContext,l,this),MouseHover:new xae(this.eventContext),Scroll:new bae(this.eventContext),Follow:new hae(this.eventContext),LookAt:new vae(this.eventContext)}}activate(){let{scene:e,domElement:t}=this.eventContext;this.hideCursor&&(t.style.cursor="none"),this.isEnable=!0,e.traverseEntity(i=>{i.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(i=>i.connect()),LO.forEach(i=>{Object.values(this.handlers).some(r=>r.domEventsNeeded.has(i))&&t.addEventListener(i,this.onResetRaycaster)}),t.addEventListener("wheel",this.onMouseWheelPreventScroll),t.addEventListener("touchmove",this.onTouchMovePreventScroll)}deactivate(){let{scene:e,domElement:t}=this.eventContext;this.isEnable=!1,t.style.cursor="",Object.values(this.handlers).forEach(i=>i.disconnect()),e.traverseEntity(i=>{i.removeEventListener("requestRender",this.requestRender)}),LO.forEach(i=>{t.removeEventListener(i,this.onResetRaycaster)}),t.removeEventListener("touchmove",this.onTouchMovePreventScroll),t.removeEventListener("wheel",this.onMouseWheelPreventScroll)}reset(){this.deactivate(),this.activate()}},$ae=class{constructor(e,t,i,r,n){this._aspect=1,this._renderer=e,this._camera=t,this._frameSize=new de().copy(i),this._editorSize=new de().copy(r),this._aspect=t.aspect,this._fov=n??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,i=this._editorSize.x,r=this._editorSize.y;this._aspect=e/t,this._camera.zoom*=Math.min(i/e,r/t),this._renderer.setViewport(0,0,e,t)}updateCamera(){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let e=this._frameSize.y,t=this._editorSize.y,i=this._fov;if(e>t){let r=Jae(e,1080,2160,1,15)/100;i*=e/t,i*=1-r}this._camera.aspect=this._aspect,this._camera.fov=i,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t),this._camera.updateProjectionMatrix())}};function Jae(e,t,i,r,n){return(e-t)/(i-t)*(n-r)+r}var j4={RED:0,GREEN:1,BLUE:2,ALPHA:3},Hm="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",ele=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,kv=class extends _r{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new gt(null),kernel16:new gt(null),inputBuffer:new gt(null),cocBuffer:new gt(null),texelSize:new gt(new de),scale:new gt(1)},blending:Nr,depthWrite:!1,depthTest:!1,fragmentShader:ele,vertexShader:Hm}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),i=new Float32Array(32),r=0,n=0;for(let a=0;a<80;++a){let l=a*e,c=Math.sqrt(a)/Math.sqrt(80),d=c*Math.cos(l),u=c*Math.sin(l);a%5===0?(i[n++]=d,i[n++]=u):(t[r++]=d,t[r++]=u)}let s=[],o=[];for(let a=0;a<128;)s.push(new Qt(t[a++],t[a++],t[a++],t[a++]));for(let a=0;a<32;)o.push(new Qt(i[a++],i[a++],i[a++],i[a++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=o}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function IO(e,t,i){return e*(t-i)-t}function sE(e,t,i){return Math.min(Math.max((e+t)/(t-i),0),1)}var tle=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,ile=class extends _r{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new gt(null),focusDistance:new gt(0),focusRange:new gt(0),cameraNear:new gt(.3),cameraFar:new gt(1e3)},blending:Nr,depthWrite:!1,depthTest:!1,fragmentShader:tle,vertexShader:Hm}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=tl){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-IO(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=sE(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-IO(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=sE(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Qr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},rle=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,nle="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",RO=class extends _r{constructor(e=new de){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new gt(null),texelSize:new gt(new de),halfTexelSize:new gt(new de),kernel:new gt(0),scale:new gt(1)},blending:Nr,depthWrite:!1,depthTest:!1,fragmentShader:rle,vertexShader:nle}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.halfTexelSize.value.copy(i.texelSize.value).multiplyScalar(.5)}},sle=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,ole=class extends _r{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new gt(null),opacity:new gt(1)},blending:Nr,depthWrite:!1,depthTest:!1,fragmentShader:sle,vertexShader:Hm}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},ale=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,lle=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,YA={DEPTH:0,LUMA:1,COLOR:2},H4={DISABLED:0,DEPTH:1,CUSTOM:2},cle=class extends _r{constructor(e=new de,t=YA.COLOR){super({name:"EdgeDetectionMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new gt(null),depthBuffer:new gt(null),predicationBuffer:new gt(null),texelSize:new gt(e)},blending:Nr,depthWrite:!1,depthTest:!1,fragmentShader:ale,vertexShader:lle}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=tl){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},ule=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,dle="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",ro={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},oE=class extends _r{constructor(e,t,i,r,n=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Dm.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new gt(null),depthBuffer:new gt(null),resolution:new gt(new de),texelSize:new gt(new de),cameraNear:new gt(.3),cameraFar:new gt(1e3),aspect:new gt(1),time:new gt(0)},blending:Nr,depthWrite:!1,depthTest:!1,dithering:n}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),i&&this.setUniforms(i),this.adoptCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=tl){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=ule.replace(ro.FRAGMENT_HEAD,e.get(ro.FRAGMENT_HEAD)).replace(ro.FRAGMENT_MAIN_UV,e.get(ro.FRAGMENT_MAIN_UV)).replace(ro.FRAGMENT_MAIN_IMAGE,e.get(ro.FRAGMENT_MAIN_IMAGE)),this.vertexShader=dle.replace(ro.VERTEX_HEAD,e.get(ro.VERTEX_HEAD)).replace(ro.VERTEX_MAIN_SUPPORT,e.get(ro.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Qr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let i=this.uniforms;i.resolution.value.set(e,t),i.texelSize.value.set(1/e,1/t),i.aspect.value=e/t}static get Section(){return ro}},hle=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,fle=class extends _r{constructor(e=!1,t=null){super({name:"LuminanceMaterial",uniforms:{inputBuffer:new gt(null),threshold:new gt(0),smoothing:new gt(1),range:new gt(null)},blending:Nr,depthWrite:!1,depthTest:!1,fragmentShader:hle,vertexShader:Hm}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},ple=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,G4={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},mle=class extends _r{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new gt(e),inputBuffer:new gt(null),strength:new gt(1)},blending:Nr,depthWrite:!1,depthTest:!1,fragmentShader:ple,vertexShader:Hm}),this.toneMapped=!1,this.setColorChannel(j4.RED),this.setMaskFunction(G4.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==en&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},gle=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,vle="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",yle=class extends _r{constructor(e=new de,t=new de){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new gt(null),searchTexture:new gt(null),areaTexture:new gt(null),resolution:new gt(t),texelSize:new gt(e)},blending:Nr,depthWrite:!1,depthTest:!1,fragmentShader:gle,vertexShader:vle}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.resolution.value.set(e,t)}},xle=new zh,Cl=null;function wle(){if(Cl===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);Cl=new It,Cl.setAttribute!==void 0?(Cl.setAttribute("position",new Gt(e,3)),Cl.setAttribute("uv",new Gt(t,2))):(Cl.addAttribute("position",new Gt(e,3)),Cl.addAttribute("uv",new Gt(t,2)))}return Cl}var Fs=class{constructor(e="Pass",t=new fu,i=xle){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new $n(wle(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new fu),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=tl){}render(e,t,i,r,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof fu||t===this.renderer)continue;this[e].dispose()}}}},zy=class extends Fs{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new ole,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new lr(1,1,{minFilter:vi,magFilter:vi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,i,r,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,i){i!==void 0&&(this.renderTarget.texture.type=i,i!==en?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===Yt&&(this.renderTarget.texture.encoding=Yt))}},ble=class extends Fs{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,i,r,n){let s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},Cb=new Lt,U1=class extends Fs{constructor(e=!0,t=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,i){this.color=e,this.depth=t,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,i,r,n){let s=this.overrideClearColor,o=this.overrideClearAlpha,a=e.getClearAlpha(),l=s!==null,c=o>=0;l?(Cb.copy(e.getClearColor(Cb)),e.setClearColor(s,c?o:a)):c&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(Cb,a):c&&e.setClearAlpha(a)}},Tl=-1,Ln=class extends kn{constructor(e,t=Tl,i=Tl,r=1){super(),this.resizable=e,this.base=new de(1,1),this.preferred=new de(t,i),this.target=this.preferred,this.s=r}get width(){let{base:e,preferred:t,scale:i}=this,r;return t.width!==Tl?r=t.width:t.height!==Tl?r=Math.round(t.height*(e.width/Math.max(e.height,1))):r=Math.round(e.width*i),r}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:i}=this,r;return t.height!==Tl?r=t.height:t.width!==Tl?r=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r=Math.round(e.height*i),r}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Tl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Tl}},Tb=!1,NO=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let i;if(t.material.flatShading)switch(t.material.side){case lo:i=this.materialsFlatShadedDoubleSide;break;case Zr:i=this.materialsFlatShadedBackSide;break;default:i=this.materialsFlatShaded;break}else switch(t.material.side){case lo:i=this.materialsDoubleSide;break;case Zr:i=this.materialsBackSide;break;default:i=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=i[2]:t.isInstancedMesh?t.material=i[1]:t.material=i[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let i of t)i.uniforms=Object.assign({},e.uniforms),i.side=hc;t[2].skinning=!0,this.materialsBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=Zr,r}),this.materialsDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=lo,r}),this.materialsFlatShaded=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=Zr,r}),this.materialsFlatShadedDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=lo,r})}}render(e,t,i){let r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,Tb){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,i);for(let s of n)s[0].material=s[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,i),t.overrideMaterial=n}e.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Tb}static set workaroundEnabled(e){Tb=e}},Sle=class extends Fs{constructor(e,t,i=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new U1,this.overrideMaterialManager=i===null?null:new NO(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new NO(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,i,r,n){let s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,d=e.shadowMap.autoUpdate,u=this.renderToScreen?null:t;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(u),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,s,o):e.render(s,o),o.layers.mask=l,s.background=c,e.shadowMap.autoUpdate=d}},BO=class extends Fs{constructor(e,t,{resolutionScale:i=1,width:r=Ln.AUTO_SIZE,height:n=Ln.AUTO_SIZE,renderTarget:s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new Sle(e,t,new hN({depthPacking:JR}));let o=this.renderPass;o.skipShadowMapUpdate=!0,o.ignoreBackground=!0;let a=o.getClearPass();a.overrideClearColor=new Lt(16777215),a.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new lr(1,1,{minFilter:Qi,magFilter:Qi,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new Ln(this,r,n,i);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,n){let s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,s)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}},oi={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},_le="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",Ele="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",Ale="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",Cle="float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Tle="float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Mle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",Ple="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",Dle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Ole="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",Lle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",Ile="float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Rle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Nle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Ble="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",kle="float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",zle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",Fle="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Ule="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",jle=new Map([[oi.SKIP,null],[oi.ADD,_le],[oi.ALPHA,Ele],[oi.AVERAGE,Ale],[oi.COLOR_BURN,Cle],[oi.COLOR_DODGE,Tle],[oi.DARKEN,Mle],[oi.DIFFERENCE,Ple],[oi.EXCLUSION,Dle],[oi.LIGHTEN,Ole],[oi.MULTIPLY,Lle],[oi.DIVIDE,Ile],[oi.NEGATION,Rle],[oi.NORMAL,Nle],[oi.OVERLAY,Ble],[oi.REFLECT,kle],[oi.SCREEN,zle],[oi.SOFT_LIGHT,Fle],[oi.SUBTRACT,Ule]]),Hle=class extends kn{constructor(e,t=1){super(),this.f=e,this.opacity=new gt(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return jle.get(this.blendFunction)}},Jo={NONE:0,DEPTH:1,CONVOLUTION:2},ca=class extends kn{constructor(e,t,{attributes:i=Jo.NONE,blendFunction:r=oi.SCREEN,defines:n=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=e,this.renderer=null,this.attributes=i,this.fragmentShader=t,this.vertexShader=a,this.defines=n,this.uniforms=s,this.extensions=o,this.blendMode=new Hle(r),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=tl){}update(e,t,i){}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof fu||t===this.renderer)continue;this[e].dispose()}}}};function kO(e,t,i){for(let r of t){let n="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(let o of i.entries())o[1]!==null&&i.set(o[0],o[1].replace(s,n))}}function Gle(e,t,i,r,n,s,o){let a=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=a.get("fragment")!==void 0&&/mainImage/.test(a.get("fragment")),c=a.get("fragment")!==void 0&&/mainUv/.test(a.get("fragment")),d=[],u=[],h=!1,f=!1;if(a.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(c&&o&Jo.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!c)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let m=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,v=oE.Section;if(c){let p=`	${e}MainUv(UV);
`;i.set(v.FRAGMENT_MAIN_UV,i.get(v.FRAGMENT_MAIN_UV)+p),h=!0}if(a.get("vertex")!==null&&/mainSupport/.test(a.get("vertex"))){let p=`	${e}MainSupport(`;p+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(a.get("vertex"))?`vUv);
`:`);
`,i.set(v.VERTEX_MAIN_SUPPORT,i.get(v.VERTEX_MAIN_SUPPORT)+p),d=d.concat([...a.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(x=>x[1])),u=u.concat(d).concat([...a.get("vertex").matchAll(m)].map(x=>x[1]))}u=u.concat([...a.get("fragment").matchAll(m)].map(p=>p[1])),u=u.concat([...t.defines.keys()].map(p=>p.replace(/\([\w\s,]*\)/g,""))),u=u.concat([...t.uniforms.keys()]),t.uniforms.forEach((p,x)=>s.set(e+x.charAt(0).toUpperCase()+x.slice(1),p)),t.defines.forEach((p,x)=>n.set(e+x.charAt(0).toUpperCase()+x.slice(1),p)),kO(e,u,n),kO(e,u,a);let g=t.blendMode;if(r.set(g.blendFunction,g),l){let p=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,x=`${e}MainImage(color0, UV, `;o&Jo.DEPTH&&p.test(a.get("fragment"))&&(x+="depth, ",f=!0),x+=`color1);
	`;let b=e+"BlendOpacity";s.set(b,g.opacity),x+=`color0 = blend${g.blendFunction}(color0, color1, ${b});

	`,i.set(v.FRAGMENT_MAIN_IMAGE,i.get(v.FRAGMENT_MAIN_IMAGE)+x),x=`uniform float ${b};

`,i.set(v.FRAGMENT_HEAD,i.get(v.FRAGMENT_HEAD)+x)}i.set(v.FRAGMENT_HEAD,i.get(v.FRAGMENT_HEAD)+a.get("fragment")+`
`),a.get("vertex")!==null&&i.set(v.VERTEX_HEAD,i.get(v.VERTEX_HEAD)+a.get("vertex")+`
`)}return{varyings:d,transformedUv:h,readDepth:f}}var Mb=class extends Fs{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new oE(null,null,null,e),this.effects=t.sort((i,r)=>r.attributes-i.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=oE.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),i=new Map,r=new Map,n=new Map,s=new Set,o=0,a=0,l=0,c=!1,d=!1;for(let h of this.effects)if(h.blendMode.blendFunction===oi.SKIP)l|=h.getAttributes()&Jo.DEPTH;else if(l&h.getAttributes()&Jo.CONVOLUTION)console.error("Convolution effects cannot be merged",h);else{l|=h.getAttributes();let f="e"+o++,m=Gle(f,h,t,i,r,n,l);if(a+=m.varyings.length,c=c||m.transformedUv,d=d||m.readDepth,h.extensions!==null)for(let v of h.extensions)s.add(v)}let u=/\bblend\b/g;for(let h of i.values()){let f=h.getShaderCode().replace(u,`blend${h.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+f+`
`)}if(l&Jo.DEPTH){if(d){let h=`float depth = readDepth(UV);

	`;t.set(e.FRAGMENT_MAIN_IMAGE,h+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(c){let h=`vec2 transformedUv = vUv;
`;t.set(e.FRAGMENT_MAIN_UV,h+t.get(e.FRAGMENT_MAIN_UV)),r.set("UV","transformedUv")}else r.set("UV","vUv");t.forEach((h,f,m)=>m.set(f,h.trim().replace(/^#/,`
#`))),this.uniformCount=n.size,this.varyingCount=a,this.skipRendering=o===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(s).setUniforms(n).setDefines(r)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=tl){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let i of this.effects)i.setDepthTexture(e,t)}render(e,t,i,r,n){for(let s of this.effects)s.update(e,t,r);if(!this.skipRendering||this.renderToScreen){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,s.time+=r,e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let i of this.effects)i.setSize(e,t)}initialize(e,t,i){this.renderer=e;for(let r of this.effects)r.initialize(e,t,i),r.addEventListener("change",n=>this.handleEvent(n));this.updateMaterial(),this.verifyResources(),i!==void 0&&i!==en&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},Vle=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],V4=class extends Fs{constructor({resolutionScale:e=.5,width:t=Ln.AUTO_SIZE,height:i=Ln.AUTO_SIZE,kernelSize:r=QA.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new lr(1,1,{minFilter:vi,magFilter:vi,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let n=this.resolution=new Ln(this,t,i,e);n.addEventListener("change",s=>this.setSize(n.baseWidth,n.baseHeight)),this.blurMaterial=new RO,this.ditheredBlurMaterial=new RO,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=r}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,n){let s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=Vle[this.kernelSize],d=this.blurMaterial,u=t,h,f;for(this.fullscreenMaterial=d,h=0,f=c.length-1;h<f;++h){let m=h&1?l:a;d.kernel=c[h],d.inputBuffer=u.texture,e.setRenderTarget(m),e.render(s,o),u=m}this.dithering&&(d=this.ditheredBlurMaterial,this.fullscreenMaterial=d),d.kernel=c[h],d.inputBuffer=u.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(s,o)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,n=i.height;this.renderTargetA.setSize(r,n),this.renderTargetB.setSize(r,n),this.blurMaterial.setSize(r,n),this.ditheredBlurMaterial.setSize(r,n)}initialize(e,t,i){i!==void 0&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==en?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===Yt&&(this.renderTargetA.texture.encoding=Yt,this.renderTargetB.texture.encoding=Yt))}static get AUTO_SIZE(){return Ln.AUTO_SIZE}},Wle=class extends Fs{constructor({width:e=Ln.AUTO_SIZE,height:t=Ln.AUTO_SIZE,renderTarget:i,luminanceRange:r,colorOutput:n}={}){super("LuminancePass"),this.fullscreenMaterial=new fle(n,r),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new lr(1,1,{minFilter:vi,magFilter:vi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let s=this.resolution=new Ln(this,e,t);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,i,r,n){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}initialize(e,t,i){i!==void 0&&i!==en&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},qle=class extends Fs{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new U1(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,i,r,n){let s=e.getContext(),o=e.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,d=this.inverted?0:1,u=1-d;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,d,4294967295),o.stencil.setClear(u),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,i))),this.renderToScreen?(e.setRenderTarget(null),e.render(a,l)):(e.setRenderTarget(t),e.render(a,l),e.setRenderTarget(i),e.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},Ol=class extends Fs{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,i,r,n){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}initialize(e,t,i){i!==void 0&&i!==en&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Pb=1/1e3,Xle=1e3,Yle=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*Pb}getFixedDelta(){return this.fixedDelta*Pb}setFixedDelta(e){return this.fixedDelta=e*Xle,this}getElapsed(){return this.elapsed*Pb}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},Qle=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:n}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,i,n,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new zy,this.depthTexture=null,this.passes=[],this.timer=new Yle,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){let t=e.getSize(new de),i=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===en&&e.outputEncoding===Yt&&(this.inputBuffer.texture.encoding=Yt,this.outputBuffer.texture.encoding=Yt,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(let n of this.passes)n.initialize(e,i,r)}}replaceRenderer(e,t=!0){let i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){let e=this.depthTexture=new N2;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Au,e.type=uu):e.type=Fl,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,r){let n=this.renderer,s=n===null?new de:n.getDrawingBufferSize(new de),o={minFilter:vi,magFilter:vi,stencilBuffer:t,depthBuffer:e,type:i},a;return r>0?(a=Number(Dm.replace(/\D+/g,""))<138?new aq(s.width,s.height,o):new lr(s.width,s.height,o),a.ignoreDepthForMultisampleCopy=!1,a.samples=r):a=new lr(s.width,s.height,o),i===en&&n!==null&&n.outputEncoding===Yt&&(a.texture.encoding=Yt),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}addPass(e,t){let i=this.passes,r=this.renderer,n=r.getDrawingBufferSize(new de),s=r.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(n.width,n.height),e.initialize(r,s,o),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let a=this.createDepthTexture();for(e of i)e.setDepthTexture(a)}else e.setDepthTexture(this.depthTexture)}removePass(e){let t=this.passes,i=t.indexOf(e);if(i!==-1&&t.splice(i,1).length>0){if(this.depthTexture!==null){let r=(n,s)=>n||s.needsDepthTexture;t.reduce(r,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,i=this.copyPass,r=this.inputBuffer,n=this.outputBuffer,s=!1,o,a,l;e===void 0&&(e=this.timer.update().getDelta());for(let c of this.passes)c.enabled&&(c.render(t,r,n,e,s),c.needsSwap&&(s&&(i.renderToScreen=c.renderToScreen,o=t.getContext(),a=t.state.buffers.stencil,a.setFunc(o.NOTEQUAL,1,4294967295),i.render(t,r,n,e,s),a.setFunc(o.EQUAL,1,4294967295)),l=r,r=n,n=l),c instanceof qle?s=!0:c instanceof ble&&(s=!1))}setSize(e,t,i){let r=this.renderer;if(e===void 0||t===void 0){let s=r.getSize(new de);e=s.width,t=s.height}r.setSize(e,t,i);let n=r.getDrawingBufferSize(new de);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height);for(let s of this.passes)s.setSize(n.width,n.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},QA={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Kle=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,Zle=class extends ca{constructor({blendFunction:e=oi.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:i=.025,resolutionScale:r=.5,intensity:n=1,width:s=Ln.AUTO_SIZE,height:o=Ln.AUTO_SIZE,kernelSize:a=QA.LARGE}={}){super("BloomEffect",Kle,{blendFunction:e,uniforms:new Map([["map",new gt(null)],["intensity",new gt(n)]])}),this.renderTarget=new lr(1,1,{minFilter:vi,magFilter:vi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new Wle({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=i,this.blurPass=new V4({resolutionScale:r,width:s,height:o,kernelSize:a});let l=this.blurPass.getResolution();l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,i){let r=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,r),this.blurPass.render(e,r,r)):this.blurPass.render(e,t,r)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height),this.luminancePass.resolution.copy(i)}initialize(e,t,i){this.blurPass.initialize(e,t,i),i!==void 0&&(this.renderTarget.texture.type=i,e.outputEncoding===Yt&&(this.renderTarget.texture.encoding=Yt))}},$le="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",Jle=class extends ca{constructor({blendFunction:e=oi.NORMAL,brightness:t=0,contrast:i=0}={}){super("BrightnessContrastEffect",$le,{blendFunction:e,uniforms:new Map([["brightness",new gt(t)],["contrast",new gt(i)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},ece="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",tce=class extends ca{constructor(e=oi.NORMAL){super("ColorAverageEffect",ece,{blendFunction:e})}},ice="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",rce="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",nce=class extends ca{constructor({blendFunction:e=oi.NORMAL,offset:t=new de(.001,5e-4)}={}){super("ChromaticAberrationEffect",ice,{vertexShader:rce,blendFunction:e,attributes:Jo.CONVOLUTION,uniforms:new Map([["offset",new gt(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},sce=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,oce=class extends ca{constructor(e,{blendFunction:t=oi.NORMAL,worldFocusDistance:i,worldFocusRange:r,focusDistance:n=0,focalLength:s=.1,focusRange:o=s,bokehScale:a=1,width:l=Ln.AUTO_SIZE,height:c=Ln.AUTO_SIZE}={}){super("DepthOfFieldEffect",sce,{blendFunction:t,attributes:Jo.DEPTH,uniforms:new Map([["nearColorBuffer",new gt(null)],["farColorBuffer",new gt(null)],["nearCoCBuffer",new gt(null)],["scale",new gt(1)]])}),this.camera=e,this.renderTarget=new lr(1,1,{minFilter:vi,magFilter:vi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Ol(new ile(e));let d=this.cocMaterial;d.focusDistance=n,d.focusRange=o,i!==void 0&&(d.worldFocusDistance=i),r!==void 0&&(d.worldFocusRange=r),this.blurPass=new V4({kernelSize:QA.MEDIUM,width:l,height:c});let u=this.blurPass.getResolution();u.addEventListener("change",f=>this.setSize(u.getBaseWidth(),u.getBaseHeight())),this.maskPass=new Ol(new mle(this.renderTargetCoC.texture));let h=this.maskPass.fullscreenMaterial;h.maskFunction=G4.MULTIPLY,h.colorChannel=j4.GREEN,this.bokehNearBasePass=new Ol(new kv(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Ol(new kv(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Ol(new kv(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Ol(new kv(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=a}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let i of t)i.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,i=t.position.distanceTo(e);return sE(-i,t.near,t.far)}setDepthTexture(e,t=tl){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,i){let r=this.renderTarget,n=this.renderTargetCoC,s=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(this.target!==null){let a=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=a}this.cocPass.render(e,null,n),this.blurPass.render(e,n,s),this.maskPass.render(e,t,o),this.bokehFarBasePass.render(e,o,r),this.bokehFarFillPass.render(e,r,this.renderTargetFar),this.bokehNearBasePass.render(e,t,r),this.bokehNearFillPass.render(e,r,this.renderTargetNear)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,n=i.height,s=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];s.push(this.renderTargetCoC,this.renderTargetMasked),s.forEach(o=>o.setSize(e,t)),s=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],s.forEach(o=>o.setSize(r,n)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(o=>o.fullscreenMaterial.setSize(r,n))}initialize(e,t,i){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(r=>r.initialize(e,t,i)),this.blurPass.initialize(e,t,en),i!==void 0&&(this.renderTarget.texture.type=i,this.renderTargetNear.texture.type=i,this.renderTargetFar.texture.type=i,this.renderTargetMasked.texture.type=i,e.outputEncoding===Yt&&(this.renderTarget.texture.encoding=Yt,this.renderTargetNear.texture.encoding=Yt,this.renderTargetFar.texture.encoding=Yt,this.renderTargetMasked.texture.encoding=Yt))}};new N;new at;var ace="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",lce=class extends ca{constructor({blendFunction:e=oi.NORMAL,hue:t=0,saturation:i=0}={}){super("HueSaturationEffect",ace,{blendFunction:e,uniforms:new Map([["hue",new gt(new N)],["saturation",new gt(i)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),i=Math.cos(e);this.uniforms.get("hue").value.set((2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new Lt;var cce=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,uce=class extends ca{constructor({blendFunction:e=oi.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",cce,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},dce="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",hce=class extends ca{constructor(e=30){super("PixelationEffect",dce,{uniforms:new Map([["active",new gt(!1)],["d",new gt(new de)]])}),this.resolution=new de,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new N;new N;var zO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",FO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",fce="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",pce="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Cd={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},mce=class extends ca{constructor({preset:e=Cd.MEDIUM,edgeDetectionMode:t=YA.COLOR,predicationMode:i=H4.DISABLED}={}){super("SMAAEffect",fce,{vertexShader:pce,blendFunction:oi.NORMAL,attributes:Jo.CONVOLUTION|Jo.DEPTH,uniforms:new Map([["weightMap",new gt(null)]])});let r,n;arguments.length>1&&(r=arguments[0],n=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new lr(1,1,{minFilter:vi,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new U1(!0,!1,!1),this.clearPass.overrideClearColor=new Lt(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Ol(new cle),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=i,this.weightsPass=new Ol(new yle);let s=new AN;s.onLoad=()=>{let o=new tn(r);o.name="SMAA.Search",o.magFilter=Qi,o.minFilter=Qi,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!0,this.weightsMaterial.searchTexture=o;let a=new tn(n);a.name="SMAA.Area",a.magFilter=vi,a.minFilter=vi,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!1,this.weightsMaterial.areaTexture=a,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),r!==void 0&&n!==void 0?(s.itemEnd("search"),s.itemEnd("area")):typeof Image<"u"&&(r=new Image,n=new Image,r.addEventListener("load",()=>s.itemEnd("search")),n.addEventListener("load",()=>s.itemEnd("area")),r.src=zO,n.src=FO),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,i=this.weightsMaterial;switch(e){case Cd.LOW:t.edgeDetectionThreshold=.15,i.orthogonalSearchSteps=4,i.diagonalDetection=!1,i.cornerDetection=!1;break;case Cd.MEDIUM:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=8,i.diagonalDetection=!1,i.cornerDetection=!1;break;case Cd.HIGH:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=16,i.diagonalSearchSteps=8,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break;case Cd.ULTRA:t.edgeDetectionThreshold=.05,i.orthogonalSearchSteps=32,i.diagonalSearchSteps=16,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break}}setDepthTexture(e,t=tl){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,i){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return zO}static get areaImageDataURL(){return FO}},gce=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,zv={DEFAULT:0,ESKIL:1},vce=class extends ca{constructor({blendFunction:e=oi.NORMAL,technique:t=zv.DEFAULT,eskil:i=!1,offset:r=.5,darkness:n=.5}={}){super("VignetteEffect",gce,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new gt(r)],["darkness",new gt(n)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===zv.ESKIL}set eskil(e){this.technique=e?zv.ESKIL:zv.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},il=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(i){this.effect.blendMode.opacity.value=i},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(i){this.effect.blendMode.setBlendFunction(Number(i))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=oi.NORMAL}},yce=class extends il{constructor(){super(Zle),this.blendFunction=oi.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},xce=class extends il{constructor(){super(Jle)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},wce=class extends il{constructor(){super(nce),this.effect.offset=new de(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},bce=class extends il{constructor(){super(tce)}},Sce=class extends il{constructor(){super(lce),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},_ce=class extends il{constructor(){super(uce),this.blendFunction=oi.OVERLAY}},Ece=class extends il{constructor(){super(vce)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},Ace=class extends il{constructor(e){super(oce,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},Cce=class extends il{constructor(){super(hce)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},Tce=class extends Fs{constructor(e,t,i){super("TransmissionPass",e,t),this.copyPass=new zy(i.transmissionRenderTarget),this.depthPass=new BO(e,t,{renderTarget:i.transmissionDepthTarget}),this.needsSwap=!1}updatePasses(e){this.copyPass=new zy(e.transmissionRenderTarget),this.depthPass=new BO(this.scene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.scene=e}render(e,t,i){let r=this.camera.layers.mask;this.copyPass.render(e,t,i),this.camera.layers.disable(3),this.depthPass.render(e,t,i),e.shadowMap.needsUpdate=!1,e.shadowMap.autoUpdate=!1;let n=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(n),e.render(this.scene,this.camera),this.camera.layers.mask=r}},UO=new fu,Mce=new _r({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        void main() {
            gl_FragColor = vec4(0.0);
        }
    `}),Db=class extends Fs{constructor(e,t){super("OpaquePass",e??UO,t),this.hasTransmissionPass=!1,this.clear=!0,this.needsSwap=!1,this.originalMaterials=new Map}setCamera(e){this.camera=e}setScene(e){this.scene=e??UO}getScene(){return this.scene}render(e,t){this.originalMaterials.clear(),this.camera.layers.enable(3),this.hasTransmissionPass&&this.scene.traverse(r=>{r.layers.isEnabled(3)&&r instanceof as&&(this.originalMaterials.set(r.id,r.material),r.material=Mce)}),this.camera.layers.enable(8),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0;let i=this.renderToScreen?null:t;e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),this.hasTransmissionPass&&this.originalMaterials.forEach((r,n)=>{let s=this.scene.getObjectById(n);s&&(s.material=r)})}};function jO(e,t){return t&&t.enabled&&e.push(t.effect),e}var Pce=class extends kn{constructor(e){super(),this.postprocessingState=hm.defaultData,this._scene=new fu,this._camera=new Ka,this.effects=new Map,this._renderToScreen=!0,this.clock=new J9,this.renderer=e,this.debug=!1,this.effects.set("bloom",new yce),this.effects.set("chromaticAberration",new wce),this.effects.set("vignette",new Ece),this.effects.set("noise",new _ce),this.effects.set("colorAverage",new bce),this.effects.set("hueSaturation",new Sce),this.effects.set("brightnessContrast",new xce),this.effects.set("depthOfField",new Ace),this.effects.set("pixelation",new Cce),this.effectComposer=new Qle(this.renderer),this.opaquePass=new Db(this.scene,this.camera),this.transmissionPass=new Tce(this.scene,this.camera,this.renderer),this.helperPass=new Db(void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperClearPass=new U1(!1,!0,!1),this.helperPassOnTop=new Db(void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this._initCopyPass(),this._initSmaa(),this._initPasses()}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}disableHelpers(){this.helperPass.enabled=!1,this.helperClearPass.enabled=!1,this.helperPassOnTop.enabled=!1}enableHelpers(){this.helperPass.enabled=!0,this.helperClearPass.enabled=!0,this.helperPassOnTop.enabled=!0}_initSmaa(){let e=new mce({preset:Cd.ULTRA,edgeDetectionMode:YA.COLOR}),t=()=>{e.removeEventListener("load",t),this.dispatchEvent({type:"smaaloaded"})};e.addEventListener("load",t),e.edgeDetectionMaterial.predicationMode=H4.DEPTH,e.edgeDetectionMaterial.edgeDetectionThreshold=.05,e.edgeDetectionMaterial.predicationThreshold=.002,e.edgeDetectionMaterial.predicationScale=1,this.smaaPass=new Mb(this.camera,e)}_initPasses(){var e,t;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.postprocessingState.enabled){let i=[this.effects.get("pixelation")].reduce(jO,[]);i.length>0&&(this.uvEffectPass=new Mb(this.camera,...i),this.effectComposer.addPass(this.uvEffectPass));let r=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(jO,[]);r.length>0&&(this.effectPass=new Mb(this.camera,...r),this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.helperClearPass),this.effectComposer.addPass(this.helperPassOnTop),this.effectComposer.addPass(this.smaaPass)}_initCopyPass(){if(this._savePass)return;let e=new de;this.renderer.getDrawingBufferSize(e),this._rt=new lr(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:em,wrapT:em}),this._rt.samples=0,this._savePass=new zy(this._rt,!1),this._savePass.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?(t.removePass(this._savePass),t.passes[t.passes.length-1].renderToScreen=!0,t.autoRenderToScreen=!0):(t.autoRenderToScreen=!1,t.passes[t.passes.length-1].renderToScreen=!1,this._savePass.renderToScreen=!1,this.postprocessingState.enabled||(this._savePass.needsDepthTexture=!0),t.addPass(this._savePass)),this._renderToScreen=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...i}=e,r=!1;t!==this.postprocessingState.enabled&&(r=!0);for(let n of Object.entries(i)){let s=n[1],o=this.effects.get(n[0]);if(o){o.enabled!==s.enabled&&(r=!0),o.enabled=s.enabled;for(let[a,l]of Object.entries(s))o[a]=l}}this.postprocessingState=e,r&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,i,r){e instanceof Qt?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,i,r),this.effectComposer.outputBuffer.scissor.set(e,t,i,r));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,i,r)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,i,r){e instanceof Qt?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,i,r),this.effectComposer.outputBuffer.viewport.set(e,t,i,r))}resize(e,t,i){if(this.effectComposer.setSize(e,t,i),this._rt){let r=this.renderer.getPixelRatio();this._rt.setSize(e*r,t*r)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},HO=new tn,Dce=class extends fN{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new de,this.pipeline=new Pce(this),this.overrideTransmission=e==null?void 0:e.overrideTransmission,this.autoClear=!1;let t=this.setPixelRatio.bind(this),i=this.setSize.bind(this),r=this.getContext();if(r&&"drawingBufferColorSpace"in r)try{r.drawingBufferColorSpace="display-p3"}catch(n){console.warn(n)}this.setPixelRatio=n=>{this._pixelRatio=n,t(n)},this.setSize=(n,s,o=!0)=>{var a,l,c;(this.viewportWidth!==n||this.viewportHeight!==s)&&(this.viewportWidth=n,this.viewportHeight=s,i(n,s,o),(a=this.normalRenderTarget)==null||a.setSize(n*this._pixelRatio,s*this._pixelRatio),(l=this.transmissionRenderTarget)==null||l.setSize(n*this._pixelRatio/2,s*this._pixelRatio/2),(c=this.transmissionDepthTarget)==null||c.setSize(n*this._pixelRatio/2,s*this._pixelRatio/2),this.pipeline.resize(n,s,o))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new lr(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{generateMipmaps:!0,minFilter:Lm,magFilter:vi,wrapS:Yn,wrapT:Yn,depthBuffer:!1}),this.transmissionDepthTarget=new lr(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Qi,magFilter:Qi,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new lr(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Qi,magFilter:Qi,type:Ul,depthTexture:new N2(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t){this.normalRenderTarget&&(this.setClearColor(0),t.layers.enable(8),t.layers.disable(0),t.layers.disable(3),this.setRenderTarget(this.normalRenderTarget),this.clear(),t instanceof Ka?db.uniforms.depthContrast.value=(t.far-t.near)/1e4:db.uniforms.depthContrast.value=1,e.overrideMaterial=db,this.render(e,t),this.setClearColor(e.bgColor,e.bgColor.a),this.setRenderTarget(null),e.overrideMaterial=e.wireframeState?Y_:null,t.layers.enable(0),t.layers.enable(3))}renderSplineScene(e,t,i,r,n){this.setClearColor(e.bgColor,e.bgColor.a),i.penumbraSize.forEach((o,a)=>{zi.penumbraSize.value[a]=o}),zi.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?zi.resolution.value.set(this.resolution.x,this.resolution.y):zi.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),this.overrideNormal!==void 0?(zi.normalRenderTarget.value=this.overrideNormal,zi.normalRenderTargetDepth.value=HO):e.needsNormal()&&(this.createNormalRenderTarget(),zi.normalRenderTarget.value=this.normalRenderTarget.texture,zi.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(e,t));let s=!1;if(this.overrideTransmission!==void 0)zi.transmissionRenderTarget.value=this.overrideTransmission,zi.transmissionRenderTargetDepth.value=HO,this.pipeline.setTransmissionPassEnabled(!1);else{let o=e.needsTransmission();o&&(this.transmissionRenderTarget===void 0&&(s=!0),this.createTransmissionRenderTarget(),zi.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,zi.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(o)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=n,this.pipeline.scene=e,this.pipeline.camera=t,s&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==e.postprocessing&&this.pipeline.updatePostprocessing(e.postprocessing),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),e.overrideMaterial=e.wireframeState?Y_:null,this.pipeline.render()}_currentDispose(){var e,t,i,r,n;this._superDispose(),this.pipeline.dispose(),(e=this.transmissionRenderTarget)==null||e.dispose(),(t=this.transmissionDepthTarget)==null||t.dispose(),(i=this.normalRenderTarget)==null||i.dispose(),(n=(r=this.normalRenderTarget)==null?void 0:r.depthTexture)==null||n.dispose()}},Oce=class{get sharedAssets(){return this.shared}constructor(e,t={}){this.shared=new L1(e.shared,t),this.scene=new N1(e.scene,this.sharedAssets),this.scene.switchActiveCamera(this.scene.activeCamera)}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof vo&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},Lce=class{constructor({x:e=10,y:t=10}){this._startTime=0;let i=document.getElementById("spe-perfs");i?this.element=i:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function Ice(e){let t;if(e.index)for(let i=0;i<e.index.array.length;i+=3)t=e.index.array[i],e.index.array[i]=e.index.array[i+2],e.index.array[i+2]=t}function Lp(e){return e instanceof gm?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function Rce(e,t){let i={};return e.traverseEntity(r=>{var l;if(!r.visible||!(r instanceof as)||r.type!=="Mesh"||Array.isArray(r.material)||r.states&&Object.keys(r.states).length)return;let n=r.parent;for(;n;){if(n instanceof as&&r.states&&Object.keys(r.states).length)return;n=n.parent}let s=r.material.uuid,o=t.shared.materials[s];if(o){if(!ns.isMergable(o))return}else{let c=(l=t.scene.objects.get(r.uuid))==null?void 0:l.data;if(c&&"material"in c&&typeof c.material!="string"){if(!ns.isMergable(c.material))return;s=ns.getHash(c.material)}}i[s]||(i[s]={});let a=i[s][Lp(r)];if(a){if(a.push(r),r.cloner)for(let c of r.cloner.children)a.push(c)}else if(i[s][Lp(r)]=[r],r.cloner)for(let c of r.cloner.children)i[s][Lp(r)].push(c)}),i}function Nce(e){let t=0;return Object.values(e).forEach(i=>{Object.values(i).forEach(r=>{let n=r.length;n>t&&(t=n)})}),t}function Bce(e,t){let i=Rce(t,e),r=Nce(i),n=new Array(r),s=0,o=new Array(r),a=0,l=new Array(r),c=0,d=new Array(r),u=0;for(let[h,f]of Object.entries(i))for(let m of Object.values(f)){if(a=0,c=0,m.forEach(g=>{g instanceof as&&(o[a++]=g.geometry.clone(),l[c++]=g)}),c<2)continue;for(let g=0;g<c;g++)l[g].updateWorldMatrix(!0,!1),o[g].applyMatrix4(l[g].matrixWorld),l[g].matrixWorld.determinant()<0&&Ice(o[g]);let v=Gd(o.slice(0,a),!1);if(v){let g;switch(h){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),g=new $n(v,l[0].material);break}default:{g=new $n(v,l[0].material);break}}g.castShadow=l[0].castShadow,g.receiveShadow=l[0].receiveShadow,t.add(g);let p=x=>{u=0;for(let b of x)b.children&&p(b.children),b instanceof as&&(Array.isArray(b.material)||i[b.material.uuid]&&i[b.material.uuid][Lp(b)]&&i[b.material.uuid][Lp(b)].length>1||(d[u++]=b));for(let b=0;b<u;b++)t.attach(d[b])};for(let x=0;x<c;x++){let b=l[x];p(b.children),n[s++]=b}}}for(let h=0;h<s;h++)n[h].removeFromParent()}var kce=new de;function zce(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var Fce=class{constructor(e,{renderOnDemand:t=!0}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._lastTime=performance.now(),this.time=performance.now(),this.dt=0,this._skipRender=!1,this.renderOnDemand=!0,this.disposed=!1,this.requestRender=()=>{this._skipRender=!1},this.render=i=>{var r,n,s;!this._renderer||(this._rafId=requestAnimationFrame(this.render),this.time=i,this.dt=this.time-this._lastTime,this._lastTime=this.time,(r=this._perfs)==null||r.start(),!(this.renderOnDemand&&this._skipRender)&&(this._skipRender=((n=this._controls)==null?void 0:n.update(this.dt))??!0,this._eventManager&&(this._eventManager.isEnable||this._eventManager.activate(),this._eventManager.handlers.Follow.onAnimationFrameDamping(),this._eventManager.handlers.LookAt.onAnimationFrameDamping(),(this._eventManager.handlers.Start.hasVideoAction||this._eventManager.handlers.Basic.hasVideoAction||this._eventManager.handlers.Conditional.hasVideoAction)&&(this._skipRender=!1)),this._scene&&this._camera&&this._renderer.renderSplineScene(this._scene,this._camera,this._sharedAssetsManager),(s=this._perfs)==null||s.end()))},this._resize=uB(()=>{var i,r;!this._renderer||(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=kce.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._viewportMode!==1&&((i=this._frameView)==null||i.updateViewport()),this._camera&&((r=this._frameView)==null||r.updateCamera(),this._camera.cameraType==="PerspectiveCamera"&&this._viewportMode===1&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()),this.requestRender())},10),this.canvas=e,this.renderOnDemand=t,window.location.search.includes("perfs")&&(this._perfs=new Lce({x:10,y:10})),tte(e)}async load(e,t){zce(e);let i=await(await fetch(e,t)).arrayBuffer();await this.start(i)}async start(e,{interactive:t=!0}={}){var n;if(this.disposed)return;let i=await Kae(e);await Promise.all([UD(i)&&Cre(),kne(i)&&_re(),i.scene.environment.usePhysics&&xee(),ND(i)&&Ane()].filter(Boolean)),this._eventManager&&this._eventManager.deactivate(),this._controls&&this._controls.dispose(),(n=this._scene)==null||n.dispose();let r=new Oce(i);if(this._scene=r.scene,this._sharedAssetsManager=r.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let s=performance.now();Bce(i,r.scene);let o=performance.now();console.log("Merged geometries in ",o-s," ms")}if(UD(i)&&this._scene.traverse(s=>{ql(s)&&s.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var s;this.requestRender(),(s=this._scene)==null||s.traverse(o=>{o instanceof Iy&&o.pendingMediaLoad&&o.update()})}),ND(i)&&Cae(i)){let s=Object.keys(i.shared.fonts).map(o=>this._sharedAssetsManager.getFont(o)).map(o=>o.loadingPromise);await Promise.all(s)}if(this._scene.rewriteEventsBeforeGoToPlayMode(),R4(i.scene,this._scene,this._sharedAssetsManager),this._renderer||(this._renderer=new Dce({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this.requestRender),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=i.scene.environment.ambientLight.softShadows?P2:XR,Ese(i.scene.environment.ambientLight.softShadowQuality)),this._frameView)this._frameView.setCamera(this._camera);else{let s=Object.values(i.frames)[0];if(s.preset==="fullscreen"){this._viewportMode=1;let{width:o,height:a}=window.getComputedStyle(this.canvas);this.canvas.parentElement&&(o==="300px"||o==="auto")?(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"):this._viewportWidth=this.canvas.clientWidth,this.canvas.parentElement&&(a==="150px"||a==="auto")?(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%"):this._viewportHeight=this.canvas.clientHeight}else this._viewportMode=2,this._viewportWidth=s.size[0],this._viewportHeight=s.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`;this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new $ae(this._renderer,this._camera,new de(this._viewportWidth,this._viewportHeight),new de(window.innerWidth,window.innerHeight))}if(t&&(this._scene.updateMatrixWorld(!0),this._controls=new Tae(i,this._scene,this._renderer,this.requestRender,this._sharedAssetsManager,!0),this._eventManager=new Zae(this._renderer,this._scene,this._camera,i.scene.publish.stopRaycast,i.scene.publish.preventScroll,i.scene.publish.hideCursor,this._sharedAssetsManager,this.requestRender,this._controls,!0)),this._resize(),!this._resizeObserver&&this.canvas.parentElement){let s=!0;this._resizeObserver=new ResizeObserver(()=>{if(s){s=!1;return}this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._resize()}),this._resizeObserver.observe(this.canvas.parentElement)}this._rafId===void 0?this.render(performance.now()):this.requestRender()}findObjectById(e){var i;let t=(i=this._scene)==null?void 0:i.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var i;let t=(i=this._scene)==null?void 0:i.getObjectByName(e);return this._createProxyObject(t)}getSplineEvents(){var e;return((e=this._eventManager)==null?void 0:e.handlers.Spline).splineEvents}emitEvent(e,t){var i;(i=this.findObjectById(t)||this.findObjectByName(t))==null||i.emitEvent(e)}emitEventReverse(e,t){var i;(i=this.findObjectById(t)||this.findObjectByName(t))==null||i.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,i;((t=this._controls)==null?void 0:t.orbitControls)instanceof U4&&((i=this._controls)==null||i.orbitControls.zoomOut(e))}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}dispose(){var e,t,i,r,n,s;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(i=this._sharedAssetsManager)==null||i.dispose(),this._rafId&&cancelAnimationFrame(this._rafId),this._proxyObjectCache.forEach(o=>{AP.unsubscribe(o)}),(r=this._renderer)==null||r.dispose(),(n=this._sharedAssetsManager)==null||n.dispose(),this._resizeObserver&&this._resizeObserver.disconnect(),this.canvas.style.width="",this.canvas.style.height="",(s=this._controls)==null||s.dispose(),ite(this.canvas)}_createProxyObject(e){if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,emitEvent(r){e.dispatchEvent({type:"userEvent",eventName:r})},emitEventReverse(r){e.dispatchEvent({type:"userEvent",eventName:r,reverse:!0})}},i=AP(t,(r,n)=>{var s;typeof e[r]!="object"&&((s=Object.getOwnPropertyDescriptor(e,r))!=null&&s.writable)&&(e[r]=n),this.requestRender(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,i),i}},Uce=Object.defineProperty,Fy=Object.getOwnPropertySymbols,W4=Object.prototype.hasOwnProperty,q4=Object.prototype.propertyIsEnumerable,GO=(e,t,i)=>t in e?Uce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,VO=(e,t)=>{for(var i in t||(t={}))W4.call(t,i)&&GO(e,i,t[i]);if(Fy)for(var i of Fy(t))q4.call(t,i)&&GO(e,i,t[i]);return e},jce=(e,t)=>{var i={};for(var r in e)W4.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&Fy)for(var r of Fy(e))t.indexOf(r)<0&&q4.call(e,r)&&(i[r]=e[r]);return i};function Hce(e){return function(t){e.forEach(function(i){typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var X4={exports:{}},j1={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gce=ii,Vce=Symbol.for("react.element"),Wce=Symbol.for("react.fragment"),qce=Object.prototype.hasOwnProperty,Xce=Gce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yce={key:!0,ref:!0,__self:!0,__source:!0};function Y4(e,t,i){var r,n={},s=null,o=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)qce.call(t,r)&&!Yce.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:Vce,type:e,key:s,ref:o,props:n,_owner:Xce.current}}j1.Fragment=Wce;j1.jsx=Y4;j1.jsxs=Y4;X4.exports=j1;const Qce=X4.exports.jsx,Q4=te.forwardRef((e,t)=>{var i=e,{scene:r,style:n,onMouseDown:s,onMouseUp:o,onMouseHover:a,onKeyDown:l,onKeyUp:c,onStart:d,onLookAt:u,onFollow:h,onWheel:f,onLoad:m,renderOnDemand:v=!0}=i,g=jce(i,["scene","style","onMouseDown","onMouseUp","onMouseHover","onKeyDown","onKeyUp","onStart","onLookAt","onFollow","onWheel","onLoad","renderOnDemand"]);const p=te.useRef(null),[x,b]=te.useState(!0);return te.useEffect(()=>{b(!0);let S;const E=[{name:"mouseDown",cb:s},{name:"mouseUp",cb:o},{name:"mouseHover",cb:a},{name:"keyDown",cb:l},{name:"keyUp",cb:c},{name:"start",cb:d},{name:"lookAt",cb:u},{name:"follow",cb:h},{name:"scroll",cb:f}];if(p.current){S=new Fce(p.current,{renderOnDemand:v});async function y(){await S.load(r);for(let C of E)C.cb&&S.addEventListener(C.name,C.cb);b(!1),m==null||m(S)}y()}return()=>{for(let y of E)y.cb&&S.removeEventListener(y.name,y.cb);S.dispose()}},[r]),Qce("canvas",VO({ref:Hce([t,p]),style:VO({display:x?"none":"block"},n)},g))});var K4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},WO=ii.createContext&&ii.createContext(K4),lc=globalThis&&globalThis.__assign||function(){return lc=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},lc.apply(this,arguments)},Kce=globalThis&&globalThis.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i};function Z4(e){return e&&e.map(function(t,i){return ii.createElement(t.tag,lc({key:i},t.attr),Z4(t.child))})}function ua(e){return function(t){return ii.createElement(Zce,lc({attr:lc({},e.attr)},t),Z4(e.child))}}function Zce(e){var t=function(i){var r=e.attr,n=e.size,s=e.title,o=Kce(e,["attr","size","title"]),a=n||i.size||"1em",l;return i.className&&(l=i.className),e.className&&(l=(l?l+" ":"")+e.className),ii.createElement("svg",lc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},i.attr,r,o,{className:l,style:lc(lc({color:e.color||i.color},i.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ii.createElement("title",null,s),e.children)};return WO!==void 0?ii.createElement(WO.Consumer,null,function(i){return t(i)}):t(K4)}function $ce(e){return ua({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"}}]})(e)}function Jce(e){return ua({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(e)}function $4(e){return ua({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"}}]})(e)}function eue(e){return ua({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"}}]})(e)}function tue(e){return ua({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function iue(e){return ua({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"}}]})(e)}const KA="/assets/mainLogo-05125cb8.png",rue=()=>{const{setCorreo:e,correo:t,setClave:i,clave:r}=te.useContext(oa),n=te.useRef(null),s=y2(),o=()=>s("/home"),a=u=>{const h=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/;return new RegExp(h).test(u)};return pe("div",{className:"formContainer",children:[L("div",{className:"homeButton",onClick:o,children:"inicio"}),L("div",{className:"paint",children:L("img",{src:KA,className:"imgLogo",alt:"logo company"})}),L("div",{className:"splineContainer",children:L(Q4,{scene:"https://prod.spline.design/xVT-vQQeBRSEvUWW/scene.splinecode"})}),L("div",{className:"contenedorFormulario",children:pe("div",{className:"boxForm",children:[L("div",{className:"cover"}),L("div",{className:"shadow"}),L("div",{className:"contentForm",children:pe("form",{className:"formMain",onSubmit:u=>{u.preventDefault();const h=new FormData(n.current),{email:f,password:m}=Object.fromEntries([...h.entries()]);f.trim()===""||m.trim()===""?Mg.fire({icon:"error",title:"Complete todos los campos requeridos",showConfirmButton:!1,timer:1500}):r.length<4||r.length>10?Mg.fire({icon:"error",title:"Tu contraseña de tener una extensión de 4 a 10 dígitos",showConfirmButton:!1,timer:3e3}):a(f)?(i(m),e(f),Mg.fire({icon:"success",title:"Usuario validado",showConfirmButton:!1,timer:1500})):Mg.fire({icon:"error",title:"ingrese un email válido por favor",showConfirmButton:!1,timer:1500})},ref:n,children:[L("h3",{className:"logo",children:L($ce,{})}),L("h2",{children:"Iniciar sesión"}),pe("div",{className:"inputBoxForm",children:[L("input",{type:"text",name:"email",value:t,onChange:u=>{e(u.target.value.trim())},className:"textForm"}),L(tue,{className:"iconForm"}),L("span",{children:"Email"})]}),pe("div",{className:"inputBoxForm",children:[L("input",{type:"password",name:"password",value:r,onChange:u=>{i(u.target.value.trim())},className:"textForm"}),L(Jce,{className:"iconForm"}),L("span",{children:"Password"})]}),pe("div",{className:"links",children:[pe("p",{children:[L(eue,{className:"iconLink"}),"Olvidó la contraseña?"]}),L("p",{children:pe(AR,{to:"/crearperfil",children:[L(iue,{className:"iconLink"}),"Registrarse"]})})]}),L("div",{className:"inputBoxForm",children:L("button",{type:"submit",className:"submit",children:"Login"})})]})})]})})]})};var aE={},nue={get exports(){return aE},set exports(e){aE=e}};(function(e,t){(function(i,r){e.exports=r(te)})(typeof self<"u"?self:no,i=>(()=>{var r={7403:(a,l,c)=>{c.d(l,{default:()=>re});var d=c(4087),u=c.n(d);const h=function(z){return new RegExp(/<[a-z][\s\S]*>/i).test(z)},f=function(z){var X=document.createElement("div");return X.innerHTML=z,X.childNodes},m=function(z,X){return Math.floor(Math.random()*(X-z+1))+z};var v="TYPE_CHARACTER",g="REMOVE_CHARACTER",p="REMOVE_ALL",x="REMOVE_LAST_VISIBLE_NODE",b="PAUSE_FOR",S="CALL_FUNCTION",E="ADD_HTML_TAG_ELEMENT",y="CHANGE_DELETE_SPEED",C="CHANGE_DELAY",A="CHANGE_CURSOR",D="PASTE_STRING",I="HTML_TAG";function R(z,X){var Y=Object.keys(z);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(z);X&&(K=K.filter(function(Z){return Object.getOwnPropertyDescriptor(z,Z).enumerable})),Y.push.apply(Y,K)}return Y}function B(z){for(var X=1;X<arguments.length;X++){var Y=arguments[X]!=null?arguments[X]:{};X%2?R(Object(Y),!0).forEach(function(K){Q(z,K,Y[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(Y)):R(Object(Y)).forEach(function(K){Object.defineProperty(z,K,Object.getOwnPropertyDescriptor(Y,K))})}return z}function G(z){return function(X){if(Array.isArray(X))return j(X)}(z)||function(X){if(typeof Symbol<"u"&&X[Symbol.iterator]!=null||X["@@iterator"]!=null)return Array.from(X)}(z)||function(X,Y){if(X){if(typeof X=="string")return j(X,Y);var K=Object.prototype.toString.call(X).slice(8,-1);return K==="Object"&&X.constructor&&(K=X.constructor.name),K==="Map"||K==="Set"?Array.from(X):K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K)?j(X,Y):void 0}}(z)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function j(z,X){(X==null||X>z.length)&&(X=z.length);for(var Y=0,K=new Array(X);Y<X;Y++)K[Y]=z[Y];return K}function ee(z,X){for(var Y=0;Y<X.length;Y++){var K=X[Y];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(z,K.key,K)}}function Q(z,X,Y){return X in z?Object.defineProperty(z,X,{value:Y,enumerable:!0,configurable:!0,writable:!0}):z[X]=Y,z}const re=function(){function z(K,Z){var V=this;if(function(ae,ne){if(!(ae instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,z),Q(this,"state",{cursorAnimation:null,lastFrameTime:null,pauseUntil:null,eventQueue:[],eventLoop:null,eventLoopPaused:!1,reverseCalledEvents:[],calledEvents:[],visibleNodes:[],initialOptions:null,elements:{container:null,wrapper:document.createElement("span"),cursor:document.createElement("span")}}),Q(this,"options",{strings:null,cursor:"|",delay:"natural",pauseFor:1500,deleteSpeed:"natural",loop:!1,autoStart:!1,devMode:!1,skipAddStyles:!1,wrapperClassName:"Typewriter__wrapper",cursorClassName:"Typewriter__cursor",stringSplitter:null,onCreateTextNode:null,onRemoveNode:null}),Q(this,"setupWrapperElement",function(){V.state.elements.container&&(V.state.elements.wrapper.className=V.options.wrapperClassName,V.state.elements.cursor.className=V.options.cursorClassName,V.state.elements.cursor.innerHTML=V.options.cursor,V.state.elements.container.innerHTML="",V.state.elements.container.appendChild(V.state.elements.wrapper),V.state.elements.container.appendChild(V.state.elements.cursor))}),Q(this,"start",function(){return V.state.eventLoopPaused=!1,V.runEventLoop(),V}),Q(this,"pause",function(){return V.state.eventLoopPaused=!0,V}),Q(this,"stop",function(){return V.state.eventLoop&&((0,d.cancel)(V.state.eventLoop),V.state.eventLoop=null),V}),Q(this,"pauseFor",function(ae){return V.addEventToQueue(b,{ms:ae}),V}),Q(this,"typeOutAllStrings",function(){return typeof V.options.strings=="string"?(V.typeString(V.options.strings).pauseFor(V.options.pauseFor),V):(V.options.strings.forEach(function(ae){V.typeString(ae).pauseFor(V.options.pauseFor).deleteAll(V.options.deleteSpeed)}),V)}),Q(this,"typeString",function(ae){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(h(ae))return V.typeOutHTMLString(ae,ne);if(ae){var we=V.options||{},me=we.stringSplitter,ue=typeof me=="function"?me(ae):ae.split("");V.typeCharacters(ue,ne)}return V}),Q(this,"pasteString",function(ae){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(ae)?V.typeOutHTMLString(ae,ne,!0):(ae&&V.addEventToQueue(D,{character:ae,node:ne}),V)}),Q(this,"typeOutHTMLString",function(ae){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,we=arguments.length>2?arguments[2]:void 0,me=f(ae);if(me.length>0)for(var ue=0;ue<me.length;ue++){var xe=me[ue],Le=xe.innerHTML;xe&&xe.nodeType!==3?(xe.innerHTML="",V.addEventToQueue(E,{node:xe,parentNode:ne}),we?V.pasteString(Le,xe):V.typeString(Le,xe)):xe.textContent&&(we?V.pasteString(xe.textContent,ne):V.typeString(xe.textContent,ne))}return V}),Q(this,"deleteAll",function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"natural";return V.addEventToQueue(p,{speed:ae}),V}),Q(this,"changeDeleteSpeed",function(ae){if(!ae)throw new Error("Must provide new delete speed");return V.addEventToQueue(y,{speed:ae}),V}),Q(this,"changeDelay",function(ae){if(!ae)throw new Error("Must provide new delay");return V.addEventToQueue(C,{delay:ae}),V}),Q(this,"changeCursor",function(ae){if(!ae)throw new Error("Must provide new cursor");return V.addEventToQueue(A,{cursor:ae}),V}),Q(this,"deleteChars",function(ae){if(!ae)throw new Error("Must provide amount of characters to delete");for(var ne=0;ne<ae;ne++)V.addEventToQueue(g);return V}),Q(this,"callFunction",function(ae,ne){if(!ae||typeof ae!="function")throw new Error("Callbak must be a function");return V.addEventToQueue(S,{cb:ae,thisArg:ne}),V}),Q(this,"typeCharacters",function(ae){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ae||!Array.isArray(ae))throw new Error("Characters must be an array");return ae.forEach(function(we){V.addEventToQueue(v,{character:we,node:ne})}),V}),Q(this,"removeCharacters",function(ae){if(!ae||!Array.isArray(ae))throw new Error("Characters must be an array");return ae.forEach(function(){V.addEventToQueue(g)}),V}),Q(this,"addEventToQueue",function(ae,ne){var we=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return V.addEventToStateProperty(ae,ne,we,"eventQueue")}),Q(this,"addReverseCalledEvent",function(ae,ne){var we=arguments.length>2&&arguments[2]!==void 0&&arguments[2],me=V.options.loop;return me?V.addEventToStateProperty(ae,ne,we,"reverseCalledEvents"):V}),Q(this,"addEventToStateProperty",function(ae,ne){var we=arguments.length>2&&arguments[2]!==void 0&&arguments[2],me=arguments.length>3?arguments[3]:void 0,ue={eventName:ae,eventArgs:ne||{}};return V.state[me]=we?[ue].concat(G(V.state[me])):[].concat(G(V.state[me]),[ue]),V}),Q(this,"runEventLoop",function(){V.state.lastFrameTime||(V.state.lastFrameTime=Date.now());var ae=Date.now(),ne=ae-V.state.lastFrameTime;if(!V.state.eventQueue.length){if(!V.options.loop)return;V.state.eventQueue=G(V.state.calledEvents),V.state.calledEvents=[],V.options=B({},V.state.initialOptions)}if(V.state.eventLoop=u()(V.runEventLoop),!V.state.eventLoopPaused){if(V.state.pauseUntil){if(ae<V.state.pauseUntil)return;V.state.pauseUntil=null}var we,me=G(V.state.eventQueue),ue=me.shift();if(!(ne<=(we=ue.eventName===x||ue.eventName===g?V.options.deleteSpeed==="natural"?m(40,80):V.options.deleteSpeed:V.options.delay==="natural"?m(120,160):V.options.delay))){var xe=ue.eventName,Le=ue.eventArgs;switch(V.logInDevMode({currentEvent:ue,state:V.state,delay:we}),xe){case D:case v:var Re=Le.character,Oe=Le.node,We=document.createTextNode(Re),He=We;V.options.onCreateTextNode&&typeof V.options.onCreateTextNode=="function"&&(He=V.options.onCreateTextNode(Re,We)),He&&(Oe?Oe.appendChild(He):V.state.elements.wrapper.appendChild(He)),V.state.visibleNodes=[].concat(G(V.state.visibleNodes),[{type:"TEXT_NODE",character:Re,node:He}]);break;case g:me.unshift({eventName:x,eventArgs:{removingCharacterNode:!0}});break;case b:var ye=ue.eventArgs.ms;V.state.pauseUntil=Date.now()+parseInt(ye);break;case S:var Qe=ue.eventArgs,rt=Qe.cb,Je=Qe.thisArg;rt.call(Je,{elements:V.state.elements});break;case E:var Bt=ue.eventArgs,lt=Bt.node,J=Bt.parentNode;J?J.appendChild(lt):V.state.elements.wrapper.appendChild(lt),V.state.visibleNodes=[].concat(G(V.state.visibleNodes),[{type:I,node:lt,parentNode:J||V.state.elements.wrapper}]);break;case p:var q=V.state.visibleNodes,Se=Le.speed,je=[];Se&&je.push({eventName:y,eventArgs:{speed:Se,temp:!0}});for(var qe=0,ot=q.length;qe<ot;qe++)je.push({eventName:x,eventArgs:{removingCharacterNode:!1}});Se&&je.push({eventName:y,eventArgs:{speed:V.options.deleteSpeed,temp:!0}}),me.unshift.apply(me,je);break;case x:var wt=ue.eventArgs.removingCharacterNode;if(V.state.visibleNodes.length){var Pe=V.state.visibleNodes.pop(),pt=Pe.type,Be=Pe.node,Ke=Pe.character;V.options.onRemoveNode&&typeof V.options.onRemoveNode=="function"&&V.options.onRemoveNode({node:Be,character:Ke}),Be&&Be.parentNode.removeChild(Be),pt===I&&wt&&me.unshift({eventName:x,eventArgs:{}})}break;case y:V.options.deleteSpeed=ue.eventArgs.speed;break;case C:V.options.delay=ue.eventArgs.delay;break;case A:V.options.cursor=ue.eventArgs.cursor,V.state.elements.cursor.innerHTML=ue.eventArgs.cursor}V.options.loop&&(ue.eventName===x||ue.eventArgs&&ue.eventArgs.temp||(V.state.calledEvents=[].concat(G(V.state.calledEvents),[ue]))),V.state.eventQueue=me,V.state.lastFrameTime=ae}}}),K)if(typeof K=="string"){var fe=document.querySelector(K);if(!fe)throw new Error("Could not find container element");this.state.elements.container=fe}else this.state.elements.container=K;Z&&(this.options=B(B({},this.options),Z)),this.state.initialOptions=B({},this.options),this.init()}var X,Y;return X=z,(Y=[{key:"init",value:function(){var K,Z;this.setupWrapperElement(),this.addEventToQueue(A,{cursor:this.options.cursor},!0),this.addEventToQueue(p,null,!0),!window||window.___TYPEWRITER_JS_STYLES_ADDED___||this.options.skipAddStyles||(K=".Typewriter__cursor{-webkit-animation:Typewriter-cursor 1s infinite;animation:Typewriter-cursor 1s infinite;margin-left:1px}@-webkit-keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}@keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}",(Z=document.createElement("style")).appendChild(document.createTextNode(K)),document.head.appendChild(Z),window.___TYPEWRITER_JS_STYLES_ADDED___=!0),this.options.autoStart===!0&&this.options.strings&&this.typeOutAllStrings().start()}},{key:"logInDevMode",value:function(K){this.options.devMode&&console.log(K)}}])&&ee(X.prototype,Y),Object.defineProperty(X,"prototype",{writable:!1}),z}()},8552:(a,l,c)=>{var d=c(852)(c(5639),"DataView");a.exports=d},1989:(a,l,c)=>{var d=c(1789),u=c(401),h=c(7667),f=c(1327),m=c(1866);function v(g){var p=-1,x=g==null?0:g.length;for(this.clear();++p<x;){var b=g[p];this.set(b[0],b[1])}}v.prototype.clear=d,v.prototype.delete=u,v.prototype.get=h,v.prototype.has=f,v.prototype.set=m,a.exports=v},8407:(a,l,c)=>{var d=c(7040),u=c(4125),h=c(2117),f=c(7518),m=c(4705);function v(g){var p=-1,x=g==null?0:g.length;for(this.clear();++p<x;){var b=g[p];this.set(b[0],b[1])}}v.prototype.clear=d,v.prototype.delete=u,v.prototype.get=h,v.prototype.has=f,v.prototype.set=m,a.exports=v},7071:(a,l,c)=>{var d=c(852)(c(5639),"Map");a.exports=d},3369:(a,l,c)=>{var d=c(4785),u=c(1285),h=c(6e3),f=c(9916),m=c(5265);function v(g){var p=-1,x=g==null?0:g.length;for(this.clear();++p<x;){var b=g[p];this.set(b[0],b[1])}}v.prototype.clear=d,v.prototype.delete=u,v.prototype.get=h,v.prototype.has=f,v.prototype.set=m,a.exports=v},3818:(a,l,c)=>{var d=c(852)(c(5639),"Promise");a.exports=d},8525:(a,l,c)=>{var d=c(852)(c(5639),"Set");a.exports=d},8668:(a,l,c)=>{var d=c(3369),u=c(619),h=c(2385);function f(m){var v=-1,g=m==null?0:m.length;for(this.__data__=new d;++v<g;)this.add(m[v])}f.prototype.add=f.prototype.push=u,f.prototype.has=h,a.exports=f},6384:(a,l,c)=>{var d=c(8407),u=c(7465),h=c(3779),f=c(7599),m=c(4758),v=c(4309);function g(p){var x=this.__data__=new d(p);this.size=x.size}g.prototype.clear=u,g.prototype.delete=h,g.prototype.get=f,g.prototype.has=m,g.prototype.set=v,a.exports=g},2705:(a,l,c)=>{var d=c(5639).Symbol;a.exports=d},1149:(a,l,c)=>{var d=c(5639).Uint8Array;a.exports=d},577:(a,l,c)=>{var d=c(852)(c(5639),"WeakMap");a.exports=d},4963:a=>{a.exports=function(l,c){for(var d=-1,u=l==null?0:l.length,h=0,f=[];++d<u;){var m=l[d];c(m,d,l)&&(f[h++]=m)}return f}},4636:(a,l,c)=>{var d=c(2545),u=c(5694),h=c(1469),f=c(4144),m=c(5776),v=c(6719),g=Object.prototype.hasOwnProperty;a.exports=function(p,x){var b=h(p),S=!b&&u(p),E=!b&&!S&&f(p),y=!b&&!S&&!E&&v(p),C=b||S||E||y,A=C?d(p.length,String):[],D=A.length;for(var I in p)!x&&!g.call(p,I)||C&&(I=="length"||E&&(I=="offset"||I=="parent")||y&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||m(I,D))||A.push(I);return A}},2488:a=>{a.exports=function(l,c){for(var d=-1,u=c.length,h=l.length;++d<u;)l[h+d]=c[d];return l}},2908:a=>{a.exports=function(l,c){for(var d=-1,u=l==null?0:l.length;++d<u;)if(c(l[d],d,l))return!0;return!1}},8470:(a,l,c)=>{var d=c(7813);a.exports=function(u,h){for(var f=u.length;f--;)if(d(u[f][0],h))return f;return-1}},8866:(a,l,c)=>{var d=c(2488),u=c(1469);a.exports=function(h,f,m){var v=f(h);return u(h)?v:d(v,m(h))}},4239:(a,l,c)=>{var d=c(2705),u=c(9607),h=c(2333),f=d?d.toStringTag:void 0;a.exports=function(m){return m==null?m===void 0?"[object Undefined]":"[object Null]":f&&f in Object(m)?u(m):h(m)}},9454:(a,l,c)=>{var d=c(4239),u=c(7005);a.exports=function(h){return u(h)&&d(h)=="[object Arguments]"}},939:(a,l,c)=>{var d=c(2492),u=c(7005);a.exports=function h(f,m,v,g,p){return f===m||(f==null||m==null||!u(f)&&!u(m)?f!=f&&m!=m:d(f,m,v,g,h,p))}},2492:(a,l,c)=>{var d=c(6384),u=c(7114),h=c(8351),f=c(6096),m=c(4160),v=c(1469),g=c(4144),p=c(6719),x="[object Arguments]",b="[object Array]",S="[object Object]",E=Object.prototype.hasOwnProperty;a.exports=function(y,C,A,D,I,R){var B=v(y),G=v(C),j=B?b:m(y),ee=G?b:m(C),Q=(j=j==x?S:j)==S,re=(ee=ee==x?S:ee)==S,z=j==ee;if(z&&g(y)){if(!g(C))return!1;B=!0,Q=!1}if(z&&!Q)return R||(R=new d),B||p(y)?u(y,C,A,D,I,R):h(y,C,j,A,D,I,R);if(!(1&A)){var X=Q&&E.call(y,"__wrapped__"),Y=re&&E.call(C,"__wrapped__");if(X||Y){var K=X?y.value():y,Z=Y?C.value():C;return R||(R=new d),I(K,Z,A,D,R)}}return!!z&&(R||(R=new d),f(y,C,A,D,I,R))}},8458:(a,l,c)=>{var d=c(3560),u=c(5346),h=c(3218),f=c(346),m=/^\[object .+?Constructor\]$/,v=Function.prototype,g=Object.prototype,p=v.toString,x=g.hasOwnProperty,b=RegExp("^"+p.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.exports=function(S){return!(!h(S)||u(S))&&(d(S)?b:m).test(f(S))}},8749:(a,l,c)=>{var d=c(4239),u=c(1780),h=c(7005),f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Arguments]"]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f["[object Map]"]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1,a.exports=function(m){return h(m)&&u(m.length)&&!!f[d(m)]}},280:(a,l,c)=>{var d=c(5726),u=c(6916),h=Object.prototype.hasOwnProperty;a.exports=function(f){if(!d(f))return u(f);var m=[];for(var v in Object(f))h.call(f,v)&&v!="constructor"&&m.push(v);return m}},2545:a=>{a.exports=function(l,c){for(var d=-1,u=Array(l);++d<l;)u[d]=c(d);return u}},1717:a=>{a.exports=function(l){return function(c){return l(c)}}},4757:a=>{a.exports=function(l,c){return l.has(c)}},4429:(a,l,c)=>{var d=c(5639)["__core-js_shared__"];a.exports=d},7114:(a,l,c)=>{var d=c(8668),u=c(2908),h=c(4757);a.exports=function(f,m,v,g,p,x){var b=1&v,S=f.length,E=m.length;if(S!=E&&!(b&&E>S))return!1;var y=x.get(f),C=x.get(m);if(y&&C)return y==m&&C==f;var A=-1,D=!0,I=2&v?new d:void 0;for(x.set(f,m),x.set(m,f);++A<S;){var R=f[A],B=m[A];if(g)var G=b?g(B,R,A,m,f,x):g(R,B,A,f,m,x);if(G!==void 0){if(G)continue;D=!1;break}if(I){if(!u(m,function(j,ee){if(!h(I,ee)&&(R===j||p(R,j,v,g,x)))return I.push(ee)})){D=!1;break}}else if(R!==B&&!p(R,B,v,g,x)){D=!1;break}}return x.delete(f),x.delete(m),D}},8351:(a,l,c)=>{var d=c(2705),u=c(1149),h=c(7813),f=c(7114),m=c(8776),v=c(1814),g=d?d.prototype:void 0,p=g?g.valueOf:void 0;a.exports=function(x,b,S,E,y,C,A){switch(S){case"[object DataView]":if(x.byteLength!=b.byteLength||x.byteOffset!=b.byteOffset)return!1;x=x.buffer,b=b.buffer;case"[object ArrayBuffer]":return!(x.byteLength!=b.byteLength||!C(new u(x),new u(b)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+x,+b);case"[object Error]":return x.name==b.name&&x.message==b.message;case"[object RegExp]":case"[object String]":return x==b+"";case"[object Map]":var D=m;case"[object Set]":var I=1&E;if(D||(D=v),x.size!=b.size&&!I)return!1;var R=A.get(x);if(R)return R==b;E|=2,A.set(x,b);var B=f(D(x),D(b),E,y,C,A);return A.delete(x),B;case"[object Symbol]":if(p)return p.call(x)==p.call(b)}return!1}},6096:(a,l,c)=>{var d=c(8234),u=Object.prototype.hasOwnProperty;a.exports=function(h,f,m,v,g,p){var x=1&m,b=d(h),S=b.length;if(S!=d(f).length&&!x)return!1;for(var E=S;E--;){var y=b[E];if(!(x?y in f:u.call(f,y)))return!1}var C=p.get(h),A=p.get(f);if(C&&A)return C==f&&A==h;var D=!0;p.set(h,f),p.set(f,h);for(var I=x;++E<S;){var R=h[y=b[E]],B=f[y];if(v)var G=x?v(B,R,y,f,h,p):v(R,B,y,h,f,p);if(!(G===void 0?R===B||g(R,B,m,v,p):G)){D=!1;break}I||(I=y=="constructor")}if(D&&!I){var j=h.constructor,ee=f.constructor;j==ee||!("constructor"in h)||!("constructor"in f)||typeof j=="function"&&j instanceof j&&typeof ee=="function"&&ee instanceof ee||(D=!1)}return p.delete(h),p.delete(f),D}},1957:(a,l,c)=>{var d=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g;a.exports=d},8234:(a,l,c)=>{var d=c(8866),u=c(9551),h=c(3674);a.exports=function(f){return d(f,h,u)}},5050:(a,l,c)=>{var d=c(7019);a.exports=function(u,h){var f=u.__data__;return d(h)?f[typeof h=="string"?"string":"hash"]:f.map}},852:(a,l,c)=>{var d=c(8458),u=c(7801);a.exports=function(h,f){var m=u(h,f);return d(m)?m:void 0}},9607:(a,l,c)=>{var d=c(2705),u=Object.prototype,h=u.hasOwnProperty,f=u.toString,m=d?d.toStringTag:void 0;a.exports=function(v){var g=h.call(v,m),p=v[m];try{v[m]=void 0;var x=!0}catch{}var b=f.call(v);return x&&(g?v[m]=p:delete v[m]),b}},9551:(a,l,c)=>{var d=c(4963),u=c(479),h=Object.prototype.propertyIsEnumerable,f=Object.getOwnPropertySymbols,m=f?function(v){return v==null?[]:(v=Object(v),d(f(v),function(g){return h.call(v,g)}))}:u;a.exports=m},4160:(a,l,c)=>{var d=c(8552),u=c(7071),h=c(3818),f=c(8525),m=c(577),v=c(4239),g=c(346),p="[object Map]",x="[object Promise]",b="[object Set]",S="[object WeakMap]",E="[object DataView]",y=g(d),C=g(u),A=g(h),D=g(f),I=g(m),R=v;(d&&R(new d(new ArrayBuffer(1)))!=E||u&&R(new u)!=p||h&&R(h.resolve())!=x||f&&R(new f)!=b||m&&R(new m)!=S)&&(R=function(B){var G=v(B),j=G=="[object Object]"?B.constructor:void 0,ee=j?g(j):"";if(ee)switch(ee){case y:return E;case C:return p;case A:return x;case D:return b;case I:return S}return G}),a.exports=R},7801:a=>{a.exports=function(l,c){return l==null?void 0:l[c]}},1789:(a,l,c)=>{var d=c(4536);a.exports=function(){this.__data__=d?d(null):{},this.size=0}},401:a=>{a.exports=function(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}},7667:(a,l,c)=>{var d=c(4536),u=Object.prototype.hasOwnProperty;a.exports=function(h){var f=this.__data__;if(d){var m=f[h];return m==="__lodash_hash_undefined__"?void 0:m}return u.call(f,h)?f[h]:void 0}},1327:(a,l,c)=>{var d=c(4536),u=Object.prototype.hasOwnProperty;a.exports=function(h){var f=this.__data__;return d?f[h]!==void 0:u.call(f,h)}},1866:(a,l,c)=>{var d=c(4536);a.exports=function(u,h){var f=this.__data__;return this.size+=this.has(u)?0:1,f[u]=d&&h===void 0?"__lodash_hash_undefined__":h,this}},5776:a=>{var l=/^(?:0|[1-9]\d*)$/;a.exports=function(c,d){var u=typeof c;return!!(d=d??9007199254740991)&&(u=="number"||u!="symbol"&&l.test(c))&&c>-1&&c%1==0&&c<d}},7019:a=>{a.exports=function(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}},5346:(a,l,c)=>{var d,u=c(4429),h=(d=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"";a.exports=function(f){return!!h&&h in f}},5726:a=>{var l=Object.prototype;a.exports=function(c){var d=c&&c.constructor;return c===(typeof d=="function"&&d.prototype||l)}},7040:a=>{a.exports=function(){this.__data__=[],this.size=0}},4125:(a,l,c)=>{var d=c(8470),u=Array.prototype.splice;a.exports=function(h){var f=this.__data__,m=d(f,h);return!(m<0||(m==f.length-1?f.pop():u.call(f,m,1),--this.size,0))}},2117:(a,l,c)=>{var d=c(8470);a.exports=function(u){var h=this.__data__,f=d(h,u);return f<0?void 0:h[f][1]}},7518:(a,l,c)=>{var d=c(8470);a.exports=function(u){return d(this.__data__,u)>-1}},4705:(a,l,c)=>{var d=c(8470);a.exports=function(u,h){var f=this.__data__,m=d(f,u);return m<0?(++this.size,f.push([u,h])):f[m][1]=h,this}},4785:(a,l,c)=>{var d=c(1989),u=c(8407),h=c(7071);a.exports=function(){this.size=0,this.__data__={hash:new d,map:new(h||u),string:new d}}},1285:(a,l,c)=>{var d=c(5050);a.exports=function(u){var h=d(this,u).delete(u);return this.size-=h?1:0,h}},6e3:(a,l,c)=>{var d=c(5050);a.exports=function(u){return d(this,u).get(u)}},9916:(a,l,c)=>{var d=c(5050);a.exports=function(u){return d(this,u).has(u)}},5265:(a,l,c)=>{var d=c(5050);a.exports=function(u,h){var f=d(this,u),m=f.size;return f.set(u,h),this.size+=f.size==m?0:1,this}},8776:a=>{a.exports=function(l){var c=-1,d=Array(l.size);return l.forEach(function(u,h){d[++c]=[h,u]}),d}},4536:(a,l,c)=>{var d=c(852)(Object,"create");a.exports=d},6916:(a,l,c)=>{var d=c(5569)(Object.keys,Object);a.exports=d},1167:(a,l,c)=>{a=c.nmd(a);var d=c(1957),u=l&&!l.nodeType&&l,h=u&&a&&!a.nodeType&&a,f=h&&h.exports===u&&d.process,m=function(){try{return h&&h.require&&h.require("util").types||f&&f.binding&&f.binding("util")}catch{}}();a.exports=m},2333:a=>{var l=Object.prototype.toString;a.exports=function(c){return l.call(c)}},5569:a=>{a.exports=function(l,c){return function(d){return l(c(d))}}},5639:(a,l,c)=>{var d=c(1957),u=typeof self=="object"&&self&&self.Object===Object&&self,h=d||u||Function("return this")();a.exports=h},619:a=>{a.exports=function(l){return this.__data__.set(l,"__lodash_hash_undefined__"),this}},2385:a=>{a.exports=function(l){return this.__data__.has(l)}},1814:a=>{a.exports=function(l){var c=-1,d=Array(l.size);return l.forEach(function(u){d[++c]=u}),d}},7465:(a,l,c)=>{var d=c(8407);a.exports=function(){this.__data__=new d,this.size=0}},3779:a=>{a.exports=function(l){var c=this.__data__,d=c.delete(l);return this.size=c.size,d}},7599:a=>{a.exports=function(l){return this.__data__.get(l)}},4758:a=>{a.exports=function(l){return this.__data__.has(l)}},4309:(a,l,c)=>{var d=c(8407),u=c(7071),h=c(3369);a.exports=function(f,m){var v=this.__data__;if(v instanceof d){var g=v.__data__;if(!u||g.length<199)return g.push([f,m]),this.size=++v.size,this;v=this.__data__=new h(g)}return v.set(f,m),this.size=v.size,this}},346:a=>{var l=Function.prototype.toString;a.exports=function(c){if(c!=null){try{return l.call(c)}catch{}try{return c+""}catch{}}return""}},7813:a=>{a.exports=function(l,c){return l===c||l!=l&&c!=c}},5694:(a,l,c)=>{var d=c(9454),u=c(7005),h=Object.prototype,f=h.hasOwnProperty,m=h.propertyIsEnumerable,v=d(function(){return arguments}())?d:function(g){return u(g)&&f.call(g,"callee")&&!m.call(g,"callee")};a.exports=v},1469:a=>{var l=Array.isArray;a.exports=l},8612:(a,l,c)=>{var d=c(3560),u=c(1780);a.exports=function(h){return h!=null&&u(h.length)&&!d(h)}},4144:(a,l,c)=>{a=c.nmd(a);var d=c(5639),u=c(5062),h=l&&!l.nodeType&&l,f=h&&a&&!a.nodeType&&a,m=f&&f.exports===h?d.Buffer:void 0,v=(m?m.isBuffer:void 0)||u;a.exports=v},8446:(a,l,c)=>{var d=c(939);a.exports=function(u,h){return d(u,h)}},3560:(a,l,c)=>{var d=c(4239),u=c(3218);a.exports=function(h){if(!u(h))return!1;var f=d(h);return f=="[object Function]"||f=="[object GeneratorFunction]"||f=="[object AsyncFunction]"||f=="[object Proxy]"}},1780:a=>{a.exports=function(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=9007199254740991}},3218:a=>{a.exports=function(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}},7005:a=>{a.exports=function(l){return l!=null&&typeof l=="object"}},6719:(a,l,c)=>{var d=c(8749),u=c(1717),h=c(1167),f=h&&h.isTypedArray,m=f?u(f):d;a.exports=m},3674:(a,l,c)=>{var d=c(4636),u=c(280),h=c(8612);a.exports=function(f){return h(f)?d(f):u(f)}},479:a=>{a.exports=function(){return[]}},5062:a=>{a.exports=function(){return!1}},75:function(a){(function(){var l,c,d,u,h,f;typeof performance<"u"&&performance!==null&&performance.now?a.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(a.exports=function(){return(l()-h)/1e6},c=process.hrtime,u=(l=function(){var m;return 1e9*(m=c())[0]+m[1]})(),f=1e9*process.uptime(),h=u-f):Date.now?(a.exports=function(){return Date.now()-d},d=Date.now()):(a.exports=function(){return new Date().getTime()-d},d=new Date().getTime())}).call(this)},4087:(a,l,c)=>{for(var d=c(75),u=typeof window>"u"?c.g:window,h=["moz","webkit"],f="AnimationFrame",m=u["request"+f],v=u["cancel"+f]||u["cancelRequest"+f],g=0;!m&&g<h.length;g++)m=u[h[g]+"Request"+f],v=u[h[g]+"Cancel"+f]||u[h[g]+"CancelRequest"+f];if(!m||!v){var p=0,x=0,b=[];m=function(S){if(b.length===0){var E=d(),y=Math.max(0,16.666666666666668-(E-p));p=y+E,setTimeout(function(){var C=b.slice(0);b.length=0;for(var A=0;A<C.length;A++)if(!C[A].cancelled)try{C[A].callback(p)}catch(D){setTimeout(function(){throw D},0)}},Math.round(y))}return b.push({handle:++x,callback:S,cancelled:!1}),x},v=function(S){for(var E=0;E<b.length;E++)b[E].handle===S&&(b[E].cancelled=!0)}}a.exports=function(S){return m.call(u,S)},a.exports.cancel=function(){v.apply(u,arguments)},a.exports.polyfill=function(S){S||(S=u),S.requestAnimationFrame=m,S.cancelAnimationFrame=v}},8156:a=>{a.exports=i}},n={};function s(a){var l=n[a];if(l!==void 0)return l.exports;var c=n[a]={id:a,loaded:!1,exports:{}};return r[a].call(c.exports,c,c.exports,s),c.loaded=!0,c.exports}s.n=a=>{var l=a&&a.__esModule?()=>a.default:()=>a;return s.d(l,{a:l}),l},s.d=(a,l)=>{for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),s.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),s.nmd=a=>(a.paths=[],a.children||(a.children=[]),a);var o={};return(()=>{s.d(o,{default:()=>E});var a=s(8156),l=s.n(a),c=s(7403),d=s(8446),u=s.n(d);function h(y){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},h(y)}function f(y,C){if(!(y instanceof C))throw new TypeError("Cannot call a class as a function")}function m(y,C){for(var A=0;A<C.length;A++){var D=C[A];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(y,D.key,D)}}function v(y,C){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,D){return A.__proto__=D,A},v(y,C)}function g(y,C){if(C&&(h(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(y)}function p(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function x(y){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},x(y)}function b(y,C,A){return C in y?Object.defineProperty(y,C,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[C]=A,y}var S=function(y){(function(G,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(j&&j.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),Object.defineProperty(G,"prototype",{writable:!1}),j&&v(G,j)})(B,y);var C,A,D,I,R=(D=B,I=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var G,j=x(D);if(I){var ee=x(this).constructor;G=Reflect.construct(j,arguments,ee)}else G=j.apply(this,arguments);return g(this,G)});function B(){var G;f(this,B);for(var j=arguments.length,ee=new Array(j),Q=0;Q<j;Q++)ee[Q]=arguments[Q];return b(p(G=R.call.apply(R,[this].concat(ee))),"state",{instance:null}),G}return C=B,(A=[{key:"componentDidMount",value:function(){var G=this,j=new c.default(this.typewriter,this.props.options);this.setState({instance:j},function(){var ee=G.props.onInit;ee&&ee(j)})}},{key:"componentDidUpdate",value:function(G){u()(this.props.options,G.options)||this.setState({instance:new c.default(this.typewriter,this.props.options)})}},{key:"componentWillUnmount",value:function(){this.state.instance&&this.state.instance.stop()}},{key:"render",value:function(){var G=this,j=this.props.component;return l().createElement(j,{ref:function(ee){return G.typewriter=ee},className:"Typewriter","data-testid":"typewriter-wrapper"})}}])&&m(C.prototype,A),Object.defineProperty(C,"prototype",{writable:!1}),B}(a.Component);S.defaultProps={component:"div"};const E=S})(),o.default})())})(nue);const sue=Wy(aE),oue=()=>{const{hamburgerDisplay:e,setHamburgerDisplay:t}=te.useContext(oa);return pe("header",{className:"navBarHeader",children:[pe("button",{onClick:()=>t(!e),className:e?"hamburger cruz":"hamburger",children:[L("div",{}),L("div",{}),L("div",{})]}),L("div",{className:"navBarHeaderLogo",children:L("img",{src:KA,alt:"logoFreecoders"})}),L("nav",{className:e?"displayed":"nav",children:pe("ul",{children:[L(Or,{to:"/login",className:e?"liDisplayed":"li",children:"Ingresar"}),L(Or,{to:"/crearperfil",className:e?"liDisplayed":"li",children:"Crear Perfil"}),L(Or,{to:"/busqueda",className:e?"liDisplayed":"li",children:"Buscar Coders"})]})}),L("div",{})]})};function qO(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function ZA(e={},t={}){Object.keys(t).forEach(i=>{typeof e[i]>"u"?e[i]=t[i]:qO(t[i])&&qO(e[i])&&Object.keys(t[i]).length>0&&ZA(e[i],t[i])})}const J4={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ea(){const e=typeof document<"u"?document:{};return ZA(e,J4),e}const aue={document:J4,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function ds(){const e=typeof window<"u"?window:{};return ZA(e,aue),e}function lue(e){const t=e;Object.keys(t).forEach(i=>{try{t[i]=null}catch{}try{delete t[i]}catch{}})}function lE(e,t=0){return setTimeout(e,t)}function ym(){return Date.now()}function cue(e){const t=ds();let i;return t.getComputedStyle&&(i=t.getComputedStyle(e,null)),!i&&e.currentStyle&&(i=e.currentStyle),i||(i=e.style),i}function uue(e,t="x"){const i=ds();let r,n,s;const o=cue(e);return i.WebKitCSSMatrix?(n=o.transform||o.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new i.WebKitCSSMatrix(n==="none"?"":n)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),t==="x"&&(i.WebKitCSSMatrix?n=s.m41:r.length===16?n=parseFloat(r[12]):n=parseFloat(r[4])),t==="y"&&(i.WebKitCSSMatrix?n=s.m42:r.length===16?n=parseFloat(r[13]):n=parseFloat(r[5])),n||0}function Fv(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function due(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function qn(...e){const t=Object(e[0]),i=["__proto__","constructor","prototype"];for(let r=1;r<e.length;r+=1){const n=e[r];if(n!=null&&!due(n)){const s=Object.keys(Object(n)).filter(o=>i.indexOf(o)<0);for(let o=0,a=s.length;o<a;o+=1){const l=s[o],c=Object.getOwnPropertyDescriptor(n,l);c!==void 0&&c.enumerable&&(Fv(t[l])&&Fv(n[l])?n[l].__swiper__?t[l]=n[l]:qn(t[l],n[l]):!Fv(t[l])&&Fv(n[l])?(t[l]={},n[l].__swiper__?t[l]=n[l]:qn(t[l],n[l])):t[l]=n[l])}}}return t}function Uv(e,t,i){e.style.setProperty(t,i)}function ez({swiper:e,targetPosition:t,side:i}){const r=ds(),n=-e.translate;let s=null,o;const a=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const l=t>n?"next":"prev",c=(u,h)=>l==="next"&&u>=h||l==="prev"&&u<=h,d=()=>{o=new Date().getTime(),s===null&&(s=o);const u=Math.max(Math.min((o-s)/a,1),0),h=.5-Math.cos(u*Math.PI)/2;let f=n+h*(t-n);if(c(f,t)&&(f=t),e.wrapperEl.scrollTo({[i]:f}),c(f,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:f})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(d)};d()}function $A(e){return e.querySelector(".swiper-slide-transform")||e.shadowEl&&e.shadowEl.querySelector(".swiper-slide-transform")||e}function Ha(e,t=""){return[...e.children].filter(i=>i.matches(t))}function JA(e,t=[]){const i=document.createElement(e);return i.classList.add(...Array.isArray(t)?t:[t]),i}function hue(e,t){const i=[];for(;e.previousElementSibling;){const r=e.previousElementSibling;t?r.matches(t)&&i.push(r):i.push(r),e=r}return i}function fue(e,t){const i=[];for(;e.nextElementSibling;){const r=e.nextElementSibling;t?r.matches(t)&&i.push(r):i.push(r),e=r}return i}function Yl(e,t){return ds().getComputedStyle(e,null).getPropertyValue(t)}function vc(e){let t=e,i;if(t){for(i=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(i+=1);return i}}function tz(e,t){const i=[];let r=e.parentElement;for(;r;)t?r.matches(t)&&i.push(r):i.push(r),r=r.parentElement;return i}function cE(e,t,i){const r=ds();return i?e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom")):e.offsetWidth}let Ob;function pue(){const e=ds(),t=ea();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function iz(){return Ob||(Ob=pue()),Ob}let Lb;function mue({userAgent:e}={}){const t=iz(),i=ds(),r=i.navigator.platform,n=e||i.navigator.userAgent,s={ios:!1,android:!1},o=i.screen.width,a=i.screen.height,l=n.match(/(Android);?[\s\/]+([\d.]+)?/);let c=n.match(/(iPad).*OS\s([\d_]+)/);const d=n.match(/(iPod)(.*OS\s([\d_]+))?/),u=!c&&n.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=r==="Win32";let f=r==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&f&&t.touch&&m.indexOf(`${o}x${a}`)>=0&&(c=n.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),f=!1),l&&!h&&(s.os="android",s.android=!0),(c||u||d)&&(s.os="ios",s.ios=!0),s}function gue(e={}){return Lb||(Lb=mue(e)),Lb}let Ib;function vue(){const e=ds();let t=!1;function i(){const r=e.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}if(i()){const r=String(e.navigator.userAgent);if(r.includes("Version/")){const[n,s]=r.split("Version/")[1].split(" ")[0].split(".").map(o=>Number(o));t=n<16||n===16&&s<2}}return{isSafari:t||i(),needPerspectiveFix:t,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function yue(){return Ib||(Ib=vue()),Ib}function xue({swiper:e,on:t,emit:i}){const r=ds();let n=null,s=null;const o=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},a=()=>{!e||e.destroyed||!e.initialized||(n=new ResizeObserver(d=>{s=r.requestAnimationFrame(()=>{const{width:u,height:h}=e;let f=u,m=h;d.forEach(({contentBoxSize:v,contentRect:g,target:p})=>{p&&p!==e.el||(f=g?g.width:(v[0]||v).inlineSize,m=g?g.height:(v[0]||v).blockSize)}),(f!==u||m!==h)&&o()})}),n.observe(e.el))},l=()=>{s&&r.cancelAnimationFrame(s),n&&n.unobserve&&e.el&&(n.unobserve(e.el),n=null)},c=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){a();return}r.addEventListener("resize",o),r.addEventListener("orientationchange",c)}),t("destroy",()=>{l(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",c)})}function wue({swiper:e,extendParams:t,on:i,emit:r}){const n=[],s=ds(),o=(c,d={})=>{const u=s.MutationObserver||s.WebkitMutationObserver,h=new u(f=>{if(f.length===1){r("observerUpdate",f[0]);return}const m=function(){r("observerUpdate",f[0])};s.requestAnimationFrame?s.requestAnimationFrame(m):s.setTimeout(m,0)});h.observe(c,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),n.push(h)},a=()=>{if(e.params.observer){if(e.params.observeParents){const c=tz(e.el);for(let d=0;d<c.length;d+=1)o(c[d])}o(e.el,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},l=()=>{n.forEach(c=>{c.disconnect()}),n.splice(0,n.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",a),i("destroy",l)}const bue={on(e,t,i){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;const n=i?"unshift":"push";return e.split(" ").forEach(s=>{r.eventsListeners[s]||(r.eventsListeners[s]=[]),r.eventsListeners[s][n](t)}),r},once(e,t,i){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;function n(...s){r.off(e,n),n.__emitterProxy&&delete n.__emitterProxy,t.apply(r,s)}return n.__emitterProxy=t,r.on(e,n,i)},onAny(e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return i.eventsAnyListeners.indexOf(e)<0&&i.eventsAnyListeners[r](e),i},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const i=t.eventsAnyListeners.indexOf(e);return i>=0&&t.eventsAnyListeners.splice(i,1),t},off(e,t){const i=this;return!i.eventsListeners||i.destroyed||!i.eventsListeners||e.split(" ").forEach(r=>{typeof t>"u"?i.eventsListeners[r]=[]:i.eventsListeners[r]&&i.eventsListeners[r].forEach((n,s)=>{(n===t||n.__emitterProxy&&n.__emitterProxy===t)&&i.eventsListeners[r].splice(s,1)})}),i},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let i,r,n;return typeof e[0]=="string"||Array.isArray(e[0])?(i=e[0],r=e.slice(1,e.length),n=t):(i=e[0].events,r=e[0].data,n=e[0].context||t),r.unshift(n),(Array.isArray(i)?i:i.split(" ")).forEach(o=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(a=>{a.apply(n,[o,...r])}),t.eventsListeners&&t.eventsListeners[o]&&t.eventsListeners[o].forEach(a=>{a.apply(n,r)})}),t}};function Sue(){const e=this;let t,i;const r=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=r.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?i=e.params.height:i=r.clientHeight,!(t===0&&e.isHorizontal()||i===0&&e.isVertical())&&(t=t-parseInt(Yl(r,"padding-left")||0,10)-parseInt(Yl(r,"padding-right")||0,10),i=i-parseInt(Yl(r,"padding-top")||0,10)-parseInt(Yl(r,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(i)&&(i=0),Object.assign(e,{width:t,height:i,size:e.isHorizontal()?t:i}))}function _ue(){const e=this;function t(R){return e.isHorizontal()?R:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[R]}function i(R,B){return parseFloat(R.getPropertyValue(t(B))||0)}const r=e.params,{wrapperEl:n,slidesEl:s,size:o,rtlTranslate:a,wrongRTL:l}=e,c=e.virtual&&r.virtual.enabled,d=c?e.virtual.slides.length:e.slides.length,u=Ha(s,`.${e.params.slideClass}, swiper-slide`),h=c?e.virtual.slides.length:u.length;let f=[];const m=[],v=[];let g=r.slidesOffsetBefore;typeof g=="function"&&(g=r.slidesOffsetBefore.call(e));let p=r.slidesOffsetAfter;typeof p=="function"&&(p=r.slidesOffsetAfter.call(e));const x=e.snapGrid.length,b=e.slidesGrid.length;let S=r.spaceBetween,E=-g,y=0,C=0;if(typeof o>"u")return;typeof S=="string"&&S.indexOf("%")>=0&&(S=parseFloat(S.replace("%",""))/100*o),e.virtualSize=-S,u.forEach(R=>{a?R.style.marginLeft="":R.style.marginRight="",R.style.marginBottom="",R.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(Uv(n,"--swiper-centered-offset-before",""),Uv(n,"--swiper-centered-offset-after",""));const A=r.grid&&r.grid.rows>1&&e.grid;A&&e.grid.initSlides(h);let D;const I=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(R=>typeof r.breakpoints[R].slidesPerView<"u").length>0;for(let R=0;R<h;R+=1){D=0;let B;if(u[R]&&(B=u[R]),A&&e.grid.updateSlide(R,B,h,t),!(u[R]&&Yl(B,"display")==="none")){if(r.slidesPerView==="auto"){I&&(u[R].style[t("width")]="");const G=getComputedStyle(B),j=B.style.transform,ee=B.style.webkitTransform;if(j&&(B.style.transform="none"),ee&&(B.style.webkitTransform="none"),r.roundLengths)D=e.isHorizontal()?cE(B,"width",!0):cE(B,"height",!0);else{const Q=i(G,"width"),re=i(G,"padding-left"),z=i(G,"padding-right"),X=i(G,"margin-left"),Y=i(G,"margin-right"),K=G.getPropertyValue("box-sizing");if(K&&K==="border-box")D=Q+X+Y;else{const{clientWidth:Z,offsetWidth:V}=B;D=Q+re+z+X+Y+(V-Z)}}j&&(B.style.transform=j),ee&&(B.style.webkitTransform=ee),r.roundLengths&&(D=Math.floor(D))}else D=(o-(r.slidesPerView-1)*S)/r.slidesPerView,r.roundLengths&&(D=Math.floor(D)),u[R]&&(u[R].style[t("width")]=`${D}px`);u[R]&&(u[R].swiperSlideSize=D),v.push(D),r.centeredSlides?(E=E+D/2+y/2+S,y===0&&R!==0&&(E=E-o/2-S),R===0&&(E=E-o/2-S),Math.abs(E)<1/1e3&&(E=0),r.roundLengths&&(E=Math.floor(E)),C%r.slidesPerGroup===0&&f.push(E),m.push(E)):(r.roundLengths&&(E=Math.floor(E)),(C-Math.min(e.params.slidesPerGroupSkip,C))%e.params.slidesPerGroup===0&&f.push(E),m.push(E),E=E+D+S),e.virtualSize+=D+S,y=D,C+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+p,a&&l&&(r.effect==="slide"||r.effect==="coverflow")&&(n.style.width=`${e.virtualSize+r.spaceBetween}px`),r.setWrapperSize&&(n.style[t("width")]=`${e.virtualSize+r.spaceBetween}px`),A&&e.grid.updateWrapperSize(D,f,t),!r.centeredSlides){const R=[];for(let B=0;B<f.length;B+=1){let G=f[B];r.roundLengths&&(G=Math.floor(G)),f[B]<=e.virtualSize-o&&R.push(G)}f=R,Math.floor(e.virtualSize-o)-Math.floor(f[f.length-1])>1&&f.push(e.virtualSize-o)}if(c&&r.loop){const R=v[0]+S;if(r.slidesPerGroup>1){const B=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/r.slidesPerGroup),G=R*r.slidesPerGroup;for(let j=0;j<B;j+=1)f.push(f[f.length-1]+G)}for(let B=0;B<e.virtual.slidesBefore+e.virtual.slidesAfter;B+=1)r.slidesPerGroup===1&&f.push(f[f.length-1]+R),m.push(m[m.length-1]+R),e.virtualSize+=R}if(f.length===0&&(f=[0]),r.spaceBetween!==0){const R=e.isHorizontal()&&a?"marginLeft":t("marginRight");u.filter((B,G)=>!r.cssMode||r.loop?!0:G!==u.length-1).forEach(B=>{B.style[R]=`${S}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let R=0;v.forEach(G=>{R+=G+(r.spaceBetween?r.spaceBetween:0)}),R-=r.spaceBetween;const B=R-o;f=f.map(G=>G<0?-g:G>B?B+p:G)}if(r.centerInsufficientSlides){let R=0;if(v.forEach(B=>{R+=B+(r.spaceBetween?r.spaceBetween:0)}),R-=r.spaceBetween,R<o){const B=(o-R)/2;f.forEach((G,j)=>{f[j]=G-B}),m.forEach((G,j)=>{m[j]=G+B})}}if(Object.assign(e,{slides:u,snapGrid:f,slidesGrid:m,slidesSizesGrid:v}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){Uv(n,"--swiper-centered-offset-before",`${-f[0]}px`),Uv(n,"--swiper-centered-offset-after",`${e.size/2-v[v.length-1]/2}px`);const R=-e.snapGrid[0],B=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(G=>G+R),e.slidesGrid=e.slidesGrid.map(G=>G+B)}if(h!==d&&e.emit("slidesLengthChange"),f.length!==x&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),m.length!==b&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!c&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const R=`${r.containerModifierClass}backface-hidden`,B=e.el.classList.contains(R);h<=r.maxBackfaceHiddenSlides?B||e.el.classList.add(R):B&&e.el.classList.remove(R)}}function Eue(e){const t=this,i=[],r=t.virtual&&t.params.virtual.enabled;let n=0,s;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const o=a=>r?t.slides.filter(l=>parseInt(l.getAttribute("data-swiper-slide-index"),10)===a)[0]:t.slides[a];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(a=>{i.push(a)});else for(s=0;s<Math.ceil(t.params.slidesPerView);s+=1){const a=t.activeIndex+s;if(a>t.slides.length&&!r)break;i.push(o(a))}else i.push(o(t.activeIndex));for(s=0;s<i.length;s+=1)if(typeof i[s]<"u"){const a=i[s].offsetHeight;n=a>n?a:n}(n||n===0)&&(t.wrapperEl.style.height=`${n}px`)}function Aue(){const e=this,t=e.slides,i=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-i}function Cue(e=this&&this.translate||0){const t=this,i=t.params,{slides:r,rtlTranslate:n,snapGrid:s}=t;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let o=-e;n&&(o=e),r.forEach(a=>{a.classList.remove(i.slideVisibleClass)}),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let a=0;a<r.length;a+=1){const l=r[a];let c=l.swiperSlideOffset;i.cssMode&&i.centeredSlides&&(c-=r[0].swiperSlideOffset);const d=(o+(i.centeredSlides?t.minTranslate():0)-c)/(l.swiperSlideSize+i.spaceBetween),u=(o-s[0]+(i.centeredSlides?t.minTranslate():0)-c)/(l.swiperSlideSize+i.spaceBetween),h=-(o-c),f=h+t.slidesSizesGrid[a];(h>=0&&h<t.size-1||f>1&&f<=t.size||h<=0&&f>=t.size)&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(a),r[a].classList.add(i.slideVisibleClass)),l.progress=n?-d:d,l.originalProgress=n?-u:u}}function Tue(e){const t=this;if(typeof e>"u"){const d=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*d||0}const i=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:n,isBeginning:s,isEnd:o,progressLoop:a}=t;const l=s,c=o;if(r===0)n=0,s=!0,o=!0;else{n=(e-t.minTranslate())/r;const d=Math.abs(e-t.minTranslate())<1,u=Math.abs(e-t.maxTranslate())<1;s=d||n<=0,o=u||n>=1,d&&(n=0),u&&(n=1)}if(i.loop){const d=vc(t.slides.filter(g=>g.getAttribute("data-swiper-slide-index")==="0")[0]),u=vc(t.slides.filter(g=>g.getAttribute("data-swiper-slide-index")*1===t.slides.length-1)[0]),h=t.slidesGrid[d],f=t.slidesGrid[u],m=t.slidesGrid[t.slidesGrid.length-1],v=Math.abs(e);v>=h?a=(v-h)/m:a=(v+m-f)/m,a>1&&(a-=1)}Object.assign(t,{progress:n,progressLoop:a,isBeginning:s,isEnd:o}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),s&&!l&&t.emit("reachBeginning toEdge"),o&&!c&&t.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&t.emit("fromEdge"),t.emit("progress",n)}function Mue(){const e=this,{slides:t,params:i,slidesEl:r,activeIndex:n}=e,s=e.virtual&&i.virtual.enabled,o=l=>Ha(r,`.${i.slideClass}${l}, swiper-slide${l}`)[0];t.forEach(l=>{l.classList.remove(i.slideActiveClass,i.slideNextClass,i.slidePrevClass)});let a;if(s)if(i.loop){let l=n-e.virtual.slidesBefore;l<0&&(l=e.virtual.slides.length+l),l>=e.virtual.slides.length&&(l-=e.virtual.slides.length),a=o(`[data-swiper-slide-index="${l}"]`)}else a=o(`[data-swiper-slide-index="${n}"]`);else a=t[n];if(a){a.classList.add(i.slideActiveClass);let l=fue(a,`.${i.slideClass}, swiper-slide`)[0];i.loop&&!l&&(l=t[0]),l&&l.classList.add(i.slideNextClass);let c=hue(a,`.${i.slideClass}, swiper-slide`)[0];i.loop&&!c===0&&(c=t[t.length-1]),c&&c.classList.add(i.slidePrevClass)}e.emitSlidesClasses()}function Pue(e){const{slidesGrid:t,params:i}=e,r=e.rtlTranslate?e.translate:-e.translate;let n;for(let s=0;s<t.length;s+=1)typeof t[s+1]<"u"?r>=t[s]&&r<t[s+1]-(t[s+1]-t[s])/2?n=s:r>=t[s]&&r<t[s+1]&&(n=s+1):r>=t[s]&&(n=s);return i.normalizeSlideIndex&&(n<0||typeof n>"u")&&(n=0),n}function Due(e){const t=this,i=t.rtlTranslate?t.translate:-t.translate,{snapGrid:r,params:n,activeIndex:s,realIndex:o,snapIndex:a}=t;let l=e,c;const d=h=>{let f=h-t.virtual.slidesBefore;return f<0&&(f=t.virtual.slides.length+f),f>=t.virtual.slides.length&&(f-=t.virtual.slides.length),f};if(typeof l>"u"&&(l=Pue(t)),r.indexOf(i)>=0)c=r.indexOf(i);else{const h=Math.min(n.slidesPerGroupSkip,l);c=h+Math.floor((l-h)/n.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===s){c!==a&&(t.snapIndex=c,t.emit("snapIndexChange")),t.params.loop&&t.virtual&&t.params.virtual.enabled&&(t.realIndex=d(l));return}let u;t.virtual&&n.virtual.enabled&&n.loop?u=d(l):t.slides[l]?u=parseInt(t.slides[l].getAttribute("data-swiper-slide-index")||l,10):u=l,Object.assign(t,{snapIndex:c,realIndex:u,previousIndex:s,activeIndex:l}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),o!==u&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function Oue(e){const t=this,i=t.params,r=e.closest(`.${i.slideClass}, swiper-slide`);let n=!1,s;if(r){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===r){n=!0,s=o;break}}if(r&&n)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=s;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}const Lue={updateSize:Sue,updateSlides:_ue,updateAutoHeight:Eue,updateSlidesOffset:Aue,updateSlidesProgress:Cue,updateProgress:Tue,updateSlidesClasses:Mue,updateActiveIndex:Due,updateClickedSlide:Oue};function Iue(e=this.isHorizontal()?"x":"y"){const t=this,{params:i,rtlTranslate:r,translate:n,wrapperEl:s}=t;if(i.virtualTranslate)return r?-n:n;if(i.cssMode)return n;let o=uue(s,e);return r&&(o=-o),o||0}function Rue(e,t){const i=this,{rtlTranslate:r,params:n,wrapperEl:s,progress:o}=i;let a=0,l=0;const c=0;i.isHorizontal()?a=r?-e:e:l=e,n.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),n.cssMode?s[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-a:-l:n.virtualTranslate||(s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?a:l;let d;const u=i.maxTranslate()-i.minTranslate();u===0?d=0:d=(e-i.minTranslate())/u,d!==o&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)}function Nue(){return-this.snapGrid[0]}function Bue(){return-this.snapGrid[this.snapGrid.length-1]}function kue(e=0,t=this.params.speed,i=!0,r=!0,n){const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let d;if(r&&e>l?d=l:r&&e<c?d=c:d=e,s.updateProgress(d),o.cssMode){const u=s.isHorizontal();if(t===0)a[u?"scrollLeft":"scrollTop"]=-d;else{if(!s.support.smoothScroll)return ez({swiper:s,targetPosition:-d,side:u?"left":"top"}),!0;a.scrollTo({[u?"left":"top"]:-d,behavior:"smooth"})}return!0}return t===0?(s.setTransition(0),s.setTranslate(d),i&&(s.emit("beforeTransitionStart",t,n),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(d),i&&(s.emit("beforeTransitionStart",t,n),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(h){!s||s.destroyed||h.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,i&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}const zue={getTranslate:Iue,setTranslate:Rue,minTranslate:Nue,maxTranslate:Bue,translateTo:kue};function Fue(e,t){const i=this;i.params.cssMode||(i.wrapperEl.style.transitionDuration=`${e}ms`),i.emit("setTransition",e,t)}function rz({swiper:e,runCallbacks:t,direction:i,step:r}){const{activeIndex:n,previousIndex:s}=e;let o=i;if(o||(n>s?o="next":n<s?o="prev":o="reset"),e.emit(`transition${r}`),t&&n!==s){if(o==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),o==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function Uue(e=!0,t){const i=this,{params:r}=i;r.cssMode||(r.autoHeight&&i.updateAutoHeight(),rz({swiper:i,runCallbacks:e,direction:t,step:"Start"}))}function jue(e=!0,t){const i=this,{params:r}=i;i.animating=!1,!r.cssMode&&(i.setTransition(0),rz({swiper:i,runCallbacks:e,direction:t,step:"End"}))}const Hue={setTransition:Fue,transitionStart:Uue,transitionEnd:jue};function Gue(e=0,t=this.params.speed,i=!0,r,n){typeof e=="string"&&(e=parseInt(e,10));const s=this;let o=e;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:u,rtlTranslate:h,wrapperEl:f,enabled:m}=s;if(s.animating&&a.preventInteractionOnTransition||!m&&!r&&!n)return!1;const v=Math.min(s.params.slidesPerGroupSkip,o);let g=v+Math.floor((o-v)/s.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const p=-l[g];if(a.normalizeSlideIndex)for(let b=0;b<c.length;b+=1){const S=-Math.floor(p*100),E=Math.floor(c[b]*100),y=Math.floor(c[b+1]*100);typeof c[b+1]<"u"?S>=E&&S<y-(y-E)/2?o=b:S>=E&&S<y&&(o=b+1):S>=E&&(o=b)}if(s.initialized&&o!==u&&(!s.allowSlideNext&&p<s.translate&&p<s.minTranslate()||!s.allowSlidePrev&&p>s.translate&&p>s.maxTranslate()&&(u||0)!==o))return!1;o!==(d||0)&&i&&s.emit("beforeSlideChangeStart"),s.updateProgress(p);let x;if(o>u?x="next":o<u?x="prev":x="reset",h&&-p===s.translate||!h&&p===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(p),x!=="reset"&&(s.transitionStart(i,x),s.transitionEnd(i,x)),!1;if(a.cssMode){const b=s.isHorizontal(),S=h?p:-p;if(t===0){const E=s.virtual&&s.params.virtual.enabled;E&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),E&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[b?"scrollLeft":"scrollTop"]=S})):f[b?"scrollLeft":"scrollTop"]=S,E&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return ez({swiper:s,targetPosition:S,side:b?"left":"top"}),!0;f.scrollTo({[b?"left":"top"]:S,behavior:"smooth"})}return!0}return s.setTransition(t),s.setTranslate(p),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(i,x),t===0?s.transitionEnd(i,x):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(S){!s||s.destroyed||S.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(i,x))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function Vue(e=0,t=this.params.speed,i=!0,r){typeof e=="string"&&(e=parseInt(e,10));const n=this;let s=e;return n.params.loop&&(n.virtual&&n.params.virtual.enabled?s=s+n.virtual.slidesBefore:s=vc(n.slides.filter(o=>o.getAttribute("data-swiper-slide-index")*1===s)[0])),n.slideTo(s,t,i,r)}function Wue(e=this.params.speed,t=!0,i){const r=this,{enabled:n,params:s,animating:o}=r;if(!n)return r;let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:a,c=r.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft}return s.rewind&&r.isEnd?r.slideTo(0,e,t,i):r.slideTo(r.activeIndex+l,e,t,i)}function que(e=this.params.speed,t=!0,i){const r=this,{params:n,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=r;if(!l)return r;const d=r.virtual&&n.virtual.enabled;if(n.loop){if(c&&!d&&n.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const u=a?r.translate:-r.translate;function h(p){return p<0?-Math.floor(Math.abs(p)):Math.floor(p)}const f=h(u),m=s.map(p=>h(p));let v=s[m.indexOf(f)-1];if(typeof v>"u"&&n.cssMode){let p;s.forEach((x,b)=>{f>=x&&(p=b)}),typeof p<"u"&&(v=s[p>0?p-1:p])}let g=0;if(typeof v<"u"&&(g=o.indexOf(v),g<0&&(g=r.activeIndex-1),n.slidesPerView==="auto"&&n.slidesPerGroup===1&&n.slidesPerGroupAuto&&(g=g-r.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),n.rewind&&r.isBeginning){const p=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(p,e,t,i)}return r.slideTo(g,e,t,i)}function Xue(e=this.params.speed,t=!0,i){const r=this;return r.slideTo(r.activeIndex,e,t,i)}function Yue(e=this.params.speed,t=!0,i,r=.5){const n=this;let s=n.activeIndex;const o=Math.min(n.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/n.params.slidesPerGroup),l=n.rtlTranslate?n.translate:-n.translate;if(l>=n.snapGrid[a]){const c=n.snapGrid[a],d=n.snapGrid[a+1];l-c>(d-c)*r&&(s+=n.params.slidesPerGroup)}else{const c=n.snapGrid[a-1],d=n.snapGrid[a];l-c<=(d-c)*r&&(s-=n.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,n.slidesGrid.length-1),n.slideTo(s,e,t,i)}function Que(){const e=this,{params:t,slidesEl:i}=e,r=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let n=e.clickedIndex,s;const o=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;s=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?n<e.loopedSlides-r/2||n>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),n=vc(Ha(i,`${o}[data-swiper-slide-index="${s}"]`)[0]),lE(()=>{e.slideTo(n)})):e.slideTo(n):n>e.slides.length-r?(e.loopFix(),n=vc(Ha(i,`${o}[data-swiper-slide-index="${s}"]`)[0]),lE(()=>{e.slideTo(n)})):e.slideTo(n)}else e.slideTo(n)}const Kue={slideTo:Gue,slideToLoop:Vue,slideNext:Wue,slidePrev:que,slideReset:Xue,slideToClosest:Yue,slideToClickedSlide:Que};function Zue(e){const t=this,{params:i,slidesEl:r}=t;if(!i.loop||t.virtual&&t.params.virtual.enabled)return;Ha(r,`.${i.slideClass}, swiper-slide`).forEach((s,o)=>{s.setAttribute("data-swiper-slide-index",o)}),t.loopFix({slideRealIndex:e,direction:i.centeredSlides?void 0:"next"})}function $ue({slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:n,byController:s,byMousewheel:o}={}){const a=this;if(!a.params.loop)return;a.emit("beforeLoopFix");const{slides:l,allowSlidePrev:c,allowSlideNext:d,slidesEl:u,params:h}=a;if(a.allowSlidePrev=!0,a.allowSlideNext=!0,a.virtual&&h.virtual.enabled){t&&(!h.centeredSlides&&a.snapIndex===0?a.slideTo(a.virtual.slides.length,0,!1,!0):h.centeredSlides&&a.snapIndex<h.slidesPerView?a.slideTo(a.virtual.slides.length+a.snapIndex,0,!1,!0):a.snapIndex===a.snapGrid.length-1&&a.slideTo(a.virtual.slidesBefore,0,!1,!0)),a.allowSlidePrev=c,a.allowSlideNext=d,a.emit("loopFix");return}const f=h.slidesPerView==="auto"?a.slidesPerViewDynamic():Math.ceil(parseFloat(h.slidesPerView,10));let m=h.loopedSlides||f;m%h.slidesPerGroup!==0&&(m+=h.slidesPerGroup-m%h.slidesPerGroup),a.loopedSlides=m;const v=[],g=[];let p=a.activeIndex;typeof n>"u"?n=vc(a.slides.filter(y=>y.classList.contains("swiper-slide-active"))[0]):p=n;const x=i==="next"||!i,b=i==="prev"||!i;let S=0,E=0;if(n<m){S=m-n;for(let y=0;y<m-n;y+=1){const C=y-Math.floor(y/l.length)*l.length;v.push(l.length-C-1)}}else if(n>a.slides.length-m*2){E=n-(a.slides.length-m*2);for(let y=0;y<E;y+=1){const C=y-Math.floor(y/l.length)*l.length;g.push(C)}}if(b&&v.forEach(y=>{u.prepend(a.slides[y])}),x&&g.forEach(y=>{u.append(a.slides[y])}),a.recalcSlides(),h.watchSlidesProgress&&a.updateSlidesOffset(),t){if(v.length>0&&b)if(typeof e>"u"){const y=a.slidesGrid[p],A=a.slidesGrid[p+S]-y;o?a.setTranslate(a.translate-A):(a.slideTo(p+S,0,!1,!0),r&&(a.touches[a.isHorizontal()?"startX":"startY"]+=A))}else r&&a.slideToLoop(e,0,!1,!0);else if(g.length>0&&x)if(typeof e>"u"){const y=a.slidesGrid[p],A=a.slidesGrid[p-E]-y;o?a.setTranslate(a.translate-A):(a.slideTo(p-E,0,!1,!0),r&&(a.touches[a.isHorizontal()?"startX":"startY"]+=A))}else a.slideToLoop(e,0,!1,!0)}if(a.allowSlidePrev=c,a.allowSlideNext=d,a.controller&&a.controller.control&&!s){const y={slideRealIndex:e,slideTo:!1,direction:i,setTranslate:r,activeSlideIndex:n,byController:!0};Array.isArray(a.controller.control)?a.controller.control.forEach(C=>{C.params.loop&&C.loopFix(y)}):a.controller.control instanceof a.constructor&&a.controller.control.params.loop&&a.controller.control.loopFix(y)}a.emit("loopFix")}function Jue(){const e=this,{slides:t,params:i,slidesEl:r}=e;if(!i.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const n=[];t.forEach(s=>{const o=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;n[o]=s}),t.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),n.forEach(s=>{r.append(s)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}const ede={loopCreate:Zue,loopFix:$ue,loopDestroy:Jue};function tde(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const i=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;i.style.cursor="move",i.style.cursor=e?"grabbing":"grab"}function ide(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const rde={setGrabCursor:tde,unsetGrabCursor:ide};function nde(e,t=this){function i(r){if(!r||r===ea()||r===ds())return null;r.assignedSlot&&(r=r.assignedSlot);const n=r.closest(e);return!n&&!r.getRootNode?null:n||i(r.getRootNode().host)}return i(t)}function sde(e){const t=this,i=ea(),r=ds(),n=t.touchEventsData;n.evCache.push(e);const{params:s,touches:o,enabled:a}=t;if(!a||!s.simulateTouch&&e.pointerType==="mouse"||t.animating&&s.preventInteractionOnTransition)return;!t.animating&&s.cssMode&&s.loop&&t.loopFix();let l=e;l.originalEvent&&(l=l.originalEvent);let c=l.target;if(s.touchEventsTarget==="wrapper"&&!t.wrapperEl.contains(c)||"which"in l&&l.which===3||"button"in l&&l.button>0||n.isTouched&&n.isMoved)return;const d=!!s.noSwipingClass&&s.noSwipingClass!=="",u=e.composedPath?e.composedPath():e.path;d&&l.target&&l.target.shadowRoot&&u&&(c=u[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(f?nde(h,c):c.closest(h))){t.allowClick=!0;return}if(s.swipeHandler&&!c.closest(s.swipeHandler))return;o.currentX=l.pageX,o.currentY=l.pageY;const m=o.currentX,v=o.currentY,g=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,p=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(g&&(m<=p||m>=r.innerWidth-p))if(g==="prevent")e.preventDefault();else return;Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=m,o.startY=v,n.touchStartTime=ym(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,s.threshold>0&&(n.allowThresholdMove=!1);let x=!0;c.matches(n.focusableElements)&&(x=!1,c.nodeName==="SELECT"&&(n.isTouched=!1)),i.activeElement&&i.activeElement.matches(n.focusableElements)&&i.activeElement!==c&&i.activeElement.blur();const b=x&&t.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||b)&&!c.isContentEditable&&l.preventDefault(),t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!s.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",l)}function ode(e){const t=ea(),i=this,r=i.touchEventsData,{params:n,touches:s,rtlTranslate:o,enabled:a}=i;if(!a||!n.simulateTouch&&e.pointerType==="mouse")return;let l=e;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&i.emit("touchMoveOpposite",l);return}const c=r.evCache.findIndex(y=>y.pointerId===l.pointerId);c>=0&&(r.evCache[c]=l);const d=r.evCache.length>1?r.evCache[0]:l,u=d.pageX,h=d.pageY;if(l.preventedByNestedSwiper){s.startX=u,s.startY=h;return}if(!i.allowTouchMove){l.target.matches(r.focusableElements)||(i.allowClick=!1),r.isTouched&&(Object.assign(s,{startX:u,startY:h,prevX:i.touches.currentX,prevY:i.touches.currentY,currentX:u,currentY:h}),r.touchStartTime=ym());return}if(n.touchReleaseOnEdges&&!n.loop){if(i.isVertical()){if(h<s.startY&&i.translate<=i.maxTranslate()||h>s.startY&&i.translate>=i.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(u<s.startX&&i.translate<=i.maxTranslate()||u>s.startX&&i.translate>=i.minTranslate())return}if(t.activeElement&&l.target===t.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,i.allowClick=!1;return}if(r.allowTouchCallbacks&&i.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=u,s.currentY=h;const f=s.currentX-s.startX,m=s.currentY-s.startY;if(i.params.threshold&&Math.sqrt(f**2+m**2)<i.params.threshold)return;if(typeof r.isScrolling>"u"){let y;i.isHorizontal()&&s.currentY===s.startY||i.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:f*f+m*m>=25&&(y=Math.atan2(Math.abs(m),Math.abs(f))*180/Math.PI,r.isScrolling=i.isHorizontal()?y>n.touchAngle:90-y>n.touchAngle)}if(r.isScrolling&&i.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(r.startMoving=!0),r.isScrolling||i.zoom&&i.params.zoom&&i.params.zoom.enabled&&r.evCache.length>1){r.isTouched=!1;return}if(!r.startMoving)return;i.allowClick=!1,!n.cssMode&&l.cancelable&&l.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&l.stopPropagation();let v=i.isHorizontal()?f:m,g=i.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;n.oneWayMovement&&(v=Math.abs(v)*(o?1:-1),g=Math.abs(g)*(o?1:-1)),s.diff=v,v*=n.touchRatio,o&&(v=-v,g=-g);const p=i.touchesDirection;i.swipeDirection=v>0?"prev":"next",i.touchesDirection=g>0?"prev":"next";const x=i.params.loop&&!n.cssMode;if(!r.isMoved){if(x&&i.loopFix({direction:i.swipeDirection}),r.startTranslate=i.getTranslate(),i.setTransition(0),i.animating){const y=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});i.wrapperEl.dispatchEvent(y)}r.allowMomentumBounce=!1,n.grabCursor&&(i.allowSlideNext===!0||i.allowSlidePrev===!0)&&i.setGrabCursor(!0),i.emit("sliderFirstMove",l)}let b;r.isMoved&&p!==i.touchesDirection&&x&&Math.abs(v)>=1&&(i.loopFix({direction:i.swipeDirection,setTranslate:!0}),b=!0),i.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=v+r.startTranslate;let S=!0,E=n.resistanceRatio;if(n.touchReleaseOnEdges&&(E=0),v>0?(x&&!b&&r.currentTranslate>(n.centeredSlides?i.minTranslate()-i.size/2:i.minTranslate())&&i.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>i.minTranslate()&&(S=!1,n.resistance&&(r.currentTranslate=i.minTranslate()-1+(-i.minTranslate()+r.startTranslate+v)**E))):v<0&&(x&&!b&&r.currentTranslate<(n.centeredSlides?i.maxTranslate()+i.size/2:i.maxTranslate())&&i.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:i.slides.length-(n.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(parseFloat(n.slidesPerView,10)))}),r.currentTranslate<i.maxTranslate()&&(S=!1,n.resistance&&(r.currentTranslate=i.maxTranslate()+1-(i.maxTranslate()-r.startTranslate-v)**E))),S&&(l.preventedByNestedSwiper=!0),!i.allowSlideNext&&i.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&i.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&!i.allowSlideNext&&(r.currentTranslate=r.startTranslate),n.threshold>0)if(Math.abs(v)>n.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,s.diff=i.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{r.currentTranslate=r.startTranslate;return}!n.followFinger||n.cssMode||((n.freeMode&&n.freeMode.enabled&&i.freeMode||n.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),i.params.freeMode&&n.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(r.currentTranslate),i.setTranslate(r.currentTranslate))}function ade(e){const t=this,i=t.touchEventsData,r=i.evCache.findIndex(b=>b.pointerId===e.pointerId);if(r>=0&&i.evCache.splice(r,1),["pointercancel","pointerout","pointerleave"].includes(e.type))return;const{params:n,touches:s,rtlTranslate:o,slidesGrid:a,enabled:l}=t;if(!l||!n.simulateTouch&&e.pointerType==="mouse")return;let c=e;if(c.originalEvent&&(c=c.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",c),i.allowTouchCallbacks=!1,!i.isTouched){i.isMoved&&n.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,i.startMoving=!1;return}n.grabCursor&&i.isMoved&&i.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const d=ym(),u=d-i.touchStartTime;if(t.allowClick){const b=c.path||c.composedPath&&c.composedPath();t.updateClickedSlide(b&&b[0]||c.target),t.emit("tap click",c),u<300&&d-i.lastClickTime<300&&t.emit("doubleTap doubleClick",c)}if(i.lastClickTime=ym(),lE(()=>{t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||s.diff===0||i.currentTranslate===i.startTranslate){i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;return}i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;let h;if(n.followFinger?h=o?t.translate:-t.translate:h=-i.currentTranslate,n.cssMode)return;if(t.params.freeMode&&n.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:h});return}let f=0,m=t.slidesSizesGrid[0];for(let b=0;b<a.length;b+=b<n.slidesPerGroupSkip?1:n.slidesPerGroup){const S=b<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;typeof a[b+S]<"u"?h>=a[b]&&h<a[b+S]&&(f=b,m=a[b+S]-a[b]):h>=a[b]&&(f=b,m=a[a.length-1]-a[a.length-2])}let v=null,g=null;n.rewind&&(t.isBeginning?g=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(v=0));const p=(h-a[f])/m,x=f<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(u>n.longSwipesMs){if(!n.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(p>=n.longSwipesRatio?t.slideTo(n.rewind&&t.isEnd?v:f+x):t.slideTo(f)),t.swipeDirection==="prev"&&(p>1-n.longSwipesRatio?t.slideTo(f+x):g!==null&&p<0&&Math.abs(p)>n.longSwipesRatio?t.slideTo(g):t.slideTo(f))}else{if(!n.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(c.target===t.navigation.nextEl||c.target===t.navigation.prevEl)?c.target===t.navigation.nextEl?t.slideTo(f+x):t.slideTo(f):(t.swipeDirection==="next"&&t.slideTo(v!==null?v:f+x),t.swipeDirection==="prev"&&t.slideTo(g!==null?g:f))}}let XO;function YO(){const e=this,{params:t,el:i}=e;if(i&&i.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:n,snapGrid:s}=e,o=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const a=o&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!a?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!o?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(XO),XO=setTimeout(()=>{e.autoplay.resume()},500)),e.allowSlidePrev=n,e.allowSlideNext=r,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}function lde(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function cde(){const e=this,{wrapperEl:t,rtlTranslate:i,enabled:r}=e;if(!r)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let n;const s=e.maxTranslate()-e.minTranslate();s===0?n=0:n=(e.translate-e.minTranslate())/s,n!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}const v0=(e,t)=>{if(!e||e.destroyed||!e.params)return;const i=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,r=t.closest(i());if(r){const n=r.querySelector(`.${e.params.lazyPreloaderClass}`);n&&n.remove()}};function ude(e){const t=this;v0(t,e.target),t.update()}let QO=!1;function dde(){}const nz=(e,t)=>{const i=ea(),{params:r,el:n,wrapperEl:s,device:o}=e,a=!!r.nested,l=t==="on"?"addEventListener":"removeEventListener",c=t;n[l]("pointerdown",e.onTouchStart,{passive:!1}),i[l]("pointermove",e.onTouchMove,{passive:!1,capture:a}),i[l]("pointerup",e.onTouchEnd,{passive:!0}),i[l]("pointercancel",e.onTouchEnd,{passive:!0}),i[l]("pointerout",e.onTouchEnd,{passive:!0}),i[l]("pointerleave",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&n[l]("click",e.onClick,!0),r.cssMode&&s[l]("scroll",e.onScroll),r.updateOnWindowResize?e[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",YO,!0):e[c]("observerUpdate",YO,!0),n[l]("load",e.onLoad,{capture:!0})};function hde(){const e=this,t=ea(),{params:i}=e;e.onTouchStart=sde.bind(e),e.onTouchMove=ode.bind(e),e.onTouchEnd=ade.bind(e),i.cssMode&&(e.onScroll=cde.bind(e)),e.onClick=lde.bind(e),e.onLoad=ude.bind(e),QO||(t.addEventListener("touchstart",dde),QO=!0),nz(e,"on")}function fde(){nz(this,"off")}const pde={attachEvents:hde,detachEvents:fde},KO=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function mde(){const e=this,{realIndex:t,initialized:i,params:r,el:n}=e,s=r.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(!o||e.currentBreakpoint===o)return;const l=(o in s?s[o]:void 0)||e.originalParams,c=KO(e,r),d=KO(e,l),u=r.enabled;c&&!d?(n.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),e.emitContainerClasses()):!c&&d&&(n.classList.add(`${r.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&r.grid.fill==="column")&&n.classList.add(`${r.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(v=>{const g=r[v]&&r[v].enabled,p=l[v]&&l[v].enabled;g&&!p&&e[v].disable(),!g&&p&&e[v].enable()});const h=l.direction&&l.direction!==r.direction,f=r.loop&&(l.slidesPerView!==r.slidesPerView||h);h&&i&&e.changeDirection(),qn(e.params,l);const m=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),u&&!m?e.disable():!u&&m&&e.enable(),e.currentBreakpoint=o,e.emit("_beforeBreakpoint",l),f&&i&&(e.loopDestroy(),e.loopCreate(t),e.updateSlides()),e.emit("breakpoint",l)}function gde(e,t="window",i){if(!e||t==="container"&&!i)return;let r=!1;const n=ds(),s=t==="window"?n.innerHeight:i.clientHeight,o=Object.keys(e).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];t==="window"?n.matchMedia(`(min-width: ${c}px)`).matches&&(r=l):c<=i.clientWidth&&(r=l)}return r||"max"}const vde={setBreakpoint:mde,getBreakpoint:gde};function yde(e,t){const i=[];return e.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(n=>{r[n]&&i.push(t+n)}):typeof r=="string"&&i.push(t+r)}),i}function xde(){const e=this,{classNames:t,params:i,rtl:r,el:n,device:s}=e,o=yde(["initialized",i.direction,{"free-mode":e.params.freeMode&&i.freeMode.enabled},{autoheight:i.autoHeight},{rtl:r},{grid:i.grid&&i.grid.rows>1},{"grid-column":i.grid&&i.grid.rows>1&&i.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":i.cssMode},{centered:i.cssMode&&i.centeredSlides},{"watch-progress":i.watchSlidesProgress}],i.containerModifierClass);t.push(...o),n.classList.add(...t),e.emitContainerClasses()}function wde(){const e=this,{el:t,classNames:i}=e;t.classList.remove(...i),e.emitContainerClasses()}const bde={addClasses:xde,removeClasses:wde};function Sde(){const e=this,{isLocked:t,params:i}=e,{slidesOffsetBefore:r}=i;if(r){const n=e.slides.length-1,s=e.slidesGrid[n]+e.slidesSizesGrid[n]+r*2;e.isLocked=e.size>s}else e.isLocked=e.snapGrid.length===1;i.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),i.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}const _de={checkOverflow:Sde},ZO={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",runCallbacksOnInit:!0,_emitClasses:!1};function Ede(e,t){return function(r={}){const n=Object.keys(r)[0],s=r[n];if(typeof s!="object"||s===null){qn(t,r);return}if(["navigation","pagination","scrollbar"].indexOf(n)>=0&&e[n]===!0&&(e[n]={auto:!0}),!(n in e&&"enabled"in s)){qn(t,r);return}e[n]===!0&&(e[n]={enabled:!0}),typeof e[n]=="object"&&!("enabled"in e[n])&&(e[n].enabled=!0),e[n]||(e[n]={enabled:!1}),qn(t,r)}}const Rb={eventsEmitter:bue,update:Lue,translate:zue,transition:Hue,slide:Kue,loop:ede,grabCursor:rde,events:pde,breakpoints:vde,checkOverflow:_de,classes:bde},Nb={};let xm=class Da{constructor(...t){let i,r;t.length===1&&t[0].constructor&&Object.prototype.toString.call(t[0]).slice(8,-1)==="Object"?r=t[0]:[i,r]=t,r||(r={}),r=qn({},r),i&&!r.el&&(r.el=i);const n=ea();if(r.el&&typeof r.el=="string"&&n.querySelectorAll(r.el).length>1){const l=[];return n.querySelectorAll(r.el).forEach(c=>{const d=qn({},r,{el:c});l.push(new Da(d))}),l}const s=this;s.__swiper__=!0,s.support=iz(),s.device=gue({userAgent:r.userAgent}),s.browser=yue(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],r.modules&&Array.isArray(r.modules)&&s.modules.push(...r.modules);const o={};s.modules.forEach(l=>{l({params:r,swiper:s,extendParams:Ede(r,o),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});const a=qn({},ZO,o);return s.params=qn({},a,Nb,r),s.originalParams=qn({},s.params),s.passedParams=qn({},r),s.params&&s.params.on&&Object.keys(s.params.on).forEach(l=>{s.on(l,s.params.on[l])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:i,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return s.params.direction==="horizontal"},isVertical(){return s.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:ym(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}recalcSlides(){const t=this,{slidesEl:i,params:r}=t;t.slides=Ha(i,`.${r.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,i){const r=this;t=Math.min(Math.max(t,0),1);const n=r.minTranslate(),o=(r.maxTranslate()-n)*t+n;r.translateTo(o,typeof i>"u"?0:i),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=t.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",i.join(" "))}getSlideClasses(t){const i=this;return i.destroyed?"":t.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(i.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=[];t.slides.forEach(r=>{const n=t.getSlideClasses(r);i.push({slideEl:r,classNames:n}),t.emit("_slideClass",r,n)}),t.emit("_slideClasses",i)}slidesPerViewDynamic(t="current",i=!1){const r=this,{params:n,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=r;let d=1;if(n.centeredSlides){let u=s[c].swiperSlideSize,h;for(let f=c+1;f<s.length;f+=1)s[f]&&!h&&(u+=s[f].swiperSlideSize,d+=1,u>l&&(h=!0));for(let f=c-1;f>=0;f-=1)s[f]&&!h&&(u+=s[f].swiperSlideSize,d+=1,u>l&&(h=!0))}else if(t==="current")for(let u=c+1;u<s.length;u+=1)(i?o[u]+a[u]-o[c]<l:o[u]-o[c]<l)&&(d+=1);else for(let u=c-1;u>=0;u-=1)o[c]-o[u]<l&&(d+=1);return d}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:i,params:r}=t;r.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&v0(t,o)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function n(){const o=t.rtlTranslate?t.translate*-1:t.translate,a=Math.min(Math.max(o,t.maxTranslate()),t.minTranslate());t.setTranslate(a),t.updateActiveIndex(),t.updateSlidesClasses()}let s;t.params.freeMode&&t.params.freeMode.enabled?(n(),t.params.autoHeight&&t.updateAutoHeight()):((t.params.slidesPerView==="auto"||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?s=t.slideTo(t.slides.length-1,0,!1,!0):s=t.slideTo(t.activeIndex,0,!1,!0),s||n()),r.watchOverflow&&i!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,i=!0){const r=this,n=r.params.direction;return t||(t=n==="horizontal"?"vertical":"horizontal"),t===n||t!=="horizontal"&&t!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${n}`),r.el.classList.add(`${r.params.containerModifierClass}${t}`),r.emitContainerClasses(),r.params.direction=t,r.slides.forEach(s=>{t==="vertical"?s.style.width="":s.style.height=""}),r.emit("changeDirection"),i&&r.update()),r}changeLanguageDirection(t){const i=this;i.rtl&&t==="rtl"||!i.rtl&&t==="ltr"||(i.rtl=t==="rtl",i.rtlTranslate=i.params.direction==="horizontal"&&i.rtl,i.rtl?(i.el.classList.add(`${i.params.containerModifierClass}rtl`),i.el.dir="rtl"):(i.el.classList.remove(`${i.params.containerModifierClass}rtl`),i.el.dir="ltr"),i.update())}mount(t){const i=this;if(i.mounted)return!0;let r=t||i.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=i,r.shadowEl&&(i.isElement=!0);const n=()=>`.${(i.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=(()=>r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(n()):Ha(r,n())[0])();return!o&&i.params.createElements&&(o=JA("div",i.params.wrapperClass),r.append(o),Ha(r,`.${i.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(i,{el:r,wrapperEl:o,slidesEl:i.isElement?r:o,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||Yl(r,"direction")==="rtl",rtlTranslate:i.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||Yl(r,"direction")==="rtl"),wrongRTL:Yl(o,"display")==="-webkit-box"}),!0}init(t){const i=this;return i.initialized||i.mount(t)===!1||(i.emit("beforeInit"),i.params.breakpoints&&i.setBreakpoint(),i.addClasses(),i.updateSize(),i.updateSlides(),i.params.watchOverflow&&i.checkOverflow(),i.params.grabCursor&&i.enabled&&i.setGrabCursor(),i.params.loop&&i.virtual&&i.params.virtual.enabled?i.slideTo(i.params.initialSlide+i.virtual.slidesBefore,0,i.params.runCallbacksOnInit,!1,!0):i.slideTo(i.params.initialSlide,0,i.params.runCallbacksOnInit,!1,!0),i.params.loop&&i.loopCreate(),i.attachEvents(),[...i.el.querySelectorAll('[loading="lazy"]')].forEach(n=>{n.complete?v0(i,n):n.addEventListener("load",s=>{v0(i,s.target)})}),i.initialized=!0,i.emit("init"),i.emit("afterInit")),i}destroy(t=!0,i=!0){const r=this,{params:n,el:s,wrapperEl:o,slides:a}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),n.loop&&r.loopDestroy(),i&&(r.removeClasses(),s.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(n.slideVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),t!==!1&&(r.el.swiper=null,lue(r)),r.destroyed=!0),null}static extendDefaults(t){qn(Nb,t)}static get extendedDefaults(){return Nb}static get defaults(){return ZO}static installModule(t){Da.prototype.__modules__||(Da.prototype.__modules__=[]);const i=Da.prototype.__modules__;typeof t=="function"&&i.indexOf(t)<0&&i.push(t)}static use(t){return Array.isArray(t)?(t.forEach(i=>Da.installModule(i)),Da):(Da.installModule(t),Da)}};Object.keys(Rb).forEach(e=>{Object.keys(Rb[e]).forEach(t=>{xm.prototype[t]=Rb[e][t]})});xm.use([xue,wue]);function Ade(e,t,i,r){return e.params.createElements&&Object.keys(r).forEach(n=>{if(!i[n]&&i.auto===!0){let s=Ha(e.el,`.${r[n]}`)[0];s||(s=JA("div",r[n]),s.className=r[n],e.el.append(s)),i[n]=s,t[n]=s}}),i}function Kf(e=""){return`.${e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function Cde({swiper:e,extendParams:t,on:i,emit:r}){const n="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:p=>p,formatFractionTotal:p=>p,bulletClass:`${n}-bullet`,bulletActiveClass:`${n}-bullet-active`,modifierClass:`${n}-`,currentClass:`${n}-current`,totalClass:`${n}-total`,hiddenClass:`${n}-hidden`,progressbarFillClass:`${n}-progressbar-fill`,progressbarOppositeClass:`${n}-progressbar-opposite`,clickableClass:`${n}-clickable`,lockClass:`${n}-lock`,horizontalClass:`${n}-horizontal`,verticalClass:`${n}-vertical`,paginationDisabledClass:`${n}-disabled`}}),e.pagination={el:null,bullets:[]};let s,o=0;const a=p=>(Array.isArray(p)||(p=[p].filter(x=>!!x)),p);function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(p,x){const{bulletActiveClass:b}=e.params.pagination;p&&(p=p[`${x==="prev"?"previous":"next"}ElementSibling`],p&&(p.classList.add(`${b}-${x}`),p=p[`${x==="prev"?"previous":"next"}ElementSibling`],p&&p.classList.add(`${b}-${x}-${x}`)))}function d(p){const x=p.target.closest(Kf(e.params.pagination.bulletClass));if(!x)return;p.preventDefault();const b=vc(x)*e.params.slidesPerGroup;e.params.loop?e.slideToLoop(b):e.slideTo(b)}function u(){const p=e.rtl,x=e.params.pagination;if(l())return;let b=e.pagination.el;b=a(b);let S;const E=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,y=e.params.loop?Math.ceil(E/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?S=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex:typeof e.snapIndex<"u"?S=e.snapIndex:S=e.activeIndex||0,x.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const C=e.pagination.bullets;let A,D,I;if(x.dynamicBullets&&(s=cE(C[0],e.isHorizontal()?"width":"height",!0),b.forEach(R=>{R.style[e.isHorizontal()?"width":"height"]=`${s*(x.dynamicMainBullets+4)}px`}),x.dynamicMainBullets>1&&e.previousIndex!==void 0&&(o+=S-(e.previousIndex||0),o>x.dynamicMainBullets-1?o=x.dynamicMainBullets-1:o<0&&(o=0)),A=Math.max(S-o,0),D=A+(Math.min(C.length,x.dynamicMainBullets)-1),I=(D+A)/2),C.forEach(R=>{R.classList.remove(...["","-next","-next-next","-prev","-prev-prev","-main"].map(B=>`${x.bulletActiveClass}${B}`))}),b.length>1)C.forEach(R=>{const B=vc(R);B===S&&R.classList.add(x.bulletActiveClass),x.dynamicBullets&&(B>=A&&B<=D&&R.classList.add(`${x.bulletActiveClass}-main`),B===A&&c(R,"prev"),B===D&&c(R,"next"))});else{const R=C[S];if(R&&R.classList.add(x.bulletActiveClass),x.dynamicBullets){const B=C[A],G=C[D];for(let j=A;j<=D;j+=1)C[j].classList.add(`${x.bulletActiveClass}-main`);c(B,"prev"),c(G,"next")}}if(x.dynamicBullets){const R=Math.min(C.length,x.dynamicMainBullets+4),B=(s*R-s)/2-I*s,G=p?"right":"left";C.forEach(j=>{j.style[e.isHorizontal()?G:"top"]=`${B}px`})}}b.forEach((C,A)=>{if(x.type==="fraction"&&(C.querySelectorAll(Kf(x.currentClass)).forEach(D=>{D.textContent=x.formatFractionCurrent(S+1)}),C.querySelectorAll(Kf(x.totalClass)).forEach(D=>{D.textContent=x.formatFractionTotal(y)})),x.type==="progressbar"){let D;x.progressbarOpposite?D=e.isHorizontal()?"vertical":"horizontal":D=e.isHorizontal()?"horizontal":"vertical";const I=(S+1)/y;let R=1,B=1;D==="horizontal"?R=I:B=I,C.querySelectorAll(Kf(x.progressbarFillClass)).forEach(G=>{G.style.transform=`translate3d(0,0,0) scaleX(${R}) scaleY(${B})`,G.style.transitionDuration=`${e.params.speed}ms`})}x.type==="custom"&&x.renderCustom?(C.innerHTML=x.renderCustom(e,S+1,y),A===0&&r("paginationRender",C)):(A===0&&r("paginationRender",C),r("paginationUpdate",C)),e.params.watchOverflow&&e.enabled&&C.classList[e.isLocked?"add":"remove"](x.lockClass)})}function h(){const p=e.params.pagination;if(l())return;const x=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let b=e.pagination.el;b=a(b);let S="";if(p.type==="bullets"){let E=e.params.loop?Math.ceil(x/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&E>x&&(E=x);for(let y=0;y<E;y+=1)p.renderBullet?S+=p.renderBullet.call(e,y,p.bulletClass):S+=`<${p.bulletElement} class="${p.bulletClass}"></${p.bulletElement}>`}p.type==="fraction"&&(p.renderFraction?S=p.renderFraction.call(e,p.currentClass,p.totalClass):S=`<span class="${p.currentClass}"></span> / <span class="${p.totalClass}"></span>`),p.type==="progressbar"&&(p.renderProgressbar?S=p.renderProgressbar.call(e,p.progressbarFillClass):S=`<span class="${p.progressbarFillClass}"></span>`),b.forEach(E=>{p.type!=="custom"&&(E.innerHTML=S||""),p.type==="bullets"&&(e.pagination.bullets=[...E.querySelectorAll(Kf(p.bulletClass))])}),p.type!=="custom"&&r("paginationRender",b[0])}function f(){e.params.pagination=Ade(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const p=e.params.pagination;if(!p.el)return;let x;typeof p.el=="string"&&e.isElement&&(x=e.el.shadowRoot.querySelector(p.el)),!x&&typeof p.el=="string"&&(x=[...document.querySelectorAll(p.el)]),x||(x=p.el),!(!x||x.length===0)&&(e.params.uniqueNavElements&&typeof p.el=="string"&&Array.isArray(x)&&x.length>1&&(x=[...e.el.querySelectorAll(p.el)],x.length>1&&(x=x.filter(b=>tz(b,".swiper")[0]===e.el)[0])),Array.isArray(x)&&x.length===1&&(x=x[0]),Object.assign(e.pagination,{el:x}),x=a(x),x.forEach(b=>{p.type==="bullets"&&p.clickable&&b.classList.add(p.clickableClass),b.classList.add(p.modifierClass+p.type),b.classList.add(e.isHorizontal()?p.horizontalClass:p.verticalClass),p.type==="bullets"&&p.dynamicBullets&&(b.classList.add(`${p.modifierClass}${p.type}-dynamic`),o=0,p.dynamicMainBullets<1&&(p.dynamicMainBullets=1)),p.type==="progressbar"&&p.progressbarOpposite&&b.classList.add(p.progressbarOppositeClass),p.clickable&&b.addEventListener("click",d),e.enabled||b.classList.add(p.lockClass)}))}function m(){const p=e.params.pagination;if(l())return;let x=e.pagination.el;x&&(x=a(x),x.forEach(b=>{b.classList.remove(p.hiddenClass),b.classList.remove(p.modifierClass+p.type),b.classList.remove(e.isHorizontal()?p.horizontalClass:p.verticalClass),p.clickable&&b.removeEventListener("click",d)})),e.pagination.bullets&&e.pagination.bullets.forEach(b=>b.classList.remove(p.bulletActiveClass))}i("init",()=>{e.params.pagination.enabled===!1?g():(f(),h(),u())}),i("activeIndexChange",()=>{typeof e.snapIndex>"u"&&u()}),i("snapIndexChange",()=>{u()}),i("snapGridLengthChange",()=>{h(),u()}),i("destroy",()=>{m()}),i("enable disable",()=>{let{el:p}=e.pagination;p&&(p=a(p),p.forEach(x=>x.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),i("lock unlock",()=>{u()}),i("click",(p,x)=>{const b=x.target;let{el:S}=e.pagination;if(Array.isArray(S)||(S=[S].filter(E=>!!E)),e.params.pagination.el&&e.params.pagination.hideOnClick&&S&&S.length>0&&!b.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&b===e.navigation.nextEl||e.navigation.prevEl&&b===e.navigation.prevEl))return;const E=S[0].classList.contains(e.params.pagination.hiddenClass);r(E===!0?"paginationShow":"paginationHide"),S.forEach(y=>y.classList.toggle(e.params.pagination.hiddenClass))}});const v=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:p}=e.pagination;p&&(p=a(p),p.forEach(x=>x.classList.remove(e.params.pagination.paginationDisabledClass))),f(),h(),u()},g=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:p}=e.pagination;p&&(p=a(p),p.forEach(x=>x.classList.add(e.params.pagination.paginationDisabledClass))),m()};Object.assign(e.pagination,{enable:v,disable:g,render:h,update:u,init:f,destroy:m})}function Tde({swiper:e,extendParams:t,on:i,emit:r,params:n}){e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let s,o,a=n&&n.autoplay?n.autoplay.delay:3e3,l=n&&n.autoplay?n.autoplay.delay:3e3,c,d=new Date().getTime,u,h,f,m,v,g;function p(Q){!e||e.destroyed||!e.wrapperEl||Q.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",p),A())}const x=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?u=!0:u&&(l=c,u=!1);const Q=e.autoplay.paused?c:d+l-new Date().getTime();e.autoplay.timeLeft=Q,r("autoplayTimeLeft",Q,Q/a),o=requestAnimationFrame(()=>{x()})},b=()=>{let Q;return e.virtual&&e.params.virtual.enabled?Q=e.slides.filter(z=>z.classList.contains("swiper-slide-active"))[0]:Q=e.slides[e.activeIndex],Q?parseInt(Q.getAttribute("data-swiper-autoplay"),10):void 0},S=Q=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(o),x();let re=typeof Q>"u"?e.params.autoplay.delay:Q;a=e.params.autoplay.delay,l=e.params.autoplay.delay;const z=b();!Number.isNaN(z)&&z>0&&typeof Q>"u"&&(re=z,a=z,l=z),c=re;const X=e.params.speed,Y=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(X,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,X,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(X,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,X,!0,!0),r("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{S()})))};return re>0?(clearTimeout(s),s=setTimeout(()=>{Y()},re)):requestAnimationFrame(()=>{Y()}),re},E=()=>{e.autoplay.running=!0,S(),r("autoplayStart")},y=()=>{e.autoplay.running=!1,clearTimeout(s),cancelAnimationFrame(o),r("autoplayStop")},C=(Q,re)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(s),Q||(g=!0);const z=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",p):A()};if(e.autoplay.paused=!0,re){v&&(c=e.params.autoplay.delay),v=!1,z();return}c=(c||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&c<0&&!e.params.loop)&&(c<0&&(c=0),z())},A=()=>{e.isEnd&&c<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),g?(g=!1,S(c)):S(),e.autoplay.paused=!1,r("autoplayResume"))},D=()=>{if(e.destroyed||!e.autoplay.running)return;const Q=ea();Q.visibilityState==="hidden"&&(g=!0,C(!0)),Q.visibilityState==="visible"&&A()},I=Q=>{Q.pointerType==="mouse"&&(g=!0,C(!0))},R=Q=>{Q.pointerType==="mouse"&&e.autoplay.paused&&A()},B=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",I),e.el.addEventListener("pointerleave",R))},G=()=>{e.el.removeEventListener("pointerenter",I),e.el.removeEventListener("pointerleave",R)},j=()=>{ea().addEventListener("visibilitychange",D)},ee=()=>{ea().removeEventListener("visibilitychange",D)};i("init",()=>{e.params.autoplay.enabled&&(B(),j(),d=new Date().getTime(),E())}),i("destroy",()=>{G(),ee(),e.autoplay.running&&y()}),i("beforeTransitionStart",(Q,re,z)=>{e.destroyed||!e.autoplay.running||(z||!e.params.autoplay.disableOnInteraction?C(!0,!0):y())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){y();return}h=!0,f=!1,g=!1,m=setTimeout(()=>{g=!0,f=!0,C(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!h)){if(clearTimeout(m),clearTimeout(s),e.params.autoplay.disableOnInteraction){f=!1,h=!1;return}f&&e.params.cssMode&&A(),f=!1,h=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(v=!0)}),Object.assign(e.autoplay,{start:E,stop:y,pause:C,resume:A})}function Mde(e){const{effect:t,swiper:i,on:r,setTranslate:n,setTransition:s,overwriteParams:o,perspective:a,recreateShadows:l,getEffectParams:c}=e;r("beforeInit",()=>{if(i.params.effect!==t)return;i.classNames.push(`${i.params.containerModifierClass}${t}`),a&&a()&&i.classNames.push(`${i.params.containerModifierClass}3d`);const u=o?o():{};Object.assign(i.params,u),Object.assign(i.originalParams,u)}),r("setTranslate",()=>{i.params.effect===t&&n()}),r("setTransition",(u,h)=>{i.params.effect===t&&s(h)}),r("transitionEnd",()=>{if(i.params.effect===t&&l){if(!c||!c().slideShadows)return;i.slides.forEach(u=>{u.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>h.remove())}),l()}});let d;r("virtualUpdate",()=>{i.params.effect===t&&(i.slides.length||(d=!0),requestAnimationFrame(()=>{d&&i.slides&&i.slides.length&&(n(),d=!1)}))})}function Pde(e,t){const i=$A(t);return i!==t&&(i.style.backfaceVisibility="hidden",i.style["-webkit-backface-visibility"]="hidden"),i}function $O(e,t,i){const r=`swiper-slide-shadow${i?`-${i}`:""}`,n=$A(t);let s=n.querySelector(`.${r}`);return s||(s=JA("div",`swiper-slide-shadow${i?`-${i}`:""}`),n.append(s)),s}function Dde({swiper:e,extendParams:t,on:i}){t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),Mde({effect:"coverflow",swiper:e,on:i,setTranslate:()=>{const{width:s,height:o,slides:a,slidesSizesGrid:l}=e,c=e.params.coverflowEffect,d=e.isHorizontal(),u=e.translate,h=d?-u+s/2:-u+o/2,f=d?c.rotate:-c.rotate,m=c.depth;for(let v=0,g=a.length;v<g;v+=1){const p=a[v],x=l[v],b=p.swiperSlideOffset,S=(h-b-x/2)/x,E=typeof c.modifier=="function"?c.modifier(S):S*c.modifier;let y=d?f*E:0,C=d?0:f*E,A=-m*Math.abs(E),D=c.stretch;typeof D=="string"&&D.indexOf("%")!==-1&&(D=parseFloat(c.stretch)/100*x);let I=d?0:D*E,R=d?D*E:0,B=1-(1-c.scale)*Math.abs(E);Math.abs(R)<.001&&(R=0),Math.abs(I)<.001&&(I=0),Math.abs(A)<.001&&(A=0),Math.abs(y)<.001&&(y=0),Math.abs(C)<.001&&(C=0),Math.abs(B)<.001&&(B=0);const G=`translate3d(${R}px,${I}px,${A}px)  rotateX(${C}deg) rotateY(${y}deg) scale(${B})`,j=Pde(c,p);if(j.style.transform=G,p.style.zIndex=-Math.abs(Math.round(E))+1,c.slideShadows){let ee=d?p.querySelector(".swiper-slide-shadow-left"):p.querySelector(".swiper-slide-shadow-top"),Q=d?p.querySelector(".swiper-slide-shadow-right"):p.querySelector(".swiper-slide-shadow-bottom");ee||(ee=$O(c,p,d?"left":"top")),Q||(Q=$O(c,p,d?"right":"bottom")),ee&&(ee.style.opacity=E>0?E:0),Q&&(Q.style.opacity=-E>0?-E:0)}}},setTransition:s=>{e.slides.map(a=>$A(a)).forEach(a=>{a.style.transitionDuration=`${s}ms`,a.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(l=>{l.style.transitionDuration=`${s}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function Pu(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function Ql(e,t){const i=["__proto__","constructor","prototype"];Object.keys(t).filter(r=>i.indexOf(r)<0).forEach(r=>{typeof e[r]>"u"?e[r]=t[r]:Pu(t[r])&&Pu(e[r])&&Object.keys(t[r]).length>0?t[r].__swiper__?e[r]=t[r]:Ql(e[r],t[r]):e[r]=t[r]})}function sz(e={}){return e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function oz(e={}){return e.pagination&&typeof e.pagination.el>"u"}function az(e={}){return e.scrollbar&&typeof e.scrollbar.el>"u"}function lz(e=""){const t=e.split(" ").map(r=>r.trim()).filter(r=>!!r),i=[];return t.forEach(r=>{i.indexOf(r)<0&&i.push(r)}),i.join(" ")}function Ode(e=""){return e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}const cz=["modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control","injectStyles","injectStylesUrls"];function Lde(e={},t=!0){const i={on:{}},r={},n={};Ql(i,xm.defaults),Ql(i,xm.extendedDefaults),i._emitClasses=!0,i.init=!1;const s={},o=cz.map(l=>l.replace(/_/,"")),a=Object.assign({},e);return Object.keys(a).forEach(l=>{typeof e[l]>"u"||(o.indexOf(l)>=0?Pu(e[l])?(i[l]={},n[l]={},Ql(i[l],e[l]),Ql(n[l],e[l])):(i[l]=e[l],n[l]=e[l]):l.search(/on[A-Z]/)===0&&typeof e[l]=="function"?t?r[`${l[2].toLowerCase()}${l.substr(3)}`]=e[l]:i.on[`${l[2].toLowerCase()}${l.substr(3)}`]=e[l]:s[l]=e[l])}),["navigation","pagination","scrollbar"].forEach(l=>{i[l]===!0&&(i[l]={}),i[l]===!1&&delete i[l]}),{params:i,passedParams:n,rest:s,events:r}}function Ide({el:e,nextEl:t,prevEl:i,paginationEl:r,scrollbarEl:n,swiper:s},o){sz(o)&&t&&i&&(s.params.navigation.nextEl=t,s.originalParams.navigation.nextEl=t,s.params.navigation.prevEl=i,s.originalParams.navigation.prevEl=i),oz(o)&&r&&(s.params.pagination.el=r,s.originalParams.pagination.el=r),az(o)&&n&&(s.params.scrollbar.el=n,s.originalParams.scrollbar.el=n),s.init(e)}function Rde(e,t,i,r,n){const s=[];if(!t)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(i&&r){const l=r.map(n),c=i.map(n);l.join("")!==c.join("")&&o("children"),r.length!==i.length&&o("children")}return cz.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in e&&l in t)if(Pu(e[l])&&Pu(t[l])){const c=Object.keys(e[l]),d=Object.keys(t[l]);c.length!==d.length?o(l):(c.forEach(u=>{e[l][u]!==t[l][u]&&o(l)}),d.forEach(u=>{e[l][u]!==t[l][u]&&o(l)}))}else e[l]!==t[l]&&o(l)}),s}function uz(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function dz(e){const t=[];return ii.Children.toArray(e).forEach(i=>{uz(i)?t.push(i):i.props&&i.props.children&&dz(i.props.children).forEach(r=>t.push(r))}),t}function Nde(e){const t=[],i={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return ii.Children.toArray(e).forEach(r=>{if(uz(r))t.push(r);else if(r.props&&r.props.slot&&i[r.props.slot])i[r.props.slot].push(r);else if(r.props&&r.props.children){const n=dz(r.props.children);n.length>0?n.forEach(s=>t.push(s)):i["container-end"].push(r)}else i["container-end"].push(r)}),{slides:t,slots:i}}function Bde({swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:n,prevEl:s,scrollbarEl:o,paginationEl:a}){const l=r.filter(A=>A!=="children"&&A!=="direction"&&A!=="wrapperClass"),{params:c,pagination:d,navigation:u,scrollbar:h,virtual:f,thumbs:m}=e;let v,g,p,x,b,S,E,y;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(v=!0),r.includes("controller")&&i.controller&&i.controller.control&&c.controller&&!c.controller.control&&(g=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||a)&&(c.pagination||c.pagination===!1)&&d&&!d.el&&(p=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||o)&&(c.scrollbar||c.scrollbar===!1)&&h&&!h.el&&(x=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||s)&&(i.navigation.nextEl||n)&&(c.navigation||c.navigation===!1)&&u&&!u.prevEl&&!u.nextEl&&(b=!0);const C=A=>{e[A]&&(e[A].destroy(),A==="navigation"?(e.isElement&&(e[A].prevEl.remove(),e[A].nextEl.remove()),c[A].prevEl=void 0,c[A].nextEl=void 0,e[A].prevEl=void 0,e[A].nextEl=void 0):(e.isElement&&e[A].el.remove(),c[A].el=void 0,e[A].el=void 0))};r.includes("loop")&&e.isElement&&(c.loop&&!i.loop?S=!0:!c.loop&&i.loop?E=!0:y=!0),l.forEach(A=>{if(Pu(c[A])&&Pu(i[A]))Ql(c[A],i[A]);else{const D=i[A];(D===!0||D===!1)&&(A==="navigation"||A==="pagination"||A==="scrollbar")?D===!1&&C(A):c[A]=i[A]}}),l.includes("controller")&&!g&&e.controller&&e.controller.control&&c.controller&&c.controller.control&&(e.controller.control=c.controller.control),r.includes("children")&&t&&f&&c.virtual.enabled&&(f.slides=t,f.update(!0)),r.includes("children")&&t&&c.loop&&(y=!0),v&&m.init()&&m.update(!0),g&&(e.controller.control=c.controller.control),p&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-pagination"),e.el.shadowEl.appendChild(a)),a&&(c.pagination.el=a),d.init(),d.render(),d.update()),x&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),e.el.shadowEl.appendChild(o)),o&&(c.scrollbar.el=o),h.init(),h.updateSize(),h.setTranslate()),b&&(e.isElement&&((!n||typeof n=="string")&&(n=document.createElement("div"),n.classList.add("swiper-button-next"),e.el.shadowEl.appendChild(n)),(!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-prev"),e.el.shadowEl.appendChild(s))),n&&(c.navigation.nextEl=n),s&&(c.navigation.prevEl=s),u.init(),u.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(S||y)&&e.loopDestroy(),(E||y)&&e.loopCreate(),e.update()}function kde(e,t,i){if(!i)return null;const r=d=>{let u=d;return d<0?u=t.length+d:u>=t.length&&(u=u-t.length),u},n=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${i.offset}px`}:{top:`${i.offset}px`},{from:s,to:o}=i,a=e.params.loop?-t.length:0,l=e.params.loop?t.length*2:t.length,c=[];for(let d=a;d<l;d+=1)d>=s&&d<=o&&c.push(t[r(d)]);return c.map(d=>ii.cloneElement(d,{swiper:e,style:n}))}const zde=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function Ip(e,t){return typeof window>"u"?te.useEffect(e,t):te.useLayoutEffect(e,t)}const JO=te.createContext(null),Fde=te.createContext(null);function uE(){return uE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},uE.apply(this,arguments)}const hz=te.forwardRef(function(e,t){let{className:i,tag:r="div",wrapperTag:n="div",children:s,onSwiper:o,...a}=e===void 0?{}:e,l=!1;const[c,d]=te.useState("swiper"),[u,h]=te.useState(null),[f,m]=te.useState(!1),v=te.useRef(!1),g=te.useRef(null),p=te.useRef(null),x=te.useRef(null),b=te.useRef(null),S=te.useRef(null),E=te.useRef(null),y=te.useRef(null),C=te.useRef(null),{params:A,passedParams:D,rest:I,events:R}=Lde(a),{slides:B,slots:G}=Nde(s),j=()=>{m(!f)};Object.assign(A.on,{_containerClasses(X,Y){d(Y)}});const ee=()=>{Object.assign(A.on,R),l=!0;const X={...A};if(delete X.wrapperClass,p.current=new xm(X),p.current.virtual&&p.current.params.virtual.enabled){p.current.virtual.slides=B;const Y={cache:!1,slides:B,renderExternal:h,renderExternalUpdate:!1};Ql(p.current.params.virtual,Y),Ql(p.current.originalParams.virtual,Y)}};g.current||ee(),p.current&&p.current.on("_beforeBreakpoint",j);const Q=()=>{l||!R||!p.current||Object.keys(R).forEach(X=>{p.current.on(X,R[X])})},re=()=>{!R||!p.current||Object.keys(R).forEach(X=>{p.current.off(X,R[X])})};te.useEffect(()=>()=>{p.current&&p.current.off("_beforeBreakpoint",j)}),te.useEffect(()=>{!v.current&&p.current&&(p.current.emitSlidesClasses(),v.current=!0)}),Ip(()=>{if(t&&(t.current=g.current),!!g.current)return p.current.destroyed&&ee(),Ide({el:g.current,nextEl:S.current,prevEl:E.current,paginationEl:y.current,scrollbarEl:C.current,swiper:p.current},A),o&&o(p.current),()=>{p.current&&!p.current.destroyed&&p.current.destroy(!0,!1)}},[]),Ip(()=>{Q();const X=Rde(D,x.current,B,b.current,Y=>Y.key);return x.current=D,b.current=B,X.length&&p.current&&!p.current.destroyed&&Bde({swiper:p.current,slides:B,passedParams:D,changedParams:X,nextEl:S.current,prevEl:E.current,scrollbarEl:C.current,paginationEl:y.current}),()=>{re()}}),Ip(()=>{zde(p.current)},[u]);function z(){return A.virtual?kde(p.current,B,u):B.map((X,Y)=>ii.cloneElement(X,{swiper:p.current,swiperSlideIndex:Y}))}return ii.createElement(r,uE({ref:g,className:lz(`${c}${i?` ${i}`:""}`)},I),ii.createElement(Fde.Provider,{value:p.current},G["container-start"],ii.createElement(n,{className:Ode(A.wrapperClass)},G["wrapper-start"],z(),G["wrapper-end"]),sz(A)&&ii.createElement(ii.Fragment,null,ii.createElement("div",{ref:E,className:"swiper-button-prev"}),ii.createElement("div",{ref:S,className:"swiper-button-next"})),az(A)&&ii.createElement("div",{ref:C,className:"swiper-scrollbar"}),oz(A)&&ii.createElement("div",{ref:y,className:"swiper-pagination"}),G["container-end"]))});hz.displayName="Swiper";function dE(){return dE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},dE.apply(this,arguments)}const fz=te.forwardRef(function(e,t){let{tag:i="div",children:r,className:n="",swiper:s,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:c,...d}=e===void 0?{}:e;const u=te.useRef(null),[h,f]=te.useState("swiper-slide"),[m,v]=te.useState(!1);function g(S,E,y){E===u.current&&f(y)}Ip(()=>{if(typeof c<"u"&&(u.current.swiperSlideIndex=c),t&&(t.current=u.current),!(!u.current||!s)){if(s.destroyed){h!=="swiper-slide"&&f("swiper-slide");return}return s.on("_slideClass",g),()=>{s&&s.off("_slideClass",g)}}}),Ip(()=>{s&&u.current&&!s.destroyed&&f(s.getSlideClasses(u.current))},[s]);const p={isActive:h.indexOf("swiper-slide-active")>=0,isVisible:h.indexOf("swiper-slide-visible")>=0,isPrev:h.indexOf("swiper-slide-prev")>=0,isNext:h.indexOf("swiper-slide-next")>=0},x=()=>typeof r=="function"?r(p):r,b=()=>{v(!0)};return ii.createElement(i,dE({ref:u,className:lz(`${h}${n?` ${n}`:""}`),"data-swiper-slide-index":l,onLoad:b},d),o&&ii.createElement(JO.Provider,{value:p},ii.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},x(),a&&!m&&ii.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&ii.createElement(JO.Provider,{value:p},x(),a&&!m&&ii.createElement("div",{className:"swiper-lazy-preloader"})))});fz.displayName="SwiperSlide";var Uy={},Ude={get exports(){return Uy},set exports(e){Uy=e}};/*!
 * jQuery JavaScript Library v3.6.3
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2022-12-20T21:28Z
 */var eL;function pz(){return eL||(eL=1,function(e){(function(t,i){e.exports=t.document?i(t,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return i(r)}})(typeof window<"u"?window:no,function(t,i){var r=[],n=Object.getPrototypeOf,s=r.slice,o=r.flat?function(w){return r.flat.call(w)}:function(w){return r.concat.apply([],w)},a=r.push,l=r.indexOf,c={},d=c.toString,u=c.hasOwnProperty,h=u.toString,f=h.call(Object),m={},v=function(_){return typeof _=="function"&&typeof _.nodeType!="number"&&typeof _.item!="function"},g=function(_){return _!=null&&_===_.window},p=t.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function b(w,_,M){M=M||p;var O,k,U=M.createElement("script");if(U.text=w,_)for(O in x)k=_[O]||_.getAttribute&&_.getAttribute(O),k&&U.setAttribute(O,k);M.head.appendChild(U).parentNode.removeChild(U)}function S(w){return w==null?w+"":typeof w=="object"||typeof w=="function"?c[d.call(w)]||"object":typeof w}var E="3.6.3",y=function(w,_){return new y.fn.init(w,_)};y.fn=y.prototype={jquery:E,constructor:y,length:0,toArray:function(){return s.call(this)},get:function(w){return w==null?s.call(this):w<0?this[w+this.length]:this[w]},pushStack:function(w){var _=y.merge(this.constructor(),w);return _.prevObject=this,_},each:function(w){return y.each(this,w)},map:function(w){return this.pushStack(y.map(this,function(_,M){return w.call(_,M,_)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(y.grep(this,function(w,_){return(_+1)%2}))},odd:function(){return this.pushStack(y.grep(this,function(w,_){return _%2}))},eq:function(w){var _=this.length,M=+w+(w<0?_:0);return this.pushStack(M>=0&&M<_?[this[M]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:r.sort,splice:r.splice},y.extend=y.fn.extend=function(){var w,_,M,O,k,U,H=arguments[0]||{},le=1,se=arguments.length,ve=!1;for(typeof H=="boolean"&&(ve=H,H=arguments[le]||{},le++),typeof H!="object"&&!v(H)&&(H={}),le===se&&(H=this,le--);le<se;le++)if((w=arguments[le])!=null)for(_ in w)O=w[_],!(_==="__proto__"||H===O)&&(ve&&O&&(y.isPlainObject(O)||(k=Array.isArray(O)))?(M=H[_],k&&!Array.isArray(M)?U=[]:!k&&!y.isPlainObject(M)?U={}:U=M,k=!1,H[_]=y.extend(ve,U,O)):O!==void 0&&(H[_]=O));return H},y.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(w){throw new Error(w)},noop:function(){},isPlainObject:function(w){var _,M;return!w||d.call(w)!=="[object Object]"?!1:(_=n(w),_?(M=u.call(_,"constructor")&&_.constructor,typeof M=="function"&&h.call(M)===f):!0)},isEmptyObject:function(w){var _;for(_ in w)return!1;return!0},globalEval:function(w,_,M){b(w,{nonce:_&&_.nonce},M)},each:function(w,_){var M,O=0;if(C(w))for(M=w.length;O<M&&_.call(w[O],O,w[O])!==!1;O++);else for(O in w)if(_.call(w[O],O,w[O])===!1)break;return w},makeArray:function(w,_){var M=_||[];return w!=null&&(C(Object(w))?y.merge(M,typeof w=="string"?[w]:w):a.call(M,w)),M},inArray:function(w,_,M){return _==null?-1:l.call(_,w,M)},merge:function(w,_){for(var M=+_.length,O=0,k=w.length;O<M;O++)w[k++]=_[O];return w.length=k,w},grep:function(w,_,M){for(var O,k=[],U=0,H=w.length,le=!M;U<H;U++)O=!_(w[U],U),O!==le&&k.push(w[U]);return k},map:function(w,_,M){var O,k,U=0,H=[];if(C(w))for(O=w.length;U<O;U++)k=_(w[U],U,M),k!=null&&H.push(k);else for(U in w)k=_(w[U],U,M),k!=null&&H.push(k);return o(H)},guid:1,support:m}),typeof Symbol=="function"&&(y.fn[Symbol.iterator]=r[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(w,_){c["[object "+_+"]"]=_.toLowerCase()});function C(w){var _=!!w&&"length"in w&&w.length,M=S(w);return v(w)||g(w)?!1:M==="array"||_===0||typeof _=="number"&&_>0&&_-1 in w}var A=function(w){var _,M,O,k,U,H,le,se,ve,Ce,Ge,_e,Ie,yt,Ft,mt,Ji,Wi,Ur,di="sizzle"+1*new Date,Nt=w.document,er=0,ni=0,Li=ul(),Oc=ul(),ju=ul(),nn=ul(),ma=function(W,oe){return W===oe&&(Ge=!0),0},ga={}.hasOwnProperty,jr=[],So=jr.pop,Hr=jr.push,qs=jr.push,eg=jr.slice,va=function(W,oe){for(var he=0,Ne=W.length;he<Ne;he++)if(W[he]===oe)return he;return-1},af="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",si="[\\x20\\t\\r\\n\\f]",ya="(?:\\\\[\\da-fA-F]{1,6}"+si+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Hu="\\["+si+"*("+ya+")(?:"+si+"*([*^$|!~]?=)"+si+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ya+"))|)"+si+"*\\]",Gu=":("+ya+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Hu+")*)|.*)\\)|)",tg=new RegExp(si+"+","g"),cl=new RegExp("^"+si+"+|((?:^|[^\\\\])(?:\\\\.)*)"+si+"+$","g"),ax=new RegExp("^"+si+"*,"+si+"*"),ig=new RegExp("^"+si+"*([>+~]|"+si+")"+si+"*"),lx=new RegExp(si+"|>"),Vu=new RegExp(Gu),cx=new RegExp("^"+ya+"$"),Wu={ID:new RegExp("^#("+ya+")"),CLASS:new RegExp("^\\.("+ya+")"),TAG:new RegExp("^("+ya+"|[*])"),ATTR:new RegExp("^"+Hu),PSEUDO:new RegExp("^"+Gu),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+si+"*(even|odd|(([+-]|)(\\d*)n|)"+si+"*(?:([+-]|)"+si+"*(\\d+)|))"+si+"*\\)|)","i"),bool:new RegExp("^(?:"+af+")$","i"),needsContext:new RegExp("^"+si+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+si+"*((?:-\\d)?\\d*)"+si+"*\\)|)(?=[^-]|$)","i")},ux=/HTML$/i,dx=/^(?:input|select|textarea|button)$/i,rg=/^h\d$/i,Lc=/^[^{]+\{\s*\[native \w/,hx=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,lf=/[+~]/,Xs=new RegExp("\\\\[\\da-fA-F]{1,6}"+si+"?|\\\\([^\\r\\n\\f])","g"),hs=function(W,oe){var he="0x"+W.slice(1)-65536;return oe||(he<0?String.fromCharCode(he+65536):String.fromCharCode(he>>10|55296,he&1023|56320))},cf=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ng=function(W,oe){return oe?W==="\0"?"�":W.slice(0,-1)+"\\"+W.charCodeAt(W.length-1).toString(16)+" ":"\\"+W},sg=function(){_e()},fx=Xu(function(W){return W.disabled===!0&&W.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{qs.apply(jr=eg.call(Nt.childNodes),Nt.childNodes),jr[Nt.childNodes.length].nodeType}catch{qs={apply:jr.length?function(oe,he){Hr.apply(oe,eg.call(he))}:function(oe,he){for(var Ne=oe.length,ge=0;oe[Ne++]=he[ge++];);oe.length=Ne-1}}}function mi(W,oe,he,Ne){var ge,ze,Ve,Ye,nt,Ct,St,Pt=oe&&oe.ownerDocument,Kt=oe?oe.nodeType:9;if(he=he||[],typeof W!="string"||!W||Kt!==1&&Kt!==9&&Kt!==11)return he;if(!Ne&&(_e(oe),oe=oe||Ie,Ft)){if(Kt!==11&&(nt=hx.exec(W)))if(ge=nt[1]){if(Kt===9)if(Ve=oe.getElementById(ge)){if(Ve.id===ge)return he.push(Ve),he}else return he;else if(Pt&&(Ve=Pt.getElementById(ge))&&Ur(oe,Ve)&&Ve.id===ge)return he.push(Ve),he}else{if(nt[2])return qs.apply(he,oe.getElementsByTagName(W)),he;if((ge=nt[3])&&M.getElementsByClassName&&oe.getElementsByClassName)return qs.apply(he,oe.getElementsByClassName(ge)),he}if(M.qsa&&!nn[W+" "]&&(!mt||!mt.test(W))&&(Kt!==1||oe.nodeName.toLowerCase()!=="object")){if(St=W,Pt=oe,Kt===1&&(lx.test(W)||ig.test(W))){for(Pt=lf.test(W)&&df(oe.parentNode)||oe,(Pt!==oe||!M.scope)&&((Ye=oe.getAttribute("id"))?Ye=Ye.replace(cf,ng):oe.setAttribute("id",Ye=di)),Ct=H(W),ze=Ct.length;ze--;)Ct[ze]=(Ye?"#"+Ye:":scope")+" "+qu(Ct[ze]);St=Ct.join(",")}try{if(M.cssSupportsSelector&&!CSS.supports("selector(:is("+St+"))"))throw new Error;return qs.apply(he,Pt.querySelectorAll(St)),he}catch{nn(W,!0)}finally{Ye===di&&oe.removeAttribute("id")}}}return se(W.replace(cl,"$1"),oe,he,Ne)}function ul(){var W=[];function oe(he,Ne){return W.push(he+" ")>O.cacheLength&&delete oe[W.shift()],oe[he+" "]=Ne}return oe}function Fn(W){return W[di]=!0,W}function An(W){var oe=Ie.createElement("fieldset");try{return!!W(oe)}catch{return!1}finally{oe.parentNode&&oe.parentNode.removeChild(oe),oe=null}}function uf(W,oe){for(var he=W.split("|"),Ne=he.length;Ne--;)O.attrHandle[he[Ne]]=oe}function og(W,oe){var he=oe&&W,Ne=he&&W.nodeType===1&&oe.nodeType===1&&W.sourceIndex-oe.sourceIndex;if(Ne)return Ne;if(he){for(;he=he.nextSibling;)if(he===oe)return-1}return W?1:-1}function ag(W){return function(oe){var he=oe.nodeName.toLowerCase();return he==="input"&&oe.type===W}}function px(W){return function(oe){var he=oe.nodeName.toLowerCase();return(he==="input"||he==="button")&&oe.type===W}}function lg(W){return function(oe){return"form"in oe?oe.parentNode&&oe.disabled===!1?"label"in oe?"label"in oe.parentNode?oe.parentNode.disabled===W:oe.disabled===W:oe.isDisabled===W||oe.isDisabled!==!W&&fx(oe)===W:oe.disabled===W:"label"in oe?oe.disabled===W:!1}}function xa(W){return Fn(function(oe){return oe=+oe,Fn(function(he,Ne){for(var ge,ze=W([],he.length,oe),Ve=ze.length;Ve--;)he[ge=ze[Ve]]&&(he[ge]=!(Ne[ge]=he[ge]))})})}function df(W){return W&&typeof W.getElementsByTagName<"u"&&W}M=mi.support={},U=mi.isXML=function(W){var oe=W&&W.namespaceURI,he=W&&(W.ownerDocument||W).documentElement;return!ux.test(oe||he&&he.nodeName||"HTML")},_e=mi.setDocument=function(W){var oe,he,Ne=W?W.ownerDocument||W:Nt;return Ne==Ie||Ne.nodeType!==9||!Ne.documentElement||(Ie=Ne,yt=Ie.documentElement,Ft=!U(Ie),Nt!=Ie&&(he=Ie.defaultView)&&he.top!==he&&(he.addEventListener?he.addEventListener("unload",sg,!1):he.attachEvent&&he.attachEvent("onunload",sg)),M.scope=An(function(ge){return yt.appendChild(ge).appendChild(Ie.createElement("div")),typeof ge.querySelectorAll<"u"&&!ge.querySelectorAll(":scope fieldset div").length}),M.cssSupportsSelector=An(function(){return CSS.supports("selector(*)")&&Ie.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),M.attributes=An(function(ge){return ge.className="i",!ge.getAttribute("className")}),M.getElementsByTagName=An(function(ge){return ge.appendChild(Ie.createComment("")),!ge.getElementsByTagName("*").length}),M.getElementsByClassName=Lc.test(Ie.getElementsByClassName),M.getById=An(function(ge){return yt.appendChild(ge).id=di,!Ie.getElementsByName||!Ie.getElementsByName(di).length}),M.getById?(O.filter.ID=function(ge){var ze=ge.replace(Xs,hs);return function(Ve){return Ve.getAttribute("id")===ze}},O.find.ID=function(ge,ze){if(typeof ze.getElementById<"u"&&Ft){var Ve=ze.getElementById(ge);return Ve?[Ve]:[]}}):(O.filter.ID=function(ge){var ze=ge.replace(Xs,hs);return function(Ve){var Ye=typeof Ve.getAttributeNode<"u"&&Ve.getAttributeNode("id");return Ye&&Ye.value===ze}},O.find.ID=function(ge,ze){if(typeof ze.getElementById<"u"&&Ft){var Ve,Ye,nt,Ct=ze.getElementById(ge);if(Ct){if(Ve=Ct.getAttributeNode("id"),Ve&&Ve.value===ge)return[Ct];for(nt=ze.getElementsByName(ge),Ye=0;Ct=nt[Ye++];)if(Ve=Ct.getAttributeNode("id"),Ve&&Ve.value===ge)return[Ct]}return[]}}),O.find.TAG=M.getElementsByTagName?function(ge,ze){if(typeof ze.getElementsByTagName<"u")return ze.getElementsByTagName(ge);if(M.qsa)return ze.querySelectorAll(ge)}:function(ge,ze){var Ve,Ye=[],nt=0,Ct=ze.getElementsByTagName(ge);if(ge==="*"){for(;Ve=Ct[nt++];)Ve.nodeType===1&&Ye.push(Ve);return Ye}return Ct},O.find.CLASS=M.getElementsByClassName&&function(ge,ze){if(typeof ze.getElementsByClassName<"u"&&Ft)return ze.getElementsByClassName(ge)},Ji=[],mt=[],(M.qsa=Lc.test(Ie.querySelectorAll))&&(An(function(ge){var ze;yt.appendChild(ge).innerHTML="<a id='"+di+"'></a><select id='"+di+"-\r\\' msallowcapture=''><option selected=''></option></select>",ge.querySelectorAll("[msallowcapture^='']").length&&mt.push("[*^$]="+si+`*(?:''|"")`),ge.querySelectorAll("[selected]").length||mt.push("\\["+si+"*(?:value|"+af+")"),ge.querySelectorAll("[id~="+di+"-]").length||mt.push("~="),ze=Ie.createElement("input"),ze.setAttribute("name",""),ge.appendChild(ze),ge.querySelectorAll("[name='']").length||mt.push("\\["+si+"*name"+si+"*="+si+`*(?:''|"")`),ge.querySelectorAll(":checked").length||mt.push(":checked"),ge.querySelectorAll("a#"+di+"+*").length||mt.push(".#.+[+~]"),ge.querySelectorAll("\\\f"),mt.push("[\\r\\n\\f]")}),An(function(ge){ge.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ze=Ie.createElement("input");ze.setAttribute("type","hidden"),ge.appendChild(ze).setAttribute("name","D"),ge.querySelectorAll("[name=d]").length&&mt.push("name"+si+"*[*^$|!~]?="),ge.querySelectorAll(":enabled").length!==2&&mt.push(":enabled",":disabled"),yt.appendChild(ge).disabled=!0,ge.querySelectorAll(":disabled").length!==2&&mt.push(":enabled",":disabled"),ge.querySelectorAll("*,:x"),mt.push(",.*:")})),(M.matchesSelector=Lc.test(Wi=yt.matches||yt.webkitMatchesSelector||yt.mozMatchesSelector||yt.oMatchesSelector||yt.msMatchesSelector))&&An(function(ge){M.disconnectedMatch=Wi.call(ge,"*"),Wi.call(ge,"[s!='']:x"),Ji.push("!=",Gu)}),M.cssSupportsSelector||mt.push(":has"),mt=mt.length&&new RegExp(mt.join("|")),Ji=Ji.length&&new RegExp(Ji.join("|")),oe=Lc.test(yt.compareDocumentPosition),Ur=oe||Lc.test(yt.contains)?function(ge,ze){var Ve=ge.nodeType===9&&ge.documentElement||ge,Ye=ze&&ze.parentNode;return ge===Ye||!!(Ye&&Ye.nodeType===1&&(Ve.contains?Ve.contains(Ye):ge.compareDocumentPosition&&ge.compareDocumentPosition(Ye)&16))}:function(ge,ze){if(ze){for(;ze=ze.parentNode;)if(ze===ge)return!0}return!1},ma=oe?function(ge,ze){if(ge===ze)return Ge=!0,0;var Ve=!ge.compareDocumentPosition-!ze.compareDocumentPosition;return Ve||(Ve=(ge.ownerDocument||ge)==(ze.ownerDocument||ze)?ge.compareDocumentPosition(ze):1,Ve&1||!M.sortDetached&&ze.compareDocumentPosition(ge)===Ve?ge==Ie||ge.ownerDocument==Nt&&Ur(Nt,ge)?-1:ze==Ie||ze.ownerDocument==Nt&&Ur(Nt,ze)?1:Ce?va(Ce,ge)-va(Ce,ze):0:Ve&4?-1:1)}:function(ge,ze){if(ge===ze)return Ge=!0,0;var Ve,Ye=0,nt=ge.parentNode,Ct=ze.parentNode,St=[ge],Pt=[ze];if(!nt||!Ct)return ge==Ie?-1:ze==Ie?1:nt?-1:Ct?1:Ce?va(Ce,ge)-va(Ce,ze):0;if(nt===Ct)return og(ge,ze);for(Ve=ge;Ve=Ve.parentNode;)St.unshift(Ve);for(Ve=ze;Ve=Ve.parentNode;)Pt.unshift(Ve);for(;St[Ye]===Pt[Ye];)Ye++;return Ye?og(St[Ye],Pt[Ye]):St[Ye]==Nt?-1:Pt[Ye]==Nt?1:0}),Ie},mi.matches=function(W,oe){return mi(W,null,null,oe)},mi.matchesSelector=function(W,oe){if(_e(W),M.matchesSelector&&Ft&&!nn[oe+" "]&&(!Ji||!Ji.test(oe))&&(!mt||!mt.test(oe)))try{var he=Wi.call(W,oe);if(he||M.disconnectedMatch||W.document&&W.document.nodeType!==11)return he}catch{nn(oe,!0)}return mi(oe,Ie,null,[W]).length>0},mi.contains=function(W,oe){return(W.ownerDocument||W)!=Ie&&_e(W),Ur(W,oe)},mi.attr=function(W,oe){(W.ownerDocument||W)!=Ie&&_e(W);var he=O.attrHandle[oe.toLowerCase()],Ne=he&&ga.call(O.attrHandle,oe.toLowerCase())?he(W,oe,!Ft):void 0;return Ne!==void 0?Ne:M.attributes||!Ft?W.getAttribute(oe):(Ne=W.getAttributeNode(oe))&&Ne.specified?Ne.value:null},mi.escape=function(W){return(W+"").replace(cf,ng)},mi.error=function(W){throw new Error("Syntax error, unrecognized expression: "+W)},mi.uniqueSort=function(W){var oe,he=[],Ne=0,ge=0;if(Ge=!M.detectDuplicates,Ce=!M.sortStable&&W.slice(0),W.sort(ma),Ge){for(;oe=W[ge++];)oe===W[ge]&&(Ne=he.push(ge));for(;Ne--;)W.splice(he[Ne],1)}return Ce=null,W},k=mi.getText=function(W){var oe,he="",Ne=0,ge=W.nodeType;if(ge){if(ge===1||ge===9||ge===11){if(typeof W.textContent=="string")return W.textContent;for(W=W.firstChild;W;W=W.nextSibling)he+=k(W)}else if(ge===3||ge===4)return W.nodeValue}else for(;oe=W[Ne++];)he+=k(oe);return he},O=mi.selectors={cacheLength:50,createPseudo:Fn,match:Wu,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(W){return W[1]=W[1].replace(Xs,hs),W[3]=(W[3]||W[4]||W[5]||"").replace(Xs,hs),W[2]==="~="&&(W[3]=" "+W[3]+" "),W.slice(0,4)},CHILD:function(W){return W[1]=W[1].toLowerCase(),W[1].slice(0,3)==="nth"?(W[3]||mi.error(W[0]),W[4]=+(W[4]?W[5]+(W[6]||1):2*(W[3]==="even"||W[3]==="odd")),W[5]=+(W[7]+W[8]||W[3]==="odd")):W[3]&&mi.error(W[0]),W},PSEUDO:function(W){var oe,he=!W[6]&&W[2];return Wu.CHILD.test(W[0])?null:(W[3]?W[2]=W[4]||W[5]||"":he&&Vu.test(he)&&(oe=H(he,!0))&&(oe=he.indexOf(")",he.length-oe)-he.length)&&(W[0]=W[0].slice(0,oe),W[2]=he.slice(0,oe)),W.slice(0,3))}},filter:{TAG:function(W){var oe=W.replace(Xs,hs).toLowerCase();return W==="*"?function(){return!0}:function(he){return he.nodeName&&he.nodeName.toLowerCase()===oe}},CLASS:function(W){var oe=Li[W+" "];return oe||(oe=new RegExp("(^|"+si+")"+W+"("+si+"|$)"))&&Li(W,function(he){return oe.test(typeof he.className=="string"&&he.className||typeof he.getAttribute<"u"&&he.getAttribute("class")||"")})},ATTR:function(W,oe,he){return function(Ne){var ge=mi.attr(Ne,W);return ge==null?oe==="!=":oe?(ge+="",oe==="="?ge===he:oe==="!="?ge!==he:oe==="^="?he&&ge.indexOf(he)===0:oe==="*="?he&&ge.indexOf(he)>-1:oe==="$="?he&&ge.slice(-he.length)===he:oe==="~="?(" "+ge.replace(tg," ")+" ").indexOf(he)>-1:oe==="|="?ge===he||ge.slice(0,he.length+1)===he+"-":!1):!0}},CHILD:function(W,oe,he,Ne,ge){var ze=W.slice(0,3)!=="nth",Ve=W.slice(-4)!=="last",Ye=oe==="of-type";return Ne===1&&ge===0?function(nt){return!!nt.parentNode}:function(nt,Ct,St){var Pt,Kt,xi,Tt,tr,ir,T=ze!==Ve?"nextSibling":"previousSibling",P=nt.parentNode,F=Ye&&nt.nodeName.toLowerCase(),ie=!St&&!Ye,Me=!1;if(P){if(ze){for(;T;){for(Tt=nt;Tt=Tt[T];)if(Ye?Tt.nodeName.toLowerCase()===F:Tt.nodeType===1)return!1;ir=T=W==="only"&&!ir&&"nextSibling"}return!0}if(ir=[Ve?P.firstChild:P.lastChild],Ve&&ie){for(Tt=P,xi=Tt[di]||(Tt[di]={}),Kt=xi[Tt.uniqueID]||(xi[Tt.uniqueID]={}),Pt=Kt[W]||[],tr=Pt[0]===er&&Pt[1],Me=tr&&Pt[2],Tt=tr&&P.childNodes[tr];Tt=++tr&&Tt&&Tt[T]||(Me=tr=0)||ir.pop();)if(Tt.nodeType===1&&++Me&&Tt===nt){Kt[W]=[er,tr,Me];break}}else if(ie&&(Tt=nt,xi=Tt[di]||(Tt[di]={}),Kt=xi[Tt.uniqueID]||(xi[Tt.uniqueID]={}),Pt=Kt[W]||[],tr=Pt[0]===er&&Pt[1],Me=tr),Me===!1)for(;(Tt=++tr&&Tt&&Tt[T]||(Me=tr=0)||ir.pop())&&!((Ye?Tt.nodeName.toLowerCase()===F:Tt.nodeType===1)&&++Me&&(ie&&(xi=Tt[di]||(Tt[di]={}),Kt=xi[Tt.uniqueID]||(xi[Tt.uniqueID]={}),Kt[W]=[er,Me]),Tt===nt)););return Me-=ge,Me===Ne||Me%Ne===0&&Me/Ne>=0}}},PSEUDO:function(W,oe){var he,Ne=O.pseudos[W]||O.setFilters[W.toLowerCase()]||mi.error("unsupported pseudo: "+W);return Ne[di]?Ne(oe):Ne.length>1?(he=[W,W,"",oe],O.setFilters.hasOwnProperty(W.toLowerCase())?Fn(function(ge,ze){for(var Ve,Ye=Ne(ge,oe),nt=Ye.length;nt--;)Ve=va(ge,Ye[nt]),ge[Ve]=!(ze[Ve]=Ye[nt])}):function(ge){return Ne(ge,0,he)}):Ne}},pseudos:{not:Fn(function(W){var oe=[],he=[],Ne=le(W.replace(cl,"$1"));return Ne[di]?Fn(function(ge,ze,Ve,Ye){for(var nt,Ct=Ne(ge,null,Ye,[]),St=ge.length;St--;)(nt=Ct[St])&&(ge[St]=!(ze[St]=nt))}):function(ge,ze,Ve){return oe[0]=ge,Ne(oe,null,Ve,he),oe[0]=null,!he.pop()}}),has:Fn(function(W){return function(oe){return mi(W,oe).length>0}}),contains:Fn(function(W){return W=W.replace(Xs,hs),function(oe){return(oe.textContent||k(oe)).indexOf(W)>-1}}),lang:Fn(function(W){return cx.test(W||"")||mi.error("unsupported lang: "+W),W=W.replace(Xs,hs).toLowerCase(),function(oe){var he;do if(he=Ft?oe.lang:oe.getAttribute("xml:lang")||oe.getAttribute("lang"))return he=he.toLowerCase(),he===W||he.indexOf(W+"-")===0;while((oe=oe.parentNode)&&oe.nodeType===1);return!1}}),target:function(W){var oe=w.location&&w.location.hash;return oe&&oe.slice(1)===W.id},root:function(W){return W===yt},focus:function(W){return W===Ie.activeElement&&(!Ie.hasFocus||Ie.hasFocus())&&!!(W.type||W.href||~W.tabIndex)},enabled:lg(!1),disabled:lg(!0),checked:function(W){var oe=W.nodeName.toLowerCase();return oe==="input"&&!!W.checked||oe==="option"&&!!W.selected},selected:function(W){return W.parentNode&&W.parentNode.selectedIndex,W.selected===!0},empty:function(W){for(W=W.firstChild;W;W=W.nextSibling)if(W.nodeType<6)return!1;return!0},parent:function(W){return!O.pseudos.empty(W)},header:function(W){return rg.test(W.nodeName)},input:function(W){return dx.test(W.nodeName)},button:function(W){var oe=W.nodeName.toLowerCase();return oe==="input"&&W.type==="button"||oe==="button"},text:function(W){var oe;return W.nodeName.toLowerCase()==="input"&&W.type==="text"&&((oe=W.getAttribute("type"))==null||oe.toLowerCase()==="text")},first:xa(function(){return[0]}),last:xa(function(W,oe){return[oe-1]}),eq:xa(function(W,oe,he){return[he<0?he+oe:he]}),even:xa(function(W,oe){for(var he=0;he<oe;he+=2)W.push(he);return W}),odd:xa(function(W,oe){for(var he=1;he<oe;he+=2)W.push(he);return W}),lt:xa(function(W,oe,he){for(var Ne=he<0?he+oe:he>oe?oe:he;--Ne>=0;)W.push(Ne);return W}),gt:xa(function(W,oe,he){for(var Ne=he<0?he+oe:he;++Ne<oe;)W.push(Ne);return W})}},O.pseudos.nth=O.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})O.pseudos[_]=ag(_);for(_ in{submit:!0,reset:!0})O.pseudos[_]=px(_);function cg(){}cg.prototype=O.filters=O.pseudos,O.setFilters=new cg,H=mi.tokenize=function(W,oe){var he,Ne,ge,ze,Ve,Ye,nt,Ct=Oc[W+" "];if(Ct)return oe?0:Ct.slice(0);for(Ve=W,Ye=[],nt=O.preFilter;Ve;){(!he||(Ne=ax.exec(Ve)))&&(Ne&&(Ve=Ve.slice(Ne[0].length)||Ve),Ye.push(ge=[])),he=!1,(Ne=ig.exec(Ve))&&(he=Ne.shift(),ge.push({value:he,type:Ne[0].replace(cl," ")}),Ve=Ve.slice(he.length));for(ze in O.filter)(Ne=Wu[ze].exec(Ve))&&(!nt[ze]||(Ne=nt[ze](Ne)))&&(he=Ne.shift(),ge.push({value:he,type:ze,matches:Ne}),Ve=Ve.slice(he.length));if(!he)break}return oe?Ve.length:Ve?mi.error(W):Oc(W,Ye).slice(0)};function qu(W){for(var oe=0,he=W.length,Ne="";oe<he;oe++)Ne+=W[oe].value;return Ne}function Xu(W,oe,he){var Ne=oe.dir,ge=oe.next,ze=ge||Ne,Ve=he&&ze==="parentNode",Ye=ni++;return oe.first?function(nt,Ct,St){for(;nt=nt[Ne];)if(nt.nodeType===1||Ve)return W(nt,Ct,St);return!1}:function(nt,Ct,St){var Pt,Kt,xi,Tt=[er,Ye];if(St){for(;nt=nt[Ne];)if((nt.nodeType===1||Ve)&&W(nt,Ct,St))return!0}else for(;nt=nt[Ne];)if(nt.nodeType===1||Ve)if(xi=nt[di]||(nt[di]={}),Kt=xi[nt.uniqueID]||(xi[nt.uniqueID]={}),ge&&ge===nt.nodeName.toLowerCase())nt=nt[Ne]||nt;else{if((Pt=Kt[ze])&&Pt[0]===er&&Pt[1]===Ye)return Tt[2]=Pt[2];if(Kt[ze]=Tt,Tt[2]=W(nt,Ct,St))return!0}return!1}}function hf(W){return W.length>1?function(oe,he,Ne){for(var ge=W.length;ge--;)if(!W[ge](oe,he,Ne))return!1;return!0}:W[0]}function mx(W,oe,he){for(var Ne=0,ge=oe.length;Ne<ge;Ne++)mi(W,oe[Ne],he);return he}function fs(W,oe,he,Ne,ge){for(var ze,Ve=[],Ye=0,nt=W.length,Ct=oe!=null;Ye<nt;Ye++)(ze=W[Ye])&&(!he||he(ze,Ne,ge))&&(Ve.push(ze),Ct&&oe.push(Ye));return Ve}function Yu(W,oe,he,Ne,ge,ze){return Ne&&!Ne[di]&&(Ne=Yu(Ne)),ge&&!ge[di]&&(ge=Yu(ge,ze)),Fn(function(Ve,Ye,nt,Ct){var St,Pt,Kt,xi=[],Tt=[],tr=Ye.length,ir=Ve||mx(oe||"*",nt.nodeType?[nt]:nt,[]),T=W&&(Ve||!oe)?fs(ir,xi,W,nt,Ct):ir,P=he?ge||(Ve?W:tr||Ne)?[]:Ye:T;if(he&&he(T,P,nt,Ct),Ne)for(St=fs(P,Tt),Ne(St,[],nt,Ct),Pt=St.length;Pt--;)(Kt=St[Pt])&&(P[Tt[Pt]]=!(T[Tt[Pt]]=Kt));if(Ve){if(ge||W){if(ge){for(St=[],Pt=P.length;Pt--;)(Kt=P[Pt])&&St.push(T[Pt]=Kt);ge(null,P=[],St,Ct)}for(Pt=P.length;Pt--;)(Kt=P[Pt])&&(St=ge?va(Ve,Kt):xi[Pt])>-1&&(Ve[St]=!(Ye[St]=Kt))}}else P=fs(P===Ye?P.splice(tr,P.length):P),ge?ge(null,Ye,P,Ct):qs.apply(Ye,P)})}function ff(W){for(var oe,he,Ne,ge=W.length,ze=O.relative[W[0].type],Ve=ze||O.relative[" "],Ye=ze?1:0,nt=Xu(function(Pt){return Pt===oe},Ve,!0),Ct=Xu(function(Pt){return va(oe,Pt)>-1},Ve,!0),St=[function(Pt,Kt,xi){var Tt=!ze&&(xi||Kt!==ve)||((oe=Kt).nodeType?nt(Pt,Kt,xi):Ct(Pt,Kt,xi));return oe=null,Tt}];Ye<ge;Ye++)if(he=O.relative[W[Ye].type])St=[Xu(hf(St),he)];else{if(he=O.filter[W[Ye].type].apply(null,W[Ye].matches),he[di]){for(Ne=++Ye;Ne<ge&&!O.relative[W[Ne].type];Ne++);return Yu(Ye>1&&hf(St),Ye>1&&qu(W.slice(0,Ye-1).concat({value:W[Ye-2].type===" "?"*":""})).replace(cl,"$1"),he,Ye<Ne&&ff(W.slice(Ye,Ne)),Ne<ge&&ff(W=W.slice(Ne)),Ne<ge&&qu(W))}St.push(he)}return hf(St)}function ug(W,oe){var he=oe.length>0,Ne=W.length>0,ge=function(ze,Ve,Ye,nt,Ct){var St,Pt,Kt,xi=0,Tt="0",tr=ze&&[],ir=[],T=ve,P=ze||Ne&&O.find.TAG("*",Ct),F=er+=T==null?1:Math.random()||.1,ie=P.length;for(Ct&&(ve=Ve==Ie||Ve||Ct);Tt!==ie&&(St=P[Tt])!=null;Tt++){if(Ne&&St){for(Pt=0,!Ve&&St.ownerDocument!=Ie&&(_e(St),Ye=!Ft);Kt=W[Pt++];)if(Kt(St,Ve||Ie,Ye)){nt.push(St);break}Ct&&(er=F)}he&&((St=!Kt&&St)&&xi--,ze&&tr.push(St))}if(xi+=Tt,he&&Tt!==xi){for(Pt=0;Kt=oe[Pt++];)Kt(tr,ir,Ve,Ye);if(ze){if(xi>0)for(;Tt--;)tr[Tt]||ir[Tt]||(ir[Tt]=So.call(nt));ir=fs(ir)}qs.apply(nt,ir),Ct&&!ze&&ir.length>0&&xi+oe.length>1&&mi.uniqueSort(nt)}return Ct&&(er=F,ve=T),tr};return he?Fn(ge):ge}return le=mi.compile=function(W,oe){var he,Ne=[],ge=[],ze=ju[W+" "];if(!ze){for(oe||(oe=H(W)),he=oe.length;he--;)ze=ff(oe[he]),ze[di]?Ne.push(ze):ge.push(ze);ze=ju(W,ug(ge,Ne)),ze.selector=W}return ze},se=mi.select=function(W,oe,he,Ne){var ge,ze,Ve,Ye,nt,Ct=typeof W=="function"&&W,St=!Ne&&H(W=Ct.selector||W);if(he=he||[],St.length===1){if(ze=St[0]=St[0].slice(0),ze.length>2&&(Ve=ze[0]).type==="ID"&&oe.nodeType===9&&Ft&&O.relative[ze[1].type]){if(oe=(O.find.ID(Ve.matches[0].replace(Xs,hs),oe)||[])[0],oe)Ct&&(oe=oe.parentNode);else return he;W=W.slice(ze.shift().value.length)}for(ge=Wu.needsContext.test(W)?0:ze.length;ge--&&(Ve=ze[ge],!O.relative[Ye=Ve.type]);)if((nt=O.find[Ye])&&(Ne=nt(Ve.matches[0].replace(Xs,hs),lf.test(ze[0].type)&&df(oe.parentNode)||oe))){if(ze.splice(ge,1),W=Ne.length&&qu(ze),!W)return qs.apply(he,Ne),he;break}}return(Ct||le(W,St))(Ne,oe,!Ft,he,!oe||lf.test(W)&&df(oe.parentNode)||oe),he},M.sortStable=di.split("").sort(ma).join("")===di,M.detectDuplicates=!!Ge,_e(),M.sortDetached=An(function(W){return W.compareDocumentPosition(Ie.createElement("fieldset"))&1}),An(function(W){return W.innerHTML="<a href='#'></a>",W.firstChild.getAttribute("href")==="#"})||uf("type|href|height|width",function(W,oe,he){if(!he)return W.getAttribute(oe,oe.toLowerCase()==="type"?1:2)}),(!M.attributes||!An(function(W){return W.innerHTML="<input/>",W.firstChild.setAttribute("value",""),W.firstChild.getAttribute("value")===""}))&&uf("value",function(W,oe,he){if(!he&&W.nodeName.toLowerCase()==="input")return W.defaultValue}),An(function(W){return W.getAttribute("disabled")==null})||uf(af,function(W,oe,he){var Ne;if(!he)return W[oe]===!0?oe.toLowerCase():(Ne=W.getAttributeNode(oe))&&Ne.specified?Ne.value:null}),mi}(t);y.find=A,y.expr=A.selectors,y.expr[":"]=y.expr.pseudos,y.uniqueSort=y.unique=A.uniqueSort,y.text=A.getText,y.isXMLDoc=A.isXML,y.contains=A.contains,y.escapeSelector=A.escape;var D=function(w,_,M){for(var O=[],k=M!==void 0;(w=w[_])&&w.nodeType!==9;)if(w.nodeType===1){if(k&&y(w).is(M))break;O.push(w)}return O},I=function(w,_){for(var M=[];w;w=w.nextSibling)w.nodeType===1&&w!==_&&M.push(w);return M},R=y.expr.match.needsContext;function B(w,_){return w.nodeName&&w.nodeName.toLowerCase()===_.toLowerCase()}var G=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(w,_,M){return v(_)?y.grep(w,function(O,k){return!!_.call(O,k,O)!==M}):_.nodeType?y.grep(w,function(O){return O===_!==M}):typeof _!="string"?y.grep(w,function(O){return l.call(_,O)>-1!==M}):y.filter(_,w,M)}y.filter=function(w,_,M){var O=_[0];return M&&(w=":not("+w+")"),_.length===1&&O.nodeType===1?y.find.matchesSelector(O,w)?[O]:[]:y.find.matches(w,y.grep(_,function(k){return k.nodeType===1}))},y.fn.extend({find:function(w){var _,M,O=this.length,k=this;if(typeof w!="string")return this.pushStack(y(w).filter(function(){for(_=0;_<O;_++)if(y.contains(k[_],this))return!0}));for(M=this.pushStack([]),_=0;_<O;_++)y.find(w,k[_],M);return O>1?y.uniqueSort(M):M},filter:function(w){return this.pushStack(j(this,w||[],!1))},not:function(w){return this.pushStack(j(this,w||[],!0))},is:function(w){return!!j(this,typeof w=="string"&&R.test(w)?y(w):w||[],!1).length}});var ee,Q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,re=y.fn.init=function(w,_,M){var O,k;if(!w)return this;if(M=M||ee,typeof w=="string")if(w[0]==="<"&&w[w.length-1]===">"&&w.length>=3?O=[null,w,null]:O=Q.exec(w),O&&(O[1]||!_))if(O[1]){if(_=_ instanceof y?_[0]:_,y.merge(this,y.parseHTML(O[1],_&&_.nodeType?_.ownerDocument||_:p,!0)),G.test(O[1])&&y.isPlainObject(_))for(O in _)v(this[O])?this[O](_[O]):this.attr(O,_[O]);return this}else return k=p.getElementById(O[2]),k&&(this[0]=k,this.length=1),this;else return!_||_.jquery?(_||M).find(w):this.constructor(_).find(w);else{if(w.nodeType)return this[0]=w,this.length=1,this;if(v(w))return M.ready!==void 0?M.ready(w):w(y)}return y.makeArray(w,this)};re.prototype=y.fn,ee=y(p);var z=/^(?:parents|prev(?:Until|All))/,X={children:!0,contents:!0,next:!0,prev:!0};y.fn.extend({has:function(w){var _=y(w,this),M=_.length;return this.filter(function(){for(var O=0;O<M;O++)if(y.contains(this,_[O]))return!0})},closest:function(w,_){var M,O=0,k=this.length,U=[],H=typeof w!="string"&&y(w);if(!R.test(w)){for(;O<k;O++)for(M=this[O];M&&M!==_;M=M.parentNode)if(M.nodeType<11&&(H?H.index(M)>-1:M.nodeType===1&&y.find.matchesSelector(M,w))){U.push(M);break}}return this.pushStack(U.length>1?y.uniqueSort(U):U)},index:function(w){return w?typeof w=="string"?l.call(y(w),this[0]):l.call(this,w.jquery?w[0]:w):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(w,_){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(w,_))))},addBack:function(w){return this.add(w==null?this.prevObject:this.prevObject.filter(w))}});function Y(w,_){for(;(w=w[_])&&w.nodeType!==1;);return w}y.each({parent:function(w){var _=w.parentNode;return _&&_.nodeType!==11?_:null},parents:function(w){return D(w,"parentNode")},parentsUntil:function(w,_,M){return D(w,"parentNode",M)},next:function(w){return Y(w,"nextSibling")},prev:function(w){return Y(w,"previousSibling")},nextAll:function(w){return D(w,"nextSibling")},prevAll:function(w){return D(w,"previousSibling")},nextUntil:function(w,_,M){return D(w,"nextSibling",M)},prevUntil:function(w,_,M){return D(w,"previousSibling",M)},siblings:function(w){return I((w.parentNode||{}).firstChild,w)},children:function(w){return I(w.firstChild)},contents:function(w){return w.contentDocument!=null&&n(w.contentDocument)?w.contentDocument:(B(w,"template")&&(w=w.content||w),y.merge([],w.childNodes))}},function(w,_){y.fn[w]=function(M,O){var k=y.map(this,_,M);return w.slice(-5)!=="Until"&&(O=M),O&&typeof O=="string"&&(k=y.filter(O,k)),this.length>1&&(X[w]||y.uniqueSort(k),z.test(w)&&k.reverse()),this.pushStack(k)}});var K=/[^\x20\t\r\n\f]+/g;function Z(w){var _={};return y.each(w.match(K)||[],function(M,O){_[O]=!0}),_}y.Callbacks=function(w){w=typeof w=="string"?Z(w):y.extend({},w);var _,M,O,k,U=[],H=[],le=-1,se=function(){for(k=k||w.once,O=_=!0;H.length;le=-1)for(M=H.shift();++le<U.length;)U[le].apply(M[0],M[1])===!1&&w.stopOnFalse&&(le=U.length,M=!1);w.memory||(M=!1),_=!1,k&&(M?U=[]:U="")},ve={add:function(){return U&&(M&&!_&&(le=U.length-1,H.push(M)),function Ce(Ge){y.each(Ge,function(_e,Ie){v(Ie)?(!w.unique||!ve.has(Ie))&&U.push(Ie):Ie&&Ie.length&&S(Ie)!=="string"&&Ce(Ie)})}(arguments),M&&!_&&se()),this},remove:function(){return y.each(arguments,function(Ce,Ge){for(var _e;(_e=y.inArray(Ge,U,_e))>-1;)U.splice(_e,1),_e<=le&&le--}),this},has:function(Ce){return Ce?y.inArray(Ce,U)>-1:U.length>0},empty:function(){return U&&(U=[]),this},disable:function(){return k=H=[],U=M="",this},disabled:function(){return!U},lock:function(){return k=H=[],!M&&!_&&(U=M=""),this},locked:function(){return!!k},fireWith:function(Ce,Ge){return k||(Ge=Ge||[],Ge=[Ce,Ge.slice?Ge.slice():Ge],H.push(Ge),_||se()),this},fire:function(){return ve.fireWith(this,arguments),this},fired:function(){return!!O}};return ve};function V(w){return w}function fe(w){throw w}function ae(w,_,M,O){var k;try{w&&v(k=w.promise)?k.call(w).done(_).fail(M):w&&v(k=w.then)?k.call(w,_,M):_.apply(void 0,[w].slice(O))}catch(U){M.apply(void 0,[U])}}y.extend({Deferred:function(w){var _=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],M="pending",O={state:function(){return M},always:function(){return k.done(arguments).fail(arguments),this},catch:function(U){return O.then(null,U)},pipe:function(){var U=arguments;return y.Deferred(function(H){y.each(_,function(le,se){var ve=v(U[se[4]])&&U[se[4]];k[se[1]](function(){var Ce=ve&&ve.apply(this,arguments);Ce&&v(Ce.promise)?Ce.promise().progress(H.notify).done(H.resolve).fail(H.reject):H[se[0]+"With"](this,ve?[Ce]:arguments)})}),U=null}).promise()},then:function(U,H,le){var se=0;function ve(Ce,Ge,_e,Ie){return function(){var yt=this,Ft=arguments,mt=function(){var Wi,Ur;if(!(Ce<se)){if(Wi=_e.apply(yt,Ft),Wi===Ge.promise())throw new TypeError("Thenable self-resolution");Ur=Wi&&(typeof Wi=="object"||typeof Wi=="function")&&Wi.then,v(Ur)?Ie?Ur.call(Wi,ve(se,Ge,V,Ie),ve(se,Ge,fe,Ie)):(se++,Ur.call(Wi,ve(se,Ge,V,Ie),ve(se,Ge,fe,Ie),ve(se,Ge,V,Ge.notifyWith))):(_e!==V&&(yt=void 0,Ft=[Wi]),(Ie||Ge.resolveWith)(yt,Ft))}},Ji=Ie?mt:function(){try{mt()}catch(Wi){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(Wi,Ji.stackTrace),Ce+1>=se&&(_e!==fe&&(yt=void 0,Ft=[Wi]),Ge.rejectWith(yt,Ft))}};Ce?Ji():(y.Deferred.getStackHook&&(Ji.stackTrace=y.Deferred.getStackHook()),t.setTimeout(Ji))}}return y.Deferred(function(Ce){_[0][3].add(ve(0,Ce,v(le)?le:V,Ce.notifyWith)),_[1][3].add(ve(0,Ce,v(U)?U:V)),_[2][3].add(ve(0,Ce,v(H)?H:fe))}).promise()},promise:function(U){return U!=null?y.extend(U,O):O}},k={};return y.each(_,function(U,H){var le=H[2],se=H[5];O[H[1]]=le.add,se&&le.add(function(){M=se},_[3-U][2].disable,_[3-U][3].disable,_[0][2].lock,_[0][3].lock),le.add(H[3].fire),k[H[0]]=function(){return k[H[0]+"With"](this===k?void 0:this,arguments),this},k[H[0]+"With"]=le.fireWith}),O.promise(k),w&&w.call(k,k),k},when:function(w){var _=arguments.length,M=_,O=Array(M),k=s.call(arguments),U=y.Deferred(),H=function(le){return function(se){O[le]=this,k[le]=arguments.length>1?s.call(arguments):se,--_||U.resolveWith(O,k)}};if(_<=1&&(ae(w,U.done(H(M)).resolve,U.reject,!_),U.state()==="pending"||v(k[M]&&k[M].then)))return U.then();for(;M--;)ae(k[M],H(M),U.reject);return U.promise()}});var ne=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(w,_){t.console&&t.console.warn&&w&&ne.test(w.name)&&t.console.warn("jQuery.Deferred exception: "+w.message,w.stack,_)},y.readyException=function(w){t.setTimeout(function(){throw w})};var we=y.Deferred();y.fn.ready=function(w){return we.then(w).catch(function(_){y.readyException(_)}),this},y.extend({isReady:!1,readyWait:1,ready:function(w){(w===!0?--y.readyWait:y.isReady)||(y.isReady=!0,!(w!==!0&&--y.readyWait>0)&&we.resolveWith(p,[y]))}}),y.ready.then=we.then;function me(){p.removeEventListener("DOMContentLoaded",me),t.removeEventListener("load",me),y.ready()}p.readyState==="complete"||p.readyState!=="loading"&&!p.documentElement.doScroll?t.setTimeout(y.ready):(p.addEventListener("DOMContentLoaded",me),t.addEventListener("load",me));var ue=function(w,_,M,O,k,U,H){var le=0,se=w.length,ve=M==null;if(S(M)==="object"){k=!0;for(le in M)ue(w,_,le,M[le],!0,U,H)}else if(O!==void 0&&(k=!0,v(O)||(H=!0),ve&&(H?(_.call(w,O),_=null):(ve=_,_=function(Ce,Ge,_e){return ve.call(y(Ce),_e)})),_))for(;le<se;le++)_(w[le],M,H?O:O.call(w[le],le,_(w[le],M)));return k?w:ve?_.call(w):se?_(w[0],M):U},xe=/^-ms-/,Le=/-([a-z])/g;function Re(w,_){return _.toUpperCase()}function Oe(w){return w.replace(xe,"ms-").replace(Le,Re)}var We=function(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType};function He(){this.expando=y.expando+He.uid++}He.uid=1,He.prototype={cache:function(w){var _=w[this.expando];return _||(_={},We(w)&&(w.nodeType?w[this.expando]=_:Object.defineProperty(w,this.expando,{value:_,configurable:!0}))),_},set:function(w,_,M){var O,k=this.cache(w);if(typeof _=="string")k[Oe(_)]=M;else for(O in _)k[Oe(O)]=_[O];return k},get:function(w,_){return _===void 0?this.cache(w):w[this.expando]&&w[this.expando][Oe(_)]},access:function(w,_,M){return _===void 0||_&&typeof _=="string"&&M===void 0?this.get(w,_):(this.set(w,_,M),M!==void 0?M:_)},remove:function(w,_){var M,O=w[this.expando];if(O!==void 0){if(_!==void 0)for(Array.isArray(_)?_=_.map(Oe):(_=Oe(_),_=_ in O?[_]:_.match(K)||[]),M=_.length;M--;)delete O[_[M]];(_===void 0||y.isEmptyObject(O))&&(w.nodeType?w[this.expando]=void 0:delete w[this.expando])}},hasData:function(w){var _=w[this.expando];return _!==void 0&&!y.isEmptyObject(_)}};var ye=new He,Qe=new He,rt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Je=/[A-Z]/g;function Bt(w){return w==="true"?!0:w==="false"?!1:w==="null"?null:w===+w+""?+w:rt.test(w)?JSON.parse(w):w}function lt(w,_,M){var O;if(M===void 0&&w.nodeType===1)if(O="data-"+_.replace(Je,"-$&").toLowerCase(),M=w.getAttribute(O),typeof M=="string"){try{M=Bt(M)}catch{}Qe.set(w,_,M)}else M=void 0;return M}y.extend({hasData:function(w){return Qe.hasData(w)||ye.hasData(w)},data:function(w,_,M){return Qe.access(w,_,M)},removeData:function(w,_){Qe.remove(w,_)},_data:function(w,_,M){return ye.access(w,_,M)},_removeData:function(w,_){ye.remove(w,_)}}),y.fn.extend({data:function(w,_){var M,O,k,U=this[0],H=U&&U.attributes;if(w===void 0){if(this.length&&(k=Qe.get(U),U.nodeType===1&&!ye.get(U,"hasDataAttrs"))){for(M=H.length;M--;)H[M]&&(O=H[M].name,O.indexOf("data-")===0&&(O=Oe(O.slice(5)),lt(U,O,k[O])));ye.set(U,"hasDataAttrs",!0)}return k}return typeof w=="object"?this.each(function(){Qe.set(this,w)}):ue(this,function(le){var se;if(U&&le===void 0)return se=Qe.get(U,w),se!==void 0||(se=lt(U,w),se!==void 0)?se:void 0;this.each(function(){Qe.set(this,w,le)})},null,_,arguments.length>1,null,!0)},removeData:function(w){return this.each(function(){Qe.remove(this,w)})}}),y.extend({queue:function(w,_,M){var O;if(w)return _=(_||"fx")+"queue",O=ye.get(w,_),M&&(!O||Array.isArray(M)?O=ye.access(w,_,y.makeArray(M)):O.push(M)),O||[]},dequeue:function(w,_){_=_||"fx";var M=y.queue(w,_),O=M.length,k=M.shift(),U=y._queueHooks(w,_),H=function(){y.dequeue(w,_)};k==="inprogress"&&(k=M.shift(),O--),k&&(_==="fx"&&M.unshift("inprogress"),delete U.stop,k.call(w,H,U)),!O&&U&&U.empty.fire()},_queueHooks:function(w,_){var M=_+"queueHooks";return ye.get(w,M)||ye.access(w,M,{empty:y.Callbacks("once memory").add(function(){ye.remove(w,[_+"queue",M])})})}}),y.fn.extend({queue:function(w,_){var M=2;return typeof w!="string"&&(_=w,w="fx",M--),arguments.length<M?y.queue(this[0],w):_===void 0?this:this.each(function(){var O=y.queue(this,w,_);y._queueHooks(this,w),w==="fx"&&O[0]!=="inprogress"&&y.dequeue(this,w)})},dequeue:function(w){return this.each(function(){y.dequeue(this,w)})},clearQueue:function(w){return this.queue(w||"fx",[])},promise:function(w,_){var M,O=1,k=y.Deferred(),U=this,H=this.length,le=function(){--O||k.resolveWith(U,[U])};for(typeof w!="string"&&(_=w,w=void 0),w=w||"fx";H--;)M=ye.get(U[H],w+"queueHooks"),M&&M.empty&&(O++,M.empty.add(le));return le(),k.promise(_)}});var J=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,q=new RegExp("^(?:([+-])=|)("+J+")([a-z%]*)$","i"),Se=["Top","Right","Bottom","Left"],je=p.documentElement,qe=function(w){return y.contains(w.ownerDocument,w)},ot={composed:!0};je.getRootNode&&(qe=function(w){return y.contains(w.ownerDocument,w)||w.getRootNode(ot)===w.ownerDocument});var wt=function(w,_){return w=_||w,w.style.display==="none"||w.style.display===""&&qe(w)&&y.css(w,"display")==="none"};function Pe(w,_,M,O){var k,U,H=20,le=O?function(){return O.cur()}:function(){return y.css(w,_,"")},se=le(),ve=M&&M[3]||(y.cssNumber[_]?"":"px"),Ce=w.nodeType&&(y.cssNumber[_]||ve!=="px"&&+se)&&q.exec(y.css(w,_));if(Ce&&Ce[3]!==ve){for(se=se/2,ve=ve||Ce[3],Ce=+se||1;H--;)y.style(w,_,Ce+ve),(1-U)*(1-(U=le()/se||.5))<=0&&(H=0),Ce=Ce/U;Ce=Ce*2,y.style(w,_,Ce+ve),M=M||[]}return M&&(Ce=+Ce||+se||0,k=M[1]?Ce+(M[1]+1)*M[2]:+M[2],O&&(O.unit=ve,O.start=Ce,O.end=k)),k}var pt={};function Be(w){var _,M=w.ownerDocument,O=w.nodeName,k=pt[O];return k||(_=M.body.appendChild(M.createElement(O)),k=y.css(_,"display"),_.parentNode.removeChild(_),k==="none"&&(k="block"),pt[O]=k,k)}function Ke(w,_){for(var M,O,k=[],U=0,H=w.length;U<H;U++)O=w[U],O.style&&(M=O.style.display,_?(M==="none"&&(k[U]=ye.get(O,"display")||null,k[U]||(O.style.display="")),O.style.display===""&&wt(O)&&(k[U]=Be(O))):M!=="none"&&(k[U]="none",ye.set(O,"display",M)));for(U=0;U<H;U++)k[U]!=null&&(w[U].style.display=k[U]);return w}y.fn.extend({show:function(){return Ke(this,!0)},hide:function(){return Ke(this)},toggle:function(w){return typeof w=="boolean"?w?this.show():this.hide():this.each(function(){wt(this)?y(this).show():y(this).hide()})}});var ce=/^(?:checkbox|radio)$/i,tt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,et=/^$|^module$|\/(?:java|ecma)script/i;(function(){var w=p.createDocumentFragment(),_=w.appendChild(p.createElement("div")),M=p.createElement("input");M.setAttribute("type","radio"),M.setAttribute("checked","checked"),M.setAttribute("name","t"),_.appendChild(M),m.checkClone=_.cloneNode(!0).cloneNode(!0).lastChild.checked,_.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!_.cloneNode(!0).lastChild.defaultValue,_.innerHTML="<option></option>",m.option=!!_.lastChild})();var ft={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td,m.option||(ft.optgroup=ft.option=[1,"<select multiple='multiple'>","</select>"]);function $e(w,_){var M;return typeof w.getElementsByTagName<"u"?M=w.getElementsByTagName(_||"*"):typeof w.querySelectorAll<"u"?M=w.querySelectorAll(_||"*"):M=[],_===void 0||_&&B(w,_)?y.merge([w],M):M}function Mt(w,_){for(var M=0,O=w.length;M<O;M++)ye.set(w[M],"globalEval",!_||ye.get(_[M],"globalEval"))}var Ze=/<|&#?\w+;/;function vt(w,_,M,O,k){for(var U,H,le,se,ve,Ce,Ge=_.createDocumentFragment(),_e=[],Ie=0,yt=w.length;Ie<yt;Ie++)if(U=w[Ie],U||U===0)if(S(U)==="object")y.merge(_e,U.nodeType?[U]:U);else if(!Ze.test(U))_e.push(_.createTextNode(U));else{for(H=H||Ge.appendChild(_.createElement("div")),le=(tt.exec(U)||["",""])[1].toLowerCase(),se=ft[le]||ft._default,H.innerHTML=se[1]+y.htmlPrefilter(U)+se[2],Ce=se[0];Ce--;)H=H.lastChild;y.merge(_e,H.childNodes),H=Ge.firstChild,H.textContent=""}for(Ge.textContent="",Ie=0;U=_e[Ie++];){if(O&&y.inArray(U,O)>-1){k&&k.push(U);continue}if(ve=qe(U),H=$e(Ge.appendChild(U),"script"),ve&&Mt(H),M)for(Ce=0;U=H[Ce++];)et.test(U.type||"")&&M.push(U)}return Ge}var Vt=/^([^.]*)(?:\.(.+)|)/;function kt(){return!0}function pi(){return!1}function Fr(w,_){return w===Us()==(_==="focus")}function Us(){try{return p.activeElement}catch{}}function js(w,_,M,O,k,U){var H,le;if(typeof _=="object"){typeof M!="string"&&(O=O||M,M=void 0);for(le in _)js(w,le,M,O,_[le],U);return w}if(O==null&&k==null?(k=M,O=M=void 0):k==null&&(typeof M=="string"?(k=O,O=void 0):(k=O,O=M,M=void 0)),k===!1)k=pi;else if(!k)return w;return U===1&&(H=k,k=function(se){return y().off(se),H.apply(this,arguments)},k.guid=H.guid||(H.guid=y.guid++)),w.each(function(){y.event.add(this,_,k,O,M)})}y.event={global:{},add:function(w,_,M,O,k){var U,H,le,se,ve,Ce,Ge,_e,Ie,yt,Ft,mt=ye.get(w);if(We(w))for(M.handler&&(U=M,M=U.handler,k=U.selector),k&&y.find.matchesSelector(je,k),M.guid||(M.guid=y.guid++),(se=mt.events)||(se=mt.events=Object.create(null)),(H=mt.handle)||(H=mt.handle=function(Ji){return typeof y<"u"&&y.event.triggered!==Ji.type?y.event.dispatch.apply(w,arguments):void 0}),_=(_||"").match(K)||[""],ve=_.length;ve--;)le=Vt.exec(_[ve])||[],Ie=Ft=le[1],yt=(le[2]||"").split(".").sort(),Ie&&(Ge=y.event.special[Ie]||{},Ie=(k?Ge.delegateType:Ge.bindType)||Ie,Ge=y.event.special[Ie]||{},Ce=y.extend({type:Ie,origType:Ft,data:O,handler:M,guid:M.guid,selector:k,needsContext:k&&y.expr.match.needsContext.test(k),namespace:yt.join(".")},U),(_e=se[Ie])||(_e=se[Ie]=[],_e.delegateCount=0,(!Ge.setup||Ge.setup.call(w,O,yt,H)===!1)&&w.addEventListener&&w.addEventListener(Ie,H)),Ge.add&&(Ge.add.call(w,Ce),Ce.handler.guid||(Ce.handler.guid=M.guid)),k?_e.splice(_e.delegateCount++,0,Ce):_e.push(Ce),y.event.global[Ie]=!0)},remove:function(w,_,M,O,k){var U,H,le,se,ve,Ce,Ge,_e,Ie,yt,Ft,mt=ye.hasData(w)&&ye.get(w);if(!(!mt||!(se=mt.events))){for(_=(_||"").match(K)||[""],ve=_.length;ve--;){if(le=Vt.exec(_[ve])||[],Ie=Ft=le[1],yt=(le[2]||"").split(".").sort(),!Ie){for(Ie in se)y.event.remove(w,Ie+_[ve],M,O,!0);continue}for(Ge=y.event.special[Ie]||{},Ie=(O?Ge.delegateType:Ge.bindType)||Ie,_e=se[Ie]||[],le=le[2]&&new RegExp("(^|\\.)"+yt.join("\\.(?:.*\\.|)")+"(\\.|$)"),H=U=_e.length;U--;)Ce=_e[U],(k||Ft===Ce.origType)&&(!M||M.guid===Ce.guid)&&(!le||le.test(Ce.namespace))&&(!O||O===Ce.selector||O==="**"&&Ce.selector)&&(_e.splice(U,1),Ce.selector&&_e.delegateCount--,Ge.remove&&Ge.remove.call(w,Ce));H&&!_e.length&&((!Ge.teardown||Ge.teardown.call(w,yt,mt.handle)===!1)&&y.removeEvent(w,Ie,mt.handle),delete se[Ie])}y.isEmptyObject(se)&&ye.remove(w,"handle events")}},dispatch:function(w){var _,M,O,k,U,H,le=new Array(arguments.length),se=y.event.fix(w),ve=(ye.get(this,"events")||Object.create(null))[se.type]||[],Ce=y.event.special[se.type]||{};for(le[0]=se,_=1;_<arguments.length;_++)le[_]=arguments[_];if(se.delegateTarget=this,!(Ce.preDispatch&&Ce.preDispatch.call(this,se)===!1)){for(H=y.event.handlers.call(this,se,ve),_=0;(k=H[_++])&&!se.isPropagationStopped();)for(se.currentTarget=k.elem,M=0;(U=k.handlers[M++])&&!se.isImmediatePropagationStopped();)(!se.rnamespace||U.namespace===!1||se.rnamespace.test(U.namespace))&&(se.handleObj=U,se.data=U.data,O=((y.event.special[U.origType]||{}).handle||U.handler).apply(k.elem,le),O!==void 0&&(se.result=O)===!1&&(se.preventDefault(),se.stopPropagation()));return Ce.postDispatch&&Ce.postDispatch.call(this,se),se.result}},handlers:function(w,_){var M,O,k,U,H,le=[],se=_.delegateCount,ve=w.target;if(se&&ve.nodeType&&!(w.type==="click"&&w.button>=1)){for(;ve!==this;ve=ve.parentNode||this)if(ve.nodeType===1&&!(w.type==="click"&&ve.disabled===!0)){for(U=[],H={},M=0;M<se;M++)O=_[M],k=O.selector+" ",H[k]===void 0&&(H[k]=O.needsContext?y(k,this).index(ve)>-1:y.find(k,this,null,[ve]).length),H[k]&&U.push(O);U.length&&le.push({elem:ve,handlers:U})}}return ve=this,se<_.length&&le.push({elem:ve,handlers:_.slice(se)}),le},addProp:function(w,_){Object.defineProperty(y.Event.prototype,w,{enumerable:!0,configurable:!0,get:v(_)?function(){if(this.originalEvent)return _(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[w]},set:function(M){Object.defineProperty(this,w,{enumerable:!0,configurable:!0,writable:!0,value:M})}})},fix:function(w){return w[y.expando]?w:new y.Event(w)},special:{load:{noBubble:!0},click:{setup:function(w){var _=this||w;return ce.test(_.type)&&_.click&&B(_,"input")&&Hs(_,"click",kt),!1},trigger:function(w){var _=this||w;return ce.test(_.type)&&_.click&&B(_,"input")&&Hs(_,"click"),!0},_default:function(w){var _=w.target;return ce.test(_.type)&&_.click&&B(_,"input")&&ye.get(_,"click")||B(_,"a")}},beforeunload:{postDispatch:function(w){w.result!==void 0&&w.originalEvent&&(w.originalEvent.returnValue=w.result)}}}};function Hs(w,_,M){if(!M){ye.get(w,_)===void 0&&y.event.add(w,_,kt);return}ye.set(w,_,!1),y.event.add(w,_,{namespace:!1,handler:function(O){var k,U,H=ye.get(this,_);if(O.isTrigger&1&&this[_]){if(H.length)(y.event.special[_]||{}).delegateType&&O.stopPropagation();else if(H=s.call(arguments),ye.set(this,_,H),k=M(this,_),this[_](),U=ye.get(this,_),H!==U||k?ye.set(this,_,!1):U={},H!==U)return O.stopImmediatePropagation(),O.preventDefault(),U&&U.value}else H.length&&(ye.set(this,_,{value:y.event.trigger(y.extend(H[0],y.Event.prototype),H.slice(1),this)}),O.stopImmediatePropagation())}})}y.removeEvent=function(w,_,M){w.removeEventListener&&w.removeEventListener(_,M)},y.Event=function(w,_){if(!(this instanceof y.Event))return new y.Event(w,_);w&&w.type?(this.originalEvent=w,this.type=w.type,this.isDefaultPrevented=w.defaultPrevented||w.defaultPrevented===void 0&&w.returnValue===!1?kt:pi,this.target=w.target&&w.target.nodeType===3?w.target.parentNode:w.target,this.currentTarget=w.currentTarget,this.relatedTarget=w.relatedTarget):this.type=w,_&&y.extend(this,_),this.timeStamp=w&&w.timeStamp||Date.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:pi,isPropagationStopped:pi,isImmediatePropagationStopped:pi,isSimulated:!1,preventDefault:function(){var w=this.originalEvent;this.isDefaultPrevented=kt,w&&!this.isSimulated&&w.preventDefault()},stopPropagation:function(){var w=this.originalEvent;this.isPropagationStopped=kt,w&&!this.isSimulated&&w.stopPropagation()},stopImmediatePropagation:function(){var w=this.originalEvent;this.isImmediatePropagationStopped=kt,w&&!this.isSimulated&&w.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},function(w,_){y.event.special[w]={setup:function(){return Hs(this,w,Fr),!1},trigger:function(){return Hs(this,w),!0},_default:function(M){return ye.get(M.target,w)},delegateType:_}}),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(w,_){y.event.special[w]={delegateType:_,bindType:_,handle:function(M){var O,k=this,U=M.relatedTarget,H=M.handleObj;return(!U||U!==k&&!y.contains(k,U))&&(M.type=H.origType,O=H.handler.apply(this,arguments),M.type=_),O}}}),y.fn.extend({on:function(w,_,M,O){return js(this,w,_,M,O)},one:function(w,_,M,O){return js(this,w,_,M,O,1)},off:function(w,_,M){var O,k;if(w&&w.preventDefault&&w.handleObj)return O=w.handleObj,y(w.delegateTarget).off(O.namespace?O.origType+"."+O.namespace:O.origType,O.selector,O.handler),this;if(typeof w=="object"){for(k in w)this.off(k,_,w[k]);return this}return(_===!1||typeof _=="function")&&(M=_,_=void 0),M===!1&&(M=pi),this.each(function(){y.event.remove(this,w,M,_)})}});var Kh=/<script|<style|<link/i,Ec=/checked\s*(?:[^=]|=\s*.checked.)/i,zu=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function sl(w,_){return B(w,"table")&&B(_.nodeType!==11?_:_.firstChild,"tr")&&y(w).children("tbody")[0]||w}function Zh(w){return w.type=(w.getAttribute("type")!==null)+"/"+w.type,w}function $h(w){return(w.type||"").slice(0,5)==="true/"?w.type=w.type.slice(5):w.removeAttribute("type"),w}function $(w,_){var M,O,k,U,H,le,se;if(_.nodeType===1){if(ye.hasData(w)&&(U=ye.get(w),se=U.events,se)){ye.remove(_,"handle events");for(k in se)for(M=0,O=se[k].length;M<O;M++)y.event.add(_,k,se[k][M])}Qe.hasData(w)&&(H=Qe.access(w),le=y.extend({},H),Qe.set(_,le))}}function Ee(w,_){var M=_.nodeName.toLowerCase();M==="input"&&ce.test(w.type)?_.checked=w.checked:(M==="input"||M==="textarea")&&(_.defaultValue=w.defaultValue)}function De(w,_,M,O){_=o(_);var k,U,H,le,se,ve,Ce=0,Ge=w.length,_e=Ge-1,Ie=_[0],yt=v(Ie);if(yt||Ge>1&&typeof Ie=="string"&&!m.checkClone&&Ec.test(Ie))return w.each(function(Ft){var mt=w.eq(Ft);yt&&(_[0]=Ie.call(this,Ft,mt.html())),De(mt,_,M,O)});if(Ge&&(k=vt(_,w[0].ownerDocument,!1,w,O),U=k.firstChild,k.childNodes.length===1&&(k=U),U||O)){for(H=y.map($e(k,"script"),Zh),le=H.length;Ce<Ge;Ce++)se=k,Ce!==_e&&(se=y.clone(se,!0,!0),le&&y.merge(H,$e(se,"script"))),M.call(w[Ce],se,Ce);if(le)for(ve=H[H.length-1].ownerDocument,y.map(H,$h),Ce=0;Ce<le;Ce++)se=H[Ce],et.test(se.type||"")&&!ye.access(se,"globalEval")&&y.contains(ve,se)&&(se.src&&(se.type||"").toLowerCase()!=="module"?y._evalUrl&&!se.noModule&&y._evalUrl(se.src,{nonce:se.nonce||se.getAttribute("nonce")},ve):b(se.textContent.replace(zu,""),se,ve))}return w}function Te(w,_,M){for(var O,k=_?y.filter(_,w):w,U=0;(O=k[U])!=null;U++)!M&&O.nodeType===1&&y.cleanData($e(O)),O.parentNode&&(M&&qe(O)&&Mt($e(O,"script")),O.parentNode.removeChild(O));return w}y.extend({htmlPrefilter:function(w){return w},clone:function(w,_,M){var O,k,U,H,le=w.cloneNode(!0),se=qe(w);if(!m.noCloneChecked&&(w.nodeType===1||w.nodeType===11)&&!y.isXMLDoc(w))for(H=$e(le),U=$e(w),O=0,k=U.length;O<k;O++)Ee(U[O],H[O]);if(_)if(M)for(U=U||$e(w),H=H||$e(le),O=0,k=U.length;O<k;O++)$(U[O],H[O]);else $(w,le);return H=$e(le,"script"),H.length>0&&Mt(H,!se&&$e(w,"script")),le},cleanData:function(w){for(var _,M,O,k=y.event.special,U=0;(M=w[U])!==void 0;U++)if(We(M)){if(_=M[ye.expando]){if(_.events)for(O in _.events)k[O]?y.event.remove(M,O):y.removeEvent(M,O,_.handle);M[ye.expando]=void 0}M[Qe.expando]&&(M[Qe.expando]=void 0)}}}),y.fn.extend({detach:function(w){return Te(this,w,!0)},remove:function(w){return Te(this,w)},text:function(w){return ue(this,function(_){return _===void 0?y.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=_)})},null,w,arguments.length)},append:function(){return De(this,arguments,function(w){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var _=sl(this,w);_.appendChild(w)}})},prepend:function(){return De(this,arguments,function(w){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var _=sl(this,w);_.insertBefore(w,_.firstChild)}})},before:function(){return De(this,arguments,function(w){this.parentNode&&this.parentNode.insertBefore(w,this)})},after:function(){return De(this,arguments,function(w){this.parentNode&&this.parentNode.insertBefore(w,this.nextSibling)})},empty:function(){for(var w,_=0;(w=this[_])!=null;_++)w.nodeType===1&&(y.cleanData($e(w,!1)),w.textContent="");return this},clone:function(w,_){return w=w??!1,_=_??w,this.map(function(){return y.clone(this,w,_)})},html:function(w){return ue(this,function(_){var M=this[0]||{},O=0,k=this.length;if(_===void 0&&M.nodeType===1)return M.innerHTML;if(typeof _=="string"&&!Kh.test(_)&&!ft[(tt.exec(_)||["",""])[1].toLowerCase()]){_=y.htmlPrefilter(_);try{for(;O<k;O++)M=this[O]||{},M.nodeType===1&&(y.cleanData($e(M,!1)),M.innerHTML=_);M=0}catch{}}M&&this.empty().append(_)},null,w,arguments.length)},replaceWith:function(){var w=[];return De(this,arguments,function(_){var M=this.parentNode;y.inArray(this,w)<0&&(y.cleanData($e(this)),M&&M.replaceChild(_,this))},w)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(w,_){y.fn[w]=function(M){for(var O,k=[],U=y(M),H=U.length-1,le=0;le<=H;le++)O=le===H?this:this.clone(!0),y(U[le])[_](O),a.apply(k,O.get());return this.pushStack(k)}});var Fe=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),bt=/^--/,Rt=function(w){var _=w.ownerDocument.defaultView;return(!_||!_.opener)&&(_=t),_.getComputedStyle(w)},zt=function(w,_,M){var O,k,U={};for(k in _)U[k]=w.style[k],w.style[k]=_[k];O=M.call(w);for(k in _)w.style[k]=U[k];return O},Zt=new RegExp(Se.join("|"),"i"),yi="[\\x20\\t\\r\\n\\f]",Wt=new RegExp("^"+yi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+yi+"+$","g");(function(){function w(){if(ve){se.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ve.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",je.appendChild(se).appendChild(ve);var Ce=t.getComputedStyle(ve);M=Ce.top!=="1%",le=_(Ce.marginLeft)===12,ve.style.right="60%",U=_(Ce.right)===36,O=_(Ce.width)===36,ve.style.position="absolute",k=_(ve.offsetWidth/3)===12,je.removeChild(se),ve=null}}function _(Ce){return Math.round(parseFloat(Ce))}var M,O,k,U,H,le,se=p.createElement("div"),ve=p.createElement("div");ve.style&&(ve.style.backgroundClip="content-box",ve.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=ve.style.backgroundClip==="content-box",y.extend(m,{boxSizingReliable:function(){return w(),O},pixelBoxStyles:function(){return w(),U},pixelPosition:function(){return w(),M},reliableMarginLeft:function(){return w(),le},scrollboxSize:function(){return w(),k},reliableTrDimensions:function(){var Ce,Ge,_e,Ie;return H==null&&(Ce=p.createElement("table"),Ge=p.createElement("tr"),_e=p.createElement("div"),Ce.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ge.style.cssText="border:1px solid",Ge.style.height="1px",_e.style.height="9px",_e.style.display="block",je.appendChild(Ce).appendChild(Ge).appendChild(_e),Ie=t.getComputedStyle(Ge),H=parseInt(Ie.height,10)+parseInt(Ie.borderTopWidth,10)+parseInt(Ie.borderBottomWidth,10)===Ge.offsetHeight,je.removeChild(Ce)),H}}))})();function qt(w,_,M){var O,k,U,H,le=bt.test(_),se=w.style;return M=M||Rt(w),M&&(H=M.getPropertyValue(_)||M[_],le&&H&&(H=H.replace(Wt,"$1")||void 0),H===""&&!qe(w)&&(H=y.style(w,_)),!m.pixelBoxStyles()&&Fe.test(H)&&Zt.test(_)&&(O=se.width,k=se.minWidth,U=se.maxWidth,se.minWidth=se.maxWidth=se.width=H,H=M.width,se.width=O,se.minWidth=k,se.maxWidth=U)),H!==void 0?H+"":H}function Ci(w,_){return{get:function(){if(w()){delete this.get;return}return(this.get=_).apply(this,arguments)}}}var Oi=["Webkit","Moz","ms"],Gs=p.createElement("div").style,Vs={};function bn(w){for(var _=w[0].toUpperCase()+w.slice(1),M=Oi.length;M--;)if(w=Oi[M]+_,w in Gs)return w}function ei(w){var _=y.cssProps[w]||Vs[w];return _||(w in Gs?w:Vs[w]=bn(w)||w)}var xo=/^(none|table(?!-c[ea]).+)/,ha={position:"absolute",visibility:"hidden",display:"block"},rn={letterSpacing:"0",fontWeight:"400"};function Sn(w,_,M){var O=q.exec(_);return O?Math.max(0,O[2]-(M||0))+(O[3]||"px"):_}function Ws(w,_,M,O,k,U){var H=_==="width"?1:0,le=0,se=0;if(M===(O?"border":"content"))return 0;for(;H<4;H+=2)M==="margin"&&(se+=y.css(w,M+Se[H],!0,k)),O?(M==="content"&&(se-=y.css(w,"padding"+Se[H],!0,k)),M!=="margin"&&(se-=y.css(w,"border"+Se[H]+"Width",!0,k))):(se+=y.css(w,"padding"+Se[H],!0,k),M!=="padding"?se+=y.css(w,"border"+Se[H]+"Width",!0,k):le+=y.css(w,"border"+Se[H]+"Width",!0,k));return!O&&U>=0&&(se+=Math.max(0,Math.ceil(w["offset"+_[0].toUpperCase()+_.slice(1)]-U-se-le-.5))||0),se}function fa(w,_,M){var O=Rt(w),k=!m.boxSizingReliable()||M,U=k&&y.css(w,"boxSizing",!1,O)==="border-box",H=U,le=qt(w,_,O),se="offset"+_[0].toUpperCase()+_.slice(1);if(Fe.test(le)){if(!M)return le;le="auto"}return(!m.boxSizingReliable()&&U||!m.reliableTrDimensions()&&B(w,"tr")||le==="auto"||!parseFloat(le)&&y.css(w,"display",!1,O)==="inline")&&w.getClientRects().length&&(U=y.css(w,"boxSizing",!1,O)==="border-box",H=se in w,H&&(le=w[se])),le=parseFloat(le)||0,le+Ws(w,_,M||(U?"border":"content"),H,O,le)+"px"}y.extend({cssHooks:{opacity:{get:function(w,_){if(_){var M=qt(w,"opacity");return M===""?"1":M}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(w,_,M,O){if(!(!w||w.nodeType===3||w.nodeType===8||!w.style)){var k,U,H,le=Oe(_),se=bt.test(_),ve=w.style;if(se||(_=ei(le)),H=y.cssHooks[_]||y.cssHooks[le],M!==void 0){if(U=typeof M,U==="string"&&(k=q.exec(M))&&k[1]&&(M=Pe(w,_,k),U="number"),M==null||M!==M)return;U==="number"&&!se&&(M+=k&&k[3]||(y.cssNumber[le]?"":"px")),!m.clearCloneStyle&&M===""&&_.indexOf("background")===0&&(ve[_]="inherit"),(!H||!("set"in H)||(M=H.set(w,M,O))!==void 0)&&(se?ve.setProperty(_,M):ve[_]=M)}else return H&&"get"in H&&(k=H.get(w,!1,O))!==void 0?k:ve[_]}},css:function(w,_,M,O){var k,U,H,le=Oe(_),se=bt.test(_);return se||(_=ei(le)),H=y.cssHooks[_]||y.cssHooks[le],H&&"get"in H&&(k=H.get(w,!0,M)),k===void 0&&(k=qt(w,_,O)),k==="normal"&&_ in rn&&(k=rn[_]),M===""||M?(U=parseFloat(k),M===!0||isFinite(U)?U||0:k):k}}),y.each(["height","width"],function(w,_){y.cssHooks[_]={get:function(M,O,k){if(O)return xo.test(y.css(M,"display"))&&(!M.getClientRects().length||!M.getBoundingClientRect().width)?zt(M,ha,function(){return fa(M,_,k)}):fa(M,_,k)},set:function(M,O,k){var U,H=Rt(M),le=!m.scrollboxSize()&&H.position==="absolute",se=le||k,ve=se&&y.css(M,"boxSizing",!1,H)==="border-box",Ce=k?Ws(M,_,k,ve,H):0;return ve&&le&&(Ce-=Math.ceil(M["offset"+_[0].toUpperCase()+_.slice(1)]-parseFloat(H[_])-Ws(M,_,"border",!1,H)-.5)),Ce&&(U=q.exec(O))&&(U[3]||"px")!=="px"&&(M.style[_]=O,O=y.css(M,_)),Sn(M,O,Ce)}}}),y.cssHooks.marginLeft=Ci(m.reliableMarginLeft,function(w,_){if(_)return(parseFloat(qt(w,"marginLeft"))||w.getBoundingClientRect().left-zt(w,{marginLeft:0},function(){return w.getBoundingClientRect().left}))+"px"}),y.each({margin:"",padding:"",border:"Width"},function(w,_){y.cssHooks[w+_]={expand:function(M){for(var O=0,k={},U=typeof M=="string"?M.split(" "):[M];O<4;O++)k[w+Se[O]+_]=U[O]||U[O-2]||U[0];return k}},w!=="margin"&&(y.cssHooks[w+_].set=Sn)}),y.fn.extend({css:function(w,_){return ue(this,function(M,O,k){var U,H,le={},se=0;if(Array.isArray(O)){for(U=Rt(M),H=O.length;se<H;se++)le[O[se]]=y.css(M,O[se],!1,U);return le}return k!==void 0?y.style(M,O,k):y.css(M,O)},w,_,arguments.length>1)}});function ui(w,_,M,O,k){return new ui.prototype.init(w,_,M,O,k)}y.Tween=ui,ui.prototype={constructor:ui,init:function(w,_,M,O,k,U){this.elem=w,this.prop=M,this.easing=k||y.easing._default,this.options=_,this.start=this.now=this.cur(),this.end=O,this.unit=U||(y.cssNumber[M]?"":"px")},cur:function(){var w=ui.propHooks[this.prop];return w&&w.get?w.get(this):ui.propHooks._default.get(this)},run:function(w){var _,M=ui.propHooks[this.prop];return this.options.duration?this.pos=_=y.easing[this.easing](w,this.options.duration*w,0,1,this.options.duration):this.pos=_=w,this.now=(this.end-this.start)*_+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),M&&M.set?M.set(this):ui.propHooks._default.set(this),this}},ui.prototype.init.prototype=ui.prototype,ui.propHooks={_default:{get:function(w){var _;return w.elem.nodeType!==1||w.elem[w.prop]!=null&&w.elem.style[w.prop]==null?w.elem[w.prop]:(_=y.css(w.elem,w.prop,""),!_||_==="auto"?0:_)},set:function(w){y.fx.step[w.prop]?y.fx.step[w.prop](w):w.elem.nodeType===1&&(y.cssHooks[w.prop]||w.elem.style[ei(w.prop)]!=null)?y.style(w.elem,w.prop,w.now+w.unit):w.elem[w.prop]=w.now}}},ui.propHooks.scrollTop=ui.propHooks.scrollLeft={set:function(w){w.elem.nodeType&&w.elem.parentNode&&(w.elem[w.prop]=w.now)}},y.easing={linear:function(w){return w},swing:function(w){return .5-Math.cos(w*Math.PI)/2},_default:"swing"},y.fx=ui.prototype.init,y.fx.step={};var _n,wo,En=/^(?:toggle|show|hide)$/,V1=/queueHooks$/;function Jh(){wo&&(p.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Jh):t.setTimeout(Jh,y.fx.interval),y.fx.tick())}function Gm(){return t.setTimeout(function(){_n=void 0}),_n=Date.now()}function Ac(w,_){var M,O=0,k={height:w};for(_=_?1:0;O<4;O+=2-_)M=Se[O],k["margin"+M]=k["padding"+M]=w;return _&&(k.opacity=k.width=w),k}function ef(w,_,M){for(var O,k=(zn.tweeners[_]||[]).concat(zn.tweeners["*"]),U=0,H=k.length;U<H;U++)if(O=k[U].call(M,_,w))return O}function W1(w,_,M){var O,k,U,H,le,se,ve,Ce,Ge="width"in _||"height"in _,_e=this,Ie={},yt=w.style,Ft=w.nodeType&&wt(w),mt=ye.get(w,"fxshow");M.queue||(H=y._queueHooks(w,"fx"),H.unqueued==null&&(H.unqueued=0,le=H.empty.fire,H.empty.fire=function(){H.unqueued||le()}),H.unqueued++,_e.always(function(){_e.always(function(){H.unqueued--,y.queue(w,"fx").length||H.empty.fire()})}));for(O in _)if(k=_[O],En.test(k)){if(delete _[O],U=U||k==="toggle",k===(Ft?"hide":"show"))if(k==="show"&&mt&&mt[O]!==void 0)Ft=!0;else continue;Ie[O]=mt&&mt[O]||y.style(w,O)}if(se=!y.isEmptyObject(_),!(!se&&y.isEmptyObject(Ie))){Ge&&w.nodeType===1&&(M.overflow=[yt.overflow,yt.overflowX,yt.overflowY],ve=mt&&mt.display,ve==null&&(ve=ye.get(w,"display")),Ce=y.css(w,"display"),Ce==="none"&&(ve?Ce=ve:(Ke([w],!0),ve=w.style.display||ve,Ce=y.css(w,"display"),Ke([w]))),(Ce==="inline"||Ce==="inline-block"&&ve!=null)&&y.css(w,"float")==="none"&&(se||(_e.done(function(){yt.display=ve}),ve==null&&(Ce=yt.display,ve=Ce==="none"?"":Ce)),yt.display="inline-block")),M.overflow&&(yt.overflow="hidden",_e.always(function(){yt.overflow=M.overflow[0],yt.overflowX=M.overflow[1],yt.overflowY=M.overflow[2]})),se=!1;for(O in Ie)se||(mt?"hidden"in mt&&(Ft=mt.hidden):mt=ye.access(w,"fxshow",{display:ve}),U&&(mt.hidden=!Ft),Ft&&Ke([w],!0),_e.done(function(){Ft||Ke([w]),ye.remove(w,"fxshow");for(O in Ie)y.style(w,O,Ie[O])})),se=ef(Ft?mt[O]:0,O,_e),O in mt||(mt[O]=se.start,Ft&&(se.end=se.start,se.start=0))}}function q1(w,_){var M,O,k,U,H;for(M in w)if(O=Oe(M),k=_[O],U=w[M],Array.isArray(U)&&(k=U[1],U=w[M]=U[0]),M!==O&&(w[O]=U,delete w[M]),H=y.cssHooks[O],H&&"expand"in H){U=H.expand(U),delete w[O];for(M in U)M in w||(w[M]=U[M],_[M]=k)}else _[O]=k}function zn(w,_,M){var O,k,U=0,H=zn.prefilters.length,le=y.Deferred().always(function(){delete se.elem}),se=function(){if(k)return!1;for(var Ge=_n||Gm(),_e=Math.max(0,ve.startTime+ve.duration-Ge),Ie=_e/ve.duration||0,yt=1-Ie,Ft=0,mt=ve.tweens.length;Ft<mt;Ft++)ve.tweens[Ft].run(yt);return le.notifyWith(w,[ve,yt,_e]),yt<1&&mt?_e:(mt||le.notifyWith(w,[ve,1,0]),le.resolveWith(w,[ve]),!1)},ve=le.promise({elem:w,props:y.extend({},_),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},M),originalProperties:_,originalOptions:M,startTime:_n||Gm(),duration:M.duration,tweens:[],createTween:function(Ge,_e){var Ie=y.Tween(w,ve.opts,Ge,_e,ve.opts.specialEasing[Ge]||ve.opts.easing);return ve.tweens.push(Ie),Ie},stop:function(Ge){var _e=0,Ie=Ge?ve.tweens.length:0;if(k)return this;for(k=!0;_e<Ie;_e++)ve.tweens[_e].run(1);return Ge?(le.notifyWith(w,[ve,1,0]),le.resolveWith(w,[ve,Ge])):le.rejectWith(w,[ve,Ge]),this}}),Ce=ve.props;for(q1(Ce,ve.opts.specialEasing);U<H;U++)if(O=zn.prefilters[U].call(ve,w,Ce,ve.opts),O)return v(O.stop)&&(y._queueHooks(ve.elem,ve.opts.queue).stop=O.stop.bind(O)),O;return y.map(Ce,ef,ve),v(ve.opts.start)&&ve.opts.start.call(w,ve),ve.progress(ve.opts.progress).done(ve.opts.done,ve.opts.complete).fail(ve.opts.fail).always(ve.opts.always),y.fx.timer(y.extend(se,{elem:w,anim:ve,queue:ve.opts.queue})),ve}y.Animation=y.extend(zn,{tweeners:{"*":[function(w,_){var M=this.createTween(w,_);return Pe(M.elem,w,q.exec(_),M),M}]},tweener:function(w,_){v(w)?(_=w,w=["*"]):w=w.match(K);for(var M,O=0,k=w.length;O<k;O++)M=w[O],zn.tweeners[M]=zn.tweeners[M]||[],zn.tweeners[M].unshift(_)},prefilters:[W1],prefilter:function(w,_){_?zn.prefilters.unshift(w):zn.prefilters.push(w)}}),y.speed=function(w,_,M){var O=w&&typeof w=="object"?y.extend({},w):{complete:M||!M&&_||v(w)&&w,duration:w,easing:M&&_||_&&!v(_)&&_};return y.fx.off?O.duration=0:typeof O.duration!="number"&&(O.duration in y.fx.speeds?O.duration=y.fx.speeds[O.duration]:O.duration=y.fx.speeds._default),(O.queue==null||O.queue===!0)&&(O.queue="fx"),O.old=O.complete,O.complete=function(){v(O.old)&&O.old.call(this),O.queue&&y.dequeue(this,O.queue)},O},y.fn.extend({fadeTo:function(w,_,M,O){return this.filter(wt).css("opacity",0).show().end().animate({opacity:_},w,M,O)},animate:function(w,_,M,O){var k=y.isEmptyObject(w),U=y.speed(_,M,O),H=function(){var le=zn(this,y.extend({},w),U);(k||ye.get(this,"finish"))&&le.stop(!0)};return H.finish=H,k||U.queue===!1?this.each(H):this.queue(U.queue,H)},stop:function(w,_,M){var O=function(k){var U=k.stop;delete k.stop,U(M)};return typeof w!="string"&&(M=_,_=w,w=void 0),_&&this.queue(w||"fx",[]),this.each(function(){var k=!0,U=w!=null&&w+"queueHooks",H=y.timers,le=ye.get(this);if(U)le[U]&&le[U].stop&&O(le[U]);else for(U in le)le[U]&&le[U].stop&&V1.test(U)&&O(le[U]);for(U=H.length;U--;)H[U].elem===this&&(w==null||H[U].queue===w)&&(H[U].anim.stop(M),k=!1,H.splice(U,1));(k||!M)&&y.dequeue(this,w)})},finish:function(w){return w!==!1&&(w=w||"fx"),this.each(function(){var _,M=ye.get(this),O=M[w+"queue"],k=M[w+"queueHooks"],U=y.timers,H=O?O.length:0;for(M.finish=!0,y.queue(this,w,[]),k&&k.stop&&k.stop.call(this,!0),_=U.length;_--;)U[_].elem===this&&U[_].queue===w&&(U[_].anim.stop(!0),U.splice(_,1));for(_=0;_<H;_++)O[_]&&O[_].finish&&O[_].finish.call(this);delete M.finish})}}),y.each(["toggle","show","hide"],function(w,_){var M=y.fn[_];y.fn[_]=function(O,k,U){return O==null||typeof O=="boolean"?M.apply(this,arguments):this.animate(Ac(_,!0),O,k,U)}}),y.each({slideDown:Ac("show"),slideUp:Ac("hide"),slideToggle:Ac("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(w,_){y.fn[w]=function(M,O,k){return this.animate(_,M,O,k)}}),y.timers=[],y.fx.tick=function(){var w,_=0,M=y.timers;for(_n=Date.now();_<M.length;_++)w=M[_],!w()&&M[_]===w&&M.splice(_--,1);M.length||y.fx.stop(),_n=void 0},y.fx.timer=function(w){y.timers.push(w),y.fx.start()},y.fx.interval=13,y.fx.start=function(){wo||(wo=!0,Jh())},y.fx.stop=function(){wo=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(w,_){return w=y.fx&&y.fx.speeds[w]||w,_=_||"fx",this.queue(_,function(M,O){var k=t.setTimeout(M,w);O.stop=function(){t.clearTimeout(k)}})},function(){var w=p.createElement("input"),_=p.createElement("select"),M=_.appendChild(p.createElement("option"));w.type="checkbox",m.checkOn=w.value!=="",m.optSelected=M.selected,w=p.createElement("input"),w.value="t",w.type="radio",m.radioValue=w.value==="t"}();var tf,Cc=y.expr.attrHandle;y.fn.extend({attr:function(w,_){return ue(this,y.attr,w,_,arguments.length>1)},removeAttr:function(w){return this.each(function(){y.removeAttr(this,w)})}}),y.extend({attr:function(w,_,M){var O,k,U=w.nodeType;if(!(U===3||U===8||U===2)){if(typeof w.getAttribute>"u")return y.prop(w,_,M);if((U!==1||!y.isXMLDoc(w))&&(k=y.attrHooks[_.toLowerCase()]||(y.expr.match.bool.test(_)?tf:void 0)),M!==void 0){if(M===null){y.removeAttr(w,_);return}return k&&"set"in k&&(O=k.set(w,M,_))!==void 0?O:(w.setAttribute(_,M+""),M)}return k&&"get"in k&&(O=k.get(w,_))!==null?O:(O=y.find.attr(w,_),O??void 0)}},attrHooks:{type:{set:function(w,_){if(!m.radioValue&&_==="radio"&&B(w,"input")){var M=w.value;return w.setAttribute("type",_),M&&(w.value=M),_}}}},removeAttr:function(w,_){var M,O=0,k=_&&_.match(K);if(k&&w.nodeType===1)for(;M=k[O++];)w.removeAttribute(M)}}),tf={set:function(w,_,M){return _===!1?y.removeAttr(w,M):w.setAttribute(M,M),M}},y.each(y.expr.match.bool.source.match(/\w+/g),function(w,_){var M=Cc[_]||y.find.attr;Cc[_]=function(O,k,U){var H,le,se=k.toLowerCase();return U||(le=Cc[se],Cc[se]=H,H=M(O,k,U)!=null?se:null,Cc[se]=le),H}});var X1=/^(?:input|select|textarea|button)$/i,ol=/^(?:a|area)$/i;y.fn.extend({prop:function(w,_){return ue(this,y.prop,w,_,arguments.length>1)},removeProp:function(w){return this.each(function(){delete this[y.propFix[w]||w]})}}),y.extend({prop:function(w,_,M){var O,k,U=w.nodeType;if(!(U===3||U===8||U===2))return(U!==1||!y.isXMLDoc(w))&&(_=y.propFix[_]||_,k=y.propHooks[_]),M!==void 0?k&&"set"in k&&(O=k.set(w,M,_))!==void 0?O:w[_]=M:k&&"get"in k&&(O=k.get(w,_))!==null?O:w[_]},propHooks:{tabIndex:{get:function(w){var _=y.find.attr(w,"tabindex");return _?parseInt(_,10):X1.test(w.nodeName)||ol.test(w.nodeName)&&w.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(y.propHooks.selected={get:function(w){var _=w.parentNode;return _&&_.parentNode&&_.parentNode.selectedIndex,null},set:function(w){var _=w.parentNode;_&&(_.selectedIndex,_.parentNode&&_.parentNode.selectedIndex)}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){y.propFix[this.toLowerCase()]=this});function bo(w){var _=w.match(K)||[];return _.join(" ")}function pa(w){return w.getAttribute&&w.getAttribute("class")||""}function Tc(w){return Array.isArray(w)?w:typeof w=="string"?w.match(K)||[]:[]}y.fn.extend({addClass:function(w){var _,M,O,k,U,H;return v(w)?this.each(function(le){y(this).addClass(w.call(this,le,pa(this)))}):(_=Tc(w),_.length?this.each(function(){if(O=pa(this),M=this.nodeType===1&&" "+bo(O)+" ",M){for(U=0;U<_.length;U++)k=_[U],M.indexOf(" "+k+" ")<0&&(M+=k+" ");H=bo(M),O!==H&&this.setAttribute("class",H)}}):this)},removeClass:function(w){var _,M,O,k,U,H;return v(w)?this.each(function(le){y(this).removeClass(w.call(this,le,pa(this)))}):arguments.length?(_=Tc(w),_.length?this.each(function(){if(O=pa(this),M=this.nodeType===1&&" "+bo(O)+" ",M){for(U=0;U<_.length;U++)for(k=_[U];M.indexOf(" "+k+" ")>-1;)M=M.replace(" "+k+" "," ");H=bo(M),O!==H&&this.setAttribute("class",H)}}):this):this.attr("class","")},toggleClass:function(w,_){var M,O,k,U,H=typeof w,le=H==="string"||Array.isArray(w);return v(w)?this.each(function(se){y(this).toggleClass(w.call(this,se,pa(this),_),_)}):typeof _=="boolean"&&le?_?this.addClass(w):this.removeClass(w):(M=Tc(w),this.each(function(){if(le)for(U=y(this),k=0;k<M.length;k++)O=M[k],U.hasClass(O)?U.removeClass(O):U.addClass(O);else(w===void 0||H==="boolean")&&(O=pa(this),O&&ye.set(this,"__className__",O),this.setAttribute&&this.setAttribute("class",O||w===!1?"":ye.get(this,"__className__")||""))}))},hasClass:function(w){var _,M,O=0;for(_=" "+w+" ";M=this[O++];)if(M.nodeType===1&&(" "+bo(pa(M))+" ").indexOf(_)>-1)return!0;return!1}});var Vm=/\r/g;y.fn.extend({val:function(w){var _,M,O,k=this[0];return arguments.length?(O=v(w),this.each(function(U){var H;this.nodeType===1&&(O?H=w.call(this,U,y(this).val()):H=w,H==null?H="":typeof H=="number"?H+="":Array.isArray(H)&&(H=y.map(H,function(le){return le==null?"":le+""})),_=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()],(!_||!("set"in _)||_.set(this,H,"value")===void 0)&&(this.value=H))})):k?(_=y.valHooks[k.type]||y.valHooks[k.nodeName.toLowerCase()],_&&"get"in _&&(M=_.get(k,"value"))!==void 0?M:(M=k.value,typeof M=="string"?M.replace(Vm,""):M??"")):void 0}}),y.extend({valHooks:{option:{get:function(w){var _=y.find.attr(w,"value");return _??bo(y.text(w))}},select:{get:function(w){var _,M,O,k=w.options,U=w.selectedIndex,H=w.type==="select-one",le=H?null:[],se=H?U+1:k.length;for(U<0?O=se:O=H?U:0;O<se;O++)if(M=k[O],(M.selected||O===U)&&!M.disabled&&(!M.parentNode.disabled||!B(M.parentNode,"optgroup"))){if(_=y(M).val(),H)return _;le.push(_)}return le},set:function(w,_){for(var M,O,k=w.options,U=y.makeArray(_),H=k.length;H--;)O=k[H],(O.selected=y.inArray(y.valHooks.option.get(O),U)>-1)&&(M=!0);return M||(w.selectedIndex=-1),U}}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]={set:function(w,_){if(Array.isArray(_))return w.checked=y.inArray(y(w).val(),_)>-1}},m.checkOn||(y.valHooks[this].get=function(w){return w.getAttribute("value")===null?"on":w.value})}),m.focusin="onfocusin"in t;var Wm=/^(?:focusinfocus|focusoutblur)$/,qm=function(w){w.stopPropagation()};y.extend(y.event,{trigger:function(w,_,M,O){var k,U,H,le,se,ve,Ce,Ge,_e=[M||p],Ie=u.call(w,"type")?w.type:w,yt=u.call(w,"namespace")?w.namespace.split("."):[];if(U=Ge=H=M=M||p,!(M.nodeType===3||M.nodeType===8)&&!Wm.test(Ie+y.event.triggered)&&(Ie.indexOf(".")>-1&&(yt=Ie.split("."),Ie=yt.shift(),yt.sort()),se=Ie.indexOf(":")<0&&"on"+Ie,w=w[y.expando]?w:new y.Event(Ie,typeof w=="object"&&w),w.isTrigger=O?2:3,w.namespace=yt.join("."),w.rnamespace=w.namespace?new RegExp("(^|\\.)"+yt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,w.result=void 0,w.target||(w.target=M),_=_==null?[w]:y.makeArray(_,[w]),Ce=y.event.special[Ie]||{},!(!O&&Ce.trigger&&Ce.trigger.apply(M,_)===!1))){if(!O&&!Ce.noBubble&&!g(M)){for(le=Ce.delegateType||Ie,Wm.test(le+Ie)||(U=U.parentNode);U;U=U.parentNode)_e.push(U),H=U;H===(M.ownerDocument||p)&&_e.push(H.defaultView||H.parentWindow||t)}for(k=0;(U=_e[k++])&&!w.isPropagationStopped();)Ge=U,w.type=k>1?le:Ce.bindType||Ie,ve=(ye.get(U,"events")||Object.create(null))[w.type]&&ye.get(U,"handle"),ve&&ve.apply(U,_),ve=se&&U[se],ve&&ve.apply&&We(U)&&(w.result=ve.apply(U,_),w.result===!1&&w.preventDefault());return w.type=Ie,!O&&!w.isDefaultPrevented()&&(!Ce._default||Ce._default.apply(_e.pop(),_)===!1)&&We(M)&&se&&v(M[Ie])&&!g(M)&&(H=M[se],H&&(M[se]=null),y.event.triggered=Ie,w.isPropagationStopped()&&Ge.addEventListener(Ie,qm),M[Ie](),w.isPropagationStopped()&&Ge.removeEventListener(Ie,qm),y.event.triggered=void 0,H&&(M[se]=H)),w.result}},simulate:function(w,_,M){var O=y.extend(new y.Event,M,{type:w,isSimulated:!0});y.event.trigger(O,null,_)}}),y.fn.extend({trigger:function(w,_){return this.each(function(){y.event.trigger(w,_,this)})},triggerHandler:function(w,_){var M=this[0];if(M)return y.event.trigger(w,_,M,!0)}}),m.focusin||y.each({focus:"focusin",blur:"focusout"},function(w,_){var M=function(O){y.event.simulate(_,O.target,y.event.fix(O))};y.event.special[_]={setup:function(){var O=this.ownerDocument||this.document||this,k=ye.access(O,_);k||O.addEventListener(w,M,!0),ye.access(O,_,(k||0)+1)},teardown:function(){var O=this.ownerDocument||this.document||this,k=ye.access(O,_)-1;k?ye.access(O,_,k):(O.removeEventListener(w,M,!0),ye.remove(O,_))}}});var Mc=t.location,Xm={guid:Date.now()},rf=/\?/;y.parseXML=function(w){var _,M;if(!w||typeof w!="string")return null;try{_=new t.DOMParser().parseFromString(w,"text/xml")}catch{}return M=_&&_.getElementsByTagName("parsererror")[0],(!_||M)&&y.error("Invalid XML: "+(M?y.map(M.childNodes,function(O){return O.textContent}).join(`
`):w)),_};var Y1=/\[\]$/,al=/\r?\n/g,Q1=/^(?:submit|button|image|reset|file)$/i,Ym=/^(?:input|select|textarea|keygen)/i;function nf(w,_,M,O){var k;if(Array.isArray(_))y.each(_,function(U,H){M||Y1.test(w)?O(w,H):nf(w+"["+(typeof H=="object"&&H!=null?U:"")+"]",H,M,O)});else if(!M&&S(_)==="object")for(k in _)nf(w+"["+k+"]",_[k],M,O);else O(w,_)}y.param=function(w,_){var M,O=[],k=function(U,H){var le=v(H)?H():H;O[O.length]=encodeURIComponent(U)+"="+encodeURIComponent(le??"")};if(w==null)return"";if(Array.isArray(w)||w.jquery&&!y.isPlainObject(w))y.each(w,function(){k(this.name,this.value)});else for(M in w)nf(M,w[M],_,k);return O.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var w=y.prop(this,"elements");return w?y.makeArray(w):this}).filter(function(){var w=this.type;return this.name&&!y(this).is(":disabled")&&Ym.test(this.nodeName)&&!Q1.test(w)&&(this.checked||!ce.test(w))}).map(function(w,_){var M=y(this).val();return M==null?null:Array.isArray(M)?y.map(M,function(O){return{name:_.name,value:O.replace(al,`\r
`)}}):{name:_.name,value:M.replace(al,`\r
`)}}).get()}});var K1=/%20/g,Z1=/#.*$/,$1=/([?&])_=[^&]*/,J1=/^(.*?):[ \t]*([^\r\n]*)$/mg,ex=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,tx=/^(?:GET|HEAD)$/,ix=/^\/\//,Qm={},Fu={},Km="*/".concat("*"),ll=p.createElement("a");ll.href=Mc.href;function Zm(w){return function(_,M){typeof _!="string"&&(M=_,_="*");var O,k=0,U=_.toLowerCase().match(K)||[];if(v(M))for(;O=U[k++];)O[0]==="+"?(O=O.slice(1)||"*",(w[O]=w[O]||[]).unshift(M)):(w[O]=w[O]||[]).push(M)}}function $m(w,_,M,O){var k={},U=w===Fu;function H(le){var se;return k[le]=!0,y.each(w[le]||[],function(ve,Ce){var Ge=Ce(_,M,O);if(typeof Ge=="string"&&!U&&!k[Ge])return _.dataTypes.unshift(Ge),H(Ge),!1;if(U)return!(se=Ge)}),se}return H(_.dataTypes[0])||!k["*"]&&H("*")}function sf(w,_){var M,O,k=y.ajaxSettings.flatOptions||{};for(M in _)_[M]!==void 0&&((k[M]?w:O||(O={}))[M]=_[M]);return O&&y.extend(!0,w,O),w}function Pc(w,_,M){for(var O,k,U,H,le=w.contents,se=w.dataTypes;se[0]==="*";)se.shift(),O===void 0&&(O=w.mimeType||_.getResponseHeader("Content-Type"));if(O){for(k in le)if(le[k]&&le[k].test(O)){se.unshift(k);break}}if(se[0]in M)U=se[0];else{for(k in M){if(!se[0]||w.converters[k+" "+se[0]]){U=k;break}H||(H=k)}U=U||H}if(U)return U!==se[0]&&se.unshift(U),M[U]}function rx(w,_,M,O){var k,U,H,le,se,ve={},Ce=w.dataTypes.slice();if(Ce[1])for(H in w.converters)ve[H.toLowerCase()]=w.converters[H];for(U=Ce.shift();U;)if(w.responseFields[U]&&(M[w.responseFields[U]]=_),!se&&O&&w.dataFilter&&(_=w.dataFilter(_,w.dataType)),se=U,U=Ce.shift(),U){if(U==="*")U=se;else if(se!=="*"&&se!==U){if(H=ve[se+" "+U]||ve["* "+U],!H){for(k in ve)if(le=k.split(" "),le[1]===U&&(H=ve[se+" "+le[0]]||ve["* "+le[0]],H)){H===!0?H=ve[k]:ve[k]!==!0&&(U=le[0],Ce.unshift(le[1]));break}}if(H!==!0)if(H&&w.throws)_=H(_);else try{_=H(_)}catch(Ge){return{state:"parsererror",error:H?Ge:"No conversion from "+se+" to "+U}}}}return{state:"success",data:_}}y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mc.href,type:"GET",isLocal:ex.test(Mc.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Km,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(w,_){return _?sf(sf(w,y.ajaxSettings),_):sf(y.ajaxSettings,w)},ajaxPrefilter:Zm(Qm),ajaxTransport:Zm(Fu),ajax:function(w,_){typeof w=="object"&&(_=w,w=void 0),_=_||{};var M,O,k,U,H,le,se,ve,Ce,Ge,_e=y.ajaxSetup({},_),Ie=_e.context||_e,yt=_e.context&&(Ie.nodeType||Ie.jquery)?y(Ie):y.event,Ft=y.Deferred(),mt=y.Callbacks("once memory"),Ji=_e.statusCode||{},Wi={},Ur={},di="canceled",Nt={readyState:0,getResponseHeader:function(ni){var Li;if(se){if(!U)for(U={};Li=J1.exec(k);)U[Li[1].toLowerCase()+" "]=(U[Li[1].toLowerCase()+" "]||[]).concat(Li[2]);Li=U[ni.toLowerCase()+" "]}return Li==null?null:Li.join(", ")},getAllResponseHeaders:function(){return se?k:null},setRequestHeader:function(ni,Li){return se==null&&(ni=Ur[ni.toLowerCase()]=Ur[ni.toLowerCase()]||ni,Wi[ni]=Li),this},overrideMimeType:function(ni){return se==null&&(_e.mimeType=ni),this},statusCode:function(ni){var Li;if(ni)if(se)Nt.always(ni[Nt.status]);else for(Li in ni)Ji[Li]=[Ji[Li],ni[Li]];return this},abort:function(ni){var Li=ni||di;return M&&M.abort(Li),er(0,Li),this}};if(Ft.promise(Nt),_e.url=((w||_e.url||Mc.href)+"").replace(ix,Mc.protocol+"//"),_e.type=_.method||_.type||_e.method||_e.type,_e.dataTypes=(_e.dataType||"*").toLowerCase().match(K)||[""],_e.crossDomain==null){le=p.createElement("a");try{le.href=_e.url,le.href=le.href,_e.crossDomain=ll.protocol+"//"+ll.host!=le.protocol+"//"+le.host}catch{_e.crossDomain=!0}}if(_e.data&&_e.processData&&typeof _e.data!="string"&&(_e.data=y.param(_e.data,_e.traditional)),$m(Qm,_e,_,Nt),se)return Nt;ve=y.event&&_e.global,ve&&y.active++===0&&y.event.trigger("ajaxStart"),_e.type=_e.type.toUpperCase(),_e.hasContent=!tx.test(_e.type),O=_e.url.replace(Z1,""),_e.hasContent?_e.data&&_e.processData&&(_e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(_e.data=_e.data.replace(K1,"+")):(Ge=_e.url.slice(O.length),_e.data&&(_e.processData||typeof _e.data=="string")&&(O+=(rf.test(O)?"&":"?")+_e.data,delete _e.data),_e.cache===!1&&(O=O.replace($1,"$1"),Ge=(rf.test(O)?"&":"?")+"_="+Xm.guid+++Ge),_e.url=O+Ge),_e.ifModified&&(y.lastModified[O]&&Nt.setRequestHeader("If-Modified-Since",y.lastModified[O]),y.etag[O]&&Nt.setRequestHeader("If-None-Match",y.etag[O])),(_e.data&&_e.hasContent&&_e.contentType!==!1||_.contentType)&&Nt.setRequestHeader("Content-Type",_e.contentType),Nt.setRequestHeader("Accept",_e.dataTypes[0]&&_e.accepts[_e.dataTypes[0]]?_e.accepts[_e.dataTypes[0]]+(_e.dataTypes[0]!=="*"?", "+Km+"; q=0.01":""):_e.accepts["*"]);for(Ce in _e.headers)Nt.setRequestHeader(Ce,_e.headers[Ce]);if(_e.beforeSend&&(_e.beforeSend.call(Ie,Nt,_e)===!1||se))return Nt.abort();if(di="abort",mt.add(_e.complete),Nt.done(_e.success),Nt.fail(_e.error),M=$m(Fu,_e,_,Nt),!M)er(-1,"No Transport");else{if(Nt.readyState=1,ve&&yt.trigger("ajaxSend",[Nt,_e]),se)return Nt;_e.async&&_e.timeout>0&&(H=t.setTimeout(function(){Nt.abort("timeout")},_e.timeout));try{se=!1,M.send(Wi,er)}catch(ni){if(se)throw ni;er(-1,ni)}}function er(ni,Li,Oc,ju){var nn,ma,ga,jr,So,Hr=Li;se||(se=!0,H&&t.clearTimeout(H),M=void 0,k=ju||"",Nt.readyState=ni>0?4:0,nn=ni>=200&&ni<300||ni===304,Oc&&(jr=Pc(_e,Nt,Oc)),!nn&&y.inArray("script",_e.dataTypes)>-1&&y.inArray("json",_e.dataTypes)<0&&(_e.converters["text script"]=function(){}),jr=rx(_e,jr,Nt,nn),nn?(_e.ifModified&&(So=Nt.getResponseHeader("Last-Modified"),So&&(y.lastModified[O]=So),So=Nt.getResponseHeader("etag"),So&&(y.etag[O]=So)),ni===204||_e.type==="HEAD"?Hr="nocontent":ni===304?Hr="notmodified":(Hr=jr.state,ma=jr.data,ga=jr.error,nn=!ga)):(ga=Hr,(ni||!Hr)&&(Hr="error",ni<0&&(ni=0))),Nt.status=ni,Nt.statusText=(Li||Hr)+"",nn?Ft.resolveWith(Ie,[ma,Hr,Nt]):Ft.rejectWith(Ie,[Nt,Hr,ga]),Nt.statusCode(Ji),Ji=void 0,ve&&yt.trigger(nn?"ajaxSuccess":"ajaxError",[Nt,_e,nn?ma:ga]),mt.fireWith(Ie,[Nt,Hr]),ve&&(yt.trigger("ajaxComplete",[Nt,_e]),--y.active||y.event.trigger("ajaxStop")))}return Nt},getJSON:function(w,_,M){return y.get(w,_,M,"json")},getScript:function(w,_){return y.get(w,void 0,_,"script")}}),y.each(["get","post"],function(w,_){y[_]=function(M,O,k,U){return v(O)&&(U=U||k,k=O,O=void 0),y.ajax(y.extend({url:M,type:_,dataType:U,data:O,success:k},y.isPlainObject(M)&&M))}}),y.ajaxPrefilter(function(w){var _;for(_ in w.headers)_.toLowerCase()==="content-type"&&(w.contentType=w.headers[_]||"")}),y._evalUrl=function(w,_,M){return y.ajax({url:w,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(O){y.globalEval(O,_,M)}})},y.fn.extend({wrapAll:function(w){var _;return this[0]&&(v(w)&&(w=w.call(this[0])),_=y(w,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&_.insertBefore(this[0]),_.map(function(){for(var M=this;M.firstElementChild;)M=M.firstElementChild;return M}).append(this)),this},wrapInner:function(w){return v(w)?this.each(function(_){y(this).wrapInner(w.call(this,_))}):this.each(function(){var _=y(this),M=_.contents();M.length?M.wrapAll(w):_.append(w)})},wrap:function(w){var _=v(w);return this.each(function(M){y(this).wrapAll(_?w.call(this,M):w)})},unwrap:function(w){return this.parent(w).not("body").each(function(){y(this).replaceWith(this.childNodes)}),this}}),y.expr.pseudos.hidden=function(w){return!y.expr.pseudos.visible(w)},y.expr.pseudos.visible=function(w){return!!(w.offsetWidth||w.offsetHeight||w.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var nx={0:200,1223:204},Dc=y.ajaxSettings.xhr();m.cors=!!Dc&&"withCredentials"in Dc,m.ajax=Dc=!!Dc,y.ajaxTransport(function(w){var _,M;if(m.cors||Dc&&!w.crossDomain)return{send:function(O,k){var U,H=w.xhr();if(H.open(w.type,w.url,w.async,w.username,w.password),w.xhrFields)for(U in w.xhrFields)H[U]=w.xhrFields[U];w.mimeType&&H.overrideMimeType&&H.overrideMimeType(w.mimeType),!w.crossDomain&&!O["X-Requested-With"]&&(O["X-Requested-With"]="XMLHttpRequest");for(U in O)H.setRequestHeader(U,O[U]);_=function(le){return function(){_&&(_=M=H.onload=H.onerror=H.onabort=H.ontimeout=H.onreadystatechange=null,le==="abort"?H.abort():le==="error"?typeof H.status!="number"?k(0,"error"):k(H.status,H.statusText):k(nx[H.status]||H.status,H.statusText,(H.responseType||"text")!=="text"||typeof H.responseText!="string"?{binary:H.response}:{text:H.responseText},H.getAllResponseHeaders()))}},H.onload=_(),M=H.onerror=H.ontimeout=_("error"),H.onabort!==void 0?H.onabort=M:H.onreadystatechange=function(){H.readyState===4&&t.setTimeout(function(){_&&M()})},_=_("abort");try{H.send(w.hasContent&&w.data||null)}catch(le){if(_)throw le}},abort:function(){_&&_()}}}),y.ajaxPrefilter(function(w){w.crossDomain&&(w.contents.script=!1)}),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(w){return y.globalEval(w),w}}}),y.ajaxPrefilter("script",function(w){w.cache===void 0&&(w.cache=!1),w.crossDomain&&(w.type="GET")}),y.ajaxTransport("script",function(w){if(w.crossDomain||w.scriptAttrs){var _,M;return{send:function(O,k){_=y("<script>").attr(w.scriptAttrs||{}).prop({charset:w.scriptCharset,src:w.url}).on("load error",M=function(U){_.remove(),M=null,U&&k(U.type==="error"?404:200,U.type)}),p.head.appendChild(_[0])},abort:function(){M&&M()}}}});var of=[],Uu=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var w=of.pop()||y.expando+"_"+Xm.guid++;return this[w]=!0,w}}),y.ajaxPrefilter("json jsonp",function(w,_,M){var O,k,U,H=w.jsonp!==!1&&(Uu.test(w.url)?"url":typeof w.data=="string"&&(w.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Uu.test(w.data)&&"data");if(H||w.dataTypes[0]==="jsonp")return O=w.jsonpCallback=v(w.jsonpCallback)?w.jsonpCallback():w.jsonpCallback,H?w[H]=w[H].replace(Uu,"$1"+O):w.jsonp!==!1&&(w.url+=(rf.test(w.url)?"&":"?")+w.jsonp+"="+O),w.converters["script json"]=function(){return U||y.error(O+" was not called"),U[0]},w.dataTypes[0]="json",k=t[O],t[O]=function(){U=arguments},M.always(function(){k===void 0?y(t).removeProp(O):t[O]=k,w[O]&&(w.jsonpCallback=_.jsonpCallback,of.push(O)),U&&v(k)&&k(U[0]),U=k=void 0}),"script"}),m.createHTMLDocument=function(){var w=p.implementation.createHTMLDocument("").body;return w.innerHTML="<form></form><form></form>",w.childNodes.length===2}(),y.parseHTML=function(w,_,M){if(typeof w!="string")return[];typeof _=="boolean"&&(M=_,_=!1);var O,k,U;return _||(m.createHTMLDocument?(_=p.implementation.createHTMLDocument(""),O=_.createElement("base"),O.href=p.location.href,_.head.appendChild(O)):_=p),k=G.exec(w),U=!M&&[],k?[_.createElement(k[1])]:(k=vt([w],_,U),U&&U.length&&y(U).remove(),y.merge([],k.childNodes))},y.fn.load=function(w,_,M){var O,k,U,H=this,le=w.indexOf(" ");return le>-1&&(O=bo(w.slice(le)),w=w.slice(0,le)),v(_)?(M=_,_=void 0):_&&typeof _=="object"&&(k="POST"),H.length>0&&y.ajax({url:w,type:k||"GET",dataType:"html",data:_}).done(function(se){U=arguments,H.html(O?y("<div>").append(y.parseHTML(se)).find(O):se)}).always(M&&function(se,ve){H.each(function(){M.apply(this,U||[se.responseText,ve,se])})}),this},y.expr.pseudos.animated=function(w){return y.grep(y.timers,function(_){return w===_.elem}).length},y.offset={setOffset:function(w,_,M){var O,k,U,H,le,se,ve,Ce=y.css(w,"position"),Ge=y(w),_e={};Ce==="static"&&(w.style.position="relative"),le=Ge.offset(),U=y.css(w,"top"),se=y.css(w,"left"),ve=(Ce==="absolute"||Ce==="fixed")&&(U+se).indexOf("auto")>-1,ve?(O=Ge.position(),H=O.top,k=O.left):(H=parseFloat(U)||0,k=parseFloat(se)||0),v(_)&&(_=_.call(w,M,y.extend({},le))),_.top!=null&&(_e.top=_.top-le.top+H),_.left!=null&&(_e.left=_.left-le.left+k),"using"in _?_.using.call(w,_e):Ge.css(_e)}},y.fn.extend({offset:function(w){if(arguments.length)return w===void 0?this:this.each(function(k){y.offset.setOffset(this,w,k)});var _,M,O=this[0];if(O)return O.getClientRects().length?(_=O.getBoundingClientRect(),M=O.ownerDocument.defaultView,{top:_.top+M.pageYOffset,left:_.left+M.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var w,_,M,O=this[0],k={top:0,left:0};if(y.css(O,"position")==="fixed")_=O.getBoundingClientRect();else{for(_=this.offset(),M=O.ownerDocument,w=O.offsetParent||M.documentElement;w&&(w===M.body||w===M.documentElement)&&y.css(w,"position")==="static";)w=w.parentNode;w&&w!==O&&w.nodeType===1&&(k=y(w).offset(),k.top+=y.css(w,"borderTopWidth",!0),k.left+=y.css(w,"borderLeftWidth",!0))}return{top:_.top-k.top-y.css(O,"marginTop",!0),left:_.left-k.left-y.css(O,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var w=this.offsetParent;w&&y.css(w,"position")==="static";)w=w.offsetParent;return w||je})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(w,_){var M=_==="pageYOffset";y.fn[w]=function(O){return ue(this,function(k,U,H){var le;if(g(k)?le=k:k.nodeType===9&&(le=k.defaultView),H===void 0)return le?le[_]:k[U];le?le.scrollTo(M?le.pageXOffset:H,M?H:le.pageYOffset):k[U]=H},w,O,arguments.length)}}),y.each(["top","left"],function(w,_){y.cssHooks[_]=Ci(m.pixelPosition,function(M,O){if(O)return O=qt(M,_),Fe.test(O)?y(M).position()[_]+"px":O})}),y.each({Height:"height",Width:"width"},function(w,_){y.each({padding:"inner"+w,content:_,"":"outer"+w},function(M,O){y.fn[O]=function(k,U){var H=arguments.length&&(M||typeof k!="boolean"),le=M||(k===!0||U===!0?"margin":"border");return ue(this,function(se,ve,Ce){var Ge;return g(se)?O.indexOf("outer")===0?se["inner"+w]:se.document.documentElement["client"+w]:se.nodeType===9?(Ge=se.documentElement,Math.max(se.body["scroll"+w],Ge["scroll"+w],se.body["offset"+w],Ge["offset"+w],Ge["client"+w])):Ce===void 0?y.css(se,ve,le):y.style(se,ve,Ce,le)},_,H?k:void 0,H)}})}),y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(w,_){y.fn[_]=function(M){return this.on(_,M)}}),y.fn.extend({bind:function(w,_,M){return this.on(w,null,_,M)},unbind:function(w,_){return this.off(w,null,_)},delegate:function(w,_,M,O){return this.on(_,w,M,O)},undelegate:function(w,_,M){return arguments.length===1?this.off(w,"**"):this.off(_,w||"**",M)},hover:function(w,_){return this.mouseenter(w).mouseleave(_||w)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(w,_){y.fn[_]=function(M,O){return arguments.length>0?this.on(_,null,M,O):this.trigger(_)}});var Jm=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;y.proxy=function(w,_){var M,O,k;if(typeof _=="string"&&(M=w[_],_=w,w=M),!!v(w))return O=s.call(arguments,2),k=function(){return w.apply(_||this,O.concat(s.call(arguments)))},k.guid=w.guid=w.guid||y.guid++,k},y.holdReady=function(w){w?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=B,y.isFunction=v,y.isWindow=g,y.camelCase=Oe,y.type=S,y.now=Date.now,y.isNumeric=function(w){var _=y.type(w);return(_==="number"||_==="string")&&!isNaN(w-parseFloat(w))},y.trim=function(w){return w==null?"":(w+"").replace(Jm,"$1")};var sx=t.jQuery,ox=t.$;return y.noConflict=function(w){return t.$===y&&(t.$=ox),w&&t.jQuery===y&&(t.jQuery=sx),y},typeof i>"u"&&(t.jQuery=t.$=y),y})}(Ude)),Uy}var jde=pz();const Hde=Wy(jde);(function(e,t){(function(i,r){r(pz())})(no,function(i){function r(v){return v[v.length-1]=="%"}function n(v){var g=v.split(" ");if(g.length!==1)return g.map(function(p){switch(v){case"center":return"50%";case"top":case"left":return"0";case"right":case"bottom":return"100%";default:return p}});switch(v){case"center":return["50%","50%"];case"top":return["50%","0"];case"bottom":return["50%","100%"];case"left":return["0","50%"];case"right":return["100%","50%"];default:return[v,"50%"]}}function s(v,g,p){function x(A,D){var I=c.createShader(A);if(c.shaderSource(I,D),c.compileShader(I),!c.getShaderParameter(I,c.COMPILE_STATUS))throw new Error("compile error: "+c.getShaderInfoLog(I));return I}var b={};if(b.id=c.createProgram(),c.attachShader(b.id,x(c.VERTEX_SHADER,v)),c.attachShader(b.id,x(c.FRAGMENT_SHADER,g)),c.linkProgram(b.id),!c.getProgramParameter(b.id,c.LINK_STATUS))throw new Error("link error: "+c.getProgramInfoLog(b.id));b.uniforms={},b.locations={},c.useProgram(b.id),c.enableVertexAttribArray(0);for(var S,E,y=/uniform (\w+) (\w+)/g,C=v+g;(S=y.exec(C))!=null;)E=S[2],b.locations[E]=c.getUniformLocation(b.id,E);return b}function o(v,g){c.activeTexture(c.TEXTURE0+(g||0)),c.bindTexture(c.TEXTURE_2D,v)}function a(v){var g=/url\(["']?([^"']*)["']?\)/.exec(v);return g==null?null:g[1]}function l(v){return v.match(/^data:/)}var c,d=(i=i&&"default"in i?i.default:i)(window),u=function(){function v(C,A,D){var I="OES_texture_"+C,R=I+"_linear",B=R in p,G=[I];return B&&G.push(R),{type:A,arrayType:D,linearSupport:B,extensions:G}}var g=document.createElement("canvas");if(!(c=g.getContext("webgl")||g.getContext("experimental-webgl")))return null;var p={};if(["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear"].forEach(function(C){var A=c.getExtension(C);A&&(p[C]=A)}),!p.OES_texture_float)return null;var x=[];x.push(v("float",c.FLOAT,Float32Array)),p.OES_texture_half_float&&x.push(v("half_float",p.OES_texture_half_float.HALF_FLOAT_OES,null));var b=c.createTexture(),S=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,S),c.bindTexture(c.TEXTURE_2D,b),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);for(var E=null,y=0;y<x.length;y++)if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,32,32,0,c.RGBA,x[y].type,null),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,b,0),c.checkFramebufferStatus(c.FRAMEBUFFER)===c.FRAMEBUFFER_COMPLETE){E=x[y];break}return E}(),h=function(v,g){try{return new ImageData(v,g)}catch{return document.createElement("canvas").getContext("2d").createImageData(v,g)}}(32,32);i("head").prepend("<style>.jquery-ripples { position: relative; z-index: 0; }</style>");var f=function(v,g){function p(){x.destroyed||(x.step(),requestAnimationFrame(p))}var x=this;this.$el=i(v),this.interactive=g.interactive,this.resolution=g.resolution,this.textureDelta=new Float32Array([1/this.resolution,1/this.resolution]),this.perturbance=g.perturbance,this.dropRadius=g.dropRadius,this.crossOrigin=g.crossOrigin,this.imageUrl=g.imageUrl;var b=document.createElement("canvas");b.width=this.$el.innerWidth(),b.height=this.$el.innerHeight(),this.canvas=b,this.$canvas=i(b),this.$canvas.css({position:"absolute",left:0,top:0,right:0,bottom:0,zIndex:-1}),this.$el.addClass("jquery-ripples").append(b),this.context=c=b.getContext("webgl")||b.getContext("experimental-webgl"),u.extensions.forEach(function(D){c.getExtension(D)}),this.updateSize=this.updateSize.bind(this),i(window).on("resize",this.updateSize),this.textures=[],this.framebuffers=[],this.bufferWriteIndex=0,this.bufferReadIndex=1;for(var S=u.arrayType,E=S?new S(this.resolution*this.resolution*4):null,y=0;y<2;y++){var C=c.createTexture(),A=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,A),c.bindTexture(c.TEXTURE_2D,C),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,u.linearSupport?c.LINEAR:c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,u.linearSupport?c.LINEAR:c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,this.resolution,this.resolution,0,c.RGBA,u.type,E),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,C,0),this.textures.push(C),this.framebuffers.push(A)}this.quad=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,this.quad),c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,1,1,-1,1]),c.STATIC_DRAW),this.initShaders(),this.initTexture(),this.setTransparentTexture(),this.loadImage(),c.clearColor(0,0,0,0),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),this.visible=!0,this.running=!0,this.inited=!0,this.destroyed=!1,this.setupPointerEvents(),requestAnimationFrame(p)};f.DEFAULTS={imageUrl:null,resolution:256,dropRadius:20,perturbance:.03,interactive:!0,crossOrigin:""},f.prototype={setupPointerEvents:function(){function v(){return p.visible&&p.running&&p.interactive}function g(x,b){v()&&p.dropAtPointer(x,p.dropRadius*(b?1.5:1),b?.14:.01)}var p=this;this.$el.on("mousemove.ripples",function(x){g(x)}).on("touchmove.ripples touchstart.ripples",function(x){for(var b=x.originalEvent.changedTouches,S=0;S<b.length;S++)g(b[S])}).on("mousedown.ripples",function(x){g(x,!0)})},loadImage:function(){var v=this;c=this.context;var g=this.imageUrl||a(this.originalCssBackgroundImage)||a(this.$el.css("backgroundImage"));if(g!=this.imageSource)if(this.imageSource=g,this.imageSource){var p=new Image;p.onload=function(){function x(S){return(S&S-1)==0}c=v.context;var b=x(p.width)&&x(p.height)?c.REPEAT:c.CLAMP_TO_EDGE;c.bindTexture(c.TEXTURE_2D,v.backgroundTexture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,p),v.backgroundWidth=p.width,v.backgroundHeight=p.height,v.hideCssBackground()},p.onerror=function(){c=v.context,v.setTransparentTexture()},p.crossOrigin=l(this.imageSource)?null:this.crossOrigin,p.src=this.imageSource}else this.setTransparentTexture()},step:function(){c=this.context,this.visible&&(this.computeTextureBoundaries(),this.running&&this.update(),this.render())},drawQuad:function(){c.bindBuffer(c.ARRAY_BUFFER,this.quad),c.vertexAttribPointer(0,2,c.FLOAT,!1,0,0),c.drawArrays(c.TRIANGLE_FAN,0,4)},render:function(){c.bindFramebuffer(c.FRAMEBUFFER,null),c.viewport(0,0,this.canvas.width,this.canvas.height),c.enable(c.BLEND),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.useProgram(this.renderProgram.id),o(this.backgroundTexture,0),o(this.textures[0],1),c.uniform1f(this.renderProgram.locations.perturbance,this.perturbance),c.uniform2fv(this.renderProgram.locations.topLeft,this.renderProgram.uniforms.topLeft),c.uniform2fv(this.renderProgram.locations.bottomRight,this.renderProgram.uniforms.bottomRight),c.uniform2fv(this.renderProgram.locations.containerRatio,this.renderProgram.uniforms.containerRatio),c.uniform1i(this.renderProgram.locations.samplerBackground,0),c.uniform1i(this.renderProgram.locations.samplerRipples,1),this.drawQuad(),c.disable(c.BLEND)},update:function(){c.viewport(0,0,this.resolution,this.resolution),c.bindFramebuffer(c.FRAMEBUFFER,this.framebuffers[this.bufferWriteIndex]),o(this.textures[this.bufferReadIndex]),c.useProgram(this.updateProgram.id),this.drawQuad(),this.swapBufferIndices()},swapBufferIndices:function(){this.bufferWriteIndex=1-this.bufferWriteIndex,this.bufferReadIndex=1-this.bufferReadIndex},computeTextureBoundaries:function(){var v,g=this.$el.css("background-size"),p=this.$el.css("background-attachment"),x=n(this.$el.css("background-position"));if(p=="fixed"?((v={left:window.pageXOffset,top:window.pageYOffset}).width=d.width(),v.height=d.height()):((v=this.$el.offset()).width=this.$el.innerWidth(),v.height=this.$el.innerHeight()),g=="cover")var b=Math.max(v.width/this.backgroundWidth,v.height/this.backgroundHeight),S=this.backgroundWidth*b,E=this.backgroundHeight*b;else if(g=="contain")var b=Math.min(v.width/this.backgroundWidth,v.height/this.backgroundHeight),S=this.backgroundWidth*b,E=this.backgroundHeight*b;else{var S=(g=g.split(" "))[0]||"",E=g[1]||S;r(S)?S=v.width*parseFloat(S)/100:S!="auto"&&(S=parseFloat(S)),r(E)?E=v.height*parseFloat(E)/100:E!="auto"&&(E=parseFloat(E)),S=="auto"&&E=="auto"?(S=this.backgroundWidth,E=this.backgroundHeight):(S=="auto"&&(S=this.backgroundWidth*(E/this.backgroundHeight)),E=="auto"&&(E=this.backgroundHeight*(S/this.backgroundWidth)))}var y=x[0],C=x[1];y=r(y)?v.left+(v.width-S)*parseFloat(y)/100:v.left+parseFloat(y),C=r(C)?v.top+(v.height-E)*parseFloat(C)/100:v.top+parseFloat(C);var A=this.$el.offset();this.renderProgram.uniforms.topLeft=new Float32Array([(A.left-y)/S,(A.top-C)/E]),this.renderProgram.uniforms.bottomRight=new Float32Array([this.renderProgram.uniforms.topLeft[0]+this.$el.innerWidth()/S,this.renderProgram.uniforms.topLeft[1]+this.$el.innerHeight()/E]);var D=Math.max(this.canvas.width,this.canvas.height);this.renderProgram.uniforms.containerRatio=new Float32Array([this.canvas.width/D,this.canvas.height/D])},initShaders:function(){var v=["attribute vec2 vertex;","varying vec2 coord;","void main() {","coord = vertex * 0.5 + 0.5;","gl_Position = vec4(vertex, 0.0, 1.0);","}"].join(`
`);this.dropProgram=s(v,["precision highp float;","const float PI = 3.141592653589793;","uniform sampler2D texture;","uniform vec2 center;","uniform float radius;","uniform float strength;","varying vec2 coord;","void main() {","vec4 info = texture2D(texture, coord);","float drop = max(0.0, 1.0 - length(center * 0.5 + 0.5 - coord) / radius);","drop = 0.5 - cos(drop * PI) * 0.5;","info.r += drop * strength;","gl_FragColor = info;","}"].join(`
`)),this.updateProgram=s(v,["precision highp float;","uniform sampler2D texture;","uniform vec2 delta;","varying vec2 coord;","void main() {","vec4 info = texture2D(texture, coord);","vec2 dx = vec2(delta.x, 0.0);","vec2 dy = vec2(0.0, delta.y);","float average = (","texture2D(texture, coord - dx).r +","texture2D(texture, coord - dy).r +","texture2D(texture, coord + dx).r +","texture2D(texture, coord + dy).r",") * 0.25;","info.g += (average - info.r) * 2.0;","info.g *= 0.995;","info.r += info.g;","gl_FragColor = info;","}"].join(`
`)),c.uniform2fv(this.updateProgram.locations.delta,this.textureDelta),this.renderProgram=s(["precision highp float;","attribute vec2 vertex;","uniform vec2 topLeft;","uniform vec2 bottomRight;","uniform vec2 containerRatio;","varying vec2 ripplesCoord;","varying vec2 backgroundCoord;","void main() {","backgroundCoord = mix(topLeft, bottomRight, vertex * 0.5 + 0.5);","backgroundCoord.y = 1.0 - backgroundCoord.y;","ripplesCoord = vec2(vertex.x, -vertex.y) * containerRatio * 0.5 + 0.5;","gl_Position = vec4(vertex.x, -vertex.y, 0.0, 1.0);","}"].join(`
`),["precision highp float;","uniform sampler2D samplerBackground;","uniform sampler2D samplerRipples;","uniform vec2 delta;","uniform float perturbance;","varying vec2 ripplesCoord;","varying vec2 backgroundCoord;","void main() {","float height = texture2D(samplerRipples, ripplesCoord).r;","float heightX = texture2D(samplerRipples, vec2(ripplesCoord.x + delta.x, ripplesCoord.y)).r;","float heightY = texture2D(samplerRipples, vec2(ripplesCoord.x, ripplesCoord.y + delta.y)).r;","vec3 dx = vec3(delta.x, heightX - height, 0.0);","vec3 dy = vec3(0.0, heightY - height, delta.y);","vec2 offset = -normalize(cross(dy, dx)).xz;","float specular = pow(max(0.0, dot(offset, normalize(vec2(-0.6, 1.0)))), 4.0);","gl_FragColor = texture2D(samplerBackground, backgroundCoord + offset * perturbance) + specular;","}"].join(`
`)),c.uniform2fv(this.renderProgram.locations.delta,this.textureDelta)},initTexture:function(){this.backgroundTexture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.backgroundTexture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR)},setTransparentTexture:function(){c.bindTexture(c.TEXTURE_2D,this.backgroundTexture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,h)},hideCssBackground:function(){var v=this.$el[0].style.backgroundImage;v!="none"&&(this.originalInlineCss=v,this.originalCssBackgroundImage=this.$el.css("backgroundImage"),this.$el.css("backgroundImage","none"))},restoreCssBackground:function(){this.$el.css("backgroundImage",this.originalInlineCss||"")},dropAtPointer:function(v,g,p){var x=parseInt(this.$el.css("border-left-width"))||0,b=parseInt(this.$el.css("border-top-width"))||0;this.drop(v.pageX-this.$el.offset().left-x,v.pageY-this.$el.offset().top-b,g,p)},drop:function(v,g,p,x){c=this.context;var b=this.$el.innerWidth(),S=this.$el.innerHeight(),E=Math.max(b,S);p/=E;var y=new Float32Array([(2*v-b)/E,(S-2*g)/E]);c.viewport(0,0,this.resolution,this.resolution),c.bindFramebuffer(c.FRAMEBUFFER,this.framebuffers[this.bufferWriteIndex]),o(this.textures[this.bufferReadIndex]),c.useProgram(this.dropProgram.id),c.uniform2fv(this.dropProgram.locations.center,y),c.uniform1f(this.dropProgram.locations.radius,p),c.uniform1f(this.dropProgram.locations.strength,x),this.drawQuad(),this.swapBufferIndices()},updateSize:function(){var v=this.$el.innerWidth(),g=this.$el.innerHeight();v==this.canvas.width&&g==this.canvas.height||(this.canvas.width=v,this.canvas.height=g)},destroy:function(){this.$el.off(".ripples").removeClass("jquery-ripples").removeData("ripples"),c=null,i(window).off("resize",this.updateSize),this.$canvas.remove(),this.restoreCssBackground(),this.destroyed=!0},show:function(){this.visible=!0,this.$canvas.show(),this.hideCssBackground()},hide:function(){this.visible=!1,this.$canvas.hide(),this.restoreCssBackground()},pause:function(){this.running=!1},play:function(){this.running=!0},set:function(v,g){switch(v){case"dropRadius":case"perturbance":case"interactive":case"crossOrigin":this[v]=g;break;case"imageUrl":this.imageUrl=g,this.loadImage()}}};var m=i.fn.ripples;i.fn.ripples=function(v){if(!u)throw new Error("Your browser does not support WebGL, the OES_texture_float extension or rendering to floating point textures.");var g=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var p=i(this),x=p.data("ripples"),b=i.extend({},f.DEFAULTS,p.data(),typeof v=="object"&&v);(x||typeof v!="string")&&(x?typeof v=="string"&&f.prototype[v].apply(x,g):p.data("ripples",x=new f(this,b)))})},i.fn.ripples.Constructor=f,i.fn.ripples.noConflict=function(){return i.fn.ripples=m,this}})})();const Gde=()=>{const{coders:e}=te.useContext(oa),t=te.useRef(null);return te.useEffect(()=>{Hde(t.current).ripples({resolution:512,dropRadius:50,perturbance:.1})}),pe("div",{className:"gallery",ref:t,children:[L("h2",{className:"codersTitle",children:"no show"}),L("div",{className:"swiperContenedor",children:L(hz,{effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",loop:!0,coverflowEffect:{rotate:36,stretch:55,depth:300,modifier:1,slideShadows:!0},autoplay:{delay:500,disableOnInteraction:!1},pagination:!0,modules:[Dde,Cde,Tde],className:"mySwiper",children:e.map((i,r)=>L(fz,{className:"cardContainer",children:L("img",{src:i.url,alt:`pic${i.id}`})},r))})})]})},Vde=()=>pe("footer",{children:[pe("div",{className:"footerLogo",children:[L("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAArlBMVEUAn+P///81MTwAmuIAnOIAmOEAoOQAluEAmeEApewAoug2KzM3KS83Jio2KjAkZ49qvevs+P00LTUAouQ3JCa33vX0/P7h8vsedqW03PWl1PKNyu/O6Pg4IiN4wu3c7/oMk9FMsehhuOpwv+yEx+4AkN+d0PEmYIUuSmMEmNgqV3cYgLQVh7/P6fi33fVOsugrqOUjb5wxOkkwQVUsTmg4Hx05GxUzNEEwPlA5Fgi7bZbqAAAJVUlEQVR4nO2YC3PaOBCAMZZsbDDvN4YAoRCCc4Ekfdz//2OnXa1kmabXacxcfDP7zXQaS1jal3ZXrtUYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmGYWyN84JP3Fzdd0pdyMBDSbHAeAbfd4k+kmcP2+xvu7w/mPQ8wKuLD6NOcOMD97xo3W1AuPM1YaxhO4GEW3myDP0RsUZrZzSws96Sg94RWC0efq2BNaIvvbhWlYmMU9OZgNbn7LxUUUsprTXw0sbe5lYbyyWq4EiZEfqOgEutGITSf9MbdK1UknhLvdolGa7eQoYA1xT5N0/lvPOh5vfktVPQxwW2tLrpKSBSoJ/PfCeFLX1yrDKM/DdOgO7LSidPqJK4dhMu772g3/1VeRTpwA7tzV5WJ2f0ZR1OroS/UeDqadxuu4FLcq9F0tn/Ow1zIwf18Nkpni0GeiMUc19tKqvBicB4Mzo4U8nk/Ky5Pgjk2/iDyTi0zGZEwecbTSYH2E2JmxxZ2T1Eb2dGxqZz+YmIHR/anjVQPKPCZDGgcJBdj887ONgQrXL18LoJwnIS0lcilQ+612E4idOQW58JvdZlr3LljEyOu7NkxiBZxrw1oHNpz3plZFcM7WzzLcHZcJa8U9M7vqWL0luPC6AJHKRwNxrOiaAj61UrPBsXlbYWCDZ5Ktxyim4vsF6XzzCGQveLoHQ6LRWEwDXOL/bQC9Q8AiixTx4DhXfEVzyrl3aLlEHu7k8novd12pSXQQUZ50BtttyNHbIpHNdrdT7yxNbwavpvN5yT2pnZlDRRZOg0q2hg2W+yoZlLlQrOUbznQmtIVoydV4tae0F1xQ2+8V5VM95I68eogHX8RinB7NpKI511DVQpfd2Ukra8T1aLbvcd3hWNAWj6F5WknkctTvuUIxzYf0FYQsmKnJcLldWnEpEaSusOrEBK8W8dEDZT2d46GUnsUxrUVHAPSOtgH7HI302blFYQ154XMIXJNdBtAmf1LGIZfnvLosmkpdQsfXAIHz9vudrB3lggpOowRdo6v9PJ4tsXe9SEKUSupYvAXrBjQQy4GuVNH1Mq7Ql+phFM6R4ERxD+PCilWH3EykjGEa0AqHNi7+G5k6wM62ZZSUR/yjXOwqY0hd2J6FD9lWIqiQm2hc3jVMZgldDIxRckkqYGzPB4IWtEkPjzKi3Iagjx7U8AXuRiB4ytqRxzMpiJvaSiXXlUQW1i03isjrA7aMWpPhQNd5Zx4eOvc89yG+UMarhwfUojc27sN+Yoye88y3pj35SYPSa02qZuO0p67hFv+asXvB7Q8irNxrEJmToMyCsKp8ezBptABMQrXX8rsXyQSqn/GPnAPCc/UUkJipAyShg0/XDl6y+L3maIBtU2kNbg5BBi+i9Jt6cCzx8NoqJ58TEDe83WuU1eATW7Tvb5PyK7VkDIIBEUhG/vaSFZD14BOxIapM45mGZdWEK25KkTpSHkpdK+/OqS8s/RluBnZxliJM175siEpBMFOtMQqVL59ypeg6LNf1QrfDyiprUIZUpYiG0rvFh/i3LbBZokJ5UgqX3T8PXW2UBh9k6SCPklNUwkON43taD5LnSWEG7E1mzIpI1Mim5iF6CKHZimXSFHOkd3J7f9JJb2VPysOa7turn6MIeg02O4ShYi1Nuv91JRr6C6OZimXSHGvidtpXJV2W76uREBdrsvC2e3OrpZw+weg+P1AFquRUQrNYl/5uIYetrzmafHuXuLsdimp3lUWTD82DbLovbMEpUuTNciS9nO68xnOWQhyQflEg+4Zz20s+Gdjz95olX9dEv6edOzNztbjjZ1x2GSRf6WRC6NjL91RL9eYAPamJ+576rGX3xrCFZ38u51ZSMxBkvLXXzp6+R1MSLnpdtVVqPilDL4ubbvd51phWEihftx9FoWPrfqn241wvsE2ZOHLmsDKKq7f2TgL6UAun2johBTuYOaGc8274+KXo38qSfEd3ciOb/I9OL8AVwlsZNPyeQaAPgz+D2LFTVa8CSIM5W0NH6wvl8upQirenPgwbA8772oIzi3Z4FeB6KFfb73rwzjrdA7H/7+KUbteT9bv6RE/Js2v7878rwiOw3p9aNSI3cCMXpXu1ofBVczic1yrfizHWatef4ngzyAKsumlM11HeipKlO5xBFoodQpTtTg6qoFLFkXB6XKZHiucqeJLu95/RC3Wj8Ok3W62lwet8FppWH99VVkoOB6SpAVTb1qVePq6bLXb7eTHYaj+by070b9t8qnEj/16+4LRNlXxiiSYWuNTCx5aajLIvtJU+01r/42e60393/BSWS/CYaNUGiTNVpKoxFNfwmN8Aen7Q5iMvsMUaLyE1IPu7ScJqqfHh5U9ivHQptL48Hhar6dK3iSLtXfrD49vkGviy9spW5/ApVOYUj/qP6yPB6Xi9+yYmVeqCHojMakFMU6NXtQfWaTzZIxTENGooVKteYliePklCmD8/ZJaAeCw9V+1htHx1Ol0pt/BIRCKy7xYxLXTRU09GOV1lxBoDf+laagAcUd544DCxY/LVrPZ1Ocw0N5tR/QrlTn1FEY0dQkYrCr1RM1fNQ0VwAZeLXpTp6mZtPqQPSLy7gNqGB2UsirVQGJZgnePOrTRPJ1YNw0VdaFKkpQkgmwJlSHLlMrgF8e7wVHVivYhy9QINgcmtKM3jE5sGn5UtSBGcNjWsan8URwd0C9UKKdRQIXxh5qaUnMAvwXlo74OVts0VBHQsHlZa5fVfxyjmska4CBVEdTx0qVfNWymOdDK2+iMD6ZpqCJQEurNb1kQn6BHS4ZJn7IGVARV1f9WHc16iVPDvlNHVGjHmXoFgvW1wuVQBVxCuTN6oQas3v+q21Ts1OB8YRLS6NvUEl+JIWohWMGV1b1HRqpGtKAoBLU3aKZbyfJ1qqvHSTXVQzxfUEhw6gVOaLD+e7jsq1R6+Dr8donxEZuG2KU6Gkfr6RRDLFAVfzo9ZbWIAk6V+elUlzmcmmZHPRU4/2Lnz2nHIauOioH91KYvuUFhJnCmfuOXqK66AsOysgfz4wRwPC3L6h7MD6NSbj/ne1U7gDIEkctnS8MwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDFNR/gHXcqZOKgW9UQAAAABJRU5ErkJggg==",alt:""}),L("p",{children:"Proyecto Final Desafio Latam"})]}),L("p",{children:" Full stack JavaScript g12-2023"})]});function Bb(){const{hamburgerDisplay:e}=te.useContext(oa);return pe("div",{className:"homeContainer",children:[L(oue,{}),e===!1&&L("div",{className:"subtitle",children:L(sue,{options:{strings:["Coders destacados!","Podrás encontrar desarrolladores Front-end, Back-end y Full-stack...","Ve al navbar para comenzar a buscar a nuestros profesionales!"],autoStart:!0,loop:!0}})}),pe("div",{className:"main",children:[L("div",{className:"spline",children:L(Q4,{scene:"https://prod.spline.design/cWEXYurkBF7s1djN/scene.splinecode",className:"splineBalls"})}),L(Gde,{})]}),L("div",{className:"homeFooter",children:L(Vde,{})})]})}function Wde(e){return ua({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]})(e)}function qde(e){return ua({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM349.3 793.7H230.6V411.9h118.7v381.8zm-59.3-434a68.8 68.8 0 1 1 68.8-68.8c-.1 38-30.9 68.8-68.8 68.8zm503.7 434H675.1V608c0-44.3-.8-101.2-61.7-101.2-61.7 0-71.2 48.2-71.2 98v188.9H423.7V411.9h113.8v52.2h1.6c15.8-30 54.5-61.7 112.3-61.7 120.2 0 142.3 79.1 142.3 181.9v209.4z"}}]})(e)}function Xde(e){return ua({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm215.3 337.7c.3 4.7.3 9.6.3 14.4 0 146.8-111.8 315.9-316.1 315.9-63 0-121.4-18.3-170.6-49.8 9 1 17.6 1.4 26.8 1.4 52 0 99.8-17.6 137.9-47.4-48.8-1-89.8-33-103.8-77 17.1 2.5 32.5 2.5 50.1-2a111 111 0 0 1-88.9-109v-1.4c14.7 8.3 32 13.4 50.1 14.1a111.13 111.13 0 0 1-49.5-92.4c0-20.7 5.4-39.6 15.1-56a315.28 315.28 0 0 0 229 116.1C492 353.1 548.4 292 616.2 292c32 0 60.8 13.4 81.1 35 25.1-4.7 49.1-14.1 70.5-26.7-8.3 25.7-25.7 47.4-48.8 61.1 22.4-2.4 44-8.6 64-17.3-15.1 22.2-34 41.9-55.7 57.6z"}}]})(e)}function Yde(e){return ua({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0 0 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]})(e)}const Qde=()=>{const{filtradorDisplay:e,setFiltradorDisplay:t,setFreeCoders:i,coders:r,freeCoders:n}=te.useContext(oa),[s,o]=te.useState(!1),[a,l]=te.useState(!1),[c,d]=te.useState(!1),u=()=>t(!e),h=g=>g,f=g=>{const p=r.filter(x=>x.area.includes(g.target.dataset.value));i(p)},m=g=>{const p=n.filter(x=>x.nombre===g.target.textContent);i(p)},v=g=>{const p=r.filter(x=>x.lenguajes.includes(g.target.dataset.value));i(p)};return pe("div",{className:"filtrador",children:[pe("button",{onClick:u,className:e?"filtradorHamburger filtradorCruz":"filtradorHamburger",children:[L("div",{}),L("div",{}),L("div",{})]}),L("div",{className:"filtradorLogo",children:L(Or,{to:"/home",children:L("img",{src:KA,alt:"freeCoders"})})}),pe("div",{className:e?"menuBusqueda busquedaResponsive":"menuBusqueda",children:[pe("div",{className:"inputBoxSearch inputAreaName",children:[L("input",{type:"text",name:"area",className:"boxSearchInput",onFocus:()=>o(!0),onBlur:()=>setTimeout(()=>o(!1),220)}),L("p",{className:"filtroName areaFiltro",children:"Area"}),pe("div",{className:h(s)?"hiddenBox filterCoderArea hidden":"hiddenBox filterCoderArea",children:[L("p",{onClick:f,className:"textoArea","data-value":"front",children:"Front-End"}),L("p",{onClick:f,className:"textoArea","data-value":"back",children:"Back-End"}),L("p",{onClick:f,className:"textoArea","data-value":"full",children:"Full-Stack"})]})]}),pe("div",{className:"inputBoxSearch inputCoderName",children:[L("input",{type:"text",name:"Coder",className:"boxSearchInput",onFocus:()=>l(!0),onBlur:()=>setTimeout(()=>l(!1),220)}),L("p",{className:"filtroName nombreFiltro",children:"Nombre"}),L("div",{className:h(a)?"hiddenBox filterCoderName hidden":"hiddenBox filterCoderName",children:n.map((g,p)=>L("p",{className:"codersName",onClick:m,children:g.nombre},p))})]}),pe("div",{className:"inputBoxSearch inputLanguageName",children:[L("input",{type:"text",name:"Language",className:"boxSearchInput",onFocus:()=>d(!0),onBlur:()=>setTimeout(()=>d(!1),220)}),L("p",{className:"filtroName lenguajeFiltro",children:"Lenguaje"}),pe("div",{className:h(c)?"hiddenBox filterCoderLanguage hidden":"hiddenBox filterCoderLanguage",children:[L("p",{"data-value":"java",onClick:v,children:"Java"}),L("p",{"data-value":"python",onClick:v,children:"Python"}),L("p",{"data-value":"javascript",onClick:v,children:"JavaScript"})]})]})]}),L("div",{className:"volver",children:pe(Or,{to:"/contactarfreecoder",children:[L(Yde,{className:"volverIcon"}),L("div",{className:"volverButton",children:"Contacto"})]})})]})},Kde=()=>{const{freeCoders:e,programadores:t}=te.useContext(oa);return console.log(t),pe($a,{children:[L(Qde,{}),L("div",{className:"codersWrap",children:L("div",{className:"coderContainer",children:e.map((i,r)=>L("div",{className:"coderBoxCards",children:L("div",{className:"single-box",children:pe("div",{className:"coderBox-content",children:[L("img",{className:"sides side-1",src:i.url,alt:i.id}),L("div",{className:"sides side-2",children:pe("div",{className:"contentCoders",children:[L("h2",{children:`${i.nombre}`}),L("p",{children:i.descripcion}),pe("div",{className:"socials",children:[L(Wde,{className:"icons"}),L(qde,{className:"icons"}),L(Xde,{className:"icons"})]})]})})]})})},r))})})]})};var jy={},Zde={get exports(){return jy},set exports(e){jy=e}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function i(){for(var r=[],n=0;n<arguments.length;n++){var s=arguments[n];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=i.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)t.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i})()})(Zde);const Ei=jy;function hE(){return hE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},hE.apply(this,arguments)}function mz(e,t){if(e==null)return{};var i={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function tL(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function $de(e){var t=Jde(e,"string");return typeof t=="symbol"?t:String(t)}function Jde(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ehe(e,t,i){var r=te.useRef(e!==void 0),n=te.useState(t),s=n[0],o=n[1],a=e!==void 0,l=r.current;return r.current=a,!a&&l&&s!==t&&o(t),[a?e:s,te.useCallback(function(c){for(var d=arguments.length,u=new Array(d>1?d-1:0),h=1;h<d;h++)u[h-1]=arguments[h];i&&i.apply(void 0,[c].concat(u)),o(c)},[i])]}function gz(e,t){return Object.keys(t).reduce(function(i,r){var n,s=i,o=s[tL(r)],a=s[r],l=mz(s,[tL(r),r].map($de)),c=t[r],d=ehe(a,o,e[c]),u=d[0],h=d[1];return hE({},l,(n={},n[r]=u,n[c]=h,n))},e)}function fE(e,t){return fE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},fE(e,t)}function the(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,fE(e,t)}const ihe=["xxl","xl","lg","md","sm","xs"],rhe="xs",eC=te.createContext({prefixes:{},breakpoints:ihe,minBreakpoint:rhe});function Vi(e,t){const{prefixes:i}=te.useContext(eC);return e||i[t]||t}function vz(){const{breakpoints:e}=te.useContext(eC);return e}function yz(){const{minBreakpoint:e}=te.useContext(eC);return e}function nhe(e){return e&&e.ownerDocument||document}function she(e){var t=nhe(e);return t&&t.defaultView||window}function ohe(e,t){return she(e).getComputedStyle(e,t)}var ahe=/([A-Z])/g;function lhe(e){return e.replace(ahe,"-$1").toLowerCase()}var che=/^ms-/;function jv(e){return lhe(e).replace(che,"-ms-")}var uhe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function dhe(e){return!!(e&&uhe.test(e))}function xz(e,t){var i="",r="";if(typeof t=="string")return e.style.getPropertyValue(jv(t))||ohe(e).getPropertyValue(jv(t));Object.keys(t).forEach(function(n){var s=t[n];!s&&s!==0?e.style.removeProperty(jv(n)):dhe(n)?r+=n+"("+s+") ":i+=jv(n)+": "+s+";"}),r&&(i+="transform: "+r+";"),e.style.cssText+=";"+i}var Rs={},hhe={get exports(){return Rs},set exports(e){Rs=e}},fhe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",phe=fhe,mhe=phe;function wz(){}function bz(){}bz.resetWarningCache=wz;var ghe=function(){function e(r,n,s,o,a,l){if(l!==mhe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:bz,resetWarningCache:wz};return i.PropTypes=i,i};hhe.exports=ghe();const iL={disabled:!1},Sz=ii.createContext(null);var vhe=function(t){return t.scrollTop},dp="unmounted",Xc="exited",Ll="entering",Jc="entered",pE="exiting",rl=function(e){the(t,e);function t(r,n){var s;s=e.call(this,r,n)||this;var o=n,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Xc,s.appearStatus=Ll):l=Jc:r.unmountOnExit||r.mountOnEnter?l=dp:l=Xc,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(n,s){var o=n.in;return o&&s.status===dp?{status:Xc}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(n){var s=null;if(n!==this.props){var o=this.state.status;this.props.in?o!==Ll&&o!==Jc&&(s=Ll):(o===Ll||o===Jc)&&(s=pE)}this.updateStatus(!1,s)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var n=this.props.timeout,s,o,a;return s=o=a=n,n!=null&&typeof n!="number"&&(s=n.exit,o=n.enter,a=n.appear!==void 0?n.appear:o),{exit:s,enter:o,appear:a}},i.updateStatus=function(n,s){if(n===void 0&&(n=!1),s!==null)if(this.cancelNextCallback(),s===Ll){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:tp.findDOMNode(this);o&&vhe(o)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Xc&&this.setState({status:dp})},i.performEnter=function(n){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:n,l=this.props.nodeRef?[a]:[tp.findDOMNode(this),a],c=l[0],d=l[1],u=this.getTimeouts(),h=a?u.appear:u.enter;if(!n&&!o||iL.disabled){this.safeSetState({status:Jc},function(){s.props.onEntered(c)});return}this.props.onEnter(c,d),this.safeSetState({status:Ll},function(){s.props.onEntering(c,d),s.onTransitionEnd(h,function(){s.safeSetState({status:Jc},function(){s.props.onEntered(c,d)})})})},i.performExit=function(){var n=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:tp.findDOMNode(this);if(!s||iL.disabled){this.safeSetState({status:Xc},function(){n.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:pE},function(){n.props.onExiting(a),n.onTransitionEnd(o.exit,function(){n.safeSetState({status:Xc},function(){n.props.onExited(a)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(n,s){s=this.setNextCallback(s),this.setState(n,s)},i.setNextCallback=function(n){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,n(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},i.onTransitionEnd=function(n,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:tp.findDOMNode(this),a=n==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],d=l[1];this.props.addEndListener(c,d)}n!=null&&setTimeout(this.nextCallback,n)},i.render=function(){var n=this.state.status;if(n===dp)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=mz(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ii.createElement(Sz.Provider,{value:null},typeof o=="function"?o(n,a):ii.cloneElement(ii.Children.only(o),a))},t}(ii.Component);rl.contextType=Sz;rl.propTypes={};function wd(){}rl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:wd,onEntering:wd,onEntered:wd,onExit:wd,onExiting:wd,onExited:wd};rl.UNMOUNTED=dp;rl.EXITED=Xc;rl.ENTERING=Ll;rl.ENTERED=Jc;rl.EXITING=pE;const yhe=!!(typeof window<"u"&&window.document&&window.document.createElement);var mE=!1,gE=!1;try{var kb={get passive(){return mE=!0},get once(){return gE=mE=!0}};yhe&&(window.addEventListener("test",kb,kb),window.removeEventListener("test",kb,!0))}catch{}function xhe(e,t,i,r){if(r&&typeof r!="boolean"&&!gE){var n=r.once,s=r.capture,o=i;!gE&&n&&(o=i.__once||function a(l){this.removeEventListener(t,a,s),i.call(this,l)},i.__once=o),e.addEventListener(t,o,mE?r:s)}e.addEventListener(t,i,r)}function whe(e,t,i,r){var n=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,i,n),i.__once&&e.removeEventListener(t,i.__once,n)}function _z(e,t,i,r){return xhe(e,t,i,r),function(){whe(e,t,i,r)}}function bhe(e,t,i,r){if(i===void 0&&(i=!1),r===void 0&&(r=!0),e){var n=document.createEvent("HTMLEvents");n.initEvent(t,i,r),e.dispatchEvent(n)}}function She(e){var t=xz(e,"transitionDuration")||"",i=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*i}function _he(e,t,i){i===void 0&&(i=5);var r=!1,n=setTimeout(function(){r||bhe(e,"transitionend",!0)},t+i),s=_z(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(n),s()}}function Ehe(e,t,i,r){i==null&&(i=She(e)||0);var n=_he(e,i,r),s=_z(e,"transitionend",t);return function(){n(),s()}}function rL(e,t){const i=xz(e,t)||"",r=i.indexOf("ms")===-1?1e3:1;return parseFloat(i)*r}function Ahe(e,t){const i=rL(e,"transitionDuration"),r=rL(e,"transitionDelay"),n=Ehe(e,s=>{s.target===e&&(n(),t(s))},i+r)}function Che(e){e.offsetHeight}var nL=function(t){return!t||typeof t=="function"?t:function(i){t.current=i}};function The(e,t){var i=nL(e),r=nL(t);return function(n){i&&i(n),r&&r(n)}}function Ez(e,t){return te.useMemo(function(){return The(e,t)},[e,t])}function Mhe(e){return e&&"setState"in e?tp.findDOMNode(e):e??null}const Phe=ii.forwardRef(({onEnter:e,onEntering:t,onEntered:i,onExit:r,onExiting:n,onExited:s,addEndListener:o,children:a,childRef:l,...c},d)=>{const u=te.useRef(null),h=Ez(u,l),f=y=>{h(Mhe(y))},m=y=>C=>{y&&u.current&&y(u.current,C)},v=te.useCallback(m(e),[e]),g=te.useCallback(m(t),[t]),p=te.useCallback(m(i),[i]),x=te.useCallback(m(r),[r]),b=te.useCallback(m(n),[n]),S=te.useCallback(m(s),[s]),E=te.useCallback(m(o),[o]);return L(rl,{ref:d,...c,onEnter:v,onEntered:p,onEntering:g,onExit:x,onExited:S,onExiting:b,addEndListener:E,nodeRef:u,children:typeof a=="function"?(y,C)=>a(y,{...C,ref:f}):ii.cloneElement(a,{ref:f})})}),Dhe=Phe;function Ohe(e){var t=te.useRef(e);return te.useEffect(function(){t.current=e},[e]),t}function H1(e){var t=Ohe(e);return te.useCallback(function(){return t.current&&t.current.apply(t,arguments)},[t])}const Lhe=["as","disabled"];function Ihe(e,t){if(e==null)return{};var i={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function Rhe(e){return!e||e.trim()==="#"}function tC({tagName:e,disabled:t,href:i,target:r,rel:n,role:s,onClick:o,tabIndex:a=0,type:l}){e||(i!=null||r!=null||n!=null?e="a":e="button");const c={tagName:e};if(e==="button")return[{type:l||"button",disabled:t},c];const d=h=>{if((t||e==="a"&&Rhe(i))&&h.preventDefault(),t){h.stopPropagation();return}o==null||o(h)},u=h=>{h.key===" "&&(h.preventDefault(),d(h))};return e==="a"&&(i||(i="#"),t&&(i=void 0)),[{role:s??"button",disabled:void 0,tabIndex:t?void 0:a,href:i,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?n:void 0,onClick:d,onKeyDown:u},c]}const Az=te.forwardRef((e,t)=>{let{as:i,disabled:r}=e,n=Ihe(e,Lhe);const[s,{tagName:o}]=tC(Object.assign({tagName:i,disabled:r},n));return L(o,Object.assign({},n,s,{ref:t}))});Az.displayName="Button";const Nhe=["onKeyDown"];function Bhe(e,t){if(e==null)return{};var i={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function khe(e){return!e||e.trim()==="#"}const Cz=te.forwardRef((e,t)=>{let{onKeyDown:i}=e,r=Bhe(e,Nhe);const[n]=tC(Object.assign({tagName:"a"},r)),s=H1(o=>{n.onKeyDown(o),i==null||i(o)});return khe(r.href)||r.role==="button"?L("a",Object.assign({ref:t},r,n,{onKeyDown:s})):L("a",Object.assign({ref:t},r,{onKeyDown:i}))});Cz.displayName="Anchor";const zhe=Cz,Fhe={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Uhe={[Ll]:"show",[Jc]:"show"},iC=te.forwardRef(({className:e,children:t,transitionClasses:i={},...r},n)=>{const s=te.useCallback((o,a)=>{Che(o),r.onEnter==null||r.onEnter(o,a)},[r]);return L(Dhe,{ref:n,addEndListener:Ahe,...r,onEnter:s,childRef:t.ref,children:(o,a)=>te.cloneElement(t,{...a,className:Ei("fade",e,t.props.className,Uhe[o],i[o])})})});iC.defaultProps=Fhe;iC.displayName="Fade";const Tz=iC,jhe={"aria-label":Rs.string,onClick:Rs.func,variant:Rs.oneOf(["white"])},Hhe={"aria-label":"Close"},G1=te.forwardRef(({className:e,variant:t,...i},r)=>L("button",{ref:r,type:"button",className:Ei("btn-close",t&&`btn-close-${t}`,e),...i}));G1.displayName="CloseButton";G1.propTypes=jhe;G1.defaultProps=Hhe;const Ghe=G1,rC=e=>te.forwardRef((t,i)=>L("div",{...t,ref:i,className:Ei(t.className,e)}));var Vhe=/-(.)/g;function Whe(e){return e.replace(Vhe,function(t,i){return i.toUpperCase()})}const qhe=e=>e[0].toUpperCase()+Whe(e).slice(1);function da(e,{displayName:t=qhe(e),Component:i,defaultProps:r}={}){const n=te.forwardRef(({className:s,bsPrefix:o,as:a=i||"div",...l},c)=>{const d=Vi(o,e);return L(a,{ref:c,className:Ei(s,d),...l})});return n.defaultProps=r,n.displayName=t,n}const Mz=rC("h4");Mz.displayName="DivStyledAsH4";const Xhe=da("alert-heading",{Component:Mz}),Yhe=da("alert-link",{Component:zhe}),Qhe={variant:"primary",show:!0,transition:Tz,closeLabel:"Close alert"},nC=te.forwardRef((e,t)=>{const{bsPrefix:i,show:r,closeLabel:n,closeVariant:s,className:o,children:a,variant:l,onClose:c,dismissible:d,transition:u,...h}=gz(e,{show:"onClose"}),f=Vi(i,"alert"),m=H1(p=>{c&&c(!1,p)}),v=u===!0?Tz:u,g=pe("div",{role:"alert",...v?void 0:h,ref:t,className:Ei(o,f,l&&`${f}-${l}`,d&&`${f}-dismissible`),children:[d&&L(Ghe,{onClick:m,"aria-label":n,variant:s}),a]});return v?L(v,{unmountOnExit:!0,...h,ref:void 0,in:r,children:g}):r?g:null});nC.displayName="Alert";nC.defaultProps=Qhe;const sL=Object.assign(nC,{Link:Yhe,Heading:Xhe}),Khe={variant:"primary",active:!1,disabled:!1},sC=te.forwardRef(({as:e,bsPrefix:t,variant:i,size:r,active:n,className:s,...o},a)=>{const l=Vi(t,"btn"),[c,{tagName:d}]=tC({tagName:e,...o});return L(d,{...c,...o,ref:a,className:Ei(s,l,n&&"active",i&&`${l}-${i}`,r&&`${l}-${r}`,o.href&&o.disabled&&"disabled")})});sC.displayName="Button";sC.defaultProps=Khe;const ar=sC,Pz=te.forwardRef(({bsPrefix:e,className:t,variant:i,as:r="img",...n},s)=>{const o=Vi(e,"card-img");return L(r,{ref:s,className:Ei(i?`${o}-${i}`:o,t),...n})});Pz.displayName="CardImg";const Zhe=Pz,Dz=te.createContext(null);Dz.displayName="CardHeaderContext";const $he=Dz,Oz=te.forwardRef(({bsPrefix:e,className:t,as:i="div",...r},n)=>{const s=Vi(e,"card-header"),o=te.useMemo(()=>({cardHeaderBsPrefix:s}),[s]);return L($he.Provider,{value:o,children:L(i,{ref:n,...r,className:Ei(t,s)})})});Oz.displayName="CardHeader";const Jhe=Oz,efe=rC("h5"),tfe=rC("h6"),Lz=da("card-body"),ife=da("card-title",{Component:efe}),rfe=da("card-subtitle",{Component:tfe}),nfe=da("card-link",{Component:"a"}),sfe=da("card-text",{Component:"p"}),ofe=da("card-footer"),afe=da("card-img-overlay"),lfe={body:!1},oC=te.forwardRef(({bsPrefix:e,className:t,bg:i,text:r,border:n,body:s,children:o,as:a="div",...l},c)=>{const d=Vi(e,"card");return L(a,{ref:c,...l,className:Ei(t,d,i&&`bg-${i}`,r&&`text-${r}`,n&&`border-${n}`),children:s?L(Lz,{children:o}):o})});oC.displayName="Card";oC.defaultProps=lfe;const li=Object.assign(oC,{Img:Zhe,Title:ife,Subtitle:rfe,Body:Lz,Link:nfe,Text:sfe,Header:Jhe,Footer:ofe,ImgOverlay:afe});function cfe(e,t){return te.Children.toArray(e).some(i=>te.isValidElement(i)&&i.type===t)}function ufe({as:e,bsPrefix:t,className:i,...r}){t=Vi(t,"col");const n=vz(),s=yz(),o=[],a=[];return n.forEach(l=>{const c=r[l];delete r[l];let d,u,h;typeof c=="object"&&c!=null?{span:d,offset:u,order:h}=c:d=c;const f=l!==s?`-${l}`:"";d&&o.push(d===!0?`${t}${f}`:`${t}${f}-${d}`),h!=null&&a.push(`order${f}-${h}`),u!=null&&a.push(`offset${f}-${u}`)}),[{...r,className:Ei(i,...o,...a)},{as:e,bsPrefix:t,spans:o}]}const Iz=te.forwardRef((e,t)=>{const[{className:i,...r},{as:n="div",bsPrefix:s,spans:o}]=ufe(e);return L(n,{...r,ref:t,className:Ei(i,!o.length&&s)})});Iz.displayName="Col";const vE=Iz;var dfe=Function.prototype.bind.call(Function.prototype.call,[].slice);function hfe(e,t){return dfe(e.querySelectorAll(t))}function ffe(){var e=te.useReducer(function(i){return!i},!1),t=e[1];return t}const yE=te.createContext(null),aC=(e,t=null)=>e!=null?String(e):t||null,Rz=te.createContext(null);Rz.displayName="NavContext";const Nz=Rz,pfe="data-rr-ui-",mfe="rrUi";function lC(e){return`${pfe}${e}`}function gfe(e){return`${mfe}${e}`}const vfe={type:Rs.string,tooltip:Rs.bool,as:Rs.elementType},cC=te.forwardRef(({as:e="div",className:t,type:i="valid",tooltip:r=!1,...n},s)=>L(e,{...n,ref:s,className:Ei(t,`${i}-${r?"tooltip":"feedback"}`)}));cC.displayName="Feedback";cC.propTypes=vfe;const Bz=cC,yfe=te.createContext({}),Za=yfe,kz=te.forwardRef(({id:e,bsPrefix:t,className:i,type:r="checkbox",isValid:n=!1,isInvalid:s=!1,as:o="input",...a},l)=>{const{controlId:c}=te.useContext(Za);return t=Vi(t,"form-check-input"),L(o,{...a,ref:l,type:r,id:e||c,className:Ei(i,t,n&&"is-valid",s&&"is-invalid")})});kz.displayName="FormCheckInput";const zz=kz,Fz=te.forwardRef(({bsPrefix:e,className:t,htmlFor:i,...r},n)=>{const{controlId:s}=te.useContext(Za);return e=Vi(e,"form-check-label"),L("label",{...r,ref:n,htmlFor:i||s,className:Ei(t,e)})});Fz.displayName="FormCheckLabel";const xE=Fz,Uz=te.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:i,inline:r=!1,reverse:n=!1,disabled:s=!1,isValid:o=!1,isInvalid:a=!1,feedbackTooltip:l=!1,feedback:c,feedbackType:d,className:u,style:h,title:f="",type:m="checkbox",label:v,children:g,as:p="input",...x},b)=>{t=Vi(t,"form-check"),i=Vi(i,"form-switch");const{controlId:S}=te.useContext(Za),E=te.useMemo(()=>({controlId:e||S}),[S,e]),y=!g&&v!=null&&v!==!1||cfe(g,xE),C=L(zz,{...x,type:m==="switch"?"checkbox":m,ref:b,isValid:o,isInvalid:a,disabled:s,as:p});return L(Za.Provider,{value:E,children:L("div",{style:h,className:Ei(u,y&&t,r&&`${t}-inline`,n&&`${t}-reverse`,m==="switch"&&i),children:g||pe($a,{children:[C,y&&L(xE,{title:f,children:v}),c&&L(Bz,{type:d,tooltip:l,children:c})]})})})});Uz.displayName="FormCheck";const Hy=Object.assign(Uz,{Input:zz,Label:xE}),jz=te.forwardRef(({bsPrefix:e,type:t,size:i,htmlSize:r,id:n,className:s,isValid:o=!1,isInvalid:a=!1,plaintext:l,readOnly:c,as:d="input",...u},h)=>{const{controlId:f}=te.useContext(Za);e=Vi(e,"form-control");let m;return l?m={[`${e}-plaintext`]:!0}:m={[e]:!0,[`${e}-${i}`]:i},L(d,{...u,type:t,size:r,ref:h,readOnly:c,id:n||f,className:Ei(s,m,o&&"is-valid",a&&"is-invalid",t==="color"&&`${e}-color`)})});jz.displayName="FormControl";const xfe=Object.assign(jz,{Feedback:Bz}),wfe=da("form-floating"),Hz=te.forwardRef(({controlId:e,as:t="div",...i},r)=>{const n=te.useMemo(()=>({controlId:e}),[e]);return L(Za.Provider,{value:n,children:L(t,{...i,ref:r})})});Hz.displayName="FormGroup";const Gz=Hz,bfe={column:!1,visuallyHidden:!1},uC=te.forwardRef(({as:e="label",bsPrefix:t,column:i,visuallyHidden:r,className:n,htmlFor:s,...o},a)=>{const{controlId:l}=te.useContext(Za);t=Vi(t,"form-label");let c="col-form-label";typeof i=="string"&&(c=`${c} ${c}-${i}`);const d=Ei(n,t,r&&"visually-hidden",i&&c);return s=s||l,i?L(vE,{ref:a,as:"label",className:d,htmlFor:s,...o}):L(e,{ref:a,className:d,htmlFor:s,...o})});uC.displayName="FormLabel";uC.defaultProps=bfe;const Sfe=uC,Vz=te.forwardRef(({bsPrefix:e,className:t,id:i,...r},n)=>{const{controlId:s}=te.useContext(Za);return e=Vi(e,"form-range"),L("input",{...r,type:"range",ref:n,className:Ei(t,e),id:i||s})});Vz.displayName="FormRange";const _fe=Vz,Wz=te.forwardRef(({bsPrefix:e,size:t,htmlSize:i,className:r,isValid:n=!1,isInvalid:s=!1,id:o,...a},l)=>{const{controlId:c}=te.useContext(Za);return e=Vi(e,"form-select"),L("select",{...a,size:i,ref:l,className:Ei(r,e,t&&`${e}-${t}`,n&&"is-valid",s&&"is-invalid"),id:o||c})});Wz.displayName="FormSelect";const Efe=Wz,qz=te.forwardRef(({bsPrefix:e,className:t,as:i="small",muted:r,...n},s)=>(e=Vi(e,"form-text"),L(i,{...n,ref:s,className:Ei(t,e,r&&"text-muted")})));qz.displayName="FormText";const Afe=qz,Xz=te.forwardRef((e,t)=>L(Hy,{...e,ref:t,type:"switch"}));Xz.displayName="Switch";const Cfe=Object.assign(Xz,{Input:Hy.Input,Label:Hy.Label}),Yz=te.forwardRef(({bsPrefix:e,className:t,children:i,controlId:r,label:n,...s},o)=>(e=Vi(e,"form-floating"),pe(Gz,{ref:o,className:Ei(t,e),controlId:r,...s,children:[i,L("label",{htmlFor:r,children:n})]})));Yz.displayName="FloatingLabel";const Tfe=Yz,Mfe={_ref:Rs.any,validated:Rs.bool,as:Rs.elementType},dC=te.forwardRef(({className:e,validated:t,as:i="form",...r},n)=>L(i,{...r,ref:n,className:Ei(e,t&&"was-validated")}));dC.displayName="Form";dC.propTypes=Mfe;const st=Object.assign(dC,{Group:Gz,Control:xfe,Floating:wfe,Check:Hy,Switch:Cfe,Label:Sfe,Text:Afe,Range:_fe,Select:Efe,FloatingLabel:Tfe}),Pfe={fluid:!1},hC=te.forwardRef(({bsPrefix:e,fluid:t,as:i="div",className:r,...n},s)=>{const o=Vi(e,"container"),a=typeof t=="string"?`-${t}`:"-fluid";return L(i,{ref:s,...n,className:Ei(r,t?`${o}${a}`:o)})});hC.displayName="Container";hC.defaultProps=Pfe;const Dfe=hC,Ofe=te.createContext(null),Qz=Ofe,Lfe=["as","active","eventKey"];function Ife(e,t){if(e==null)return{};var i={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function Kz({key:e,onClick:t,active:i,id:r,role:n,disabled:s}){const o=te.useContext(yE),a=te.useContext(Nz),l=te.useContext(Qz);let c=i;const d={role:n};if(a){!n&&a.role==="tablist"&&(d.role="tab");const u=a.getControllerId(e??null),h=a.getControlledId(e??null);d[lC("event-key")]=e,d.id=u||r,c=i==null&&e!=null?a.activeKey===e:i,(c||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(d["aria-controls"]=h)}return d.role==="tab"&&(d["aria-selected"]=c,c||(d.tabIndex=-1),s&&(d.tabIndex=-1,d["aria-disabled"]=!0)),d.onClick=H1(u=>{s||(t==null||t(u),e!=null&&o&&!u.isPropagationStopped()&&o(e,u))}),[d,{isActive:c}]}const Zz=te.forwardRef((e,t)=>{let{as:i=Az,active:r,eventKey:n}=e,s=Ife(e,Lfe);const[o,a]=Kz(Object.assign({key:aC(n,s.href),active:r},s));return o[lC("active")]=a.isActive,L(i,Object.assign({},s,o,{ref:t}))});Zz.displayName="NavItem";const Rfe=Zz,Nfe=["as","onSelect","activeKey","role","onKeyDown"];function Bfe(e,t){if(e==null)return{};var i={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}const oL=()=>{},aL=lC("event-key"),$z=te.forwardRef((e,t)=>{let{as:i="div",onSelect:r,activeKey:n,role:s,onKeyDown:o}=e,a=Bfe(e,Nfe);const l=ffe(),c=te.useRef(!1),d=te.useContext(yE),u=te.useContext(Qz);let h,f;u&&(s=s||"tablist",n=u.activeKey,h=u.getControlledId,f=u.getControllerId);const m=te.useRef(null),v=b=>{const S=m.current;if(!S)return null;const E=hfe(S,`[${aL}]:not([aria-disabled=true])`),y=S.querySelector("[aria-selected=true]");if(!y||y!==document.activeElement)return null;const C=E.indexOf(y);if(C===-1)return null;let A=C+b;return A>=E.length&&(A=0),A<0&&(A=E.length-1),E[A]},g=(b,S)=>{b!=null&&(r==null||r(b,S),d==null||d(b,S))},p=b=>{if(o==null||o(b),!u)return;let S;switch(b.key){case"ArrowLeft":case"ArrowUp":S=v(-1);break;case"ArrowRight":case"ArrowDown":S=v(1);break;default:return}S&&(b.preventDefault(),g(S.dataset[gfe("EventKey")]||null,b),c.current=!0,l())};te.useEffect(()=>{if(m.current&&c.current){const b=m.current.querySelector(`[${aL}][aria-selected=true]`);b==null||b.focus()}c.current=!1});const x=Ez(t,m);return L(yE.Provider,{value:g,children:L(Nz.Provider,{value:{role:s,activeKey:aC(n),getControlledId:h||oL,getControllerId:f||oL},children:L(i,Object.assign({},a,{onKeyDown:p,ref:x,role:s}))})})});$z.displayName="Nav";const kfe=Object.assign($z,{Item:Rfe}),Jz=te.forwardRef(({bsPrefix:e,active:t,disabled:i,eventKey:r,className:n,variant:s,action:o,as:a,...l},c)=>{e=Vi(e,"list-group-item");const[d,u]=Kz({key:aC(r,l.href),active:t,...l}),h=H1(m=>{if(i){m.preventDefault(),m.stopPropagation();return}d.onClick(m)});i&&l.tabIndex===void 0&&(l.tabIndex=-1,l["aria-disabled"]=!0);const f=a||(o?l.href?"a":"button":"div");return L(f,{ref:c,...l,...d,onClick:h,className:Ei(n,e,u.isActive&&"active",i&&"disabled",s&&`${e}-${s}`,o&&`${e}-action`)})});Jz.displayName="ListGroupItem";const zfe=Jz,eF=te.forwardRef((e,t)=>{const{className:i,bsPrefix:r,variant:n,horizontal:s,numbered:o,as:a="div",...l}=gz(e,{activeKey:"onSelect"}),c=Vi(r,"list-group");let d;return s&&(d=s===!0?"horizontal":`horizontal-${s}`),L(kfe,{ref:t,...l,as:a,className:Ei(i,c,n&&`${c}-${n}`,d&&`${c}-${d}`,o&&`${c}-numbered`)})});eF.displayName="ListGroup";const Gy=Object.assign(eF,{Item:zfe}),tF=te.forwardRef(({bsPrefix:e,className:t,as:i="div",...r},n)=>{const s=Vi(e,"row"),o=vz(),a=yz(),l=`${s}-cols`,c=[];return o.forEach(d=>{const u=r[d];delete r[d];let h;u!=null&&typeof u=="object"?{cols:h}=u:h=u;const f=d!==a?`-${d}`:"";h!=null&&c.push(`${l}${f}-${h}`)}),L(i,{ref:n,...r,className:Ei(t,s,...c)})});tF.displayName="Row";const Ffe=tF,iF=te.forwardRef(({bsPrefix:e,variant:t,animation:i="border",size:r,as:n="div",className:s,...o},a)=>{e=Vi(e,"spinner");const l=`${e}-${i}`;return L(n,{ref:a,...o,className:Ei(s,l,r&&`${l}-${r}`,t&&`text-${t}`)})});iF.displayName="Spinner";const Ufe=iF,jfe=te.forwardRef(({bsPrefix:e,className:t,striped:i,bordered:r,borderless:n,hover:s,size:o,variant:a,responsive:l,...c},d)=>{const u=Vi(e,"table"),h=Ei(t,u,a&&`${u}-${a}`,o&&`${u}-${o}`,i&&`${u}-${typeof i=="string"?`striped-${i}`:"striped"}`,r&&`${u}-bordered`,n&&`${u}-borderless`,s&&`${u}-hover`),f=L("table",{...c,className:h,ref:d});if(l){let m=`${u}-responsive`;return typeof l=="string"&&(m=`${m}-${l}`),L("div",{className:m,children:f})}return f}),Vy=jfe;var wE=te,Hfe=Rs,Gfe=jy;function fC(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var zo=fC(wE),gr=fC(Hfe),zb=fC(Gfe);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var No=function(){return No=Object.assign||function(t){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},No.apply(this,arguments)};function bE(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i}var Vfe="range-slider",Wfe=zo.default.forwardRef(function(e,t){var i=e.classes,r=e.value,n=e.min,s=e.max,o=e.onChange,a=e.onMouseUpOrTouchEnd,l=e.onMouseUp,c=e.onTouchEnd,d=bE(e,["classes","value","min","max","onChange","onMouseUpOrTouchEnd","onMouseUp","onTouchEnd"]);return zo.default.createElement("input",No({ref:t,type:"range",value:r,min:n,max:s,onChange:function(u){return o(u,u.target.valueAsNumber)},onMouseUp:function(u){a(u),l&&l(u)},onTouchEnd:function(u){a(u),c&&c(u)},className:i,"aria-valuenow":Number(r),"aria-valuemin":Number(n),"aria-valuemax":Number(s)},d))}),qfe=zo.default.memo(Wfe),rF=zo.default.forwardRef(function(e,t){var i=e.value,r=e.onChange,n=r===void 0?function(){}:r,s=e.onAfterChange,o=s===void 0?function(){}:s,a=e.disabled,l=a===void 0?!1:a,c=e.size,d=e.min,u=d===void 0?0:d,h=e.max,f=h===void 0?100:h,m=e.step,v=e.variant,g=v===void 0?"primary":v,p=e.inputProps,x=p===void 0?{}:p,b=e.tooltip,S=b===void 0?"auto":b,E=e.tooltipPlacement,y=E===void 0?"bottom":E,C=e.tooltipLabel,A=e.tooltipStyle,D=A===void 0?{}:A,I=e.tooltipProps,R=I===void 0?{}:I,B=e.bsPrefix,G=e.className,j=bE(e,["value","onChange","onAfterChange","disabled","size","min","max","step","variant","inputProps","tooltip","tooltipPlacement","tooltipLabel","tooltipStyle","tooltipProps","bsPrefix","className"]),ee=wE.useState(),Q=ee[0],re=ee[1],z=B||Vfe,X=S==="auto"||S==="on",Y=zb.default(G,z,c&&z+"--"+c,l&&"disabled",g&&z+"--"+g),K=No(No({},x),j),Z=K.onMouseUp,V=K.onTouchEnd,fe=bE(K,["onMouseUp","onTouchEnd"]),ae=wE.useCallback(function(We){Q!==We.target.value&&o(We,We.target.valueAsNumber),re(We.target.value)},[Q,o]),ne=zo.default.createElement(qfe,No({},No({disabled:l,value:i,min:u,max:f,ref:t,step:m,classes:Y,onMouseUpOrTouchEnd:ae,onTouchEnd:V,onMouseUp:Z,onChange:n},fe))),we=zb.default(z+"__wrap",c&&z+"__wrap--"+c),me=zb.default(z+"__tooltip",X&&z+"__tooltip--"+S,y&&z+"__tooltip--"+y,l&&z+"__tooltip--disabled"),ue=c==="sm"?8:c==="lg"?12:10,xe=(Number(i)-u)/(f-u),Le=xe*100,Re=(xe-.5)*2,Oe=Re*-ue;return zo.default.createElement("span",{className:we},ne,X&&zo.default.createElement("div",No({className:me,style:No(No({},D||{}),{left:"calc("+Le+"% + "+Oe+"px)"})},R),zo.default.createElement("div",{className:z+"__tooltip__label"},C?C(Number(i)):i),zo.default.createElement("div",{className:z+"__tooltip__caret"})))});rF.propTypes={value:gr.default.oneOfType([gr.default.number,gr.default.string]).isRequired,onChange:gr.default.func,onAfterChange:gr.default.func,min:gr.default.number,max:gr.default.number,step:gr.default.number,disabled:gr.default.bool,size:gr.default.oneOf(["sm","lg"]),variant:gr.default.oneOf(["primary","secondary","success","danger","warning","info","dark","light"]),inputProps:gr.default.object,tooltip:gr.default.oneOf(["auto","on","off"]),tooltipPlacement:gr.default.oneOf(["top","bottom"]),tooltipLabel:gr.default.func,tooltipStyle:gr.default.object,tooltipProps:gr.default.object,className:gr.default.string,bsPrefix:gr.default.string};var Xfe=zo.default.memo(rF),Yfe=Xfe;function Qfe(){const e=te.useRef(null),[t,i]=te.useState(1e4),[r,n]=te.useState(""),[s,o]=te.useState(""),a=c=>{i(c.target.value)};return pe(st,{ref:e,onSubmit:c=>{c.preventDefault();const{password:d,confirm:u}=c.target.elements;if(d.value!==u.value){alert("La contraseña y la confirmación de contraseña no coinciden");return}if(d.value.length<4||d.value.length>10){o("La contraseña debe tener entre 4 y 10 caracteres");return}console.log(e.current)},children:[L("div",{className:"maincontainer",children:L("h2",{children:"Ingresa tus datos para crear tu perfil"})}),pe("div",{className:"maincontainer",children:[pe(st.Group,{controlId:"formName",children:[L(st.Label,{children:"Nombre"}),L(st.Control,{type:"text",placeholder:"Agregar nombre",name:"nombre",required:!0,"aria-label":"Campo obligatorio: Nombre"})]}),pe(st.Group,{controlId:"formLastName",children:[L(st.Label,{children:"Apellido"}),L(st.Control,{type:"text",placeholder:"Agregar apellido",required:!0,"aria-label":"Campo obligatorio: Apellido"})]}),pe(st.Group,{controlId:"formEmail",children:[L(st.Label,{children:"Dirección de correo electrónico"}),L(st.Control,{type:"email",placeholder:"Ingresar correo",required:!0,"aria-label":"Campo obligatorio: Dirección de correo electrónico"})]}),L("br",{}),pe(st.Group,{controlId:"formPhone",children:[L(st.Label,{children:"Ingresa tu número de teléfono celular"}),L(st.Control,{type:"tel",placeholder:"Formato 5612345678",required:!0,pattern:"[00-9]{8,14}","aria-label":"Campo obligatorio: Teléfono"})]}),L("br",{}),L(st,{noValidate:!0,children:pe(st.Group,{controlId:"formAge",children:[L(st.Label,{children:"Edad"}),L("br",{}),L(st.Control,{type:"number",placeholder:"Ingresa tu edad",required:!0,"aria-label":"Campo obligatorio: Edad"})]})}),L("br",{}),pe(st.Group,{controlId:"formUrl",children:[L(st.Label,{children:"Perfil de Linkedin"}),L("br",{}),L(st.Control,{type:"url",placeholder:"URL de Linkedin",required:!0,"aria-label":"Campo obligatorio: URL"})]}),L("br",{}),L("br",{}),pe(st.Group,{controlId:"formUrl",children:[L(st.Label,{children:"Área de especialidad"}),L("br",{}),pe(st.Select,{required:!0,"aria-label":"Campo obligatorio: Especialidad",children:[L("option",{value:"",children:"Seleccione una opción"}),L("option",{value:"Frontend",children:"Frontend"}),L("option",{value:"Backend",children:"Backend"}),L("option",{value:"Fullstack",children:"Fullstack"})]})]}),L("br",{}),pe(st.Group,{controlId:"formPassword",children:[L(st.Label,{children:"Contraseña"}),L(st.Control,{type:"password",placeholder:"Ingresar contraseña",name:"password",required:!0,"aria-label":"Campo obligatorio: Contraseña"})]}),pe(st.Group,{controlId:"formConfirmPassword",children:[L(st.Label,{children:"Confirmar Contraseña"}),L(st.Control,{type:"password",placeholder:"Confirmar contraseña",name:"confirm",required:!0,value:r,onChange:c=>n(c.target.value),"aria-label":"Campo obligatorio: Confirmar Contraseña"})]}),L("div",{className:"text-danger",children:s}),L("br",{}),pe(st.Group,{controlId:"formRate",children:[pe(st.Label,{children:["Valor por hora: $",t]}),L(Yfe,{value:t,min:1e4,max:5e5,step:1,onChange:a}),L(ar,{variant:"primary",type:"submit",className:"consolas-font",children:"Guardar datos"})]})]})]})}function Kfe(){const[e,t]=te.useState(""),i=n=>{const s=n.target.value;s.length<=500&&t(s)};return L("div",{className:"maincontainer",children:pe(st,{className:"",onSubmit:n=>{n.preventDefault(),e.length>=20&&e.length<=500?console.log(e):alert("La reseña debe tener entre 20 y 500 caracteres.")},children:[pe(st.Group,{controlId:"formFreeText",children:[L("br",{}),L(st.Label,{children:"Agrega tu reseña al portafolio (BIO)"}),L("br",{}),L("br",{}),L("div",{children:L(st.Control,{as:"textarea",rows:3,maxLength:500,required:!0,value:e,onChange:i,placeholder:"La reseña debe tener entre 20 y 500 caracteres"})})]}),L(ar,{variant:"primary",type:"submit",className:"consolas-font",children:"Guardar Reseña"})]})})}function Zfe(){const[e,t]=te.useState(""),[i,r]=te.useState(""),[n,s]=te.useState(""),o=c=>{const d=c.target.value;d.length<=500&&(t(d),d.length<20?s("La oferta de valor debe tener al menos 20 caracteres"):s(""))},a=c=>{const d=c.target.files[0];if(d){const u=URL.createObjectURL(d);r(u),document.getElementById("submit-button").disabled=!1}else r(""),document.getElementById("submit-button").disabled=!0,s("Por favor selecciona una imagen."),alert("Por favor selecciona una imagen.")};return L("div",{className:"maincontainer",children:pe(st,{onSubmit:c=>{c.preventDefault(),console.log(e,i)},children:[pe(st.Group,{controlId:"formFreeText",children:[pe(st.Label,{children:["Agrega tu oferta de valor, un resumen de lo que te destaca"," "]}),L("br",{}),L("br",{}),pe("div",{children:[L(st.Control,{as:"textarea",rows:3,required:!0,maxLength:500,value:e,placeholder:"La reseña debe tener entre 20 y 500 caracteres",onChange:o}),n&&L("p",{style:{color:"red"},children:n})]})]}),L("br",{}),pe("div",{className:"maincontainer",controlId:"formImageUpload",children:[L(st.Label,{children:"Sube una imagen para presentarla en tu perfil de Freecoder"}),L("br",{}),L("br",{}),L("input",{type:"file",accept:".png, .jpg, .jpeg, .bmp, .gif, .tiff",onChange:a,required:!0})]}),L("br",{}),L(ar,{variant:"primary",type:"submit",className:"consolas-font",id:"submit-button",disabled:!i,children:"Guardar Oferta de Valor"})]})})}function $fe(){const[e,t]=te.useState("github"),[i,r]=te.useState(""),[n,s]=te.useState(""),[o,a]=te.useState(!1),l=f=>{t(f.target.value)},c=f=>{r(f.target.value)},d=()=>{if(n.length<20||n.length>500)return"La reseña del repositorio debe tener entre 20 y 500 caracteres."},u=()=>{if(o)return d()?"error":"success"};return L("div",{className:"maincontainer",children:pe(st,{onSubmit:f=>{if(f.preventDefault(),n.length<20){alert("La reseña del repositorio debe tener al menos 20 caracteres.");return}},children:[pe(st.Group,{children:[L(st.Label,{children:"Elige el tipo de repositorio"}),pe("div",{children:[L("br",{}),pe(st.Control,{as:"select",value:e,required:!0,onChange:l,children:[L("option",{value:"github",children:"GitHub"}),L("option",{value:"bitbucket",children:"Bitbucket"}),L("option",{value:"gitlab",children:"GitLab"})]})]})]}),pe(st.Group,{children:[L("br",{}),L(st.Label,{children:"Reseña breve del repositorio"}),L(st.Control,{type:"text",required:!0,onChange:f=>{const m=f.target.value;m.length<=500&&s(m),a(!0)},value:n,maxLength:500,placeholder:"La reseña debe tener entre 20 y 500 caracteres",isInvalid:u()==="error",isValid:u()==="success"}),L(st.Label,{children:"Agregar URL del repositorio"}),L("br",{}),L(st.Control,{type:"url",required:!0,value:i,onChange:c})]}),L(ar,{type:"submit",className:"consolas-font",children:"Guardar"})]})})}const Jfe=["Python","JavaScript","Java","C++","PHP","C#","Swift","TypeScript","Kotlin","Go"],epe=["React","Angular","Vue.js","Ruby on Rails","Django","Spring","Express.js","Laravel","Flask","ASP.NET"],tpe=["MySQL","PostgreSQL","Oracle","MongoDB","Microsoft SQL Server","SQLite","Cassandra","Redis","Firebase Realtime Database","Amazon Aurora"];function ipe(){const[e,t]=te.useState([]),[i,r]=te.useState([]),[n,s]=te.useState([]),o=h=>{const f=h.target.value,m=h.target.checked;t(m?[...e,f]:e.filter(v=>v!==f))},a=h=>{const f=h.target.value,m=h.target.checked;r(m?[...i,f]:i.filter(v=>v!==f))},l=h=>{const f=h.target.value,m=h.target.checked;s(m?[...n,f]:n.filter(v=>v!==f))},c=()=>{if(e.length===0){alert("Por favor selecciona al menos un lenguaje de programación");return}console.log(e)},d=()=>{if(i.length===0){alert("Por favor selecciona al menos un Framework");return}console.log(i)},u=()=>{if(n.length===0){alert("Por favor selecciona al menos una opción de bases de datos");return}console.log(n)};return pe("div",{className:"maincontainer",children:[L("h2",{children:"Ingresa tus skills más relevantes"}),L("h3",{children:"Lenguajes de programación"}),Jfe.map(h=>L(st.Check,{type:"checkbox",label:h,value:h,onChange:o,checked:e.includes(h)},h)),L(ar,{id:"button-skills",variant:"primary",className:"consolas-font",onClick:c,children:"Guardar Lenguajes"}),L("h3",{children:"Frameworks"}),epe.map(h=>L(st.Check,{type:"checkbox",label:h,value:h,onChange:a,checked:i.includes(h)},h)),L(ar,{id:"button-skills",variant:"primary",className:"consolas-font",onClick:d,children:"Guardar Frameworks"}),L("h3",{children:"Bases de datos"}),tpe.map(h=>L(st.Check,{type:"checkbox",label:h,value:h,onChange:l,checked:n.includes(h)},h)),L(ar,{id:"button-skills",variant:"primary",className:"consolas-font",onClick:u,children:"Guardar Bases de Datos"})]})}const ys=({isActive:e})=>e?"isActive":"mainNavBar",nl=()=>pe("div",{className:"mainNavBarContainer",children:[L(Or,{to:"/crearperfil",className:ys,children:"Crear Perfil"}),L(Or,{to:"/missolicitudes",className:ys,children:"Mis Solicitudes"}),L(Or,{to:"/perfilfreecoder",className:ys,children:"Perfil"}),L(Or,{to:"/busqueda",className:ys,children:"Búsqueda"}),L(Or,{to:"/contactarfreecoder",className:ys,children:"Contactar"}),L(Or,{to:"/confirmarorden",className:ys,children:"Orden en proceso"}),L(Or,{to:"/seguimiento",className:ys,children:"Seguimiento"}),L(Or,{to:"/crearpropuesta",className:ys,children:"Crear propuesta"}),L(Or,{to:"/enviopropuesta",className:ys,children:"Envio propuesta"}),L(Or,{to:"/abonarpropuesta",className:ys,children:"Abonar Propuesta"}),L(Or,{to:"/home",className:ys,children:"Home"}),L(Or,{to:"/login",className:ys,children:"Login"})]});function rpe(){const{isSaving:e,setIsSaving:t}=te.useContext(oa);return pe("div",{className:"maincontainer",children:[L(nl,{}),L("div",{children:L(Qfe,{})}),L("div",{children:L(ipe,{})}),L("div",{children:L(Kfe,{})}),L("div",{children:L($fe,{})}),L("div",{children:L(Zfe,{})}),L("div",{className:"text-center mt-4",children:L(ar,{id:"button-crearperfil",className:"consolas-font",onClick:()=>{t(!0),setTimeout(()=>{t(!1)},2e3)},disabled:e,children:e?"Saving...":"Guardar todos los cambios"})})]})}function npe(){const[e,t]=te.useState([]);return te.useEffect(()=>{},[]),pe("div",{className:"maincontainer",children:[L(nl,{}),L("br",{}),pe("header",{className:"row mt-4",children:[L("br",{}),L("div",{className:"col-12 maincontainer",children:L("h2",{children:"Hola Freecoder: ___"})}),L("br",{})]}),L("div",{className:"row justify-content-center",children:L("div",{className:"col-lg-9 col-md-10",children:pe(li,{className:"my-4 w-100 maincontainer",children:[pe(li.Header,{children:[L("h4",{children:"Mis órdenes recibidas y su estado"}),L("br",{})]}),L("br",{}),L(li.Body,{style:{backgroundColor:"#f1f1f1"},children:L(Vy,{striped:!0,bordered:!0,hover:!0,children:pe("tbody",{children:[pe("tr",{children:[L("th",{style:{border:"1px solid #ced1e1",fontWeight:"normal",padding:"10px"},children:"id"}),L("td",{style:{border:"1px solid #ced1e1",padding:"10px"},children:e.map(i=>i.id)})]}),pe("tr",{children:[L("th",{style:{border:"1px solid #ced1e1",fontWeight:"normal",padding:"10px"},children:"Descripcion_proyecto"}),L("td",{style:{border:"1px solid #ced1e1",padding:"10px"},children:e.map(i=>i.programador_id)})]}),pe("tr",{children:[L("th",{style:{border:"1px solid #ced1e1",fontWeight:"normal",padding:"10px"},children:"Presupuesto"}),L("td",{style:{border:"1px solid #ced1e1",padding:"10px"},children:e.map(i=>i.descripcion_proyecto)})]}),pe("tr",{children:[L("th",{style:{border:"1px solid #ced1e1",fontWeight:"normal",padding:"10px"},children:"Nombre Cliente"}),L("td",{style:{border:"1px solid #ced1e1",padding:"10px"},children:e.map(i=>i.presupuesto)})]}),pe("tr",{children:[L("th",{style:{border:"1px solid #ced1e1",fontWeight:"normal",padding:"10px"},children:"Fecha_solicitud"}),L("td",{style:{border:"1px solid #ced1e1",padding:"10px"},children:e.map(i=>i.cliente_id)})]}),pe("tr",{children:[L("th",{style:{border:"1px solid #ced1e1",fontWeight:"normal",padding:"10px"},children:"Status Orden"}),L("td",{style:{border:"1px solid #ced1e1",padding:"10px"},children:e.map(i=>i.order_status)})]})]})})})]})})})]})}function spe(){const[e,t]=te.useState({}),[i,r]=te.useState([]),{coders:n}=te.useContext(oa),s=y2(),o=l=>{s(`/contacto/${l}`),console.log(l)},{id:a}=_R();return te.useEffect(()=>{if(n&&n.length>0){const l=n.find(c=>c.id===a);l!==void 0&&(t(l),r(l.area||[]))}},[a,n]),pe("div",{className:"maincontainer",children:[L(nl,{}),pe("div",{className:"row",children:[pe("div",{className:"col-xl-3 col-md-4 col-sm-12  ajustes-card",children:[pe(li,{className:"maincontainer",children:[pe(li.Title,{className:"card-nombre ",children:[e.nombre," ",e.apellido,L("h2",{children:"Nombre Programador: Mary Freecoder"})]}),L(li.Img,{variant:"top",className:"maincontainer",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNGO-vi7hcHF9yzYNnDkM6QXBzWf86zJKDyw&usqp=CAU",alt:"foto-perfil"}),pe(Gy,{className:"list-group-flush",children:[i.map(l=>L(Gy.Item,{children:l},l)),pe("div",{className:"maincontainer",children:[L("p",{children:"Stack tecnológico:"}),pe("ul",{children:[L("li",{children:"Javascript"}),L("li",{children:"React"}),L("li",{children:"Postgres"})]})]}),pe("div",{className:"maincontainer",children:[L("p",{className:"precio-texto",children:"Valor hora"}),L($4,{className:"icono"}),L("p",{className:"precio-texto",children:"$15.000"})]})]})]}),pe("div",{className:"maincontainer",children:[" ",L(ar,{type:"submit",onClick:()=>o(e.id),children:"Contactar Freecoder"})]})]}),pe("div",{className:"col-xl-9 col-md-8 col-sm-12 maincontainer",children:[pe("div",{className:"resumen-de-habilidades",children:[L("h2",{children:"Resumen de habilidades"}),L("br",{}),L("p",{className:"resumen-texto",children:"Resumen principales habilidades del Freecoder"})]}),L("br",{}),L("br",{}),L("h2",{children:"Repositorios"}),L("div",{className:"repositorio maincontainer",children:L(Vy,{children:pe("tbody",{children:[pe("tr",{children:[L("td",{children:"Repositorio github"}),L("td",{children:L("a",{href:e.link_github,children:e.link_github})})]}),pe("tr",{children:[L("td",{children:"Repositorio vercel"}),L("td",{children:L("a",{href:e.link_vercel,children:e.link_vercel})})]})]})})}),L("h2",{children:"Principales Proyectos Desarrollados"}),L("br",{}),L("div",{className:"repositorio maincontainer",children:L(Vy,{children:pe("tbody",{children:[pe("tr",{children:[L("td",{children:"Portafolio 1: Explicación breve del proyecto y sus caterterísticas."}),L("td",{children:L("a",{href:e.link_github,children:e.link_github})})]}),pe("tr",{children:[L("td",{children:"Portafolio 2: Explicació breve del proyecto y sus caterterísticas."}),L("td",{children:L("a",{href:e.link_vercel,children:e.link_vercel})})]})]})})}),L("h2",{children:"BIO"}),L("br",{}),pe("div",{className:"bio",children:[L("p",{children:e.biografia}),L("p",{children:"Resumen breve del free lancer"})]}),L("br",{}),L("h2",{children:"Mi oferta de valor"}),pe("div",{className:"oferta-de-valor",children:[L("br",{}),L("p",{children:"Explicación breve de la oferta de valor, aspectos funcionales, técnicos y otros."})]})]})]})]})}function ope(){const{coders:e}=te.useContext(oa),{id:t}=_R(),[i,r]=te.useState([]),[n,s]=te.useState([]),[o,a]=te.useState([]),[l,c]=te.useState(null),[d,u]=te.useState(""),[h,f]=te.useState(""),[m,v]=te.useState(""),[g,p]=te.useState("");te.useEffect(()=>{(()=>{if(e){const B=e.find(G=>G.id===t);B!==void 0&&(s(B||[]),a(B.area||[]))}})()},[t,e]);const x=R=>{const B=Array.from(R.target.selectedOptions,G=>G.value);r(B)},b=()=>{console.log("Selected Languages:",i)},S=R=>{const B=R.target.files[0];B&&["application/pdf","application/msword","image/png","image/jpeg"].includes(B.type)?c(B):alert("El archivo seleccionado no es válido. Por favor seleccione un archivo PDF, Word, PNG o JPG.")},E=R=>{const B=R.target.value;B.length<=500&&u(B)},y=R=>{R.preventDefault(),console.log(d),localStorage.setItem("description",m)},C=R=>{R.preventDefault(),console.log(d),localStorage.setItem("comments",g)},A=R=>{f(R.target.value)},D=R=>{v(R.target.value)},I=R=>{p(R.target.value)};return L($a,{children:pe("div",{className:"maincontainer",children:[L(nl,{}),pe("div",{className:"row",children:[pe("div",{className:"col-xl-3 col-md-4 col-sm-12  secc-izq maincontainer",children:[L("h2",{children:"Nombre Programador: Mary Freecoder"}),pe(li,{className:"maincontainer",children:[pe(li.Title,{className:"card-nombre",children:[n.nombre," ",n.apellido]}),L(li.Img,{variant:"top",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNGO-vi7hcHF9yzYNnDkM6QXBzWf86zJKDyw&usqp=CAU",alt:"foto-perfil"}),L(Gy,{className:"list-group-flush",children:o.map(R=>L(Gy.Item,{children:R},R))})]}),pe("div",{className:"precio-horas maincontainer",children:[L("h4",{className:"precio-texto",children:"Valor hora"}),L($4,{className:"icono"}),L("h4",{className:"precio-texto",children:"15.000"})]})]}),pe("div",{className:"col-xl-9 col-md-8 col-sm-12",children:[pe("div",{className:"maincontainer",children:[L("h3",{children:"Crea un título para tu proyecto"}),L("form",{onSubmit:y,children:pe("div",{children:[L("textarea",{id:"description",value:h,onChange:A,placeholder:"Título para tu proyecto",required:!0,maxLength:50}),L("br",{}),h.length===0&&L("span",{style:{color:"red"},children:"Este campo es requerido"})]})}),L("br",{}),L("h4",{children:"Describe brevemente tu proyecto"}),L("form",{onSubmit:y,children:pe("div",{children:[L("textarea",{id:"description",value:m,onChange:D,placeholder:"Descripción detallada de aspectos funcionales",required:!0,maxLength:1e3}),L("br",{}),m.length===0&&L("span",{style:{color:"red"},children:"Este campo es requerido"})]})}),L("button",{type:"submit",onClick:b,children:"Guardar"})]}),pe("div",{className:"maincontainer",children:[pe("div",{className:"stack-orden",children:[L("h3",{className:"stack-titulo",children:"Elige el stack requerido:"}),L(st,{children:["Python","JavaScript","Java","C++","PHP","C#","Swift","TypeScript","Kotlin","Go","React","Angular","Vue.js","Ruby on Rails","Django","Spring","Express.js","Laravel","Flask","ASP.NET","MySQL","PostgreSQL","Oracle","MongoDB","Microsoft SQL Server","SQLite","Cassandra","Redis","Firebase Realtime Database","Amazon Aurora"].map(R=>L("div",{className:"mb-3",children:L(st.Check,{type:"checkbox",id:R,label:R,multiple:!0,onChange:x})},R))})]}),L("br",{}),pe("div",{className:"stack-comentarios",children:[L("h4",{children:"¿No encontraste lo que buscabas? Agrégalo acá:"}),L("br",{}),L("form",{className:"form-texto",onSubmit:C,children:L("div",{children:L("textarea",{id:"comments",value:g,onChange:I,required:!0})})}),L(ar,{className:"button-stack",type:"submit",onClick:b,children:"Guardar"})]})]}),pe(st,{onSubmit:y,className:"form-adicional maincontainer",children:[pe(st.Group,{controlId:"formFreeText",children:[L(st.Label,{children:"Agrega comentarios o preguntas adicionales"}),L("br",{}),L("br",{}),L(st.Control,{as:"textarea",rows:3,required:!0,maxLength:500,value:d,onChange:E})]}),L(ar,{variant:"primary",type:"submit",className:"button-guardar",onClick:b,children:"Guardar"})]}),L("div",{children:pe("div",{className:"maincontainer",style:{backgroundColor:"#E4E4E4"},children:[pe("div",{className:"maincontainer",children:[L("h3",{children:" ¿Tienes una imagen o boceto de tu proyecto o idea?"}),L("br",{}),L("p",{children:"Opcionalmente, puedes subir un enlace a un repositorio con un archivo de referencia"}),L("br",{}),L("label",{children:L("input",{type:"url",onChange:S,placeholder:"www.ejemplo.png",required:!0})})]}),L(ar,{variant:"primary",type:"submit",className:"button-guardar",onClick:b,children:"Guardar"})]})}),pe(st,{className:"maincontainer",children:[L("div",{children:L("h2",{children:"Ingresa tus datos "})}),L("br",{}),pe(st.Group,{controlId:"formName",children:[L(st.Label,{children:"Nombre"}),L(st.Control,{type:"text",required:!0,placeholder:"Agregar nombre"})]}),pe(st.Group,{controlId:"formLastName",children:[L(st.Label,{children:"Apellido"}),L(st.Control,{type:"text",required:!0,placeholder:"Agregar apellido"})]}),pe(st.Group,{controlId:"formEmail",children:[L(st.Label,{children:"Dirección de correo electrónico"}),L(st.Control,{type:"email",required:!0,placeholder:"Ingresar correo"})]}),pe(st.Group,{controlId:"formTelefono",children:[L(st.Label,{children:"Numero telefónico"}),L("div",{children:L(st.Control,{type:"number",required:!0,placeholder:"Ingresar numero telefonico",style:{width:"300px",borderColor:"#dcdcdc"}})})]}),L(ar,{variant:"primary",type:"submit",children:"Enviar solicitud"})]})]})]})]})})}function ape(){const[e,t]=te.useState(""),[i,r]=te.useState("");return te.useEffect(()=>{t("Mary Freecoder"),r("Francisco")},[]),pe("div",{className:"maincontainer",children:[pe("h2",{children:["Hola Freecoder ",L("span",{style:{fontWeight:"bold",color:"blue"},children:e})]}),L("br",{}),pe("p",{children:['El cliente "',L("span",{style:{fontWeight:"bold",color:"blue"},children:i}),'", ha enviado una solicitud.']})]})}function lpe(){const[e,t]=te.useState("Explicación breve ingresada por el cliente acá"),[i,r]=te.useState("Lenguaje, framework, etc."),[n,s]=te.useState("Comentarios adicionales del cliente en texto libre"),[o,a]=te.useState("Enlace externo");return te.useEffect(()=>{t("Esta es una explicación breve importada desde la base de datos."),r("React, Node.js, MongoDB"),s("Estoy muy emocionado por este proyecto y espero trabajar contigo pronto."),a("https://example.com/document.pdf")},[]),pe("div",{className:"maincontainer",style:{backgroundColor:"#f5f5f5",color:"#7d7d7d"},children:[pe("div",{style:{backgroundColor:"#f5f5f5",color:"#7d7d7d"},children:[L("h3",{children:"Descripción breve del proyecto"}),L("br",{}),L("p",{className:"my-paragraph maincontainer",children:e})]}),L("br",{}),L("h3",{children:"Stack requerido"}),L("p",{className:"my-paragraph maincontainer",children:i}),L("br",{}),L("h3",{children:"Comentarios del cliente"}),L("p",{className:"my-paragraph maincontainer",children:n}),L("br",{}),L("h3",{children:"Enlace externo con documento de apoyo enviado por el cliente"}),L("br",{}),L("p",{className:"my-paragraph maincontainer",children:L("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:o})})]})}function cpe(){const[e,t]=te.useState(""),[i,r]=te.useState("");return pe("div",{className:"maincontainer",children:[L("h2",{children:"Ingresa acá los detalles de tu propuesta"}),L("br",{}),pe("form",{onSubmit:a=>{a.preventDefault(),localStorage.setItem("title",e),localStorage.setItem("description",i)},children:[pe("div",{children:[L("label",{htmlFor:"title",children:"Título del proyecto:"}),L("input",{type:"text",id:"title",value:e,onChange:a=>{t(a.target.value)},placeholder:"Título del proyecto, tope de 50 caracteres",required:!0,maxLength:50})]}),pe("div",{children:[L("br",{}),pe("div",{children:[L("label",{htmlFor:"description",children:"Descripción del proyecto:"}),pe("div",{children:[L("br",{}),L("textarea",{id:"description",className:"my-textarea",value:i,onChange:a=>{r(a.target.value)},placeholder:"Descripción detallada de aspectos funcionales",required:!0,maxLength:1e3})]})]})]}),L("button",{type:"submit",className:"consolas-font",children:"Guardar datos"})]})]})}function upe(){const[e,t]=te.useState([]),[i,r]=te.useState([]),[n,s]=te.useState([]),o=d=>{const u=Array.from(d.target.selectedOptions,h=>h.value);t(u)},a=d=>{const u=Array.from(d.target.selectedOptions,h=>h.value);r(u)},l=d=>{const u=Array.from(d.target.selectedOptions,h=>h.value);s(u)},c=()=>{if(e.length===0||n.length===0){alert("Please select at least one language and one database.");return}console.log("Selected Languages:",e),console.log("Selected Frameworks:",i),console.log("Selected Databases:",n)};return pe("div",{className:"maincontainer",children:[L("h3",{children:"Tecnologías a utilizar"}),L("br",{}),L("div",{className:"maincontainer-tecs",children:pe("div",{children:[L("div",{children:L("label",{htmlFor:"languages",children:"Lenguajes:"})}),L("select",{id:"languages",multiple:!0,required:!0,onChange:o,style:{width:"300px"},children:["Python","JavaScript","Java","C++","PHP","C#","Swift","TypeScript","Kotlin","Go"].map(d=>L("option",{value:d,children:d},d))})]})}),L("br",{}),L("div",{className:"maincontainer-tecs",children:pe("div",{children:[L("div",{children:L("label",{htmlFor:"frameworks",children:"Frameworks:"})}),L("select",{id:"frameworks",multiple:!0,onChange:a,style:{width:"300px"},children:["React","Angular","Vue.js","Ruby on Rails","Django","Spring","Express.js","Laravel","Flask","ASP.NET"].map(d=>L("option",{value:d,children:d},d))})]})}),L("br",{}),L("div",{className:"maincontainer-tecs",children:pe("div",{children:[L("div",{children:L("label",{htmlFor:"databases",children:"Bases de datos:"})}),L("select",{id:"databases",multiple:!0,onChange:l,style:{width:"300px"},children:["MySQL","PostgreSQL","Oracle","MongoDB","Microsoft SQL Server","SQLite","Cassandra","Redis","Firebase Realtime Database","Amazon Aurora"].map(d=>L("option",{value:d,children:d},d))})]})}),L("button",{type:"submit",className:"consolas-font",onClick:c,children:"Guardar tecnologías"})]})}function dpe(){const[e,t]=te.useState(""),[i,r]=te.useState(""),[n,s]=te.useState(""),[o,a]=te.useState(""),[l,c]=te.useState(""),[d,u]=te.useState("");return pe("div",{className:"maincontainer",children:[pe("div",{children:[L("h3",{children:"Otras Tecnologías a utilizar"}),L("textarea",{className:"my-textarea",placeholder:"Tecnologías separadas por comas",value:e,maxLength:50,required:!0,onChange:m=>t(m.target.value)})]}),L("br",{}),pe("div",{children:[L("h3",{children:"Alcance"}),L("textarea",{className:"my-textarea",placeholder:"Alcances, límites, aspectos no contemplados en el servicio.Ejemplo: No incluye hosting.",value:i,maxLength:100,onChange:m=>r(m.target.value)})]}),L("br",{}),pe("div",{children:[L("h3",{children:"Cantidad de revisiones"}),L("input",{type:"number",placeholder:"Revisiones",value:o,required:!0,onChange:m=>a(m.target.value)})]}),L("br",{}),pe("div",{children:[L("h3",{children:"Horas estimadas de desarrollo"}),L("input",{type:"number",placeholder:"Horas de desarrollo",value:n,required:!0,onChange:m=>s(m.target.value)})]}),L("br",{}),pe("div",{children:[L("h3",{children:"Valor hora en pesos Chilenos"}),L("input",{type:"number",placeholder:"Valor hora",value:d,required:!0,onChange:m=>u(m.target.value)})]}),L("br",{}),pe("div",{className:"maincontainer",style:{padding:"10px",margin:"10px auto",textAlign:"center",backgroundColor:"#f2f2f2"},children:[L("h3",{children:"Valor Final en Pesos Chilenos"}),L("br",{}),L("input",{type:"number",placeholder:"Valor Final",value:l,onChange:m=>c(m.target.value),style:{fontSize:"20px",border:"none",outline:"none",backgroundColor:"#4B4B4B",color:"#fff"}})]}),L("br",{}),L("div",{children:L("button",{id:"button-skills",className:"consolas-font",onClick:()=>{const m=n*d;c(m)},children:"Calcular Valor Final"})}),L("button",{type:"submit",className:"consolas-font",onClick:()=>{if(!e||!i||!o||!n||!d||!l){alert("Por favor completa todos los campos antes de guardar.");return}const m={technologies:e,scope1:i,hours:n,revisions:o,value:l};localStorage.setItem("projectData",JSON.stringify(m))},children:"Guardar datos"})]})}function hpe(){const[e,t]=te.useState(!1);return pe("div",{className:"maincontainer",children:[L(nl,{}),L("div",{children:L(ape,{})}),L("div",{children:L(lpe,{})}),L("div",{children:L(cpe,{})}),L("div",{children:L(upe,{})}),L("div",{children:L(dpe,{})}),L("div",{className:"text-center mt-4",children:L(ar,{id:"button-crearperfil",className:"consolas-font",onClick:()=>{t(!0),setTimeout(()=>{t(!1)},2e3)},disabled:e,children:e?"Saving...":"Enviar propuesta al cliente"})})]})}function fpe(){const[e,t]=te.useState(""),[i,r]=te.useState("");return te.useEffect(()=>{t("Mary Freecoder"),r("Francisco")},[]),pe("div",{style:{textAlign:"justify"},children:[" ",L("br",{}),pe("h1",{children:["¡Felicitaciones ",i,"!"]}),L("br",{}),pe("p",{children:["Has sido aceptado por nuestro Freecoder ",e,"."]}),L("br",{}),L("h2",{children:"Sólo falta un paso más "}),L("br",{}),pe("div",{children:[L("p",{children:"Para poder formalizar el servicio, necesitamos un abono inicial de un 15%, el cual será tomado como compromiso para iniciar el trabajo."}),L("p",{children:"Una vez el trabajo haya sido finalizado, se deberá realizar el abono del 85% restante al Freecoder, de manera directa al medio de pago (transferencia o similar) indicado por el Freecoder."})]})]})}function ppe(){const[e,t]=te.useState(null);return pe("div",{className:"maincontainer",style:{backgroundColor:"#E4E4E4"},children:[L("h3",{children:"Subir comprobante de la transferencia"}),L("div",{className:"maincontainer",children:L("label",{children:L("input",{type:"file",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:r=>{const n=r.target.files[0];n&&["application/pdf","application/msword","image/png","image/jpeg"].includes(n.type)?t(n):alert("El archivo seleccionado no es válido. Por favor seleccione un archivo PDF, Word, PNG o JPG.")}})})}),L("p",{children:e?e.name:"Archivo no subido"})]})}function mpe(){const[e,t]=te.useState(!1);return pe("div",{className:"maincontainer",children:[L(nl,{}),L("div",{className:"maincontainer",children:L(fpe,{})}),L("div",{className:"maincontainer",children:L(ppe,{})}),L("div",{className:"maincontainer text-center mt-4",children:L(ar,{id:"button-crearperfil",className:"consolas-font",onClick:()=>{t(!0),setTimeout(()=>{t(!1)},2e3)},disabled:e,children:e?"Guardando...":"Enviar Abono"})})]})}function gpe(){const e="123456",t="Mary Free Coder";return L($a,{children:pe("div",{className:"maincontainer",children:[L(nl,{}),pe("div",{className:"maincontainer",children:[L("h2",{children:"¡Felicitaciones!"}),L("br",{}),L("h3",{children:"Hemos enviado tu solicitud al Freecoder"})]}),L("div",{className:"maincontainer",children:pe(li.Title,{children:["Coder Name: ",t]})}),L("div",{className:"maincontainer text-center",children:pe(li,{className:"mx-auto",style:{width:"18rem"},children:[L(li.Img,{variant:"top",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNGO-vi7hcHF9yzYNnDkM6QXBzWf86zJKDyw&usqp=CAU"}),L(li.Body,{children:L(li.Text,{children:pe("div",{className:"maincontainer",children:[L("p",{children:"Stack tecnoloógico:"}),pe("ul",{children:[L("li",{children:"Javascript"}),L("li",{children:"React"}),L("li",{children:"Postgres"})]})]})})})]})}),pe("div",{className:"maincontainer",children:[pe("h3",{children:["Tu número de seguimiento es el ",`${e}`]}),L("br",{}),L("h3",{children:"Recibirás un correo de confirmación en tu bandeja de entrada"}),L("br",{}),L("p",{style:{fontSize:"14px",fontWeight:"lighter",textAlign:"justify"},children:"El Freecoder seleccionado evaluará tu proyecto y te enviará una cotización dentro de 48 horas, con un enlace para realizar el pago por nuestra plataforma. Recuerda revisar el SPAM."}),L("br",{}),L(ar,{variant:"primary",id:"button-crearperfil",className:"consolas-font",children:"Volver al inicio"})]})]})})}function vpe(){return L($a,{children:L(ar,{id:"button-crearperfil",className:"consolas-font",variant:"outline-dark",disabled:!0,children:L(Ufe,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"false"})})})}function ype(){const[e,t]=te.useState([]);function i(r){r.preventDefault();const{name:n,comment:s}=r.target.elements,o={id:Date.now(),name:n.value,comment:s.value,date:new Date().toLocaleDateString()};t([...e,o]),r.target.reset()}return pe("div",{className:"maincontainer",children:[e.map(r=>L("div",{style:{width:"250px"},className:"mb-3 col-md-5 mx-auto",children:L("div",{className:"maincontainer",children:pe(li.Body,{children:[L(li.Title,{children:r.name}),L(li.Subtitle,{className:"mb-2 text-muted",children:r.date}),L(li.Text,{children:r.comment})]},r.id)})})),pe(st,{onSubmit:i,children:[pe(st.Group,{controlId:"name",children:[L(st.Label,{children:"Nombre"}),L(st.Control,{type:"text",placeholder:"Escribe tu nombre"})]}),pe(st.Group,{controlId:"comment",children:[L(st.Label,{children:"Comentario"}),L(st.Control,{type:"text",placeholder:"Escribe tu comentario"})]}),L("br",{}),L(ar,{className:"col-md-3 maincontainer-button  ",variant:"outline-dark",type:"submit",children:"Enviar Comentario"})]})]})}function xpe(){return pe(sL,{variant:"dark",className:"maincontainer",children:[L(sL.Heading,{children:"¡Hey! Gusto en tenerte aquí,"}),L("br",{}),L("p",{children:"Nuesto Coder esta revisando tu solicitud."}),L("br",{}),L("p",{children:"Nuestro tiempo máximo estimado para que puedan responder a tu solicitud es de 7 días."}),L("p",{children:"Mientras tanto, puedes dejarle un mensaje en los cuadros de más abajo."})]})}const wpe=new Date().toLocaleDateString(),bpe="Francisco";function Spe(){return L($a,{children:pe("div",{className:"maincontainer",children:[pe(li,{className:"text-center maincontainer",children:[pe(li.Header,{children:[L("h1",{children:"Seguimiento"}),L("br",{})]}),pe(li.Body,{children:[L(li.Title,{children:L("h2",{children:"S001"})}),L("br",{}),pe(li.Text,{children:["Fecha de solicitud: ",wpe]}),pe(li.Text,{children:["Nombre del solicitante: ",bpe]}),L("br",{}),L(li.Text,{children:"Proyecto: Lorem ipsum dolor sit amet consectetur, adipisicing elit. Similique, eum."})]})]}),L("br",{}),L(xpe,{}),L("br",{}),L(ype,{})]})})}function _pe(){const[e,t]=te.useState(!1),i=()=>{t(!0),setTimeout(()=>{t(!1)},3e3)};return L($a,{children:pe("div",{className:"maincontainer",children:[L(nl,{}),L("div",{className:"text-center",children:L(st,{className:"maincontainer",children:pe(Ffe,{className:"align-content-center",children:[L(vE,{children:L(st.Control,{placeholder:"Numero de seguimiento",style:{width:"350px"}})}),L("br",{}),L(vE,{children:L(st.Control,{placeholder:"Nombre",style:{width:"350px"}})}),L(ar,{id:"button-crearperfil",className:"col-md-2 mx-auto-2 consolas-font ",variant:"outline-dark",onClick:()=>i(),children:"Buscar"})]})})}),pe(Dfe,{children:[L("br",{}),e?L(vpe,{}):L(Spe,{})]})]})})}function Epe(){return L($a,{children:L(_pe,{})})}const Ape={userName:"Mary Freecoder",date:"2022-10-01",clientName:"Francisco"};function Cpe(){const{userName:e,date:t,clientName:i}=Ape,r="Título ingresado por freecoder (Placeholder)",n="Descripción detallada de aspectos funcionales declarados por Freecoder (Placeholder)",s="Tecnologías declaradas por el freecoder, separadas por comas (Placeholder)",o="Frameworks declarados por el freecoder, separados por comas (Placeholder)",a="Bases de datos declaradas por el freecoder, separadas por comas (Placeholder)",l="Alcances, límites, aspectos no contemplados en el servicio (Placeholder)",c=Math.floor(Math.random()*5)+1,d=Math.floor(Math.random()*96)+5,u=Math.floor(Math.random()*90001)+1e4,h=c*d*u;return L($a,{children:pe("div",{className:"text-center maincontainer",children:[pe("div",{className:"maincontainer",children:[L(nl,{}),L("br",{}),pe("h1",{children:[" ¡Felicitaciones ",i,"! "]}),L("br",{}),pe("p",{children:["Nuestro coder ",e," te ha enviado una propuesta"]})]}),L("div",{className:"maincontainer",children:L(li.Img,{variant:"top",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNGO-vi7hcHF9yzYNnDkM6QXBzWf86zJKDyw&usqp=CAU"})}),L("div",{className:"maincontainer",children:pe(li,{className:"text-center",children:[L(li.Header,{children:L("h2",{children:"Seguimiento"})}),pe(li.Body,{children:[L(li.Title,{children:L("h2",{children:"S001"})}),L("br",{}),pe(li.Text,{children:["Fecha de solicitud: ",t]}),pe(li.Text,{children:["Nombre del solicitante: ",i]}),L("br",{}),L(li.Text,{children:"Proyecto: Lorem ipsum dolor sit amet consectetur, adipisicing elit. Similique, eum."})]})]})}),L("br",{}),pe("div",{children:[L("h2",{className:"maincontainer",children:"Detalles de propuesta"}),L("div",{className:"maincontainer",children:L("div",{className:"table-responsive",children:pe(Vy,{striped:"columns",className:"striped-bordered-hover",children:[L("thead",{style:{backgroundColor:"grey",color:"whitesmoke"},children:pe("tr",{style:{borderBottom:"1px solid lightgrey"},children:[L("th",{children:"Elemento"}),L("th",{children:"Descripción"})]})}),pe("tbody",{children:[pe("tr",{children:[L("td",{children:"Título del proyecto:"}),L("td",{children:r})]}),pe("tr",{children:[L("td",{children:"Descripción detallada de aspectos funcionales"}),L("td",{children:n})]}),pe("tr",{children:[L("td",{children:"Tecnologías a utilizar"}),L("td",{children:s})]}),pe("tr",{children:[L("td",{children:"Frameworks a utilizar"}),L("td",{children:o})]}),pe("tr",{children:[L("td",{children:"Bases de datos"}),L("td",{children:a})]}),pe("tr",{children:[L("td",{children:"Alcance"}),L("td",{children:l})]}),pe("tr",{children:[L("td",{children:"Cantidad de revisiones"}),L("td",{children:c})]}),pe("tr",{children:[L("td",{children:"Horas estimadas de desarrollo"}),L("td",{children:d})]}),pe("tr",{children:[L("td",{children:"Valor hora en pesos Chilenos"}),L("td",{children:u})]}),pe("tr",{children:[L("td",{children:"Valor Final en Pesos Chilenos"}),L("td",{children:h})]})]})]})})}),pe("div",{className:"maincontainer",children:[L(ar,{type:"submit",children:" Aceptación de la propuesta "}),pe(ar,{type:"submit",id:"maincontainer-button2",children:[" ","Rechazo de la propuesta"," "]})]})]})]})})}const Tpe=()=>L("div",{className:"container",children:L(Y6,{children:L(Oj,{children:pe(Cj,{children:[L(un,{path:"/",element:L(Bb,{})}),L(un,{index:!0,element:L(Bb,{})}),L(un,{path:"/home",element:L(Bb,{})}),L(un,{path:"/login",element:L(rue,{})}),L(un,{path:"/busqueda",element:L(Kde,{})}),L(un,{path:"/perfilfreecoder",element:L(spe,{})}),L(un,{path:"/crearperfil",element:L(rpe,{})}),L(un,{path:"/missolicitudes",element:L(npe,{})}),L(un,{path:"/contactarfreecoder",element:L(ope,{})}),L(un,{path:"/crearpropuesta",element:L(hpe,{})}),L(un,{path:"/abonarpropuesta",element:L(mpe,{})}),L(un,{path:"/confirmarorden",element:L(gpe,{})}),L(un,{path:"/seguimiento",element:L(Epe,{})}),L(un,{path:"/enviopropuesta",element:L(Cpe,{})})]})})})});Ub.createRoot(document.getElementById("root")).render(L(ii.StrictMode,{children:L(Tpe,{})}))});export default Mpe();
